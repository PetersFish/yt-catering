function AddPlaySound(n,t,i,r){n&&(r&&(r="body"),g_play_sound_queue_url[g_play_sound_queue_url.length]=n,g_play_sound_queue_start[g_play_sound_queue_start.length]=t,g_play_sound_queue_end[g_play_sound_queue_end.length]=i,g_play_sound_queue_html[g_play_sound_queue_html.length]=r,StartPlayer())}function RemovePlaySound(n){return n<g_play_sound_queue_url.length?(g_play_sound_queue_url[n]=null,g_play_sound_queue_start[n]=null,g_play_sound_queue_end[n]=null,g_play_sound_queue_html[n]=null,GarbageRemoval(),!0):!1}function StartPlayer(n){return n==null&&(n=100),g_PlaySoundTimer?!1:(g_PlaySoundTimer=setInterval("SystemFunction();",n),!0)}function SystemFunction(){var t=$("video")[0],n;if(t){if(t.ended)for(n=0;n<g_play_sound_queue_url.length;n++)if(g_play_sound_queue_url[n]){g_play_sound_queue_end[n]&&g_play_sound_queue_end[n]();t.remove();g_play_sound_queue_url[n]=null;g_play_sound_queue_start[n]=null;g_play_sound_queue_end[n]=null;g_play_sound_queue_html[n]=null;GarbageRemoval();break}}else for(n=0;n<g_play_sound_queue_html.length;n++)if(g_play_sound_queue_html[n]){$(g_play_sound_queue_html[n]).append("<video hidden='hidden' autoplay='autoplay' controls='controls' src='"+g_play_sound_queue_url[n]+"'>\u4e0d\u652f\u6301\u64ad\u653e\u5668<\/vodeo>");g_play_sound_queue_start[n]&&g_play_sound_queue_start[n]();break}}function ClosePlayer(){return g_PlaySoundTimer?(window.clearInterval(g_PlaySoundTimer),g_PlaySoundTimer=null,!0):!1}function GarbageRemoval(){for(var t=!1,n=0;n<g_play_sound_queue_url.length;n++){if(g_play_sound_queue_url[n]!=null)break;g_play_sound_queue_url.length-1==n&&(t=!0)}t&&(g_play_sound_queue_url=[],g_play_sound_queue_start=[],g_play_sound_queue_end=[],g_play_sound_queue_html=[],ClosePlayer())}function test_pushprintData(n,t,i){var y=new Date,tt=y.getFullYear(),it=y.getMonth(),rt=y.getDate(),ut=y.getHours(),ft=y.getMinutes(),et=y.getSeconds(),nt=tt+"/"+fnW(it+1)+"/"+fnW(rt)+" "+fnW(ut)+":"+fnW(ft)+":"+fnW(et),a=JSON.parse(n),h=JSON.parse(t),p,l,d,c,b,g,f;if(h&&h.cof&&h.cof.sv_uc_dayin&&(p=JSON.parse(h.cof.sv_uc_dayin),p!="[]"&&p!=""&&p!=null&&(i=p.xiaopiao==58?0:1)),h&&h.cof&&h.cof.sv_pfconfig)try{var w=JSON.parse(h.cof.sv_pfconfig),r={HeaderList:[],BodyList:[],TitleList:[],FooterList:[],LogoData:null,QRCodeData:null,Action:1,PageType:i},s=w.h.split(","),u=w.b.split(","),e=a.content,o=w.f.split(","),k=w.q,v=w.l;if(s&&s.length>0&&(s.length>0&&s[0]==1&&r.HeaderList.push({Content:convertString(h.user.sv_us_name),Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:0}),s.length>1&&s[1]==1&&r.HeaderList.push({Content:"\u5fae\u4fe1:"+convertString(h.user.sv_wechat_number),Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:0}),s.length>4&&s[4]==1&&r.HeaderList.push({Content:"\u5355\u53f7\uff1a"+convertString(a.order_running_id),Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:0}),s.length>5&&s[5]==1&&r.HeaderList.push({Content:"\u6536\u94f6\u5458\uff1a"+a.userinfo.operator,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),s.length>6&&s[6]==1&&r.HeaderList.push({Content:"\u4f1a\u5458\u59d3\u540d\uff1a"+a.userinfo.sv_mr_name,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),s.length>7&&s[7]==1&&r.HeaderList.push({Content:"\u4f1a\u5458\u5361\u53f7\uff1a"+a.userinfo.sv_mr_cardno,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),r.HeaderList.push({Content:"......................................",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0})),u&&u.length>0&&(l="",u.length>0&&u[0]==1&&(l+="\u5546\u54c1      ",r.TitleList.push({Content:"\u5546\u54c1  ",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:10})),u.length>2&&u[2]==1&&(l+="\u793c\u54c1      ",r.TitleList.push({Content:"\u793c\u54c1",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:10})),u.length>1&&u[1]==1&&(l+="   \u5355\u4ef7    ",r.TitleList.push({Content:"\u5355\u4ef7",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:5})),u.length>3&&u[3]==1&&(l+="   \u79ef\u5206    ",r.TitleList.push({Content:"\u79ef\u5206",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:5})),u.length>4&&u[4]==1&&(l+="\u6570\u91cf ",r.TitleList.push({Content:"\u6570\u91cf",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:4})),u.length>5&&u[5]==1&&(l+="\u5c0f\u8ba1 ",r.TitleList.push({Content:"\u5c0f\u8ba1",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:5})),u.length>6&&u[6]==1&&(l+="\u5408\u8ba1 ",r.TitleList.push({Content:"\u5408\u8ba1",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:5})),r.HeaderList.push({Content:l,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0})),d=0,e&&e.length>0)for(f=0;f<e.length;f++)c="",e[f].product!=undefined&&u.length>0&&u[0]==1&&(c=e[f].product+","),e[f].sv_name!=undefined&&u.length>2&&u[2]==1&&(c+=e[f].sv_name+","),e[f].unitPrice!=undefined&&u.length>1&&u[1]==1&&(c+=e[f].unitPrice+","),e[f].sv_integral!=undefined&&u.length>3&&u[3]==1&&(c+=e[f].sv_integral+","),e[f].sv_number!=undefined&&u.length>4&&u[4]==1&&(c+=e[f].sv_number+",",d+=parseInt(e[f].sv_number)),e[f].subtotal!=undefined&&u.length>5&&u[5]==1&&(c+=e[f].subtotal+","),e[f].sumintegral!=undefined&&u.length>6&&u[6]==1&&(c+=e[f].sumintegral+","),c=c.replace(/,$/gi,""),r.BodyList.push({Content:c,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0});if(o&&o.length>0&&(r.FooterList.push({Content:"......................................",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),o.length>1&&o[1]==1&&r.FooterList.push({Content:"\u793c\u54c1\u603b\u6570\uff1a "+d,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),o.length>2&&o[2]==1&&o.length>4&&o[4]==1&&r.FooterList.push({Content:"\u50a8\u503c\u4f59\u989d\uff1a\u00a5 "+a.userinfo.sv_mw_availableamount,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),o.length>7&&o[7]==1&&r.FooterList.push({Content:"\u652f\u4ed8\u65b9\u5f0f\uff1a\u79ef\u5206\u5151\u6362",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),o.length>8&&o[8]==1&&r.FooterList.push({Content:"\u79ef\u5206\uff08\u672c\u6b21/\u5269\u4f59\uff09\uff1a"+a.Finfo.remaining_integral,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),o.length>9&&o[9]==1&&r.FooterList.push({Content:"\u9500\u552e\u65f6\u95f4\uff1a"+nt,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),o.length>10&&o[10]==1&&r.FooterList.push({Content:"\u7535\u8bdd\uff1a"+convertString(h.user.sv_us_phone),Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),o.length>11&&o[11]==1&&r.FooterList.push({Content:"\u5730\u5740\uff1a"+convertString(h.user.sv_us_address),Columns:1,RowNum:2,RowMaxLength:10,Align:0,TextFont:0,Width:0}),r.FooterList.push({Content:"\u6253\u5370\u65f6\u95f4\uff1a"+nt,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),r.FooterList.push({Content:"\u8c22\u8c22\u60e0\u987e\uff0c\u6b22\u8fce\u4e0b\u6b21\u5149\u4e34",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0})),k&&k.ImageString&&(r.FooterList.push({Content:"\u4e8c\u7ef4\u7801",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),r.QRCodeData=k),PreferentialTopUpGivingConfigList("PrintSeting","PrintSet_ExtraInfo"),Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(b=Preferential_TopUpGiving_ConfigList[0].sv_detail_value,b))if(b.toLowerCase.indexOf("<br/>")>0)for(g=b.split("<br/>"),f=0;f<g.length;f++)r.FooterList.push({Content:g[f],Columns:1,RowNum:2,RowMaxLength:10,Align:0,TextFont:0,Width:0});else r.FooterList.push({Content:b,Columns:1,RowNum:2,RowMaxLength:10,Align:0,TextFont:0,Width:0});r.FooterList.push({Content:"\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0});v&&v.ImageString&&(r.FooterList.push({Content:"",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),v.ImageString.indexOf("http")>0?r.LogoData=v:(v.ImageString="http://decerp.cc"+v.ImageString,r.LogoData=v));r.FooterList.push({Content:"........................................",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0});Cef.CustormPrint(JSON.stringify(r),""+receptionPtNum+"",receptionPtName)}catch(ot){}else layer.msg("\u793c\u54c1\u5c0f\u7968\u6253\u5370\u53ea\u652f\u6301\u81ea\u5b9a\u4e49\u79ef\u5206\u6253\u5370\u6a21\u677f")}function pushprintData(n,t,i,r,u,f){var w={user_id:"47116375",bt:[1,0,0,0],bb:[0,0,0,0,0,0,0,0,0],bf:[0,0,0,0,0,0,0,0,0,0,0,0,0],bh:[0,0,0,0,0,0,0,0],fontSize:9},vt=[{pagesize:58,fontSize:9,pagetitle:"\u5546\u54c1        \u5355\u4ef7    \u6570\u91cf \u5c0f\u8ba1",meter_Title:"\u793c\u54c1        \u79ef\u5206    \u6570\u91cf \u5408\u8ba1",pageline:"",pageTitleWidth:[10,5,4,5]},{pagesize:58,fontSize:12,pagetitle:"\u5546\u54c1     \u5355\u4ef7 \u6570\u91cf \u5c0f\u8ba1",pageline:"",pageTitleWidth:[10,3,1,3]},{pagesize:80,fontSize:9,pagetitle:"\u5546\u54c1                      \u5355\u4ef7   \u6570\u91cf  \u5c0f\u8ba1",pageline:"",pageTitleWidth:[23,5,5,5]},{pagesize:80,fontSize:12,pagetitle:"\u5546\u54c1              \u5355\u4ef7  \u6570\u91cf  \u5c0f\u8ba1",pageline:"",pageTitleWidth:[14,5,4,5]},{pagesize:210,fontSize:9,pagetitle:"\u5546\u54c1                        \u5355\u4ef7  \u6570\u91cf  \u5c0f\u8ba1",pageline:"",pageTitleWidth:[25,5,4,5]}],g=vt[0],ft,nt,e,wt,bi,hi,di,ci,tt,it,dt,et,gt,lr,rt,li,ti,ut,ei,nr,ai,lt,k,ot,tr,ii,st,c,ri,ht,b,a,ct,ni,at,vi,h,ui,yi,ar;getAndroidPrintConfig();var ir=!0,oi=0,pt=new Date,vr=pt.getFullYear(),yr=pt.getMonth(),pr=pt.getDate(),pi=pt.getHours(),wi=pt.getMinutes(),wr=pt.getSeconds(),rr=vr+"/"+fnW(yr+1)+"/"+fnW(pr)+" "+fnW(pi)+":"+fnW(wi)+":"+fnW(wr),s=JSON.parse(n),l=JSON.parse(t),y=0,ur=[];if(l&&l.cof&&l.cof.sv_uc_dayin&&(ft=JSON.parse(l.cof.sv_uc_dayin),ft!="[]"&&ft!=""&&ft!=null&&(y=ft.xiaopiao==58?0:1,ft.xiaopiao==58?(y=0,g=w.fontSize==12?vt[1]:vt[0]):ft.xiaopiao==80?(y=1,g=w.fontSize==12?vt[3]:vt[2]):ft.xiaopiao==210?(y=2,g=vt[4]):(g=vt[0],y=0),oi=ft.mo)),nt=[],e={HeaderList:[],BodyList:[],TitleList:[],FooterList:[],LogoData:null,QRCodeData:null,Action:1,PageType:y,PagePadding:0,FontSize:w.fontSize,PrintVersion:1},l&&l.cof&&l.cof.sv_pfconfig&&l.cof.sv_pfconfig.length>10?(ir=!1,nt=JSON.parse(l.cof.sv_pfconfig)):(nt={a:1,b:"1,1,0,0,1,1,0,0,0",f:"0,1,1,1,1,1,0,1,1,1,1,1,1",h:"1,0,1,1,1,0,1,1",l:null,p:0,q:{Align:1,Width:100,Height:100,ImageString:""},t:""},oi==1?nt.f="0,1,1,0,0,1,0,0,0,0,0,0,0":oi==2?nt.f="0,1,1,1,1,1,0,1,1,1,1,1,1":oi==3&&(nt.f="0,1,1,1,1,1,0,1,1,1,1,1,1")),l&&l.cof)try{s.user&&s.user.sv_mr_cardno&&(wt=isNullOrWhiteSpace(s.user.sv_mr_cardno));var fr=0,er=s.order_receivable,or=1,si="",sr=0,bt="",yt=0;wt&&(l.cof.sv_uc_pointtocashset!="[]"&&l.cof.sv_uc_pointtocashset!=""&&l.cof.sv_uc_pointtocashset!=null&&(bt=JSON.parse(l.cof.sv_uc_pointtocashset)),bt!="[]"&&bt!=""&&bt!=null&&(er=bt[0],or=bt[1]),fr=parseInt(s.order_receivable/er*or),sr=s.user.sv_mw_availablepoint,si=fr+"/ "+sr,f==1&&f>0&&(si=si+"(\u542b\u6d3b\u52a8\u6d88\u8d39\u8d60\u9001"+u+"\u79ef\u5206)"));try{bi=parseInt((r-s.order_receivable)*100)/100;bi>0&&(yt=bi+"")}catch(hr){}f==2&&(yt=yt==0?u+"(\u6d3b\u52a8\u6d88\u8d39\u51cf\u514d"+u+"\u5143)":yt+"(\u542b\u6d3b\u52a8\u6d88\u8d39\u51cf\u514d"+u+"\u5143)");var d=nt.h.split(","),p=nt.b.split(","),o=s.prlist,v=nt.f.split(","),ki=nt.q,kt=nt.l;d&&d.length>0&&(d.length>0&&d[0]==1&&e.HeaderList.push({Content:convertString(l.user.sv_us_name),Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:0,FontStyleType:w.bh[0]}),d.length>1&&d[1]==1&&e.HeaderList.push({Content:"\u5fae\u4fe1:"+convertString(l.user.sv_wechat_number),Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:0,FontStyleType:w.bh[1]}),_g_sv_uit_cache_name=="cache_name_catering"&&s.sv_catering_grade&&e.HeaderList.push({Content:"\u684c/\u724c\u53f7\uff1a"+convertString(s.sv_catering_grade),Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),hi=s.order_running_id,s.everyday_serialnumber&&_g_everyDaySerialNumber&&(hi=s.everyday_serialnumber),s!=null&&s.meiridanhao!=null&&s.meiridanhao!=""&&(hi=s.meiridanhao),d.length>4&&d[4]==1&&e.HeaderList.push({Content:"\u5355\u53f7\uff1a"+convertString(hi),Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0,FontStyleType:w.bh[4]}),d.length>5&&d[5]==1&&e.HeaderList.push({Content:"\u6536\u94f6\u5458\uff1a"+sv_current_operato,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0,FontStyleType:w.bh[5]}),d.length>6&&d[6]==1&&wt&&e.HeaderList.push({Content:"\u4f1a\u5458\u59d3\u540d\uff1a"+s.user.sv_mr_name,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0,FontStyleType:w.bh[6]}),d.length>7&&d[7]==1&&wt&&e.HeaderList.push({Content:"\u4f1a\u5458\u5361\u53f7\uff1a"+s.user.sv_mr_cardno,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0,FontStyleType:w.bh[7]}),y<2&&(decerpbrowser&&decerpbrowser.versions&&decerpbrowser.versions.android?e.HeaderList.push({Content:"......................................",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}):e.HeaderList.push({Content:"..........................................................",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0})));di=0;ci=0;y==1?ci=3:y==2&&(ci=10,e.PagePadding=ci);tt="";p&&p.length>0&&(it="",p.length>0&&p[0]==1&&(y==1?(it+="\u5546\u54c1              ",tt+="\u5546\u54c1,"):(it+="\u5546\u54c1     ",tt+="\u5546\u54c1,"),e.TitleList.push({Content:"\u5546\u54c1",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:g.pageTitleWidth[0],FontStyleType:w.bt[0]})),p.length>2&&p[2]==1&&(y==1?(it+="\u793c\u54c1              ",tt+="\u793c\u54c1,"):(it+="\u793c\u54c1     ",tt+="\u793c\u54c1,"),e.TitleList.push({Content:"\u793c\u54c1",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:g.pageTitleWidth[0],FontStyleType:w.bt[0]})),p.length>1&&p[1]==1&&(it+="   \u5355\u4ef7    ",tt+="\u5355\u4ef7,",e.TitleList.push({Content:"\u5355\u4ef7",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:g.pageTitleWidth[1],FontStyleType:w.bt[1]})),p.length>3&&p[3]==1&&(it+="   \u79ef\u5206    ",tt+="\u79ef\u5206,",e.TitleList.push({Content:"\u79ef\u5206",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:g.pageTitleWidth[1],FontStyleType:w.bt[1]})),p.length>4&&p[4]==1&&(it+=y==1?"\u6570\u91cf     ":"\u6570\u91cf ",tt+="\u6570\u91cf,",e.TitleList.push({Content:"\u6570\u91cf",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:g.pageTitleWidth[2],FontStyleType:w.bt[2]})),p.length>5&&p[5]==1&&(it+="\u5c0f\u8ba1 ",tt+="\u5c0f\u8ba1,",e.TitleList.push({Content:"\u5c0f\u8ba1",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:g.pageTitleWidth[3],FontStyleType:w.bt[3]})),p.length>6&&p[6]==1&&(it+="\u5408\u8ba1 ",tt+="\u5408\u8ba1,",e.TitleList.push({Content:"\u5408\u8ba1",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:g.pageTitleWidth[3],FontStyleType:w.bt[3]})),decerpbrowser&&decerpbrowser.versions&&decerpbrowser.versions.android||(p.length>2&&p[2]==1?e.HeaderList.push({Content:g.meter_Title,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}):e.HeaderList.push({Content:g.pagetitle,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0})));var gi="",cr=0,fi=[];if(o&&o.length>0){for(dt=[],h=0;h<o.length;h++)if(cr+=parseFloat(o[h].product_num),o[h].type==!0)rt=o[h].product_name+","+o[h].product_num+",-"+o[h].product_num+","+(o[h].cnum-o[h].product_num),dt.push({Content:rt,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0});else{if(et=o[h].product_name,_g_sv_uit_cache_name=="cache_name_catering"){if(o[h].ProductTasteList&&o[h].ProductTasteList.length>0)for(et+=" ",b=0;b<o[h].ProductTasteList.length;b++)et+=o[h].ProductTasteList[b].sv_taste_data_name}else _g_sv_uit_cache_name=="cache_name_mobile_digital"&&o[h].sv_iemi_no&&fi.push(o[h].sv_iemi_no);o[h].spec&&(et+=o[h].spec);gi+=o[h].product_id+",";rt="";gt=o[h].product_unitprice;o[h].product_single_untprice&&(gt=o[h].product_single_untprice);g_TraceabilityCode?rt=et+","+gt+","+o[h].product_num+","+o[h].product_total+","+o[h].product_id+"productid":_g_sv_uit_cache_name=="cache_name_catering"?o[h].sv_taste_total_money&&o[h].sv_taste_total_money>0?(ni=parseFloat(o[h].product_total)+parseFloat(o[h].sv_taste_total_money),rt=et+","+gt+","+o[h].product_num+","+ni.toFixed(2)):rt=et+","+gt+","+o[h].product_num+","+o[h].product_total:rt=et+","+gt+","+o[h].product_num+","+o[h].product_total;e.BodyList.push({Content:rt,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0});lr=et+","+o[h].product_num;ur.push({Content:lr,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0})}if(dt&&dt.length>0)for(rt="\u9879\u76ee,\u6b21\u6570,\u5b9e\u6263,\u5269\u4f59",e.BodyList.push({Content:rt,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),b=0;b<dt.length;b++)e.BodyList.push(dt[b])}if(v&&v.length>0){if(y<2&&(decerpbrowser&&decerpbrowser.versions&&decerpbrowser.versions.android?e.FooterList.push({Content:"............................................",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}):e.FooterList.push({Content:"..........................................................",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0})),s.shipping_fee&&s.shipping_fee>0&&e.FooterList.push({Content:"\u914d\u9001\u8d39\u7528\uff1a "+s.shipping_fee,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),v.length>1&&v[1]==1&&e.FooterList.push({Content:"\u5546\u54c1\u603b\u6570\uff1a "+cr,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),v.length>2&&v[2]==1&&e.FooterList.push({Content:"\u91d1\u989d\u5408\u8ba1\uff1a \u00a5 "+s.order_receivable,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),v.length>3&&v[3]==1&&v.length>3&&yt&&yt!="0"&&e.FooterList.push({Content:"\u4f18\u60e0\u91d1\u989d\uff1a\u00a5 "+yt,Columns:1,RowNum:2,RowMaxLength:10,Align:0,TextFont:0,Width:0}),v.length>4&&v[4]==1&&wt&&e.FooterList.push({Content:"\u50a8\u503c\u4f59\u989d\uff1a\u00a5 "+s.user.sv_mw_availableamount,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),v.length>7&&v[7]==1&&(li=s.order_payment,isNullOrWhiteSpace(s.order_payment2)&&(s.order_payment2.indexOf("\u5f85")<0||s.order_payment2!="\u5f85\u6536")&&(li=li+"("+s.order_money+")/"+s.order_payment2+"("+s.order_money2+")"),e.FooterList.push({Content:"\u652f\u4ed8\u65b9\u5f0f\uff1a"+li+" ",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0})),v.length>8&&v[8]==1&&wt&&e.FooterList.push({Content:"\u79ef\u5206\uff08\u672c\u6b21/\u7d2f\u8ba1\uff09\uff1a"+si,Columns:1,RowNum:2,RowMaxLength:10,Align:0,TextFont:0,Width:0}),s.order_money&&s.order_money>0&&e.FooterList.push({Content:"\u6536\u6b3e\uff1a\u00a5 "+s.order_money,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),s.sv_give_change&&s.sv_give_change>0&&e.FooterList.push({Content:"\u627e\u96f6\uff1a\u00a5 "+s.sv_give_change,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),v.length>10&&v[10]==1&&e.FooterList.push({Content:"\u7535\u8bdd\uff1a"+convertString(l.user.sv_us_phone),Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),v.length>9&&v[9]==1&&(s.order_datetime&&(rr=new Date(s.order_datetime).Format("yyyy-MM-dd hh:mm:ss")),e.FooterList.push({Content:"\u9500\u552e\u65f6\u95f4\uff1a"+rr,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0})),s.sv_remarks?e.FooterList.push({Content:"\u5907\u6ce8\uff1a"+convertString(s.sv_remarks),Columns:1,RowNum:2,RowMaxLength:10,Align:0,TextFont:0,Width:0}):s.sv_remark&&e.FooterList.push({Content:"\u5907\u6ce8\uff1a"+convertString(s.sv_remark),Columns:1,RowNum:2,RowMaxLength:10,Align:0,TextFont:0,Width:0}),v.length>11&&v[11]==1&&e.FooterList.push({Content:"\u5e97\u94fa\u5730\u5740\uff1a"+convertString(l.user.sv_us_address),Columns:1,RowNum:2,RowMaxLength:10,Align:0,TextFont:0,Width:0}),s.recipient_name&&e.FooterList.push({Content:"\u6536\u8d27\u4eba\uff1a "+s.recipient_name,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),s.recipient_phone&&e.FooterList.push({Content:"\u8054\u7cfb\u65b9\u5f0f\uff1a "+s.recipient_phone,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),s.sv_hasinvoiced&&(ti="\u3010",s.sv_invoicetitle&&(ti+=s.sv_invoicetitle),s.sv_taxpayerid&&(ti+=s.sv_taxpayerid),ti=ti+"\u3011",e.FooterList.push({Content:"\u53d1\u7968\uff1a"+ti,Columns:1,RowNum:3,RowMaxLength:10,Align:0,TextFont:0,Width:0})),s.recipient_address&&e.FooterList.push({Content:"\u6536\u8d27\u5730\u5740\uff1a"+s.recipient_address,Columns:1,RowNum:3,RowMaxLength:10,Align:0,TextFont:0,Width:0}),fi&&fi.length>0)for(h=0;h<fi.length;h++)e.FooterList.push({Content:"*\u4e32\u53f7*\uff1a"+fi[h],Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0});e.FooterList.push({Content:"\u8c22\u8c22\u60e0\u987e\uff0c\u6b22\u8fce\u4e0b\u6b21\u5149\u4e34",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0})}if(ki&&ki.ImageString&&(e.FooterList.push({Content:"\u4e8c\u7ef4\u7801",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),e.QRCodeData=ki),y<2&&e.FooterList.push({Content:"\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014-",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),kt&&kt.ImageString&&(kt.ImageString.indexOf("http")>=0?(e.LogoData=kt,e.FooterList.push({Content:"",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0})):(kt.ImageString="http://decerp.cc"+kt.ImageString,e.LogoData=l_configpostData.FooterList.push({Content:"",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}))),y<2,y==2){if(e&&e.HeaderList&&e.HeaderList.length>0)for(ut=1,h=1;h<e.HeaderList.length-1;h++)ut>3&&(ut=1),e.HeaderList[h].Align=0,e.HeaderList[h].Columns=ut,ut++;if(e&&e.FooterList&&e.FooterList.length>0)for(ut=1,h=0;h<e.FooterList.length-1;h++)ut>3&&(ut=1),e.FooterList[h].Columns=ut,ut++}if((!ir||!0)&&(PreferentialTopUpGivingConfigList("PrintSeting","PrintSet_ExtraInfo"),Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(ei=Preferential_TopUpGiving_ConfigList[0].sv_detail_value,ei)))if(ei.toLowerCase().indexOf("<br/>")>0)for(nr=ei.split("<br/>"),h=0;h<nr.length;h++)e.FooterList.push({Content:nr[h],Columns:1,RowNum:2,RowMaxLength:10,Align:0,TextFont:0,Width:0});else e.FooterList.push({Content:ei,Columns:1,RowNum:2,RowMaxLength:10,Align:0,TextFont:0,Width:0});if(parseInt(receptionPtNum)>0&&receptionPtName!=null&&receptionPtName!=""){if(typeof Cef!="undefined")if(printSet_network_device_font_islabel){if(o&&o.length>0){for(ii=0,st=0,c=0;c<o.length;c++)st=parseInt(st)+parseInt(o[c].product_num);for(c=0;c<o.length;c++)for(ri=0;ri<o[c].product_num;ri++){if(ht=o[c].product_name,o[c]&&o[c].ProductTasteList&&o[c].ProductTasteList.length>0)for(ht+=" ",b=0;b<o[c].ProductTasteList.length;b++)ht+=o[c].ProductTasteList[b].sv_taste_data_name;ii++;a=[];ct=s.order_running_id;s.everyday_serialnumber&&_g_everyDaySerialNumber&&(ct=s.everyday_serialnumber);s!=null&&s.meiridanhao!=null&&s.meiridanhao!=""&&(ct=s.meiridanhao);a.push({Content:"\u5355\u53f7:"+convertString(ct)+" \u5e8f\u53f7:"+ii+"/"+st,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,TextFontSize:8,Width:0});a.push({Content:ht,Columns:1,RowNum:3,RowMaxLength:10,Align:0,TextFont:0,TextFontSize:10,Width:0});a.push({Content:"",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,TextFontSize:10,Width:0});_g_sv_uit_cache_name=="cache_name_catering"?o[c].sv_taste_total_money>0?(ai=parseFloat(o[c].product_total)+parseFloat(o[c].sv_taste_total_money),o[c].product_num>0&&(ai=parseFloat(ai)/parseFloat(o[c].product_num)),a.push({Content:"\uffe5"+ai.toFixed(2)+"\u5143",Columns:2,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,TextFontSize:8,Width:0})):(lt=parseFloat(o[c].product_total),o[c].product_num>0&&(lt=parseFloat(lt)/parseFloat(o[c].product_num)),a.push({Content:"\uffe5"+parseFloat(lt).toFixed(2)+"\u5143",Columns:2,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,TextFontSize:8,Width:0})):(lt=parseFloat(o[c].product_total),o[c].product_num>0&&(lt=parseFloat(lt)/parseFloat(o[c].product_num)),a.push({Content:"\uffe5"+parseFloat(lt).toFixed(2)+"\u5143",Columns:2,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,TextFontSize:8,Width:0}));typeof user_id=="undefined"||user_id!="20806328"?(a.push({Content:"\u3010"+convertString(l.user.sv_us_name)+"\u3011",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,TextFontSize:7,Width:0}),convertString(l.user.sv_us_phone)?a.push({Content:"\u7535\u8bdd:"+convertString(l.user.sv_us_phone)+"\u8c22\u8c22\u60e0\u987e!",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,TextFontSize:7,Width:0}):a.push({Content:"\u8c22\u8c22\u60e0\u987e!",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,TextFontSize:7,Width:0})):a.push({Content:"\u3010"+convertString(l.user.sv_us_name)+"\u3011",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,TextFontSize:7,Width:0});a.push({Content:pi+":"+wi,Columns:2,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,TextFontSize:7,Width:0});vi={FooterList:a,QRCodeData:null,Action:1,PageType:4,PagePadding:10};typeof Cef!="undefined"&&Cef.LabelPrint(JSON.stringify(vi),""+receptionPtNum+"",receptionPtName,!1,40,30)}}}else if(g_TraceabilityCode)$.ajax({url:"/AjaxProduct/GetTraceabilityCodeList?id="+gi+"0",type:"get",success:function(n){var u,t,r,f,i;if(n)for(t=0;t<e.BodyList.length;t++)for(u=0;u<n.length;u++)if(e.BodyList[t].Content.indexOf(n[u].product_id+"productid")>-1){for(r=e.BodyList[t].Content.split(","),f="",i=0;i<r.length;i++)i!=r.length-1&&(f+=r[i],i!=r.length-2&&(f+=","));e.BodyList[t].Content="*"+f;e.BodyList[t].HasTraceUrl=n[u].sv_qr_code_image_path!=""||n[u].sv_qr_code_image_path!=null||n[u].sv_qr_code_image_path!=undefined?!0:!1;e.BodyList[t].TraceTrl=n[u].sv_qr_code_image_path;e.BodyList[t].ImageWidth=90;e.BodyList[t].ImageHeight=90;e.BodyList[t].ImageAlign=1;break}for(t=0;t<e.BodyList.length;t++)if(!e.BodyList[t].HasTraceUrl||e.BodyList[t].HasTraceUrl==!1){for(r=e.BodyList[t].Content.split(","),f="",i=0;i<r.length;i++)i!=r.length-1&&(f+=r[i],i!=r.length-2&&(f+=","));e.BodyList[t].Content=f}typeof Cef!="undefined"&&Cef.CustormTracePrint(JSON.stringify(e),"1",receptionPtName)}});else for(h=0;h<receptionPtNum;h++)Cef.CustormPrint(JSON.stringify(e),"1",receptionPtName);else if(decerpbrowser&&decerpbrowser.versions&&decerpbrowser.versions.android)try{if(g_TraceabilityCode)k=e,$.ajax({url:"/AjaxProduct/GetTraceabilityCodeList?id="+gi+"0",type:"get",success:function(n){var o,t,r,u,i,f;if(n)for(t=0;t<k.BodyList.length;t++){if(n&&n.length>0)for(o=0;o<n.length;o++)if(k.BodyList[t].Content.indexOf(n[o].product_id+"productid")>-1){for(r=k.BodyList[t].Content.split(","),u="",i=0;i<r.length;i++)i!=r.length-1&&(u+=r[i],i!=r.length-2&&(u+=","));k.BodyList[t].Content="*"+u;k.BodyList[t].HasTraceUrl=!0;k.BodyList[t].TraceTrl=n[o].sv_qr_code_image_path;k.BodyList[t].ImageWidth=90;k.BodyList[t].ImageHeight=90;k.BodyList[t].ImageAlign=1;break}for(t=0;t<e.BodyList.length;t++)if(!e.BodyList[t].HasTraceUrl||e.BodyList[t].HasTraceUrl==!1){for(r=e.BodyList[t].Content.split(","),u="",i=0;i<r.length;i++)i!=r.length-1&&(u+=r[i],i!=r.length-2&&(u+=","));e.BodyList[t].Content=u}}if(k.FooterList.push({Content:"\u6ce8\uff1a\u5e26\u201c*\u201d\u5546\u54c1\u53ef\u8fdb\u884c\u8ffd\u6eaf\u4fe1\u606f\u67e5\u8be2",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),g_android_print_config&&g_android_print_config.length>0&&g_android_print_config[0].whetherToEnablenable)if(parseInt(g_android_print_config[0].count||1)>1)for(f=0;f<parseInt(g_android_print_config[0].count||1);f++)cordova.plugins.barcodeScanner.barcodexprinter(function(){},function(n){alert("\u6253\u5370\u5931\u8d25: "+n)},{myPrintData:JSON.stringify(k),printConfig:JSON.stringify({type:"usb",name:g_android_print_config[0].ipOrName,copies:g_android_print_config[0].count,isLabel:g_android_print_config[0].labelPrinter})});else cordova.plugins.barcodeScanner.barcodexprinter(function(){},function(n){alert("\u6253\u5370\u5931\u8d25: "+n)},{myPrintData:JSON.stringify(k),printConfig:JSON.stringify({type:"usb",name:g_android_print_config[0].ipOrName,copies:g_android_print_config[0].count,isLabel:g_android_print_config[0].labelPrinter})});else if(parseInt(receptionPtNum)>0)for(f=0;f<parseInt(receptionPtNum);f++)cordova.plugins.barcodeScanner.print(function(){},function(n){alert("\u6253\u5370\u5931\u8d25: "+n)},{myPrintData:JSON.stringify(k)});else cordova.plugins.barcodeScanner.print(function(){},function(n){alert("\u6253\u5370\u5931\u8d25: "+n)},{myPrintData:JSON.stringify(k)})}});else if(g_android_print_config&&g_android_print_config.length>0&&g_android_print_config[0].whetherToEnablenable)if(parseInt(g_android_print_config[0].count||1)>0)for(ot=0;ot<parseInt(g_android_print_config[0].count||1);ot++)cordova.plugins.barcodeScanner.barcodexprinter(function(){},function(n){alert("\u6253\u5370\u5931\u8d25: "+n)},{myPrintData:JSON.stringify(e),printConfig:JSON.stringify({type:"usb",name:g_android_print_config[0].ipOrName,copies:g_android_print_config[0].count,isLabel:g_android_print_config[0].labelPrinter})});else cordova.plugins.barcodeScanner.barcodexprinter(function(){},function(n){alert("\u6253\u5370\u5931\u8d25: "+n)},{myPrintData:JSON.stringify(e),printConfig:JSON.stringify({type:"usb",name:g_android_print_config[0].ipOrName,copies:g_android_print_config[0].count,isLabel:g_android_print_config[0].labelPrinter})});else if(parseInt(receptionPtNum)>0)for(ot=0;ot<parseInt(receptionPtNum);ot++)cordova.plugins.barcodeScanner.print(function(){},function(n){alert("\u6253\u5370\u5931\u8d25: "+n)},{myPrintData:JSON.stringify(e)});else cordova.plugins.barcodeScanner.print(function(){},function(n){alert("\u6253\u5370\u5931\u8d25: "+n)},{myPrintData:JSON.stringify(e)})}catch(hr){alert("\u6253\u5370\u5931\u8d25: "+hr.message)}}else if(typeof Cef!="undefined")Cef.CustormPrint(JSON.stringify(e));else if(decerpbrowser&&decerpbrowser.versions&&decerpbrowser.versions.android)try{if(g_android_print_config&&g_android_print_config.length>0&&g_android_print_config[0].whetherToEnablenable)if(parseInt(g_android_print_config[0].count||1)>0)for(ot=0;ot<parseInt(g_android_print_config[0].count||1);ot++)cordova.plugins.barcodeScanner.barcodexprinter(function(){},function(n){alert("\u6253\u5370\u5931\u8d25: "+n)},{myPrintData:JSON.stringify(e),printConfig:JSON.stringify({type:"usb",name:g_android_print_config[0].ipOrName,copies:g_android_print_config[0].count,isLabel:g_android_print_config[0].labelPrinter})});else cordova.plugins.barcodeScanner.barcodexprinter(function(){},function(n){alert("\u6253\u5370\u5931\u8d25: "+n)},{myPrintData:JSON.stringify(e),printConfig:JSON.stringify({type:"usb",name:g_android_print_config[0].ipOrName,copies:g_android_print_config[0].count,isLabel:g_android_print_config[0].labelPrinter})});else if(parseInt(receptionPtNum)>0)for(tr=0;tr<parseInt(receptionPtNum);tr++)cordova.plugins.barcodeScanner.print(function(){},function(n){alert("\u6253\u5370\u5931\u8d25: "+n)},{myPrintData:JSON.stringify(e)});else cordova.plugins.barcodeScanner.print(function(){},function(n){alert("\u6253\u5370\u5931\u8d25: "+n)},{myPrintData:JSON.stringify(e)})}catch(hr){alert("\u6253\u5370\u5931\u8d25: "+hr.message)}if(printSet_network_enable)if(printSet_network_device_back_islabel){if(backstagePtNum>0&&o&&o.length>0){for(ii=0,st=0,c=0;c<o.length;c++)st=parseInt(st)+parseInt(o[c].product_num);for(c=0;c<o.length;c++)for(ri=0;ri<o[c].product_num;ri++){if(ht=o[c].product_name,o[c]&&o[c].ProductTasteList&&o[c].ProductTasteList.length>0)for(ht+=" ",b=0;b<o[c].ProductTasteList.length;b++)ht+=o[c].ProductTasteList[b].sv_taste_data_name;if(ii++,a=[],ct=s.order_running_id,s.everyday_serialnumber&&_g_everyDaySerialNumber&&(ct=s.everyday_serialnumber),s!=null&&s.meiridanhao!=null&&s.meiridanhao!=""&&(ct=s.meiridanhao),a.push({Content:"\u5355\u53f7:"+convertString(ct)+"\u5e8f\u53f7:"+ii+"/"+st,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,TextFontSize:8,Width:0}),a.push({Content:ht,Columns:1,RowNum:3,RowMaxLength:10,Align:0,TextFont:0,TextFontSize:10,Width:0}),a.push({Content:"",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,TextFontSize:10,Width:0}),_g_sv_uit_cache_name=="cache_name_catering"?o[c].sv_taste_total_money>0?(ni=parseFloat(o[c].product_total)+parseFloat(o[c].sv_taste_total_money),o[c].product_num>0&&(ni=parseFloat(ni)/parseFloat(o[c].product_num)),a.push({Content:"\uffe5"+ni.toFixed(2)+"\u5143",Columns:2,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,TextFontSize:8,Width:0})):(at=parseFloat(o[c].product_total),o[c].product_num>0&&(at=parseFloat(at)/parseFloat(o[c].product_num)),a.push({Content:"\uffe5"+parseFloat(at).toFixed(2)+"\u5143",Columns:2,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,TextFontSize:8,Width:0})):(at=parseFloat(o[c].product_total),o[c].product_num>0&&(at=parseFloat(at)/parseFloat(o[c].product_num)),a.push({Content:"\uffe5"+parseFloat(at).toFixed(2)+"\u5143",Columns:2,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,TextFontSize:8,Width:0})),typeof user_id=="undefined"||user_id!="20806328"?(a.push({Content:"\u3010"+convertString(l.user.sv_us_name)+"\u3011",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,TextFontSize:7,Width:0}),convertString(l.user.sv_us_phone)?a.push({Content:"\u7535\u8bdd:"+convertString(l.user.sv_us_phone)+"\u8c22\u8c22\u60e0\u987e!",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,TextFontSize:7,Width:0}):a.push({Content:"\u8c22\u8c22\u60e0\u987e!",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,TextFontSize:7,Width:0})):a.push({Content:"\u3010"+convertString(l.user.sv_us_name)+"\u3011",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,TextFontSize:7,Width:0}),a.push({Content:pi+":"+wi,Columns:2,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,TextFontSize:7,Width:0}),vi={FooterList:a,QRCodeData:null,Action:1,PageType:4,PagePadding:10},typeof Cef!="undefined")for(h=0;h<backstagePtNum;h++)Cef.LabelPrint(JSON.stringify(vi),"1",backstagePtName,!1,40,30)}}}else ui=[],ui.push({Content:"\u540e\u53f0\u6253\u5370",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:0}),_g_sv_uit_cache_name=="cache_name_catering"&&s.sv_catering_grade&&ui.push({Content:"\u684c/\u724c\u53f7\uff1a"+convertString(s.sv_catering_grade),Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),ui.push({Content:"\u5355\u53f7\uff1a"+convertString(s.order_running_id),Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),ui.push(e.HeaderList[e.HeaderList.length-1]),e.HeaderList=ui,_g_sv_uit_cache_name=="cache_name_catering"&&(e.TitleList=[],e.TitleList.push({Content:"\u5546\u54c1",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:15+di,TextFontSize:2}),e.TitleList.push({Content:"\u6570\u91cf",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:6+di,TextFontSize:2}),e.BodyList=ur,yi="",yi+=y==1?"\u5546\u54c1                                    ":"\u5546\u54c1                ",yi+=y==1?"\u6570\u91cf         ":"\u6570\u91cf     ",e.HeaderList[e.HeaderList.length-1]={Content:yi,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),backstagePtNum>0&&(ar={HeaderList:e.HeaderList,BodyList:e.BodyList,TitleList:e.TitleList,FooterList:[],LogoData:e.LogoData,QRCodeData:e.QRCodeData,Action:e.Action,PageType:e.PageType,PagePadding:e.PagePadding},Cef.CustormPrint(JSON.stringify(ar),""+backstagePtNum+"",backstagePtName))}catch(hr){}}function getsunmipushprintData(n,t,i,r,u,f){var pt=!0,ot=0,nt=new Date,ti=nt.getFullYear(),ii=nt.getMonth(),ri=nt.getDate(),ui=nt.getHours(),fi=nt.getMinutes(),ei=nt.getSeconds(),oi=ti+"/"+fnW(ii+1)+"/"+fnW(ri)+" "+fnW(ui)+":"+fnW(fi)+":"+fnW(ei),l=JSON.parse(n),c=JSON.parse(t),y=0,si=[],k,p,e,w,ht,d,vt,rt,ft,gt,ni,b,ct,lt,et,yt,o;if(c&&c.cof&&c.cof.sv_uc_dayin&&(k=JSON.parse(c.cof.sv_uc_dayin),k!="[]"&&k!=""&&k!=null&&(y=k.xiaopiao==58?0:1,y=k.xiaopiao==58?0:k.xiaopiao==80?1:k.xiaopiao==210?2:0,ot=k.mo)),p=[],e={HeaderList:[],BodyList:[],TitleList:[],FooterList:[],LogoData:null,QRCodeData:null,Action:1,PageType:y,PagePadding:0},c&&c.cof&&c.cof.sv_pfconfig&&c.cof.sv_pfconfig.length>10?(pt=!1,p=JSON.parse(c.cof.sv_pfconfig)):(p={a:1,b:"1,1,0,0,1,1,0,0,0",f:"0,1,1,1,1,1,0,1,1,1,1,1,1",h:"1,0,1,1,1,0,1,1",l:null,p:0,q:{Align:1,Width:100,Height:100,ImageString:""},t:""},ot==1?p.f="0,1,1,0,0,1,0,0,0,0,0,0,0":ot==2?p.f="0,1,1,1,1,1,0,1,1,1,1,1,1":ot==3&&(p.f="0,1,1,1,1,1,0,1,1,1,1,1,1")),c&&c.cof)try{var ut=!1,wt=0,bt=l.order_receivable,kt=1,st="",dt=0,tt="",g=0;ut&&(c.cof.sv_uc_pointtocashset!="[]"&&c.cof.sv_uc_pointtocashset!=""&&c.cof.sv_uc_pointtocashset!=null&&(tt=JSON.parse(c.cof.sv_uc_pointtocashset)),tt!="[]"&&tt!=""&&tt!=null&&(bt=tt[0],kt=tt[1]),wt=parseInt(l.order_receivable/bt*kt),dt=l.user.sv_mw_availablepoint,st=wt+"/ "+dt,f==1&&f>0&&(st=st+"(\u542b\u6d3b\u52a8\u6d88\u8d39\u8d60\u9001"+u+"\u79ef\u5206)"),g=parseInt((r-l.order_receivable)*100)/100+"");f==2&&(g=g==0?u+"(\u6d3b\u52a8\u6d88\u8d39\u51cf\u514d"+u+"\u5143)":g+"(\u542b\u6d3b\u52a8\u6d88\u8d39\u51cf\u514d"+u+"\u5143)");var v=p.h.split(","),a=p.b.split(","),s=l.prlist,h=p.f.split(","),at=p.q,it=p.l;if(v&&v.length>0&&(v.length>0&&v[0]==1&&e.HeaderList.push({Content:convertString(c.user.sv_us_name),Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:0}),v.length>1&&v[1]==1&&e.HeaderList.push({Content:"\u5fae\u4fe1:"+convertString(c.user.sv_wechat_number),Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:0}),v.length>4&&v[4]==1&&e.HeaderList.push({Content:"\u5355\u53f7\uff1a"+convertString(l.order_running_id),Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),v.length>5&&v[5]==1&&e.HeaderList.push({Content:"\u6536\u94f6\u5458\uff1a"+sv_current_operato,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),v.length>6&&v[6]==1&&ut&&e.HeaderList.push({Content:"\u4f1a\u5458\u59d3\u540d\uff1a"+l.user.sv_mr_name,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),v.length>7&&v[7]==1&&ut&&e.HeaderList.push({Content:"\u4f1a\u5458\u5361\u53f7\uff1a"+l.user.sv_mr_cardno,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),y<2&&(decerpbrowser&&decerpbrowser.versions&&decerpbrowser.versions.android?e.HeaderList.push({Content:"......................................",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}):e.HeaderList.push({Content:"..........................................................",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}))),w=0,ht=0,y==1?(w=2,ht=3):y==2&&(w=10,ht=10,e.PagePadding=ht),a&&a.length>0&&(d="",a.length>0&&a[0]==1&&(d+=y==1?"\u5546\u54c1              ":"\u5546\u54c1     ",e.TitleList.push({Content:"\u5546\u54c1",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:10+w})),a.length>2&&a[2]==1&&(d+=y==1?"\u793c\u54c1              ":"\u793c\u54c1     ",e.TitleList.push({Content:"\u793c\u54c1",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:10+w})),a.length>1&&a[1]==1&&(d+="   \u5355\u4ef7    ",e.TitleList.push({Content:"\u5355\u4ef7",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:5+w})),a.length>3&&a[3]==1&&(d+="   \u79ef\u5206    ",e.TitleList.push({Content:"\u79ef\u5206",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:5+w})),a.length>4&&a[4]==1&&(d+=y==1?"\u6570\u91cf     ":"\u6570\u91cf ",e.TitleList.push({Content:"\u6570\u91cf",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:4+w})),a.length>5&&a[5]==1&&(d+="\u5c0f\u8ba1 ",e.TitleList.push({Content:"\u5c0f\u8ba1",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:5+w})),a.length>6&&a[6]==1&&(d+="\u5408\u8ba1 ",e.TitleList.push({Content:"\u5408\u8ba1",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:5+w})),decerpbrowser&&decerpbrowser.versions&&decerpbrowser.versions.android||e.HeaderList.push({Content:d,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0})),vt=0,s&&s.length>0){for(rt=[],o=0;o<s.length;o++)vt+=parseFloat(s[o].product_num),ft=s[o].product_unitprice,s[o].product_single_untprice&&(ft=s[o].product_single_untprice),s[o].type==!0?(b=s[o].product_name+","+s[o].product_num+",-"+s[o].product_num+","+(s[o].cnum-s[o].product_num),rt.push({Content:b,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0})):(_g_sv_uit_cache_name=="cache_name_catering"?s[o].sv_taste_total_money&&s[o].sv_taste_total_money>0?(gt=parseFloat(s[o].product_total)+parseFloat(s[o].sv_taste_total_money),b=s[o].product_name+","+ft+","+s[o].product_num+","+gt.toFixed(2),e.BodyList.push({Content:b,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0})):(b=s[o].product_name+","+ft+","+s[o].product_num+","+s[o].product_total,e.BodyList.push({Content:b,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0})):(b=s[o].product_name+","+ft+","+s[o].product_num+","+s[o].product_total,e.BodyList.push({Content:b,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0})),ni=s[o].product_name+","+s[o].product_num,si.push({Content:ni,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}));if(rt&&rt.length>0)for(b="\u9879\u76ee,\u6b21\u6570,\u5b9e\u6263,\u5269\u4f59",e.BodyList.push({Content:b,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),ct=0;ct<rt.length;ct++)e.BodyList.push(rt[ct])}if(h&&h.length>0&&(y<2&&(decerpbrowser&&decerpbrowser.versions&&decerpbrowser.versions.android?e.FooterList.push({Content:"............................................",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}):e.FooterList.push({Content:"..........................................................",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0})),h.length>1&&h[1]==1&&e.FooterList.push({Content:"\u5546\u54c1\u603b\u6570\uff1a "+vt,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),h.length>2&&h[2]==1&&e.FooterList.push({Content:"\u91d1\u989d\u5408\u8ba1\uff1a \u00a5 "+l.order_receivable,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),h.length>3&&h[3]==1&&h.length>3&&g&&g!="0"&&e.FooterList.push({Content:"\u4f18\u60e0\u91d1\u989d\uff1a\u00a5 "+g,Columns:1,RowNum:2,RowMaxLength:10,Align:0,TextFont:0,Width:0}),h.length>4&&h[4]==1&&ut&&e.FooterList.push({Content:"\u50a8\u503c\u4f59\u989d\uff1a\u00a5 "+l.user.sv_mw_availableamount,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),h.length>7&&h[7]==1&&(lt=l.order_payment,isNullOrWhiteSpace(l.order_payment2)&&(l.order_payment2.indexOf("\u5f85")<0||l.order_payment2!="\u5f85\u6536")&&(lt=lt+"("+l.order_money+")/"+l.order_payment2+"("+l.order_money2+")"),e.FooterList.push({Content:"\u652f\u4ed8\u65b9\u5f0f\uff1a"+lt+" ",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0})),h.length>8&&h[8]==1&&ut&&e.FooterList.push({Content:"\u79ef\u5206\uff08\u672c\u6b21/\u7d2f\u8ba1\uff09\uff1a"+st,Columns:1,RowNum:2,RowMaxLength:10,Align:0,TextFont:0,Width:0}),h.length>9&&h[9]==1&&e.FooterList.push({Content:"\u9500\u552e\u65f6\u95f4\uff1a"+oi,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),h.length>10&&h[10]==1&&e.FooterList.push({Content:"\u7535\u8bdd\uff1a"+convertString(c.user.sv_us_phone),Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),h.length>11&&h[11]==1&&e.FooterList.push({Content:"\u5730\u5740\uff1a"+convertString(c.user.sv_us_address),Columns:1,RowNum:2,RowMaxLength:10,Align:0,TextFont:0,Width:0}),e.FooterList.push({Content:"\u8c22\u8c22\u60e0\u987e\uff0c\u6b22\u8fce\u4e0b\u6b21\u5149\u4e34",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0})),at&&at.ImageString&&(e.FooterList.push({Content:"\u4e8c\u7ef4\u7801",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),e.QRCodeData=at),y<2&&e.FooterList.push({Content:"\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014-",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),it&&it.ImageString&&(it.ImageString.indexOf("http")>=0?(e.LogoData=it,e.FooterList.push({Content:"",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0})):(it.ImageString="http://decerp.cc"+it.ImageString,e.LogoData=l_configpostData.FooterList.push({Content:"",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}))),(!pt||!0)&&(PreferentialTopUpGivingConfigList("PrintSeting","PrintSet_ExtraInfo"),Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(et=Preferential_TopUpGiving_ConfigList[0].sv_detail_value,et)))if(et.toLowerCase().indexOf("<br/>")>0)for(yt=et.split("<br/>"),o=0;o<yt.length;o++)e.FooterList.push({Content:yt[o],Columns:1,RowNum:2,RowMaxLength:10,Align:0,TextFont:0,Width:0});else e.FooterList.push({Content:et,Columns:1,RowNum:2,RowMaxLength:10,Align:0,TextFont:0,Width:0})}catch(hi){}return JSON.stringify(e)}function pushcateringprintData(n,t,i,r){var ii=!0,ri=0,d=new Date,ui=d.getFullYear(),fi=d.getMonth(),ei=d.getDate(),oi=d.getHours(),si=d.getMinutes(),hi=d.getSeconds(),st=ui+"/"+fnW(fi+1)+"/"+fnW(ei)+" "+fnW(oi)+":"+fnW(si)+":"+fnW(hi),c=JSON.parse(n),l=JSON.parse(t),h=0,ft=[],y,p,u,vt,a,ht,it,et,gt,w,lt,ct,ni,at,s,b,e,li,k,v,f,ti,rt,ut;if(l&&l.cof&&l.cof.sv_uc_dayin&&(y=JSON.parse(l.cof.sv_uc_dayin),y!="[]"&&y!=""&&y!=null&&(h=y.xiaopiao==58?0:1,h=y.xiaopiao==58?0:y.xiaopiao==80?1:y.xiaopiao==210?2:0,ri=y.mo)),p=[],u={HeaderList:[],BodyList:[],TitleList:[],FooterList:[],LogoData:null,QRCodeData:null,Action:1,PageType:h,PagePadding:0},l&&l.cof&&l.cof.sv_pfconfig&&l.cof.sv_pfconfig.length>10?(ii=!1,p=JSON.parse(l.cof.sv_pfconfig)):p={a:1,b:"1,1,0,0,1,1,0,0,0",f:"0,1,1,1,1,1,0,1,1,1,1,1,1",h:"1,0,1,1,1,0,1,1",l:null,p:0,q:{Align:1,Width:100,Height:100,ImageString:""},t:""},l&&l.cof)try{c.user&&c.user.sv_mr_cardno&&(vt=isNullOrWhiteSpace(c.user.sv_mr_cardno));var yt=0,pt=c.order_receivable,wt=1,ci="",bt=0,g="";vt&&(l.cof.sv_uc_pointtocashset!="[]"&&l.cof.sv_uc_pointtocashset!=""&&l.cof.sv_uc_pointtocashset!=null&&(g=JSON.parse(l.cof.sv_uc_pointtocashset)),g!="[]"&&g!=""&&g!=null&&(pt=g[0],wt=g[1]),yt=parseInt(c.order_receivable/pt*wt),bt=c.user.sv_mw_availablepoint,ci=yt+"/ "+bt);var kt=p.h.split(","),nt=p.b.split(","),o=c.prlist,dt=p.f.split(","),ai=p.q,tt=p.l;if(kt&&kt.length>0&&(i==1?(u.HeaderList.push({Content:"\u5c0f\u7968\u603b\u5355",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:0}),u.HeaderList.push({Content:"\u724c\u53f7\uff1a"+convertString(c.sv_catering_grade),Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),u.HeaderList.push({Content:"\u5355\u53f7\uff1a"+convertString(c.order_running_id),Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),u.HeaderList.push({Content:"\u6536\u94f6\uff1a"+sv_current_operato+" "+st,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0})):i==2&&(r==0?u.HeaderList.push({Content:"\u53a8\u6253\u9000\u83dc\u5355",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:0,TextFontSize:2}):r==1?u.HeaderList.push({Content:"\u53a8\u6253\u52a0\u83dc\u5355",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:0,TextFontSize:2}):u.HeaderList.push({Content:"\u53a8\u6253\u5355",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:0,TextFontSize:2}),u.HeaderList.push({Content:"\u724c\u53f7\uff1a"+convertString(c.sv_catering_grade),Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0,TextFontSize:2}),u.HeaderList.push({Content:"\u5355\u53f7\uff1a"+convertString(c.order_running_id),Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),u.HeaderList.push({Content:"\u6536\u94f6\uff1a"+sv_current_operato+" "+st,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0})),h<2&&(decerpbrowser&&decerpbrowser.versions&&decerpbrowser.versions.android?u.HeaderList.push({Content:"......................................",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}):u.HeaderList.push({Content:"..........................................................",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}))),a=0,ht=0,h==1?(a=3,ht=5):h==2&&(a=10,ht=10,u.PagePadding=ht),nt&&nt.length>0&&(it="",nt.length>0&&nt[0]==1&&(it+=h==1?"\u83dc\u54c1                                          ":"\u83dc\u54c1               ",i==1?u.TitleList.push({Content:"\u83dc\u54c1",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:10+a}):i==2&&u.TitleList.push({Content:"\u83dc\u54c1",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:10+a,TextFontSize:2})),nt.length>4&&nt[4]==1&&(it+=i==1?h==1?"\u5c0f\u8ba1     ":"\u5c0f\u8ba1 ":h==1?"\u6570\u91cf     ":"\u6570\u91cf ",i==1?u.TitleList.push({Content:"\u5c0f\u8ba1",Columns:1,RowNum:1,RowMaxLength:5,Align:1,TextFont:0,Width:10+a}):i==2&&u.TitleList.push({Content:"\u6570\u91cf",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:10+a,TextFontSize:2})),decerpbrowser&&decerpbrowser.versions&&decerpbrowser.versions.android||(i==2?(it="\u83dc\u54c1        \u6570\u91cf   ",u.HeaderList.push({Content:it,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0,TextFontSize:2})):u.HeaderList.push({Content:it,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}))),et=0,o&&o.length>0)for(gt=[],f=0;f<o.length;f++)if(et+=parseFloat(o[f].product_num),o[f].type==!0)ct=o[f].product_name+","+o[f].product_num+",-"+o[f].product_num+","+(o[f].cnum-o[f].product_num),gt.push({Content:ct,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0});else{if(w=o[f].product_name,o[f]&&o[f].ProductTasteList&&o[f].ProductTasteList.length>0)for(w+=" ",lt=0;lt<o[f].ProductTasteList.length;lt++)w+=o[f].ProductTasteList[lt].sv_taste_data_name;ct=w+","+o[f].product_num;i==1?_g_sv_uit_cache_name=="cache_name_catering"?o[f].sv_taste_total_money&&o[f].sv_taste_total_money>0?(ni=parseFloat(o[f].product_total)+parseFloat(o[f].sv_taste_total_money),u.BodyList.push({Content:w+"*"+o[f].product_num+","+ni.toFixed(2),Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0})):u.BodyList.push({Content:w+"*"+o[f].product_num+","+o[f].product_total,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}):u.BodyList.push({Content:w+"*"+o[f].product_num+","+o[f].product_total,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}):u.BodyList.push({Content:ct,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0});at=w+","+o[f].product_num;o[f]&&o[f].sv_printer_ip?i==1?ft.push({Content:at,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0,PrinterIp:o[f].sv_printer_ip,PrinterPort:o[f].sv_printer_port}):i==2&&ft.push({Content:at,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0,PrinterIp:o[f].sv_printer_ip,PrinterPort:o[f].sv_printer_port,TextFontSize:2}):ft.push({Content:at,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0,TextFontSize:2})}if(dt&&dt.length>0&&(h<2&&(decerpbrowser&&decerpbrowser.versions&&decerpbrowser.versions.android?u.FooterList.push({Content:"............................................",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}):u.FooterList.push({Content:"..........................................................",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0})),u.FooterList.push({Content:"\u603b\u6570\uff1a "+et,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0})),h<2&&u.FooterList.push({Content:"\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014-",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),tt&&tt.ImageString&&(tt.ImageString.indexOf("http")>=0?(u.LogoData=tt,u.FooterList.push({Content:"",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0})):(tt.ImageString="http://decerp.cc"+tt.ImageString,u.LogoData=l_configpostData.FooterList.push({Content:"",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}))),h<2,parseInt(receptionPtNum)>0){if(typeof Cef!="undefined"){if(i==1)Cef.CustormPrint(JSON.stringify(u),"1",receptionPtName);else if(i==2)if(u.FooterList=[],s=[],r==0?s.push({Content:"\u53a8\u6253\u9000\u83dc\u5355",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:0,TextFontSize:2}):r==1?s.push({Content:"\u53a8\u6253\u52a0\u83dc\u5355",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:0,TextFontSize:2}):s.push({Content:"\u53a8\u6253\u5355",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:0,TextFontSize:2}),s.push({Content:"\u724c\u53f7\uff1a"+convertString(c.sv_catering_grade),Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0,TextFontSize:2}),s.push({Content:"\u5355\u53f7\uff1a"+convertString(c.order_running_id),Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),s.push({Content:"\u6536\u94f6\uff1a"+sv_current_operato+" "+st,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),h<2&&(decerpbrowser&&decerpbrowser.versions&&decerpbrowser.versions.android?s.push({Content:"......................................",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}):s.push({Content:".......................................",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0})),s.push(u.HeaderList[u.HeaderList.length-1]),u.HeaderList=s,_g_sv_uit_cache_name=="cache_name_catering"&&(u.TitleList=[],u.TitleList.push({Content:"\u83dc\u54c1",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:20+a,TextFontSize:2}),u.TitleList.push({Content:"\u6570\u91cf",Columns:1,RowNum:1,RowMaxLength:10,Align:2,TextFont:0,Width:10+a,TextFontSize:2}),u.BodyList=ft,b="",b+=h==1?"\u83dc\u54c1       ":"\u83dc\u54c1         ",b+=h==1?"\u6570\u91cf         ":"\u6570\u91cf  ",u.HeaderList[u.HeaderList.length-1]={Content:b,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0,TextFontSize:2}),_g_sv_uit_cache_name=="cache_name_catering"&&DishIsPrintedOnce){if(e=u.BodyList,e&&e.length>0)for(f=0;f<e.length;f++)k=[],v=[],k.push(e[f]),u.BodyList=k,v.push({Content:"\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),v.push({Content:"\u5408\u8ba1"+e[f].Content.split(",")[1],Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),v.push({Content:"",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),u.FooterList=v,e[f].PrinterIp&&e[f].PrinterPort&&Cef.NetworkPrint(JSON.stringify(u),e[f].PrinterIp,e[f].PrinterPort,"1")}else try{if(u.FooterList.push({Content:"\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),u.FooterList.push({Content:"\u5408\u8ba1\uff1a "+et,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),e=u.BodyList,e&&e.length>0){for(f=0;f<e.length;f++)if(e[f].PrinterIp&&e[f].PrinterPort){rt=e[f].PrinterIp;ut=e[f].PrinterPort;break}rt&&ut&&Cef.NetworkPrint(JSON.stringify(u),rt,ut,"1")}}catch(ot){console.log(ot.message)}}else if(decerpbrowser&&decerpbrowser.versions&&decerpbrowser.versions.android)if(i==1)try{cordova.plugins.barcodeScanner.print(function(){},function(n){alert("\u6253\u5370\u5931\u8d25: "+n)},{myPrintData:JSON.stringify(u)})}catch(ot){alert("\u6253\u5370\u5931\u8d25: "+ot.message)}else if(i==2)if(u.FooterList=[],s=[],r==0?s.push({Content:"\u53a8\u6253\u9000\u83dc\u5355",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:0,TextFontSize:2}):r==1?s.push({Content:"\u53a8\u6253\u52a0\u83dc\u5355",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:0,TextFontSize:2}):s.push({Content:"\u53a8\u6253\u5355",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:0,TextFontSize:2}),s.push({Content:"\u724c\u53f7\uff1a"+convertString(c.sv_catering_grade),Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0,TextFontSize:2}),s.push({Content:"\u5355\u53f7\uff1a"+convertString(c.order_running_id),Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),s.push({Content:"\u6536\u94f6\uff1a"+sv_current_operato+" "+st,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),h<2&&(decerpbrowser&&decerpbrowser.versions&&decerpbrowser.versions.android?s.push({Content:"......................................",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}):s.push({Content:".......................................",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0})),s.push(u.HeaderList[u.HeaderList.length-1]),u.HeaderList=s,_g_sv_uit_cache_name=="cache_name_catering"&&(u.TitleList=[],u.TitleList.push({Content:"\u83dc\u54c1",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:20+a,TextFontSize:2}),u.TitleList.push({Content:"\u6570\u91cf",Columns:1,RowNum:1,RowMaxLength:10,Align:2,TextFont:0,Width:10+a,TextFontSize:2}),u.BodyList=ft,b="",b+=h==1?"\u83dc\u54c1                                                        ":"\u83dc\u54c1         ",b+=h==1?"\u6570\u91cf         ":"\u6570\u91cf  ",u.HeaderList[u.HeaderList.length-1]={Content:b,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0,TextFontSize:2}),_g_sv_uit_cache_name=="cache_name_catering"&&DishIsPrintedOnce){if(e=[],u.BodyList&&u.BodyList.length>0)for(f=0;f<u.BodyList.length;f++)e.push({Content:u.BodyList[f].Content,Columns:u.BodyList[f].Columns,RowNum:u.BodyList[f].RowNum,RowMaxLength:u.BodyList[f].RowMaxLength,Align:u.BodyList[f].Align,TextFont:u.BodyList[f].TextFont,Width:u.BodyList[f].Width,PrinterIp:u.BodyList[f].PrinterIp,PrinterPort:u.BodyList[f].PrinterPort,TextFontSize:u.BodyList[f].TextFontSize});if(u.BodyList=[],li=[],e&&e.length>0)for(k=[],v=[],f=0;f<e.length;f++)k=[],v=[],u.BodyList=[],k.push({Content:e[f].Content,Columns:e[f].Columns,RowNum:e[f].RowNum,RowMaxLength:e[f].RowMaxLength,Align:e[f].Align,TextFont:e[f].TextFont,Width:e[f].Width,PrinterIp:e[f].PrinterIp,PrinterPort:e[f].PrinterPort,TextFontSize:e[f].TextFontSize}),v.push({Content:"\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),v.push({Content:"\u5408\u8ba1: "+e[f].Content.split(",")[1],Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),v.push({Content:"",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),u.FooterList=v,e[f].PrinterIp&&e[f].PrinterPort&&(ti={HeaderList:u.HeaderList,BodyList:k,TitleList:u.TitleList,FooterList:u.FooterList,LogoData:u.LogoData,QRCodeData:u.QRCodeData,Action:u.Action,PageType:u.PageType,PagePadding:u.PagePadding},cordova.plugins.barcodeScanner.cookposprint(function(){},function(n){alert("\u6253\u5370\u5931\u8d25: "+n)},{myPrintData:JSON.stringify(ti),myPrintIp:e[f].PrinterIp,myPrintPort:e[f].PrinterPort}))}else try{u.FooterList.push({Content:"\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0});u.FooterList.push({Content:"\u5408\u8ba1\uff1a "+et,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0});rt=u.BodyList[0].PrinterIp;ut=u.BodyList[0].PrinterPort;rt&&ut&&cordova.plugins.barcodeScanner.cookposprint(function(){},function(n){alert("\u6253\u5370\u5931\u8d25: "+n)},{myPrintData:JSON.stringify(u),myPrintIp:rt,myPrintPort:ut})}catch(ot){console.log(ot.message)}else try{cordova.plugins.barcodeScanner.print(function(){},function(n){alert("\u6253\u5370\u5931\u8d25: "+n)},{myPrintData:JSON.stringify(u)})}catch(ot){alert("\u6253\u5370\u5931\u8d25: "+ot.message)}}else if(typeof Cef!="undefined")Cef.CustormPrint(JSON.stringify(u));else if(decerpbrowser&&decerpbrowser.versions&&decerpbrowser.versions.android)try{cordova.plugins.barcodeScanner.print(function(){},function(n){alert("\u6253\u5370\u5931\u8d25: "+n)},{myPrintData:JSON.stringify(u)})}catch(ot){alert("\u6253\u5370\u5931\u8d25: "+ot.message)}}catch(ot){}}function pushSavingData(n,t){var p=0,s=new Date,w=s.getFullYear(),b=s.getMonth(),k=s.getDate(),d=s.getHours(),g=s.getMinutes(),nt=s.getSeconds(),tt=w+"/"+fnW(b+1)+"/"+fnW(k)+" "+fnW(d)+":"+fnW(g)+":"+fnW(nt),r=JSON.parse(n),f=JSON.parse(t),h=0,e="\u5145\u503c",u,o,i,it,l,a;if(r.moedel.sv_mrr_type==0?e="\u5145\u503c":r.moedel.sv_mrr_type==1?e="\u6263\u8d39":r.moedel.sv_mrr_type==5&&(e="\u9000\u8fd8"),f&&f.cof&&f.cof.sv_uc_dayin&&(u=JSON.parse(f.cof.sv_uc_dayin),u!="[]"&&u!=""&&u!=null&&(h=u.xiaopiao==58?0:1,h=u.xiaopiao==58?0:u.xiaopiao==80?1:u.xiaopiao==210?2:0,p=u.mo)),o=[],i={HeaderList:[],BodyList:[],TitleList:[],FooterList:[],LogoData:null,QRCodeData:null,Action:1,PageType:h,PagePadding:0},o={a:1,b:"1,1,0,0,1,1,0,0,0",f:"0,1,1,1,1,1,0,1,1,1,1,1,1",h:"1,0,1,1,1,0,1,1",l:null,p:0,q:{Align:1,Width:100,Height:100,ImageString:""},t:""},f&&f.cof)try{r.user.sv_mr_cardno&&(it=isNullOrWhiteSpace(r.user.sv_mr_cardno));var rt=r.order_receivable,c=o.h.split(","),ut=o.b.split(","),ft=r.prlist,v=o.f.split(","),et=o.q,ot=o.l;if(c&&c.length>0&&(i.HeaderList.push({Content:"\u6b22\u8fce\u5149\u4e34",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:0}),c.length>0&&c[0]==1&&i.HeaderList.push({Content:convertString(f.user.sv_us_name),Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:0}),c.length>1&&c[1]==1&&i.HeaderList.push({Content:"\u5fae\u4fe1:"+convertString(f.user.sv_wechat_number),Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:0}),i.HeaderList.push({Content:"\u4f1a\u5458\u59d3\u540d\uff1a"+r.user.sv_mr_name,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),i.HeaderList.push({Content:"\u4f1a\u5458\u5361\u53f7\uff1a"+r.user.sv_mr_cardno,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0})),l=0,a=0,h==1?(l=3,a=5):h==2&&(l=10,a=10),v&&v.length>0&&(i.FooterList.push({Content:"\u7c7b\u578b\uff1a"+e,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),i.FooterList.push({Content:e+"\u91d1\u989d\uff1a"+parseFloat(r.moedel.sv_mrr_amountbefore||0).toFixed(2),Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),i.FooterList.push({Content:"\u8d60\u9001\u91d1\u989d\uff1a"+parseFloat(r.moedel.sv_mrr_present||0).toFixed(2),Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),i.FooterList.push({Content:"\u4ed8\u6b3e\u65b9\u5f0f\uff1a"+r.moedel.sv_mrr_payment,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),i.FooterList.push({Content:e+"\u524d\u91d1\u989d\uff1a"+parseFloat(r.data.sv_mrr_amountbefore||0).toFixed(2),Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),i.FooterList.push({Content:e+"\u540e\u91d1\u989d\uff1a"+parseFloat(r.data.sv_mrr_amountafter||0).toFixed(2),Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),i.FooterList.push({Content:e+"\u65f6\u95f4\uff1a"+tt,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),h<2&&(decerpbrowser&&decerpbrowser.versions&&decerpbrowser.versions.android?i.HeaderList.push({Content:"......................................",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}):i.HeaderList.push({Content:"..........................................................",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0})),i.FooterList.push({Content:"\u8c22\u8c22\u60e0\u987e\uff0c\u6b22\u8fce\u4e0b\u6b21\u5149\u4e34",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0})),parseInt(receptionPtNum)>0&&receptionPtName!=null&&receptionPtName!=""){if(typeof Cef!="undefined")Cef.CustormPrint(JSON.stringify(i),""+receptionPtNum+"",receptionPtName);else if(decerpbrowser&&decerpbrowser.versions&&decerpbrowser.versions.android)try{cordova.plugins.barcodeScanner.print(function(){},function(n){alert("\u6253\u5370\u5931\u8d25: "+n)},{myPrintData:JSON.stringify(i)})}catch(y){alert("\u6253\u5370\u5931\u8d25: "+y.message)}}else if(typeof Cef!="undefined")Cef.CustormPrint(JSON.stringify(i));else if(decerpbrowser&&decerpbrowser.versions&&decerpbrowser.versions.android)try{cordova.plugins.barcodeScanner.print(function(){},function(n){alert("\u6253\u5370\u5931\u8d25: "+n)},{myPrintData:JSON.stringify(i)})}catch(y){alert("\u6253\u5370\u5931\u8d25: "+y.message)}}catch(y){}}function pushAchargeData(n,t){var k=0,s=new Date,d=s.getFullYear(),g=s.getMonth(),nt=s.getDate(),tt=s.getHours(),it=s.getMinutes(),rt=s.getSeconds(),ut=d+"/"+fnW(g+1)+"/"+fnW(nt)+" "+fnW(tt)+":"+fnW(it)+":"+fnW(rt),r=JSON.parse(n),f=JSON.parse(t),e=0,a="\u5145\u6b21",u,o,i,ft,h,v,l,w;if(f&&f.cof&&f.cof.sv_uc_dayin&&(u=JSON.parse(f.cof.sv_uc_dayin),u!="[]"&&u!=""&&u!=null&&(e=u.xiaopiao==58?0:1,e=u.xiaopiao==58?0:u.xiaopiao==80?1:u.xiaopiao==210?2:0,k=u.mo)),o=[],i={HeaderList:[],BodyList:[],TitleList:[],FooterList:[],LogoData:null,QRCodeData:null,Action:1,PageType:e,PagePadding:0},o={a:1,b:"1,1,0,0,1,1,0,0,0",f:"0,1,1,1,1,1,0,1,1,1,1,1,1",h:"1,0,1,1,1,0,1,1",l:null,p:0,q:{Align:1,Width:100,Height:100,ImageString:""},t:""},f&&f.cof)try{r.user.sv_mr_cardno&&(ft=isNullOrWhiteSpace(r.user.sv_mr_cardno));var et=r.order_receivable,c=o.h.split(","),y=o.b.split(","),ot=r.prlist,p=o.f.split(","),st=o.q,ht=o.l;if(c&&c.length>0&&(i.HeaderList.push({Content:"\u6b22\u8fce\u5149\u4e34",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:0}),i.HeaderList.push({Content:convertString(f.user.sv_us_name),Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:0}),decerpbrowser&&decerpbrowser.versions&&decerpbrowser.versions.android?i.HeaderList.push({Content:"......................................",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}):i.HeaderList.push({Content:"..........................................................",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),c.length>1&&c[1]==1&&i.HeaderList.push({Content:"\u5fae\u4fe1:"+convertString(f.user.sv_wechat_number),Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:0}),i.HeaderList.push({Content:"\u4f1a\u5458\u59d3\u540d\uff1a"+r.user.sv_mr_name,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),i.HeaderList.push({Content:"\u4f1a\u5458\u5361\u53f7\uff1a"+r.user.sv_mr_cardno,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),decerpbrowser&&decerpbrowser.versions&&decerpbrowser.versions.android?i.HeaderList.push({Content:"......................................",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}):i.HeaderList.push({Content:"..........................................................",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0})),h=0,v=0,e==1?(h=3,v=5):e==2&&(h=10,v=10),y&&y.length>0&&(l="",l+=e==1?"\u9879\u76ee              ":"\u9879\u76ee     ",i.TitleList.push({Content:"\u9879\u76ee",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:12+h}),l+=e==1?"\u6b21\u6570              ":"\u6b21\u6570     ",i.TitleList.push({Content:"\u6b21\u6570",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:6+h}),l+=e==1?"\u91d1\u989d              ":"\u91d1\u989d     ",i.TitleList.push({Content:"\u91d1\u989d",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:6+h}),decerpbrowser&&decerpbrowser.versions&&decerpbrowser.versions.android),i.BodyList.push({Content:"\u9879\u76ee,\u6b21\u6570,\u91d1\u989d",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),w=r.moedel.sv_mcr_productname+","+r.moedel.sv_mcr_count+","+r.moedel.sv_mcr_money,i.BodyList.push({Content:w,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),p&&p.length>0&&(decerpbrowser&&decerpbrowser.versions&&decerpbrowser.versions.android?i.FooterList.push({Content:"......................................",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}):i.FooterList.push({Content:"..........................................................",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),i.FooterList.push({Content:"\u4ed8\u6b3e\u91d1\u989d\uff1a"+parseFloat(r.data.sv_mcr_money||0).toFixed(2),Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),i.FooterList.push({Content:"\u4ed8\u6b3e\u65b9\u5f0f\uff1a"+r.data.sv_mcr_payment,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),i.FooterList.push({Content:a+"\u524d\u53ef\u7528\uff1a"+parseFloat(r.data.sv_mcr_countbefore||0).toFixed(0),Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),i.FooterList.push({Content:a+"\u540e\u53ef\u7528\uff1a"+parseFloat(r.data.sv_mcr_countafter||0).toFixed(0),Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),i.FooterList.push({Content:a+"\u65f6\u95f4\uff1a"+ut,Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}),i.FooterList.push({Content:"\u8c22\u8c22\u60e0\u987e\uff0c\u6b22\u8fce\u4e0b\u6b21\u5149\u4e34",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0})),parseInt(receptionPtNum)>0&&receptionPtName!=null&&receptionPtName!=""){if(typeof Cef!="undefined")Cef.CustormPrint(JSON.stringify(i),""+receptionPtNum+"",receptionPtName);else if(decerpbrowser&&decerpbrowser.versions&&decerpbrowser.versions.android)try{cordova.plugins.barcodeScanner.print(function(){},function(n){alert("\u6253\u5370\u5931\u8d25: "+n)},{myPrintData:JSON.stringify(i)})}catch(b){alert("\u6253\u5370\u5931\u8d25: "+b.message)}}else if(typeof Cef!="undefined")Cef.CustormPrint(JSON.stringify(i));else if(decerpbrowser&&decerpbrowser.versions&&decerpbrowser.versions.android)try{cordova.plugins.barcodeScanner.print(function(){},function(n){alert("\u6253\u5370\u5931\u8d25: "+n)},{myPrintData:JSON.stringify(i)})}catch(b){alert("\u6253\u5370\u5931\u8d25: "+b.message)}}catch(b){}}function decerp_print(n){try{Cef.CustrmPrint(JSON.stringify(n))}catch(t){}}function convertString(n){return n?n:""}function fnW(n){return n>=10?n:"0"+n}function getAndroidPrintConfig(){try{if(decerpbrowser&&decerpbrowser.versions&&decerpbrowser.versions.android&&(PreferentialTopUpGivingConfigList("AndroidPrinterConfig","AndroidPrinterConfig"),Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0)){var n=$.parseJSON(Preferential_TopUpGiving_ConfigList[0].sv_detail_value);n&&(n[0].whetherToEnablenable||n[1].whetherToEnablenable)&&(g_android_print_config=n,n[0].printerType=="usb"||$("#AndroidFrontNetwork").prop("checked",!0),n[1].printerType=="usb")}}catch(t){}}function getIsLoginData(n){var i,u,t,r;def_system_paySetting.resolve(n);def_system_getHardwareConfig.resolve(n);_g_sv_uit_cache_name=n.sv_uit_cache_name;sv_enable_wechatpay=n.sv_enable_wechatpay;_g_sp_salesclerkid=n.sp_salesclerkid;sv_enable_alipay=n.sv_enable_alipay;is_open_print=n.is_open_print;Is_verify_store_version=n.sv_versionid==1?!0:!1;_g_old_sv_versionid=n.sv_versionid;verify_distributor_id=n.distributor_id;isOpenMicroMall=n.is_open_micromall;IsStore=n.isStore;sv_current_operato=n.sv_code_Name;g_dec_payment_method=n.dec_payment_method;g_dec_payment_config=n.dec_payment_config;moduleConfigList=n.moduleConfigList;Is_open_commission=n.sv_isopen_commission;user_id=n.user_id;$("#userid").val(user_id);$(".user_id").text(user_id);$("#username").text(n.sv_us_name);$(".sv_us_name").text(n.sv_us_name);$("#dianzhu").text(n.sv_ul_name);$("#postion").text(n.sp_grouping_name);$("#sv_versionname").text(n.sv_versionname);n.sv_dc_websitelogo!=null&&n.sv_dc_websitelogo!=""&&n.sv_dc_websitelogo!=undefined?(decerpLogoUrl_270=n.sv_dc_websitelogo,decerpLogoUrl_80=n.sv_dc_websitelogo):(decerpLogoUrl_270="/images/agentLogo_270.jpg",decerpLogoUrl_80="/images/agentLogo_80.png");n.distributor_id==1||n.distributor_id==100?(isNullOrWhiteSpace(n.sv_us_logo)?$("#userImg").attr("src",_g_res_images_url+n.sv_us_logo):$("#userImg").attr("src","/skin_N3/images/001.png"),isNullOrWhiteSpace(n.sv_store_logo)?($("#smalllogoimg").append('<img class="shoplogoimg" id="logoid" src="'+_g_res_images_url+n.sv_store_logo+'" />'),$(".showlogoImg").attr("src",_g_res_images_url+n.sv_store_logo),decerpLogoUrl_270=_g_res_images_url+n.sv_store_logo):($("#smalllogoimg").append('<img class="shoplogoimg" id="logoid" src="'+decerpLogoUrl_270+'" />'),$(".showlogoImg").attr("src",decerpLogoUrl_270)),$("#problemdeke").show(0),$("._g_hiddenAgents_show").show()):(isNullOrWhiteSpace(n.sv_us_logo)?$("#userImg").attr("src",_g_res_images_url+n.sv_us_logo):$("#userImg").attr("src","/skin_N3/images/001.png"),isNullOrWhiteSpace(n.sv_store_logo)?($("#smalllogoimg").append('<img class="shoplogoimg" id="logoid" src="'+_g_res_images_url+n.sv_store_logo+'" />'),$(".showlogoImg").attr("src",_g_res_images_url+n.sv_store_logo)):($("#smalllogoimg").append('<img class="shoplogoimg" id="logoid" src="'+decerpLogoUrl_270+'" />'),$(".showlogoImg").attr("src",decerpLogoUrl_270)),$("#headermove li.username").css("width","175px"),$("#headermove li.username").find("#username").css("width","160px"),$("#headermove li.username").find(".headerusertext").css("width","160px"),$("#IsonlineRenewal,._g_hiddenAgents").hide(0),$("._g_agents_hide").hide(0),$("._g_agents_text").text("\u4f1a\u5458\u7ba1\u7406\u8f6f\u4ef6"),_g_is_distributor_customer=!0);n.sv_uit_cache_name=="cache_name_catering"&&$("#TakeawayOrderList_N3").show();shareVersionTipsFn(n.sv_versionid,n.onecbuyversion,n.sv_versionexpiration,n.distributor_id);n.sv_us_industrytype==15?($("#headerbackgroundcolor").css("background-color","#ff6666"),$("#productOperationManual").attr("href","http://www.decerp.cn/res/\u5fb7\u5ba2\u96f6\u552e\u64cd\u4f5c\u624b\u518c\uff08\u5546\u6237\u7248\uff09.pdf")):n.sv_us_industrytype==27||n.sv_us_industrytype==24?$("#productOperationManual").attr("href","http://www.decerp.cn/res/\u5fb7\u5ba2\u9910\u996e\u64cd\u4f5c\u624b\u518c\uff08\u5546\u6237\u7248\uff09.pdf"):n.sv_us_industrytype==5||n.sv_us_industrytype==14||n.sv_us_industrytype==7||n.sv_us_industrytype==10||n.sv_us_industrytype==13?$("#productOperationManual").attr("href","http://www.decerp.cn/res/\u5fb7\u5ba2\u96f6\u552e\u64cd\u4f5c\u624b\u518c\uff08\u5546\u6237\u7248\uff09.pdf"):$("#productOperationManual").attr("href","http://www.decerp.cn/res/\u5fb7\u5ba2\u8f6f\u4ef6\u64cd\u4f5c\u624b\u518c\uff08\u5546\u6237\u7248\uff09.pdf");_g_user_config=n;PreferentialTopUpGivingConfigList("SetTardware","SetTardware_type");i=!1;Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(i=Preferential_TopUpGiving_ConfigList[0].sv_detail_is_enable,_g_is_ic_type=Preferential_TopUpGiving_ConfigList[0].sv_detail_value);PreferentialTopUpGivingConfigList("SetTardware","SetTardware_pwd");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(_g_is_ic_pwd=Preferential_TopUpGiving_ConfigList[0].sv_detail_value);i&&(u=typeof Cef,u!=="undefined"&&(_g_is_ic_flag=!0,_g_is_ic_userid=n.user_id,_g_is_ic_type==1&&(_g_is_ic_pwd=GetICCardPwd(n.user_id))));PreferentialTopUpGivingConfigList("EveryDaySerialNumber","EveryDaySerialNumber");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(_g_everyDaySerialNumber=Preferential_TopUpGiving_ConfigList[0].sv_detail_is_enable,t=Preferential_TopUpGiving_ConfigList[0].sv_detail_value,null!=t&&""!=t&&(r=JSON.parse(t),serialNumberOfDailyExpressions=r.SerialNumberExpression,g_liushuihao=r.SerialNumber));PreferentialTopUpGivingConfigList("rankDemotion","rankDemotion");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(rankDemotion=Preferential_TopUpGiving_ConfigList[0].sv_detail_is_enable);PreferentialTopUpGivingConfigList("availableIntegralSwitch","availableIntegralSwitch");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(availableIntegralSwitch=Preferential_TopUpGiving_ConfigList[0].sv_detail_is_enable);PreferentialTopUpGivingConfigList("rankPromotion","rankPromotion");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(rankPromotionIsON=Preferential_TopUpGiving_ConfigList[0].sv_detail_is_enable);PreferentialTopUpGivingConfigList("MembershipGradeGrouping","MembershipGradeGrouping");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(MembershipGradeGroupingIsON=Preferential_TopUpGiving_ConfigList[0].sv_detail_is_enable);PreferentialTopUpGivingConfigList("AutomaticallyGenerateProductBarcode","AutomaticallyGenerateProductBarcode");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(g_AutomaticallyGenerateProductBarcode=Preferential_TopUpGiving_ConfigList[0].sv_detail_is_enable);PreferentialTopUpGivingConfigList("TraceabilityCode","TraceabilityCode");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(g_TraceabilityCode=Preferential_TopUpGiving_ConfigList[0].sv_detail_is_enable);PreferentialTopUpGivingConfigList("AutomaticallyGenerateMemberId","AutomaticallyGenerateMemberId");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(g_AutomaticallyGenerateMemberId=Preferential_TopUpGiving_ConfigList[0].sv_detail_is_enable);PreferentialTopUpGivingConfigList("SplitOpenACase","SplitOpenACase");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(automaticDevanning=Preferential_TopUpGiving_ConfigList[0].sv_detail_is_enable);PreferentialTopUpGivingConfigList("MultiSpecification","MultiSpecification");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(MultiSpecification=Preferential_TopUpGiving_ConfigList[0].sv_detail_is_enable);PreferentialTopUpGivingConfigList("WhetherStartusingConsumptionMarket","WhetherStartusingConsumptionMarket");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(g_WhetherStartusingConsumptionMarket=Preferential_TopUpGiving_ConfigList[0].sv_detail_is_enable);PreferentialTopUpGivingConfigList("DishIsPrintedOnce","DishIsPrintedOnce");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(DishIsPrintedOnce=Preferential_TopUpGiving_ConfigList[0].sv_detail_is_enable);PreferentialTopUpGivingConfigList("succession","succession");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(SuccessionSwitch=Preferential_TopUpGiving_ConfigList[0].sv_detail_is_enable,SuccessionSwitch?$(".handover_hide").show():$(".handover_hide").hide());PreferentialTopUpGivingConfigList("DisableManualInput","DisableManualInput");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(g_DisableManualInput=Preferential_TopUpGiving_ConfigList[0].sv_detail_is_enable);PreferentialTopUpGivingConfigList("ShareTheResults","ShareTheResults");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(g_ShareTheResults=Preferential_TopUpGiving_ConfigList[0].sv_detail_is_enable);PreferentialTopUpGivingConfigList("WhetherSendtextMessageRemindMember","WhetherSendtextMessageRemindMember");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(g_WhetherSendtextMessageRemindMember=Preferential_TopUpGiving_ConfigList[0].sv_detail_is_enable);PreferentialTopUpGivingConfigList("WeighingStableAutomaticDetermine","WeighingStableAutomaticDetermine");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(WeighingStableAutomaticDetermine=Preferential_TopUpGiving_ConfigList[0].sv_detail_is_enable);PreferentialTopUpGivingConfigList("ZeroInventorySales","ZeroInventorySales");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(g_ZeroInventorySalesQ=Preferential_TopUpGiving_ConfigList[0].sv_detail_is_enable);PreferentialTopUpGivingConfigList("ShopCateringWechatConfig","ShopCateringWechatConfig");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(g_ShopCateringWechatConfig=Preferential_TopUpGiving_ConfigList[0].sv_detail_is_enable);$.getJSON("/system/GetUserPage",function(n){def_system_storagealertis.resolve(n);def_system_printLoad.resolve(n);_g_uc_dixian=JSON.parse(n.sv_uc_dixian)});PreferentialTopUpGivingConfigList("PrintSeting","PrintSet_default");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(receptionPtNum=Preferential_TopUpGiving_ConfigList[0].sv_detail_value);PreferentialTopUpGivingConfigList("PrintSeting","PrintSet_default_device");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(receptionPtName=Preferential_TopUpGiving_ConfigList[0].sv_detail_value);PreferentialTopUpGivingConfigList("PrintSeting","PrintSet_network_enable");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(printSet_network_enable=Preferential_TopUpGiving_ConfigList[0].sv_detail_is_enable);PreferentialTopUpGivingConfigList("PrintSeting","PrintSet_network");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(backstagePtNum=Preferential_TopUpGiving_ConfigList[0].sv_detail_value);PreferentialTopUpGivingConfigList("PrintSeting","PrintSet_network_device");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(backstagePtName=Preferential_TopUpGiving_ConfigList[0].sv_detail_value);PreferentialTopUpGivingConfigList("PrintSeting","PrintSet_network_device_font_islabel");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(printSet_network_device_font_islabel=Preferential_TopUpGiving_ConfigList[0].sv_detail_is_enable);PreferentialTopUpGivingConfigList("PrintSeting","PrintSet_network_device_back_islabel");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(printSet_network_device_back_islabel=Preferential_TopUpGiving_ConfigList[0].sv_detail_is_enable);PreferentialTopUpGivingConfigList("Catering_Is_Ceremonial_Eat","Catering_Is_Ceremonial_Eat");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(_g_Catering_Is_Ceremonial_Eat=Preferential_TopUpGiving_ConfigList[0].sv_detail_value,_g_Catering_Is_Ceremonial_Eat==1&&$("#DiningTableAnalysis_N3").hide(0));PreferentialTopUpGivingConfigList("CateringOnlineIsAutoOrderAndPrint","CateringOnlineIsAutoOrderAndPrint");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(_g_CateringOnlineIsAutoOrderAndPrint=Preferential_TopUpGiving_ConfigList[0].sv_detail_value);PreferentialTopUpGivingConfigList("TakeOutFoodPrintSet","TakeOutFoodPrintIPSet");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(_g_TakeOutFoodPrintIP=Preferential_TopUpGiving_ConfigList[0].sv_detail_value);PreferentialTopUpGivingConfigList("TakeOutFoodPrintSet","TakeOutFoodPrintPortSet");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(_g_TakeOutFoodPrintPort=Preferential_TopUpGiving_ConfigList[0].sv_detail_value);PreferentialTopUpGivingConfigList("ValueAddedServices","ValueAddedServices_Recommend_MALL");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(_g_ValueAddedServices_Recommend_MALL=Preferential_TopUpGiving_ConfigList[0].sv_detail_is_enable,_g_ValueAddedServices_Recommend_MALL_Date=Preferential_TopUpGiving_ConfigList[0].sv_expire_date,_g_ValueAddedServices_Recommend_MALL&&$("#wechatshop_pay").removeClass("nowReceive").text("\u5df2\u7ecf\u9886\u53d6").css("background-color","#97929b"));PreferentialTopUpGivingConfigList("ValueAddedServices","ValueAddedServices_Recommend_TOScanOrder");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(_g_ValueAddedServices_Recommend_TOScanOrder=Preferential_TopUpGiving_ConfigList[0].sv_detail_is_enable,_g_ValueAddedServices_Recommend_TOScanOrder_Date=Preferential_TopUpGiving_ConfigList[0].sv_expire_date,_g_ValueAddedServices_Recommend_TOScanOrder&&$("#sanyShop_pay").removeClass("nowReceive").text("\u5df2\u7ecf\u9886\u53d6").css("background-color","#97929b"));PreferentialTopUpGivingConfigList("ValueAddedServices","ValueAddedServices_Recommend_TOFoodinOneSet");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(_g_ValueAddedServices_Recommend_TOFoodinOneSet=Preferential_TopUpGiving_ConfigList[0].sv_detail_is_enable,_g_ValueAddedServices_Recommend_TOFoodinOneSet_Date=Preferential_TopUpGiving_ConfigList[0].sv_expire_date);PreferentialTopUpGivingConfigList("Set_Pos_T1_SecondScreen","Set_Pos_T1_SecondScreen_Size");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(g_set_pos_t1_secondscreen_enable=Preferential_TopUpGiving_ConfigList[0].sv_detail_is_enable,g_set_pos_t1_secondscreen_size=Preferential_TopUpGiving_ConfigList[0].sv_detail_value);PreferentialTopUpGivingConfigList("Set_Pos_T1_SecondScreen","Set_Pos_T1_SecondScreen_Style");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(g_set_pos_t1_secondscreen_style=Preferential_TopUpGiving_ConfigList[0].sv_detail_value);PreferentialTopUpGivingConfigList("Set_Pos_T1_SecondScreen","Set_Pos_T1_SecondScreen_Images");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(g_set_pos_t1_secondscreen_images=Preferential_TopUpGiving_ConfigList[0].sv_detail_value);PreferentialTopUpGivingConfigList("Set_Pos_T1_SecondScreen","Set_Pos_T1_SecondScreen_Video");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(g_set_pos_t1_secondscreen_video=Preferential_TopUpGiving_ConfigList[0].sv_detail_value);def_system_getsalesConfig.resolve();_g_get_cache_name_def.resolve()}function PreferentialTopUpGivingConfigList(n,t){var u,r,i;if(Preferential_TopUpGiving_ConfigList="",typeof moduleConfigList!="undefined"&&moduleConfigList!=null&&moduleConfigList.length>0)for(u=0;u<moduleConfigList.length;u++)if(moduleConfigList[u].sv_user_module_code==n)if(typeof moduleConfigList[u].ChildInfolist!="undefined"){if(moduleConfigList[u].ChildInfolist!=null&&moduleConfigList[u].ChildInfolist.length>0)for(r=moduleConfigList[u].ChildInfolist,i=0;i<r.length;i++)r[i].sv_user_config_code==t&&(sv_user_module_config=r[i],r[i].ChildDetailList!=null&&r[i].ChildDetailList.length>0&&(is_exist_Preferential_TopUpGiving_ConfigList=!0,Preferential_TopUpGiving_ConfigList=r[i].ChildDetailList))}else if(typeof moduleConfigList[u].childInfolist!="undefined"&&moduleConfigList[u].childInfolist!=null&&moduleConfigList[u].childInfolist.length>0)for(r=moduleConfigList[u].childInfolist,i=0;i<r.length;i++)r[i].sv_user_config_code==t&&(sv_user_module_config=r[i],r[i].childDetailList!=null&&r[i].childDetailList.length>0&&(is_exist_Preferential_TopUpGiving_ConfigList=!0,Preferential_TopUpGiving_ConfigList=r[i].childDetailList))}function GetICCardPwd(n){return n.substring(0,6)}function bindICCardEvent(n){var t=typeof Cef;t!=="undefined"&&n.keydown(function(t){GetICCardEventData(n,t)})}function GetICCardEventData(n,t){var r,i,u;if(_g_is_ic_flag&&t.keyCode==113)try{r={Success:!1,Message:""};_g_is_ic_type==1?r=Cef.ReadICCardNoWithPwd(_g_is_ic_pwd,!0):_g_is_ic_type==0&&(r=Cef.URFReadCardNo(_g_is_ic_pwd));i=JSON.parse(r);i&&(i.Success||i.Success=="true"||i.Success=="True"?(u=parseInt(i.Message.substring(0,2)),n.val(i.Message.substring(2,u+2))):layer.msg("\u8bfb\u5361\u5931\u8d25\uff1a"+i.Message))}catch(t){}}function shareVersionTipsFn(n,t,i,r){var e=new Date,o=new Date(i),f=(o.getTime()-e.getTime())/864e5,u;n==1&&r==1?(t?$("#salescontenttext").text("\u60a8\u7684\u5e97\u94fa\u7531\u4e8e\u5230\u671f\u5df2\u6062\u590d\u6210\u514d\u8d39\u7248\uff0c\u4e3a\u907f\u514d\u5f71\u54cd\u5e97\u94fa\u7684\u6b63\u5e38\u8fd0\u8425\uff0c\u8bf7\u8ba2\u8d2d\u5347\u7ea7\u7248\u672c\uff01\u54a8\u8be2\u7535\u8bdd\uff1a400-0521-131"):$("#salescontenttext").text("\u60a8\u7684\u5e97\u94fa\u5f53\u524d\u4e3a\u514d\u8d39\u7248\uff0c\u5347\u7ea7\u7248\u672c\u53ef\u4ee5\u8ba9\u60a8\u7684\u5e97\u94fa\u8fd0\u8425\u66f4\u987a\u7545\uff01\u54a8\u8be2\u7535\u8bdd\uff1a400-0521-131"),$("#shopSalesContent").show(0)):n==2&&r==1?($("#salescontenttext").text("\u60a8\u7684\u5e97\u94fa\u5f53\u524d\u4e3a\u9ad8\u7ea7\u8bd5\u7528\u7248\uff0c\u5269\u4f59"+parseInt(f)+"\u5929\uff01\u54a8\u8be2\u7535\u8bdd\uff1a400-0521-131"),$("#shopSalesContent").show(0)):(n==3||n==4)&&r==1&&f<=15&&(u="",n==3?u="\u8fde\u9501\u7248":n==4&&(u="\u9ad8\u7ea7\u7248"),$("#buyshopbtn_pay").text("\u7acb\u5373\u7eed\u8d39"),$("#buyshopbtn_pay").attr("href","/Home/Payheight_N3?id="+n+""),$("#salescontenttext").text("\u60a8\u7684\u5e97\u94fa\u5f53\u524d\u4e3a"+u+"\uff0c\u5269\u4f59"+parseInt(f)+"\u5929,\u4e3a\u907f\u514d\u5f71\u54cd\u5e97\u94fa\u7684\u6b63\u5e38\u8fd0\u8425\uff0c\u8bf7\u7eed\u8d39\u7248\u672c\uff01\u54a8\u8be2\u7535\u8bdd\uff1a400-0521-131"),$("#shopSalesContent").show(0))}function getMessageBox(n){_g_getMessageBoxFalg||(_g_getMessageBoxFalg=!0,$.getJSON("/MessageBox/InstantMessage?userId="+n,null,function(n){var e="",i,f,r,u,t,o;if(_g_getMessageBoxFalg=!1,n.succeed&&n.values!=null&&n.values!=""){for(i=n.values,f=i.length,f>6&&(f=6),t=0;t<f;t++)typeof i[t].sv_message_title!=undefined&&i[t].sv_message_title=="\u7ebf\u4e0a\u8ba2\u5355"&&i[t].sv_message_isplay==!1&&(r+=i[t].sv_message_id+","),e+='<li title="'+i[t].sv_message_content+'"><a href="/news/ShareMessage_N3"><p class="new-title">'+i[t].sv_message_content+'<\/p><p class="colorc1cad4">'+new Date(i[t].sv_creation_date).Format("yyyy-MM-dd hh:mm")+"<\/p><\/a><\/li>";for(r="",u=n.values,t=0;t<u.length;t++)typeof i[t].sv_message_title!=undefined&&u[t].sv_message_title=="\u7ebf\u4e0a\u8ba2\u5355"&&u[t].sv_message_isplay==!1&&(r+=u[t].sv_message_id+",");r!=""&&(AddPlaySound("http://res.decerp.cc/music/jiedan.ogg",null,null,"div"),r=r.substring(0,r.lastIndexOf(",")),$.get("/MessageBox/MarkAsReadMessageBox",{messageId:r,type:"play"},function(){}));e+='<li><a class="text-center more" href="/news/ShareMessage_N3">\u66f4\u591a\u6d88\u606f<\/a><\/li>';$("#messagehtml").html(e);o=0;o=n.errmsg>99?99:n.errmsg;$("#Messagenumber,.Messagenumber").html(o)}else _g_getMessageBoxFalg=!1,$("#messagehtml").html('<li><a class="text-center more" href="/news/ShareMessage_N3">\u67e5\u770b\u5df2\u9605\u8bfb\u6d88\u606f<\/a><\/li>')}))}function changePwd(){$("#btnSaveChangePwd").click(function(){var t=$("#oldPassword").val(),n=$("#newPassword").val(),i=$("#confirmPassword").val();isNullOrWhiteSpace(t)?isNullOrWhiteSpace(n)?n==t?(layer.msg("\u65b0\u5bc6\u7801\u4e0d\u80fd\u548c\u65e7\u5bc6\u7801\u76f8\u540c\uff01"),$("#newPassword").focus()):/^[\@A-Za-z0-9\!\#\$\%\^\&\*\.\~]{6,15}$/.test(n)?isNullOrWhiteSpace(i)?n!=i?(layer.msg("\u4e24\u6b21\u8f93\u5165\u7684\u65b0\u5bc6\u7801\u4e0d\u4e00\u81f4\uff01"),$("#confirmPassword").focus()):$.postAsyncJson("/AjaxUser/ChangePwd",{oldPassword:t,newPassword:n},function(n){n==1?(layer.msg("\u5bc6\u7801\u4fee\u6539\u6210\u529f,\u8bf7\u91cd\u65b0\u7528\u65b0\u5bc6\u7801\u767b\u5f55\uff01"),layer.close(index),setTimeout(function(){$.post("/AjaxUser/LogOut",null,function(){location.href=_g_is_distributor_customer||verify_distributor_id==100?"/login.html":"/login.html"})},2e3)):n==-3?($("#oldPassword").focus(),layer.msg("\u539f\u5bc6\u7801\u8f93\u5165\u9519\u8bef\uff01")):n==-5?(layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"),layer.close(index)):(layer.msg("\u5bc6\u7801\u4fee\u6539\u5931\u8d25,\u8bf7\u5237\u65b0\u540e\u518d\u91cd\u8bd5\uff01"),layer.close(index))}):(layer.msg("\u786e\u8ba4\u65b0\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a"),$("#confirmPassword").focus()):(layer.msg("\u65b0\u5bc6\u7801\u8f93\u5165\u5fc5\u987b\u662f6-15\u4f4d\u5b57\u6bcd\u3001\u6570\u5b57\u6216\u7279\u6b8a\u7b26\u53f7\u7ec4\u6210\uff01"),$("#newPassword").focus()):(layer.msg("\u65b0\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a\uff01"),$("#newPassword").focus()):(layer.msg("\u539f\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a\uff01"),$("#oldPassword").focus())})}function addUserFeedback(){$("#btnAddUserFeedback").click(function(){var n;isNullOrWhiteSpace($("#userfeedback_content").val())&&$("#userfeedback_content").val().trim().length>=8?$.post("/AjaxData/AddUserFeedback",{userfeedback_content:$("#userfeedback_content").val().trim(),picture:n},function(n){n&&(n.imgurl==!1?($("#userfeedback_content").val(""),$("#upFeedbackImg").val(""),$(".am-p1").html(""),layer.msg("\u4e0a\u4f20\u56fe\u7247\u5931\u8d25")):n.imgurl==-3?layer.msg("\u60a8\u4e0a\u4f20\u7684\u56fe\u7247\u8fc7\u5927\uff0c\u8bf7\u9009\u62e9\u5c0f\u4e8e500kb\u4ee5\u4e0b\u7684\u56fe\u7247"):n.imgurl&&($("#userfeedback_content").val(""),$("#upFeedbackImg").val(""),$(".am-p1").html(""),layer.msg("\u6570\u636e\u5df2\u63d0\u4ea4\uff0c\u611f\u8c22\u60a8\u7684\u53cd\u9988\uff01")))}):($("#userfeedback_content").focus(),layer.msg("\u63d0\u4ea4\u5185\u5bb9\u4e0d\u80fd\u5c11\u4e8e8\u4e2a\u5b57\uff01"))})}function addPageSizeFn(n){$(n).html('<select name="" id="pagesize" class="form-control selectpagesize fr"><option value="5">5\u6761/\u9875<\/option><option value="10">10\u6761/\u9875<\/option><option value="20">20\u6761/\u9875<\/option><\/select>')}function enabledButtonById(n){$("#"+n).removeClass("disabled").removeAttr("disabled","disabled")}function disableButtonById(n){$("#"+n).addClass("disabled").attr("disabled","disabled")}function enabledButtonByClass(n){$("."+n).removeClass("disabled").removeAttr("disabled","disabled")}function disableButtonByClass(n){$("."+n).addClass("disabled").attr("disabled","disabled")}function getSystemUpdatedMessageList(n,t){$.get("/MessageBox/GetMessageBoxList",{messageType:n,pageIndex:1,pageSize:t},function(t){var r,i;t.succeed&&(r=t.values,r&&r.length>0?(i="",$.each(r,function(n,t){i+='<li title="'+t.sv_message_title+'"><a href="/news/ShareMessage_N3"><p class="new-title">'+t.sv_message_title+'<\/p><p class="colorc1cad4">'+new Date(t.sv_creation_date).Format("yyyy-MM-dd hh:mm")+"<\/p><\/a><\/li>"}),i+='<li><a class="text-center more" href="/news/ShareMessage_N3">\u66f4\u591a\u6d88\u606f<\/a><\/li>',n==2?$("#systemMessageList_new").html(i):$("#logMessageList_new").html(i)):n==2?$("#systemMessageList_new").html('<li><a class="text-center more" href="/news/ShareMessage_N3">\u66f4\u591a\u6d88\u606f<\/a><\/li>'):$("#logMessageList_new").html('<li><a class="text-center more" href="/news/ShareMessage_N3">\u66f4\u591a\u6d88\u606f<\/a><\/li>'))})}function saveBackSelectLabel(n){$.postAsyncContentJson("/UserModuleConfig/SaveConfigdetailList?moduleCode=SetTardware",n,function(n){n&&(n==1?(layer.msg("\u4fdd\u5b58\u6210\u529f"),getPrintSetingInfo()):n==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):layer.msg("\u4fdd\u5b58\u5931\u8d25"))})}function printSetEnable(n,t,i){$.postAsyncJson("/UserModuleConfig/ConfigdetailOperatePrintSet",{moduleId:n,configId:t,enable:i==!0?!1:!0},function(n){n==!0?(i?$(".PrintSet_network_enable").removeClass("open"):$(".PrintSet_network_enable").addClass("open"),layer.msg("\u4fdd\u5b58\u8bbe\u7f6e\u6210\u529f\uff01")):layer.msg("\u4fdd\u5b58\u8bbe\u7f6e\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01")})}function shareSmallWindowFn(n,t,i,r,u,f){$(document).unbind("click",n).on("click",n,function(){t=layer.open({type:1,title:i,shade:.6,moveType:1,shift:5,area:r||["360px","230px"],closeBtn:1,content:u,scrollbar:!1,shadeClose:!0,success:function(){f&&f()}});closePageFn(".closepage",t)})}function shareOpenSmallPageFn(n,t,i,r){n=layer.open({type:1,title:t,shade:.6,moveType:1,shift:5,area:i||["360px","230px"],closeBtn:1,content:r,scrollbar:!1,shadeClose:!1});closePageFn(".closepage",n)}function closePageFn(n,t){$(document).on("click",n,function(){layer.close(t)})}function commonOpenLoading(){return layer.load(1,{shade:[.1,"#000"]})}function openLoadingIng(){return layer.msg("\u6b63\u5728\u62fc\u547d\u52a0\u8f7d....",{icon:16,shade:.01})}function commonCloseLoading(n){layer.close(n)}function commondResultMsg(n,t,i){layer.msg(n,{icon:t||1,time:i||800},function(){layer.closeAll()})}function getQueryString(n){var r=new RegExp("(^|&)"+n+"=([^&]*)(&|$)","i"),i=window.location.search.substr(1).match(r),t="";return i!=null&&(t=i[2]),r=null,i=null,t==null||t==""||t=="undefined"?"":t}function getQueryStringurl(n){var r=new RegExp("(^|&)"+n+"=([^&]*)(&|$)","i"),i=window.location.search.substr(1).match(r),t="";return i!=null&&(t=i[2]),r=null,i=null,t==null||t==""||t=="undefined"?"":t}function strPlaceholder(n){var i="",t;if(n>0)for(t=0;t<n;t++)i+="&emsp;";return i}function uploadNewPhotoSrcFn(n){var t,i;return n&&n.attr("src")?(t=n.attr("src"),t.indexOf("http://")>-1?(i=t.indexOf("/UploadImg"),t=n.attr("src").substr(i)):t=n.attr("src")):t="",newphotosrcarray.push(t)}function selectexpirationdateTime(n){$("#"+n).datetimepicker({language:"zh",weekStart:1,todayBtn:1,autoclose:1,todayHighlight:1,startView:2,minView:2,forceParse:0,startDate:new Date,pickerPosition:"bottom-left",format:"yyyy-mm-dd"})}function selectDateReminderTime(n){$("."+n).datetimepicker({language:"zh",weekStart:1,todayBtn:1,autoclose:1,todayHighlight:1,startView:2,minView:2,forceParse:0,startDate:new Date,pickerPosition:"bottom-left",format:"yyyy-mm-dd"})}function selectPurcharesDateReminderTime(n){$("#"+n).datetimepicker({language:"zh",weekStart:1,todayBtn:1,autoclose:1,todayHighlight:1,startView:2,minView:2,forceParse:0,endDate:new Date,pickerPosition:"bottom-left",format:"yyyy-mm-dd"})}function selectBirthdayOrOrtherTime(n){$("#"+n).datetimepicker({language:"zh",weekStart:1,todayBtn:1,autoclose:1,todayHighlight:1,startView:2,minView:2,forceParse:0,pickerPosition:"bottom-left",format:"yyyy-mm-dd"})}function minusSelectDate(n,t){var i=new Date(n),r,u;return i.setDate(i.getDate()-t),r=i.getMonth()+1,u=i.getDate(),r<10&&(r="0"+r),u<10&&(u="0"+u),i.getFullYear()+"/"+r+"/"+u+" 00:00:00"}function addSelectDate(n,t){var i=new Date(n),r,u;return i.setDate(i.getDate()+t),r=i.getMonth()+1,u=i.getDate(),r<10&&(r="0"+r),u<10&&(u="0"+u),i.getFullYear()+"/"+r+"/"+u+" 00:00:00"}function minOrMaxValueFn(n,t,i){n&&(n>=t&&n<=i||layer.msg("\u5fc5\u987b\u8f93\u5165"+t+"\u5230"+i+"\u4e4b\u95f4\u7684\u6570\u5b57"))}function returnFloat(n){var n=Math.round(parseFloat(n)*100)/100,t=n.toString().split(".");return t.length==1?n.toString()+".00":t.length>1?(t[1].length<2&&(n=n.toString()+"0"),n):void 0}function commonDownloadFile(n){if(typeof Cef!="undefined")Cef.Download(n);else if(decerpbrowser&&decerpbrowser.versions&&decerpbrowser.versions.android)try{cordova.plugins.barcodeScanner.dwonloadexcel(function(){},function(){layer.msg("\u4e0b\u8f7d\u5931\u8d25\uff01")},{myPrintImg:n})}catch(t){layer.msg("\u4e0b\u8f7d\u5931\u8d25!")}else location.href=n}function closeLayerPageById(n,t){$(document).unbind("click","#"+t).on("click","#"+t,function(){layer.close(n)})}function shareCheckBoxFn(n){$(document).unbind("click",".selectcheckbox").on("click",".selectcheckbox",function(){var f=$(this).attr("data-type"),t,e,i,r,u;f=="all"?(t=$(this).is(":checked"),t?$("#"+n).find(".selectcheckbox").prop("checked",!0):$("#"+n).find(".selectcheckbox").prop("checked",!1)):(e=$(this).is(":checked"),i=$('.selectcheckbox[data-type="all"]').is(":checked"),i?$('.selectcheckbox[data-type="all"]').prop("checked",!1):(r=$(".selectcheckbox:checked").length,u=$(".selectcheckbox").length-1,r==u&&$('.selectcheckbox[data-type="all"]').prop("checked",!0)))})}function shareClearNoNum(n){n.value=n.value.replace(/[^\d.]/g,"");n.value=n.value.replace(/^\./g,"");n.value=n.value.replace(/\.{2,}/g,".");n.value=n.value.replace(".","$#$").replace(/\./g,"").replace("$#$",".");n.value=n.value.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3")}function closenewpageFn(n){$(document).on("click",n,function(){layer.close(layer.index)})}function tipsFn(){$(document).on("mouseover",".tipss",function(){var n=$(this).attr("data-content");layer.tips(n,$(this),{time:3e3,maxWidth:300,skin:"layui-layer"})})}function switchFn(){$("#onoffswitch").on("click",function(){n()});var n=function(){$("#onoffswitch").is(":checked")?console.log("\u5728ON\u7684\u72b6\u6001\u4e0b"):console.log("\u5728OFF\u7684\u72b6\u6001\u4e0b")}}function getTimeStamp(){var n=new Date,t=n.getFullYear(),i=n.getMonth(),r=n.getDate(),u=n.getHours(),f=n.getMinutes(),e=n.getSeconds();return t+""+fnW(i+1)+""+fnW(r)+""+fnW(u)+""+fnW(f)+""+fnW(e)}function nowDateTime(){var n=new Date,t=n.getFullYear(),i=n.getMonth(),r=n.getDate();return t+"-"+fnW(i+1)+"-"+fnW(r)}function fnW(n){return n>=10?n:"0"+n}function isNullOrEmpty(n){return n.trim()==null||n.trim()==""||n.trim()==undefined?!1:!0}function isNullOrWhiteSpace(n){try{return(n!=null||n!=undefined)&&(n=n.replace(/\ +/g,"")),n==null||n==""||n==undefined?!1:!0}catch(t){return!1}}function getShareSessionPermissions(){var t,i,f,u,r,n;if(_g_getShareSessionPermissions_data!=""){if(t=_g_getShareSessionPermissions_data,t!=null){_g_getShareSessionPermissions_data=t;for(i in t)if(f=i.split(","),f[0]=="SystemManage")for(u=0,r=0;r<t[i].length;r++)for(n in t[i][r])n=="PositionManage"&&t[i][r][n]!="block"&&(u=1,$("#StaffManage_").attr("data-name","employee"),$("#"+n+"_").css("display",t[i][r][n])),n=="StaffManage"&&t[i][r][n]!="block"&&u==0&&(u=1,$("#StaffManage_").attr("data-name","position"),$("#"+n+"_").css("display",t[i][r][n])),n=="OperatorsManage"&&t[i][r][n]!="block"&&u==0&&($("#StaffManage_").attr("data-name","Log_operateList"),$("#"+n+"_").css("display",t[i][r][n])),t[i][r][n]!="block"&&$("#"+n+"_").css("display",t[i][r][n])}}else $.getJson("/AjaxUser/GetSessionPermissions",null,function(n){var i,f,u,r,t;if(n!=null){_g_getShareSessionPermissions_data=n;for(i in n)if(f=i.split(","),f[0]=="SystemManage")for(u=0,r=0;r<n[i].length;r++)for(t in n[i][r])t=="PositionManage"&&n[i][r][t]!="block"&&(u=1,$("#StaffManage_").attr("data-name","employee"),$("#"+t+"_").css("display",n[i][r][t])),t=="StaffManage"&&n[i][r][t]!="block"&&u==0&&(u=1,$("#StaffManage_").attr("data-name","position"),$("#"+t+"_").css("display",n[i][r][t])),t=="OperatorsManage"&&n[i][r][t]!="block"&&u==0&&($("#StaffManage_").attr("data-name","Log_operateList"),$("#"+t+"_").css("display",n[i][r][t])),n[i][r][t]!="block"&&$("#"+t+"_").css("display",n[i][r][t])}})}function getPrintSetingInfo(){$.getJSON("/UserModuleConfig/GetUserModuleConfigList?module_code=PrintSeting",function(n){var t,i,r;if(n!=null&&(t=n.childInfolist,t!=null&&t.length>0))for(i=0;i<t.length;i++)$("#"+t[i].sv_user_config_code).attr("data-id",0).attr("data-moduleid",n.sv_user_module_id).attr("data-configid",t[i].sv_user_config_id),t[i].childDetailList&&t[i].childDetailList.length>0&&(r=t[i].childDetailList[0],r!=null?(t[i].sv_user_config_code=="PrintSet_network_enable"&&(r.sv_detail_is_enable&&$("#PrintSet_network_enable").prop("checked",!0),$("#PrintSet_network_enable").attr("data-moduleid",n.sv_user_module_id).attr("data-configid",t[i].sv_user_config_id)),$("#"+t[i].sv_user_config_code).val(r.sv_detail_value).attr("data-id",r.sv_user_configdetail_id).attr("data-moduleid",n.sv_user_module_id).attr("data-configid",t[i].sv_user_config_id),t[i].sv_user_config_code=="PrintSet_default_device"&&r.sv_detail_value!=null&&r.sv_detail_value!=""&&($("#PrintSet_default_device").html()!=null&&$("#PrintSet_default_device").html()!=""?$("#PrintSet_default_device").val(r.sv_detail_value):$("#"+t[i].sv_user_config_code).html('<option value="'+r.sv_detail_value+'">'+r.sv_detail_value+"<\/option>")),t[i].sv_user_config_code=="PrintSet_network_device"&&r.sv_detail_value!=null&&r.sv_detail_value!=""&&($("#PrintSet_network_device").html()!=null&&$("#PrintSet_network_device").html()!=""?$("#PrintSet_network_device").val(r.sv_detail_value):$("#"+t[i].sv_user_config_code).html('<option value="'+r.sv_detail_value+'">'+r.sv_detail_value+"<\/option>")),t[i].sv_user_config_code=="PrintSet_network_device_font_islabel"&&r.sv_detail_value!=null&&r.sv_detail_value!=""&&r.sv_detail_is_enable==!0&&$("#PrintSet_network_device_font_islabel").prop("checked",!0),t[i].sv_user_config_code=="PrintSet_network_device_back_islabel"&&r.sv_detail_value!=null&&r.sv_detail_value!=""&&r.sv_detail_is_enable==!0&&$("#PrintSet_network_device_back_islabel").prop("checked",!0)):(t[i].sv_user_config_code=="PrintSet_network_enable"&&$(".PrintSet_network_enable").attr("data-moduleid",n.sv_user_module_id).attr("data-configid",t[i].sv_user_config_id),$("#"+t[i].sv_user_config_code).attr("data-id",0).attr("data-moduleid",n.sv_user_module_id).attr("data-configid",t[i].sv_user_config_id)))})}function PrintSuccessionInfo(){var n,l,e,a,u,r,f,i,v,o,y,p,w;if(successionPrintModel!=null){if(n={HeaderList:[],BodyList:[],TitleList:[],FooterList:[],LogoData:null,QRCodeData:null,Action:1,PageType:1},typeof Cef!="undefined"||!0){var s={HeadDataList:[{Content:"",XCoordinates:0,YCoordinates:5,Align:1,width:188,height:48},{Content:"",XCoordinates:0,YCoordinates:76,Align:1,width:188,height:51},{Content:"0(\u4eba)",XCoordinates:49,YCoordinates:127,Align:1,width:139,height:51},{Content:"0(\u4eba)",XCoordinates:49,YCoordinates:178,Align:1,width:139,height:51}],AddMembersList:[{Content:"0\u4e2a(\u9ed8\u8ba4\u7b49\u7ea7)",XCoordinates:49,YCoordinates:229,Align:1,width:139,height:28}],BottomDataList:[{Content:"\uffe50",XCoordinates:49,YCoordinates:453,Align:1,width:61,height:28},{Content:"\uffe50",XCoordinates:49,YCoordinates:481,Align:1,width:61,height:28},{Content:"\uffe50",XCoordinates:49,YCoordinates:509,Align:1,width:61,height:28},{Content:"\uffe50",XCoordinates:49,YCoordinates:537,Align:1,width:61,height:28},{Content:"\uffe50",XCoordinates:49,YCoordinates:565,Align:1,width:61,height:28},{Content:"\uffe50",XCoordinates:49,YCoordinates:593,Align:1,width:61,height:28},{Content:"\uffe50",XCoordinates:49,YCoordinates:621,Align:1,width:61,height:28},{Content:"\uffe50",XCoordinates:49,YCoordinates:649,Align:1,width:61,height:28},{Content:"\uffe50",XCoordinates:49,YCoordinates:707,Align:1,width:139,height:28},{Content:"\uffe50",XCoordinates:49,YCoordinates:791,Align:1,width:61,height:28},{Content:"\uffe50",XCoordinates:49,YCoordinates:819,Align:1,width:61,height:28},{Content:"\uffe50",XCoordinates:49,YCoordinates:847,Align:1,width:61,height:28},{Content:"\uffe50",XCoordinates:49,YCoordinates:875,Align:1,width:61,height:28},{Content:"\uffe50",XCoordinates:93,YCoordinates:903,Align:1,width:95,height:28},{Content:"\uffe50",XCoordinates:49,YCoordinates:931,Align:1,width:61,height:28},{Content:"\uffe50",XCoordinates:49,YCoordinates:959,Align:1,width:61,height:28},{Content:"\uffe50",XCoordinates:49,YCoordinates:987,Align:1,width:61,height:28},{Content:"\uffe50",XCoordinates:49,YCoordinates:1015,Align:1,width:61,height:28},{Content:"\uffe50",XCoordinates:49,YCoordinates:1043,Align:1,width:61,height:28},{Content:"\uffe50",XCoordinates:93,YCoordinates:1071,Align:1,width:95,height:28},{Content:"0(\u6b21)",XCoordinates:93,YCoordinates:1099,Align:1,width:95,height:28},{Content:"\uffe50",XCoordinates:93,YCoordinates:1127,Align:1,width:95,height:28},{Content:"0(\u4ef6)",XCoordinates:93,YCoordinates:1155,Align:1,width:95,height:28},{Content:"\uffe50",XCoordinates:55,YCoordinates:1211,Align:1,width:133,height:28},{Content:"\uffe50",XCoordinates:93,YCoordinates:1267,Align:1,width:95,height:28},{Content:"\uffe50",XCoordinates:93,YCoordinates:1295,Align:1,width:95,height:28}],Images:[{H:"http://decerp.cc/printimages/h.jpg",M:"http://decerp.cc/printimages/1.jpg",T:"http://decerp.cc/printimages/t.jpg"}],PageType:0},t=233,h=188,c=[];if($("#username")!=null&&$("#username").text()!=null&&$("#username").text()!=""?(c.push({Content:$("#username").text(),XCoordinates:0,YCoordinates:5,Align:1,width:h,height:48}),n.HeaderList.push({Content:$("#username").text(),XCoordinates:0,YCoordinates:5,Align:1,width:h,height:48})):(c.push({Content:$("#StoreSearch").find("option:selected").text(),XCoordinates:0,YCoordinates:5,Align:1,width:h,height:48}),n.HeaderList.push({Content:$("#StoreSearch").find("option:selected").text(),XCoordinates:0,YCoordinates:5,Align:1,width:h,height:48})),l=$("#selectDate-money").val(),l+="\u81f3\r\n",l+=$("#selectDate-money2").val(),c.push({Content:l,XCoordinates:0,YCoordinates:76,Align:0,width:h,height:51}),n.HeaderList.push({Content:l,XCoordinates:0,YCoordinates:76,Align:0,width:h,height:51}),c.push({Content:successionPrintModel.individual+"\u4eba",XCoordinates:49,YCoordinates:127,Align:1,width:139,height:51}),n.HeaderList.push({Content:"......................................",Align:0}),n.HeaderList.push({Content:"\u6563\u5ba2\u6d88\u8d39\uff1a"+successionPrintModel.individual+"\u4eba",XCoordinates:49,YCoordinates:127,Align:0,width:139,height:51}),c.push({Content:successionPrintModel.userindividual+"\u4eba",XCoordinates:49,YCoordinates:178,Align:1,width:139,height:51}),n.HeaderList.push({Content:"\u4f1a\u5458\u6d88\u8d39\uff1a"+successionPrintModel.userindividual+"\u4eba",XCoordinates:49,YCoordinates:178,Align:0,width:139,height:51}),s.HeadDataList=c,e=null,successionPrintModel.live!=null&&(e=successionPrintModel.live.Count),a=[],e<=0)e=1,f={Content:"0\u4e2a()",XCoordinates:49,YCoordinates:t+11,Align:1,width:139,height:32},t=t+20,a.push(f);else if(u=successionPrintModel.live,e==1)for(r=0;r<u.length;r++)f={Content:u[r].count+"\u4e2a("+u[r].name+")",XCoordinates:49,YCoordinates:t+11,Align:1,width:139,height:32},t=t+20,a.push(f);else if(e==2)for(r=0;r<u.length;r++)f={Content:u[r].count+"\u4e2a("+u[r].name+")",XCoordinates:49,YCoordinates:r==0?t+11:t+57,Align:1,width:139,height:32},r==u.length-1&&(t=f.YCoordinates),a.push(f),n.HeaderList.push({Content:"\u65b0\u589e\uff1a,"+u[r].count+"\u4e2a("+u[r].name+")\u4f1a\u5458",XCoordinates:49,YCoordinates:178,Align:0,width:139,height:51});else for(r=0;r<u.length;r++)f={Content:u[r].count+"\u4e2a("+u[r].name+")",XCoordinates:49,YCoordinates:t+28*r,Align:1,width:139,height:32},r==u.length-1&&(t=f.YCoordinates),a.push(f),n.HeaderList.push({Content:"\u65b0\u589e\uff1a,"+u[r].count+"\u4e2a("+u[r].name+")\u4f1a\u5458",XCoordinates:49,YCoordinates:178,Align:0,width:139,height:51});s.AddMembersList=[];i=[];i.push({Content:"\u00a5"+successionPrintModel.xmoney.toFixed(2),XCoordinates:49,YCoordinates:t+28,Align:2,width:78,height:32});n.HeaderList.push({Content:"\u4f1a\u5458\u50a8\u503c\uff1a",XCoordinates:49,YCoordinates:178,Align:0,width:139,height:51});n.HeaderList.push({Content:"\u73b0\u91d1\uff08\u00a5"+successionPrintModel.xmoney.toFixed(2)+"\uff09",XCoordinates:49,YCoordinates:178,Align:2,width:139,height:51});i.push({Content:"\u00a5"+successionPrintModel.wmoney.toFixed(2),XCoordinates:49,YCoordinates:t+56,Align:2,width:78,height:32});n.HeaderList.push({Content:"\u5fae\u4fe1\uff08\u00a5"+successionPrintModel.wmoney.toFixed(2)+"\uff09",XCoordinates:49,YCoordinates:178,Align:2,width:139,height:51});i.push({Content:"\u00a5"+successionPrintModel.ymoney.toFixed(2),XCoordinates:49,YCoordinates:t+84,Align:2,width:78,height:32});n.HeaderList.push({Content:"\u94f6\u884c\u5361\uff08\u00a5"+successionPrintModel.ymoney.toFixed(2)+"\uff09",XCoordinates:49,YCoordinates:178,Align:2,width:139,height:51});i.push({Content:"\u00a5"+successionPrintModel.zmoney.toFixed(2),XCoordinates:49,YCoordinates:t+112,Align:2,width:78,height:32});n.HeaderList.push({Content:"\u652f\u4ed8\u5b9d\uff08\u00a5"+successionPrintModel.zmoney.toFixed(2)+"\uff09",XCoordinates:49,YCoordinates:178,Align:2,width:139,height:51});i.push({Content:"\u00a5"+successionPrintModel.qxmoney.toFixed(2),XCoordinates:49,YCoordinates:t+140,Align:2,width:78,height:32});n.HeaderList.push({Content:"\u5145\u6b21\u50a8\u503c",XCoordinates:49,YCoordinates:178,Align:0,width:139,height:51});n.HeaderList.push({Content:"\u73b0\u91d1\uff08\u00a5"+successionPrintModel.qxmoney.toFixed(2)+"\uff09",XCoordinates:49,YCoordinates:178,Align:2,width:139,height:51});i.push({Content:"\u00a5"+successionPrintModel.qwxmoney.toFixed(2),XCoordinates:49,YCoordinates:t+168,Align:2,width:78,height:32});n.HeaderList.push({Content:"\u5fae\u4fe1\uff08\u00a5"+successionPrintModel.qxmoney.toFixed(2)+"\uff09",XCoordinates:49,YCoordinates:178,Align:2,width:139,height:51});i.push({Content:"\u00a5"+successionPrintModel.qymoney.toFixed(2),XCoordinates:49,YCoordinates:t+196,Align:2,width:78,height:32});n.HeaderList.push({Content:"\u94f6\u884c\u5361\uff08\u00a5"+successionPrintModel.qymoney.toFixed(2)+"\uff09",XCoordinates:49,YCoordinates:178,Align:2,width:139,height:51});i.push({Content:"\u00a5"+successionPrintModel.qzmoney.toFixed(2),XCoordinates:49,YCoordinates:t+224,Align:2,width:78,height:32});n.HeaderList.push({Content:"\u652f\u4ed8\u5b9d\uff08\u00a5"+successionPrintModel.qzmoney.toFixed(2)+"\uff09",XCoordinates:49,YCoordinates:178,Align:2,width:139,height:51});i.push({Content:"\u00a5"+successionPrintModel.deposit.toFixed(2),XCoordinates:49,YCoordinates:t+196+86,Align:1,width:139,height:28});n.HeaderList.push({Content:"\u4f1a\u5458\u603b\u6536\u5165\uff1a\u00a5"+successionPrintModel.deposit.toFixed(2),XCoordinates:49,YCoordinates:178,Align:0,width:139,height:51});n.HeaderList.push({Content:"......................................",Align:0});n.HeaderList.push({Content:"\u6d88\u8d39\u6570\u636e\u7edf\u8ba1",XCoordinates:49,YCoordinates:178,Align:0,width:139,height:51});n.HeaderList.push({Content:"--\u6563\u5ba2\u6d88\u8d39",XCoordinates:49,YCoordinates:178,Align:0,width:139,height:51});i.push({Content:"\u00a5"+successionPrintModel.sxreceivable.toFixed(2),XCoordinates:49,YCoordinates:t+364+2,Align:2,width:78,height:32});n.HeaderList.push({Content:"\u73b0\u91d1\uff08\u00a5"+successionPrintModel.sxreceivable.toFixed(2)+"\uff09",XCoordinates:49,YCoordinates:178,Align:2,width:139,height:51});i.push({Content:"\u00a5"+successionPrintModel.swreceivable.toFixed(2),XCoordinates:49,YCoordinates:t+392+2,Align:2,width:78,height:32});n.HeaderList.push({Content:"\u5fae\u4fe1\uff08\u00a5"+successionPrintModel.swreceivable.toFixed(2)+"\uff09",XCoordinates:49,YCoordinates:178,Align:2,width:139,height:51});i.push({Content:"\u00a5"+successionPrintModel.syreceivable.toFixed(2),XCoordinates:49,YCoordinates:t+420+2,Align:2,width:78,height:32});n.HeaderList.push({Content:"\u94f6\u884c\u5361\uff08\u00a5"+successionPrintModel.syreceivable.toFixed(2)+"\uff09",XCoordinates:49,YCoordinates:178,Align:2,width:139,height:51});i.push({Content:"\u00a5"+successionPrintModel.szreceivable.toFixed(2),XCoordinates:49,YCoordinates:t+448+2,Align:2,width:78,height:32});n.HeaderList.push({Content:"\u652f\u4ed8\u5b9d\uff08\u00a5"+successionPrintModel.szreceivable.toFixed(2)+"\uff09",XCoordinates:49,YCoordinates:178,Align:2,width:139,height:51});i.push({Content:"\u00a5"+successionPrintModel.xk_receivable.toFixed(2),XCoordinates:93,YCoordinates:t+476+2,Align:1,width:95,height:32});n.HeaderList.push({Content:"\u6563\u5ba2\u6d88\u8d39\u603b\u989d\uff1a\u00a5"+successionPrintModel.xk_receivable.toFixed(2)+"",XCoordinates:49,YCoordinates:178,Align:0,width:139,height:51});n.HeaderList.push({Content:"--\u4f1a\u5458\u6d88\u8d39",XCoordinates:49,YCoordinates:178,Align:0,width:139,height:51});i.push({Content:"\u00a5"+successionPrintModel.xreceivable.toFixed(2),XCoordinates:49,YCoordinates:t+504+2,Align:2,width:78,height:32});n.HeaderList.push({Content:"\u73b0\u91d1\uff08\u00a5"+successionPrintModel.xreceivable.toFixed(2)+"\uff09",XCoordinates:49,YCoordinates:178,Align:2,width:139,height:51});i.push({Content:"\u00a5"+successionPrintModel.wreceivable.toFixed(2),XCoordinates:49,YCoordinates:t+532+2,Align:2,width:78,height:32});n.HeaderList.push({Content:"\u5fae\u4fe1\uff08\u00a5"+successionPrintModel.wreceivable.toFixed(2)+"\uff09",XCoordinates:49,YCoordinates:178,Align:2,width:139,height:51});i.push({Content:"\u00a5"+successionPrintModel.yreceivable.toFixed(2),XCoordinates:49,YCoordinates:t+560+2,Align:2,width:78,height:32});n.HeaderList.push({Content:"\u94f6\u884c\u5361\uff08\u00a5"+successionPrintModel.yreceivable.toFixed(2)+"\uff09",XCoordinates:49,YCoordinates:178,Align:2,width:139,height:51});i.push({Content:"\u00a5"+successionPrintModel.creceivable.toFixed(2),XCoordinates:49,YCoordinates:t+588+2,Align:2,width:78,height:32});n.HeaderList.push({Content:"\u50a8\u503c\u5361\uff08\u00a5"+successionPrintModel.creceivable.toFixed(2)+"\uff09",XCoordinates:49,YCoordinates:178,Align:2,width:139,height:51});i.push({Content:"\u00a5"+successionPrintModel.zreceivable.toFixed(2),XCoordinates:49,YCoordinates:t+616+2,Align:2,width:78,height:32});n.HeaderList.push({Content:"\u652f\u4ed8\u5b9d\uff08\u00a5"+successionPrintModel.zreceivable.toFixed(2)+"\uff09",XCoordinates:49,YCoordinates:178,Align:2,width:139,height:51});n.HeaderList.push({Content:"\u4f1a\u5458\u6d88\u8d39\u603b\u989d\uff1a\u00a5"+successionPrintModel.hy_receivable.toFixed(2)+"",XCoordinates:49,YCoordinates:178,Align:0,width:139,height:51});i.push({Content:"\u00a5"+successionPrintModel.hy_receivable.toFixed(2),XCoordinates:93,YCoordinates:t+644+2,Align:2,width:95,height:32});i.push({Content:successionPrintModel.jici+"\u6b21",XCoordinates:93,YCoordinates:t+672+2,Align:2,width:95,height:32});n.HeaderList.push({Content:"\u8ba1\u6b21\u6d88\u8d39\u603b\u6b21\uff1a"+successionPrintModel.jici+"\u6b21",XCoordinates:49,YCoordinates:178,Align:0,width:139,height:51});i.push({Content:"\u00a50.00",XCoordinates:93,YCoordinates:t+700+2,Align:2,width:95,height:32});i.push({Content:"\u00a50.00",XCoordinates:93,YCoordinates:t+728+2,Align:2,width:95,height:32});i.push({Content:"\u00a5"+(parseFloat(successionPrintModel.xk_receivable||0)+parseFloat(successionPrintModel.hy_receivable||0)+(parseFloat(successionPrintModel.xmoney||0)+parseFloat(successionPrintModel.wmoney||0)+parseFloat(successionPrintModel.ymoney||0)+parseFloat(successionPrintModel.zmoney||0)+parseFloat(successionPrintModel.qxmoney||0)+parseFloat(successionPrintModel.qwxmoney||0)+parseFloat(successionPrintModel.qymoney||0)+parseFloat(successionPrintModel.qzmoney||0))).toFixed(2),XCoordinates:55,YCoordinates:t+784+2,Align:2,width:133,height:28});n.HeaderList.push({Content:"\u7efc\u5408\u603b\u8f93\u5165\uff1a\u00a5"+(parseFloat(successionPrintModel.xk_receivable||0)+parseFloat(successionPrintModel.hy_receivable||0)+(parseFloat(successionPrintModel.xmoney||0)+parseFloat(successionPrintModel.wmoney||0)+parseFloat(successionPrintModel.ymoney||0)+parseFloat(successionPrintModel.zmoney||0)+parseFloat(successionPrintModel.qxmoney||0)+parseFloat(successionPrintModel.qwxmoney||0)+parseFloat(successionPrintModel.qymoney||0)+parseFloat(successionPrintModel.qzmoney||0))).toFixed(2),XCoordinates:49,YCoordinates:178,Align:0,width:139,height:51});i.push({Content:"\u00a5"+successionPrintModel.ase_expenditure_money.toFixed(2),XCoordinates:93,YCoordinates:t+840+2,Align:2,width:95,height:32});n.HeaderList.push({Content:"\u95e8\u5e97\u652f\u51fa\uff1a\u00a5"+successionPrintModel.ase_expenditure_money.toFixed(2),XCoordinates:49,YCoordinates:178,Align:0,width:139,height:51});v=parseFloat(successionPrintModel.xmoney||0)+parseFloat(successionPrintModel.qxmoney||0)+parseFloat(successionPrintModel.sxreceivable||0)+parseFloat(successionPrintModel.xreceivable||0);i.push({Content:"\u00a5"+v.toFixed(2),XCoordinates:93,YCoordinates:t+868+2,Align:2,width:95,height:32});n.HeaderList.push({Content:"\u73b0\u91d1\u7ed3\u5b58\uff1a\u00a5"+v.toFixed(2),XCoordinates:49,YCoordinates:178,Align:0,width:139,height:51});n.HeaderList.push({Content:"_____________________________________",Align:0});n.HeaderList.push({Content:"",Align:0});n.HeaderList.push({Content:"\u6536\u94f6\u7b7e\u5b57\uff1a",XCoordinates:49,YCoordinates:178,Align:0,width:139,height:51});n.HeaderList.push({Content:"",Align:0});n.HeaderList.push({Content:"",Align:0});n.HeaderList.push({Content:"\u5e97\u957f\u7b7e\u5b57\uff1a",XCoordinates:49,YCoordinates:178,Align:0,width:139,height:51});n.HeaderList.push({Content:"",Align:0});o=new Date;y=o.getFullYear()+"-"+o.getMonth()+"-"+o.getDay()+"  "+o.getHours()+":"+o.getMinutes()+":"+o.getSeconds();i.push({Content:"\u6253\u5370\u65f6\u95f4\uff1a\r\n"+y,XCoordinates:0,YCoordinates:t+952+2,Align:0,width:188,height:56});n.HeaderList.push({Content:"\u6253\u5370\u65f6\u95f4\uff1a"+y,XCoordinates:49,YCoordinates:178,Align:0,width:139,height:51});s.BottomDataList=i;p=[];e=1;p.push({H:"http://decerp.cc/images/printimages/h.jpg",M:"http://decerp.cc/images/printimages/"+e+".jpg",T:"http://decerp.cc/images/printimages/t.jpg"});s.PageType=0;s.Images=p;try{typeof Cef!="undefined"?Cef.MRDZDPrint(JSON.stringify(s)):decerpbrowser&&decerpbrowser.versions&&decerpbrowser.versions.android&&cordova.plugins.barcodeScanner.print(function(){},function(n){alert("\u6253\u5370\u5931\u8d25: "+n)},{myPrintData:JSON.stringify(n)})}catch(b){console.log(b.message);layer.msg("\u8bf7\u53bb\u5b98\u7f51\u4e0b\u8f7d\u6700\u65b0\u5ba2\u6237\u7aef")}}else if(decerpbrowser&&decerpbrowser.versions&&decerpbrowser.versions.android)try{cordova.plugins.barcodeScanner.print(function(){},function(n){alert("\u6253\u5370\u5931\u8d25: "+n)},{myPrintData:JSON.stringify(n)})}catch(b){}w=$.ajax({url:"/AjaxUser/LogOut",timeout:5e3,type:"post",data:{order_operator:_g_user_config.order_operator,startDate:$("#selectDate-money").val(),endDate:$("#selectDate-money2").val(),flag:"exit"},dataType:"json",success:function(){location.href=_g_is_distributor_customer||verify_distributor_id==100?"/Dealerlogin.html":"/login.html"},complete:function(n,t){t=="timeout"&&(w.abort(),layer.msg("\u4ea4\u63a5\u73ed\u8bf7\u6c42\u8d85\u65f6"),preventTheRepeatClick=!0)}})}}function employeeHandover(){$("#begindate2").datetimepicker({language:"zh",weekStart:1,todayBtn:1,autoclose:1,todayHighlight:1,startView:2,forceParse:0,endDate:new Date,pickerPosition:"bottom-left"}).on("change",function(){var n=$("#begindateval2").val();$("#enddate").datetimepicker("setStartDate",n);$("#begindate2").datetimepicker("hide")});$("#enddate2").datetimepicker({language:"zh",weekStart:1,todayBtn:1,autoclose:1,todayHighlight:1,startView:2,forceParse:0,startDate:$("#begindateval2").val(),endDate:new Date,pickerPosition:"bottom-left"}).on("change",function(){var n=$("#enddateval2").val();$("#begindate2").datetimepicker("setReturnDate",n);$("#enddate2").datetimepicker("hide")});SuccessionMethods("","")}function SuccessionMethods(n,t){var i=commonOpenLoading();$.getJSON("/intelligent/Succession",{order_operator:_g_user_config.order_operator,startDate:n,endDate:t},function(n){if(commonCloseLoading(i),n!=null){successionPrintModel=n;$("#Succession_individual").html(n.individual);$("#Succession_userindividual").html(n.userindividual);$("#Succession_xreceivable").html(n.xreceivable);$("#Succession_wreceivable").html(n.wreceivable);$("#Succession_yreceivable").html(n.yreceivable);$("#Succession_creceivable").html(n.creceivable);$("#Succession_zreceivable").html(n.zreceivable);$("#Succession_mreceivable").html(n.mreceivable);$("#Succession_kreceivable").html(n.kreceivable);$("#Succession_sreceivable").html(n.sreceivable);$("#Succession_sszreceivable").html(n.sszreceivable);$("#Succession_hy_receivable").html(n.hy_receivable);$("#Succession_sxreceivable").html(n.sxreceivable);$("#Succession_swreceivable").html(n.swreceivable);$("#Succession_syreceivable").html(n.syreceivable);$("#Succession_szreceivable").html(n.szreceivable);$("#Succession_smreceivable").html(n.smreceivable);$("#Succession_skreceivable").html(n.skreceivable);$("#Succession_ssreceivable").html(n.ssreceivable);$("#Succession_xk_receivable").html(n.xk_receivable);$("#Succession_jici").html(n.jici);var t=n.xk_receivable+(n.xmoney+n.wmoney+n.ymoney+n.zmoney+n.qxmoney+n.qwxmoney+n.qymoney+n.qzmoney+n.xreceivable+n.wreceivable+n.yreceivable+n.zreceivable);$("#Succession_totalRevenue").html(t);$("#successionStartTime").html(n.startTime);$("#successionEndTime").html(n.endTime);$("#selectDate-money").val(n.startTime);$("#selectDate-money2").val(n.endTime)}})}function checkVersionPower2(n,t){var i,r;if(_noversionPower!=null&&typeof _noversionPower!="undefined")for(i in _noversionPower){if(_noversionPower[i].sv_func_id==$(n).attr("sv_func_id")&&_noversionPower[i].sv_funccontroltype==0)return t.preventDefault(),"needControl";if(_noversionPower[i].sv_func_id==$(n).attr("sv_func_id")&&_noversionPower[i].sv_funccontroltype==1)return t.preventDefault(),r="/Home/paylinkage_N3?version=1&distributor=1&gobackpage=/system/Index_N3&sv_freeversioncontroltype="+_noversionPower[i].sv_funccontroltype,window.location.href=r,console.log(r),!1}return!0}function freeVersionShowMsg(n){$("#CheckVersionChain").hide();$("#promptremark").text("\u5c0a\u656c\u7684\u7528\u6237\uff0c\u8be5\u529f\u80fd\u4e3a\u4ed8\u8d39\u529f\u80fd\uff0c\u76ee\u524d\u53ef\u4ee5\u514d\u8d39\u8bd5\u7528\uff0c\u5982\u9700\u957f\u671f\u4f7f\u7528\uff0c\u8bf7\u5347\u7ea7\u7248\u672c\u5230\u201c\u9ad8\u7ea7\u7248\u201d\u6216\u201c\u9ad8\u7ea7\u7248\u201d\u4ee5\u4e0a\u7684\u7248\u672c\uff01");$("#CheckVersion").text("\u7acb\u5373\u8d2d\u4e70");$("#CheckVersion").style="color:#10a6e1";$("#CheckVersion").attr("href","/home/VersionList_N3");$("#GoBack").hide();$(".layui-layer-ico").click(function(){window.location.href=n})}function checkVersionPower(n){$.get("/PermissionsVerify/CheckFreeUserPower?sv_func_id="+$(n).attr("sv_func_id")).done(function(n){n&&isNullOrWhiteSpace(n)&&(getQueryString(n,"sv_freeversioncontroltype")==0?layerpage.Deke_layerpage.getpage2("1","\u5f53\u524d\u7248\u672c\u4e3a\u201c\u514d\u8d39\u7248\u201d","/html/PermissionsPrompt.html?v=15",["400px","190px"],freeVersionShowMsg):window.location.href=n)}).fail(function(){console.log("\u7cfb\u7edf\u7ba1\u7406\u6a21\u5757\u884c\u4e1a\u7279\u6027\u6743\u9650\u51fa\u9519\uff01")})}function getCartListFn(n){$.get("http://api.decerp.cc/api/HardwareStore/GetCartList?sv_shop_user_id="+n,function(n){var t;if(n!=null&&n!=undefined&&n!=""&&n.list){var i=n.list,r="",u="",o=0;for(t=0;t<i.length;t++){var s=i[t].sv_p_images2!=null&&i[t].sv_p_images2!=""?_g_res_images_url+i[t].sv_p_images2:"/images/omg1.jpg",h=isNullOrEmpty(i[t].sv_move_p_name)?i[t].sv_move_p_name:i[t].sv_p_name,f=i[t].sv_p_memberprice>0?i[t].sv_p_memberprice:i[t].sv_p_unitprice,e=parseInt(i[t].sv_shopp_num),c=parseInt(i[t].sv_p_storage);r+="<li>";r+='<input type="checkbox" data-productId="'+i[t].product_id+'" data-id="'+i[t].sv_cart_id+'" id="'+i[t].sv_cart_id+'" name="'+i[t].sv_cart_id+'" class="checkinput hardwarelistcheck" value="" />';r+='<div class="imgbox">';r+='<a href="/home/HardwareInfo_N3?id='+i[t].product_id+'"><img class="img" src="'+s+'" alt="" /><\/a>';r+="<\/div>";r+='<div class="thishardwareinfo">';r+="<p>"+h+"<\/p>";r+='<p><span class="colorff">\u00a5'+returnFloat(f)+'<\/span><span class="fr">X'+e+"<\/span><\/p>";r+="<\/div>";r+="<\/li>";u+='<tr class="listtr" data-id="'+i[t].product_id+'">';u+='<td><input style="display:none;" data-cartId="'+i[t].sv_cart_id+'" class="checkinput" checked="checked" type="checkbox" name="checkedHardware" data-id="'+i[t].product_id+'" id="" value="" /><\/td>';u+='<td><div class="imgbox"><a href="/home/HardwareInfo_N3?id='+i[t].product_id+'"><img class="hardwareimg" src="'+s+'" /><\/a><\/div><\/td>';u+="<td>"+h+"<\/td>";u+='<td class="colorff">\u00a5'+parseFloat(f||0).toFixed(2)+'<input type="hidden" id="unitprice_'+i[t].product_id+'" value="'+f+'" /><\/td>';u+='<td><div class="hardwareoperating"><button data-cartId="'+i[t].sv_cart_id+'" type="button" data-id="'+i[t].product_id+'" class="btn icon-minus cutOrderHardwareCounts"><\/button><input type="text" id="nowprice_'+i[t].product_id+'" value="'+e+'" disabled="disabled" class="form-control hardwareCountInput numbertext" /><button data-cartId="'+i[t].sv_cart_id+'" data-id="'+i[t].product_id+'" type="button" class="btn addOrderHardwareCounts icon-plus"><\/button><\/div><\/td>';u+='<td class="colorff" id="totalPrice_'+i[t].product_id+'">\u00a5'+parseFloat(e*f).toFixed(2)+"<\/td>";u+='<td data-cartId="'+i[t].sv_cart_id+'" style="cursor: pointer;" class="deleteCartHardware">\u5220\u9664<\/td>';u+="<\/tr>";o+=e}$("#cartHtml").html(r);$("#cartMoney").text("\u00a5"+n.total);$("#orderListHtml").html(u);$("#orderMoney").text(parseFloat(n.total).toFixed(2));$("#hardwareCounts").text(o);$("#hardwareCountsInput").text(o)}})}function isRealNum(n){return n===""||n==null?!1:isNaN(n)?!1:!0}var decerpbrowser,loggin,_g_getMessageBoxFalg,sidebarleft,header_move_nav,nav_content,count,memberlistnav,memberlistnavnew,productlistnav,newphotosrcarray,footernavhtml,_g_getShareSessionPermissions_data,successionPrintModel,preventTheRepeatClick,system;!function(n){function at(){var n=document.currentScript,t;return n||(t=document.scripts,n=t[t.length-1]),n}function y(n,t,i){var r=n[t];n[t]=i(r)}function p(n){return"function"!=typeof n?n:(n.__injected__||(n.__injected__=function(){try{return n.apply(this,arguments)}catch(n){throw pt(n),s=!0,n;}}),n.__injected__)}function w(t){if(!t)return null;var i={};return n.XMLHttpRequest?i={name:t.name,message:t.message,fileName:t.fileName||t.sourceURL,lineNumber:t.lineNumber||t.line,columnNumber:t.columnNumber||t.column}:i.message=t.message,i}function vt(){var n;try{throw new Error("");}catch(t){n=t.stack}if(n)return n=n.replace(/(.*?)fundebug(.*?)\.js(.*)\n?/gm,""),n=n.replace(/^Error\n/g,""),n="generated-stack:\n"+n}function yt(){for(var r,i,t=[],n=arguments.callee.caller.caller;n&&t.length<10;)i=n.toString().match(/function\s*([\w\_$]+)?\s*\(/i),r=i&&i[1]||"[anonymous]",t.push(r),n=n.caller;return"generated-stack:\n"+t.join("\n")}function pt(n){var i,t;n&&(i=n.stack,i=i.replace(/(.*?)fundebug(.*?)\.js(.*)\n?/gm,""),t=w(n),e({name:t.name||"uncaught error",message:t.message,fileName:t.fileName,lineNumber:t.lineNumber,columnNumber:t.columnNumber,stacktrace:i,severity:"error",type:"uncaught"}))}function wt(i){var r,u,f,o;t.silentResource||i.message||(r=i.target?i.target:i.srcElement,u=r&&r.outerHTML,u&&u.length>200&&(u=u.slice(0,200)),f={type:"resourceError",target:{outerHTML:u,src:r&&r.src,tagName:r&&r.tagName,id:r&&r.id,className:r&&r.className,name:r&&r.name,type:r&&r.type,XPath:bt(r),selector:kt(r),timeStamp:i.timeStamp}},r.src!==n.location.href&&(!r.src||!r.src.match(/.*\/(.*)$/)||r.src.match(/.*\/(.*)$/)[1])&&f.target.src&&n.XMLHttpRequest&&(o=new XMLHttpRequest,o.Fundebug=!0,o.open("HEAD",f.target.src),o.send(),o.onload=function(n){200!==n.target.status&&(f.target.status=n.target.status,f.target.statusText=n.target.statusText);e(f)}))}function bt(n){for(var t,r,u,f,e,i=[];n&&n.nodeType==Node.ELEMENT_NODE;n=n.parentNode){for(r=0,u=!1,t=n.previousSibling;t;t=t.previousSibling)t.nodeType!=Node.DOCUMENT_TYPE_NODE&&t.nodeName==n.nodeName&&++r;for(t=n.nextSibling;t&&!u;t=t.nextSibling)t.nodeName==n.nodeName&&(u=!0);f=(n.prefix?n.prefix+":":"")+n.localName;e=r||u?"["+(r+1)+"]":"";i.splice(0,0,f+e)}return i.length?"/"+i.join("/"):null}function kt(n){for(var r,i,t=[];n.parentNode;){if(n.id){t.unshift("#"+n.id);break}if(n==n.ownerDocument.documentElement)t.unshift(n.tagName);else{for(r=1,i=n;i.previousElementSibling;i=i.previousElementSibling,r++);t.unshift(n.tagName+":nth-child("+r+")")}n=n.parentNode}return t.join(" > ")}function f(n){c.push(n);c.length>20&&c.shift()}function rt(t){var i,r;i=t.target?t.target:t.srcElement;r=i&&i.outerHTML;r&&r.length>200&&(r=r.slice(0,200));f({type:"click",page:{url:n.location.href,title:document.title},detail:{outerHTML:r,tagName:i&&i.tagName,id:i&&i.id,className:i&&i.className,name:i&&i.name},time:(new Date).getTime()})}function b(n,t){i=t;f({type:"navigation",detail:{from:n,to:t},time:(new Date).getTime()})}function dt(t){var i=console[t];console[t]=function(){if(f({type:"console",page:{url:n.location.href,title:document.title},detail:{level:t,arguments:Array.prototype.slice.apply(arguments).join(" ")},time:(new Date).getTime()}),"function"==typeof i)if(i.apply)i.apply(console,arguments);else{var r=Array.prototype.slice.apply(arguments).join(" ");i(r)}}}function ut(n){return!t.silentHttp&&(0!==n.detail.status||!/^file:\/\/\//.test(n.detail.url))&&2!==parseInt(n.detail.status/100)}function e(i){if(t.maxEventNumber&&!t.silent){t.maxEventNumber-=1;var u={notifierVersion:"deke1225",userAgent:n.navigator.userAgent,locale:n.navigator.language||n.navigator.userLanguage,url:n.location.href,title:document.title,appVersion:r.getAttribute("appversion")||t.appversion,apiKey:r.getAttribute("apikey")||t.apikey,releaseStage:r.getAttribute("releasestage")||t.releasestage,metaData:i.metaData||t.metaData,user:i.user||t.user,name:i.name,time:(new Date).getTime(),message:i.message,fileName:i.fileName,lineNumber:i.lineNumber,columnNumber:i.columnNumber,stacktrace:i.stacktrace,type:i.type,severity:i.severity,target:i.target,req:i.req,res:i.res,user_id:user_id};u.userAgent&&u.userAgent.match(/Googlebot/)||gt(u)||ti(u)}}function gt(n){var i=t.filters,r;if(!i||!i.length)return!1;for(r=0;r<i.length;r++)if(ft(n,i[r]))return!0;return!1}function ft(n,t){if(!n||Object.keys&&!Object.keys(t).length)return!1;for(var i in t)if(t.hasOwnProperty(i))if(t[i].constructor===RegExp){if(!t[i].test(n[i]))return!1}else if(t[i].constructor!==Object||!ft(n[i],t[i]))return!1;return!0}function o(n){var f,r,e,u,i,t;if("undefined"!=typeof JSON)return JSON.stringify(n);if(n instanceof Array){for(f=[],r=0;r<n.length;r++)f.push(o(n[r]));return"["+f.join(",")+"]"}e=[];for(u in n)n.hasOwnProperty(u)&&(i='"'+u+'":',t=n[u],t&&("object"==typeof t?i+=o(t):"number"==typeof t?i+=t:i=i+'"'+t.replace(/\n/g,"\\n")+'"',e.push(i)));return"{"+e.join(",")+"}"}function ni(n){var t;try{t=o(n)}catch(i){delete n.metaData;try{t=o(n)}catch(n){return}}return t}function ti(t){var r=ni(t),u=t.target,f="",e,i;u&&u!=undefined&&t.target.tagName!=undefined&&t.target.tagName=="IMG"&&(f=t.target.tagName);r&&(e=et,n.XMLHttpRequest&&n.atob&&f!="IMG"&&(i=new XMLHttpRequest,i.Fundebug=!0,i.open("POST",e),i.setRequestHeader("Content-Type","application/json"),i.send(r)))}var et="http://testing2.mispos.cc/api/WebLog/LogError",t={},s,r,h,c,i,k,d,g,nt,l,a,u,tt,v,it,ot,st,ht,ct,lt;if(n.fundebug=t,s=!1,r=at(),t.silent=r.getAttribute("silent")||!1,t.maxEventNumber=r.getAttribute("maxEventNumber")||10,t.silentResource=r.getAttribute("silentResource")||!1,t.silentHttp=r.getAttribute("silentHttp")||!1,y(n,"onerror",function(){return function(t,i,r,u,f){var h,o;return s?void(s=!1):(void 0===u&&n.event&&(u=n.event.errorCharacter),h=i&&i!==n.location.href?i:null,o=w(f),e({message:t,lineNumber:r,columnNumber:u,fileName:h||o&&o.fileName,name:o&&o.name||"uncaught error",stacktrace:f&&f.stack||yt(),severity:"error",type:"uncaught"}),!1)}}),h=!0,n.atob){if(n.ErrorEvent)try{n.ErrorEvent.prototype.hasOwnProperty("error")&&(h=!1)}catch(n){}}else h=!1;for("EventTarget Window Node ApplicationCache AudioTrackList ChannelMergerNode CryptoOperation EventSource FileReader HTMLUnknownElement IDBDatabase IDBRequest IDBTransaction KeyOperation MediaController MessagePort ModalWindow Notification SVGElementInstance Screen TextTrack TextTrackCue TextTrackList WebSocket WebSocketWorker Worker XMLHttpRequest XMLHttpRequestEventTarget XMLHttpRequestUpload".replace(/\w+/g,function(t){if(h){var i=n[t]&&n[t].prototype;i&&i.hasOwnProperty&&i.hasOwnProperty("addEventListener")&&(y(i,"addEventListener",function(n){return function(t,i,r,u){return i&&i.handleEvent&&(i.handleEvent=p(i.handleEvent)),n.call(this,t,p(i),r,u)}}),y(i,"removeEventListener",function(n){return function(t,i,r){return n.call(this,t,i,r),n.call(this,t,p(i),r)}}))}}),t.notify=function(n,i,u){if(n){var f={name:n||u&&u.name,message:i||u&&u.message,severity:u&&u.message||"warning",stacktrace:vt(),type:"notification",user:u&&u.user,metaData:u&&u.metaData},e=r.getAttribute("apikey")||t.apikey;return!0}},t.notifyError=function(t,i){if(t){n.console&&console.error(t);var r=w(t);e({name:r.name||i&&i.name||"caught error",message:r.message||i&&i.message,stacktrace:t.stack,fileName:r.fileName,lineNumber:r.lineNumber,columnNumber:r.columnNumber,severity:i&&i.severity||"error",type:"caught",user:i&&i.user,metaData:i&&i.metaData})}},t.notifyHttpError=function(n,t,i){e({type:"httpError",req:n,res:t,user:i&&i.user,metaData:i&&i.metaData})},n.addEventListener&&n.addEventListener("unhandledrejection",function(n){t.notifyError(n.reason)}),n.addEventListener&&n.addEventListener("error",wt,!0),c=[],n.addEventListener?n.addEventListener("click",rt,!0):document.attachEvent("onclick",rt),i={url:n.location.href},document.addEventListener?document.addEventListener("DOMContentLoaded",function(){i={url:n.location.href,title:document.title}}):document.attachEvent("onreadystatechange",function(){i={url:n.location.href,title:document.title}}),k=n.onpopstate,n.onpopstate=function(){var t={url:n.location.href};if(i.title||(i.title=document.title),i.url!==t.url&&b(i,t),k)return k.apply(this,arguments)},d=n.history.pushState,n.history.pushState=function(){i={url:n.location.href,title:document.title};var t={};if(3===arguments.length&&(t.url=arguments[2]),i.url!==t.url&&b(i,t),d)return d.apply(this,arguments)},g=n.onhashchange,n.onhashchange=function(){var t={url:n.location.href,title:document.title};if(i.url!==t.url&&b(i,t),g)return g.apply(this,arguments)},nt=["log","warn","error","debug","info"],l=0;l<nt.length;l++)n.console&&dt(nt[l]);if(a=!1,n.XMLHttpRequest){if(u=XMLHttpRequest.prototype,!u)return;ot=u.open;u.open=function(n,i){tt=n;v=i;it=(new Date).getTime();try{ot.apply(this,arguments)}catch(n){a=!0;t.notifyError(n,{metaData:{description:"XMLHttpRequest\u8bf7\u6c42\u5931\u8d25(\u5982\u679c\u662f\u62d2\u7edd\u8bbf\u95ee\uff0c\u5219\u662f\u7531\u4e8e\u6d4f\u89c8\u5668\u8de8\u57df\u9650\u5236)",method:tt,httpUrl:v}})}};st=u.send;u.send=function(){if(a)return void(a=!1);var i=this,r=i.onreadystatechange;i.onreadystatechange=function(){var e,u,o,s;4!==i.readyState||i.Fundebug||v==et||(e=(new Date).getTime()-it,u={type:"XMLHttpRequest",page:{url:n.location.href},detail:{method:tt,url:i.responseURL||v,status:i.status,statusText:i.statusText},elapsedTime:e,time:it},ut(u)&&(o={method:u.detail.method,url:u.detail.url},s={status:i.status,statusText:i.statusText,response:i.response,elapsedTime:e},t.notifyHttpError(o,s)),f(u));r&&r.apply(this,arguments)};st.apply(this,arguments)}}n.fetch&&(ht=n.fetch,n.fetch=function(i,r){var u=(new Date).getTime();return ht.apply(this,arguments).then(function(i){var o=(new Date).getTime()-u,e={type:"fetch",page:{url:n.location.href,title:document.title},detail:{method:r&&r.method||"GET",url:i.url,status:i.status,statusText:i.statusText},elapsedTime:o,time:u},s,h;return ut(e)&&(s={method:e.detail.method,url:e.detail.url},h={status:i.status,statusText:i.statusText,elapsedTime:o},t.notifyHttpError(s,h)),f(e),i})});ct="function"==typeof define;lt="undefined"!=typeof module&&module.exports;ct?define(t):lt&&(module.exports=t)}(window);
/*! jQuery v1.9.1 | (c) 2005, 2012 jQuery Foundation, Inc. | jquery.org/license
//@ sourceMappingURL=jquery.min.map
*/
(function(n,t){function dt(n){var t=n.length,r=i.type(n);return i.isWindow(n)?!1:1===n.nodeType&&t?!0:"array"===r||"function"!==r&&(0===t||"number"==typeof t&&t>0&&t-1 in n)}function kf(n){var t=gt[n]={};return i.each(n.match(s)||[],function(n,i){t[i]=!0}),t}function ir(n,r,u,f){if(i.acceptData(n)){var s,h,c=i.expando,a="string"==typeof r,l=n.nodeType,o=l?i.cache:n,e=l?n[c]:n[c]&&c;if(e&&o[e]&&(f||o[e].data)||!a||u!==t)return e||(l?n[c]=e=b.pop()||i.guid++:e=c),o[e]||(o[e]={},l||(o[e].toJSON=i.noop)),("object"==typeof r||"function"==typeof r)&&(f?o[e]=i.extend(o[e],r):o[e].data=i.extend(o[e].data,r)),s=o[e],f||(s.data||(s.data={}),s=s.data),u!==t&&(s[i.camelCase(r)]=u),a?(h=s[r],null==h&&(h=s[i.camelCase(r)])):h=s,h}}function rr(n,t,r){if(i.acceptData(n)){var o,h,e,s=n.nodeType,u=s?i.cache:n,f=s?n[i.expando]:i.expando;if(u[f]){if(t&&(e=r?u[f]:u[f].data)){for(i.isArray(t)?t=t.concat(i.map(t,i.camelCase)):(t in e)?t=[t]:(t=i.camelCase(t),t=(t in e)?[t]:t.split(" ")),o=0,h=t.length;h>o;o++)delete e[t[o]];if(!(r?ni:i.isEmptyObject)(e))return}(r||(delete u[f].data,ni(u[f])))&&(s?i.cleanData([n],!0):i.support.deleteExpando||u!=u.window?delete u[f]:u[f]=null)}}}function ur(n,r,u){if(u===t&&1===n.nodeType){var f="data-"+r.replace(tr,"-$1").toLowerCase();if(u=n.getAttribute(f),"string"==typeof u){try{u="true"===u?!0:"false"===u?!1:"null"===u?null:+u+""===u?+u:nr.test(u)?i.parseJSON(u):u}catch(e){}i.data(n,r,u)}else u=t}return u}function ni(n){for(var t in n)if(("data"!==t||!i.isEmptyObject(n[t]))&&"toJSON"!==t)return!1;return!0}function ht(){return!0}function d(){return!1}function cr(n,t){do n=n[t];while(n&&1!==n.nodeType);return n}function lr(n,t,r){if(t=t||0,i.isFunction(t))return i.grep(n,function(n,i){var u=!!t.call(n,i,n);return u===r});if(t.nodeType)return i.grep(n,function(n){return n===t===r});if("string"==typeof t){var u=i.grep(n,function(n){return 1===n.nodeType});if(fe.test(t))return i.filter(t,u,!r);t=i.filter(t,u)}return i.grep(n,function(n){return i.inArray(n,t)>=0===r})}function ar(n){var i=vr.split("|"),t=n.createDocumentFragment();if(t.createElement)while(i.length)t.createElement(i.pop());return t}function ye(n,t){return n.getElementsByTagName(t)[0]||n.appendChild(n.ownerDocument.createElement(t))}function dr(n){var t=n.getAttributeNode("type");return n.type=(t&&t.specified)+"/"+n.type,n}function gr(n){var t=le.exec(n.type);return t?n.type=t[1]:n.removeAttribute("type"),n}function si(n,t){for(var u,r=0;null!=(u=n[r]);r++)i._data(u,"globalEval",!t||i._data(t[r],"globalEval"))}function nu(n,t){if(1===t.nodeType&&i.hasData(n)){var u,f,o,s=i._data(n),r=i._data(t,s),e=s.events;if(e){delete r.handle;r.events={};for(u in e)for(f=0,o=e[u].length;o>f;f++)i.event.add(t,u,e[u][f])}r.data&&(r.data=i.extend({},r.data))}}function pe(n,t){var r,f,u;if(1===t.nodeType){if(r=t.nodeName.toLowerCase(),!i.support.noCloneEvent&&t[i.expando]){u=i._data(t);for(f in u.events)i.removeEvent(t,f,u.handle);t.removeAttribute(i.expando)}"script"===r&&t.text!==n.text?(dr(t).text=n.text,gr(t)):"object"===r?(t.parentNode&&(t.outerHTML=n.outerHTML),i.support.html5Clone&&n.innerHTML&&!i.trim(t.innerHTML)&&(t.innerHTML=n.innerHTML)):"input"===r&&ei.test(n.type)?(t.defaultChecked=t.checked=n.checked,t.value!==n.value&&(t.value=n.value)):"option"===r?t.defaultSelected=t.selected=n.defaultSelected:("input"===r||"textarea"===r)&&(t.defaultValue=n.defaultValue)}}function u(n,r){var s,e,h=0,f=typeof n.getElementsByTagName!==o?n.getElementsByTagName(r||"*"):typeof n.querySelectorAll!==o?n.querySelectorAll(r||"*"):t;if(!f)for(f=[],s=n.childNodes||n;null!=(e=s[h]);h++)!r||i.nodeName(e,r)?f.push(e):i.merge(f,u(e,r));return r===t||r&&i.nodeName(n,r)?i.merge([n],f):f}function we(n){ei.test(n.type)&&(n.defaultChecked=n.checked)}function fu(n,t){if(t in n)return t;for(var r=t.charAt(0).toUpperCase()+t.slice(1),u=t,i=uu.length;i--;)if(t=uu[i]+r,t in n)return t;return u}function ut(n,t){return n=t||n,"none"===i.css(n,"display")||!i.contains(n.ownerDocument,n)}function eu(n,t){for(var f,r,o,e=[],u=0,s=n.length;s>u;u++)r=n[u],r.style&&(e[u]=i._data(r,"olddisplay"),f=r.style.display,t?(e[u]||"none"!==f||(r.style.display=""),""===r.style.display&&ut(r)&&(e[u]=i._data(r,"olddisplay",cu(r.nodeName)))):e[u]||(o=ut(r),(f&&"none"!==f||!o)&&i._data(r,"olddisplay",o?f:i.css(r,"display"))));for(u=0;s>u;u++)r=n[u],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?e[u]||"":"none"));return n}function ou(n,t,i){var r=ge.exec(t);return r?Math.max(0,r[1]-(i||0))+(r[2]||"px"):t}function su(n,t,r,u,f){for(var e=r===(u?"border":"content")?4:"width"===t?1:0,o=0;4>e;e+=2)"margin"===r&&(o+=i.css(n,r+p[e],!0,f)),u?("content"===r&&(o-=i.css(n,"padding"+p[e],!0,f)),"margin"!==r&&(o-=i.css(n,"border"+p[e]+"Width",!0,f))):(o+=i.css(n,"padding"+p[e],!0,f),"padding"!==r&&(o+=i.css(n,"border"+p[e]+"Width",!0,f)));return o}function hu(n,t,r){var e=!0,u="width"===t?n.offsetWidth:n.offsetHeight,f=v(n),o=i.support.boxSizing&&"border-box"===i.css(n,"boxSizing",!1,f);if(0>=u||null==u){if(u=y(n,t,f),(0>u||null==u)&&(u=n.style[t]),ct.test(u))return u;e=o&&(i.support.boxSizingReliable||u===n.style[t]);u=parseFloat(u)||0}return u+su(n,t,r||(o?"border":"content"),e,f)+"px"}function cu(n){var u=r,t=iu[n];return t||(t=lu(n,u),"none"!==t&&t||(rt=(rt||i("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(u.documentElement),u=(rt[0].contentWindow||rt[0].contentDocument).document,u.write("<!doctype html><html><body>"),u.close(),t=lu(n,u),rt.detach()),iu[n]=t),t}function lu(n,t){var r=i(t.createElement(n)).appendTo(t.body),u=i.css(r[0],"display");return r.remove(),u}function ci(n,t,r,u){var f;if(i.isArray(t))i.each(t,function(t,i){r||ro.test(n)?u(n,i):ci(n+"["+("object"==typeof i?t:"")+"]",i,r,u)});else if(r||"object"!==i.type(t))u(n,t);else for(f in t)ci(n+"["+f+"]",t[f],r,u)}function ku(n){return function(t,r){"string"!=typeof t&&(r=t,t="*");var u,f=0,e=t.toLowerCase().match(s)||[];if(i.isFunction(r))while(u=e[f++])"+"===u[0]?(u=u.slice(1)||"*",(n[u]=n[u]||[]).unshift(r)):(n[u]=n[u]||[]).push(r)}}function du(n,r,u,f){function o(h){var c;return e[h]=!0,i.each(n[h]||[],function(n,i){var h=i(r,u,f);return"string"!=typeof h||s||e[h]?s?!(c=h):t:(r.dataTypes.unshift(h),o(h),!1)}),c}var e={},s=n===vi;return o(r.dataTypes[0])||!e["*"]&&o("*")}function yi(n,r){var f,u,e=i.ajaxSettings.flatOptions||{};for(u in r)r[u]!==t&&((e[u]?n:f||(f={}))[u]=r[u]);return f&&i.extend(!0,n,f),n}function co(n,i,r){var s,o,e,u,h=n.contents,f=n.dataTypes,c=n.responseFields;for(u in c)u in r&&(i[c[u]]=r[u]);while("*"===f[0])f.shift(),o===t&&(o=n.mimeType||i.getResponseHeader("Content-Type"));if(o)for(u in h)if(h[u]&&h[u].test(o)){f.unshift(u);break}if(f[0]in r)e=f[0];else{for(u in r){if(!f[0]||n.converters[u+" "+f[0]]){e=u;break}s||(s=u)}e=e||s}return e?(e!==f[0]&&f.unshift(e),r[e]):t}function lo(n,t){var o,r,i,e,u={},h=0,s=n.dataTypes.slice(),f=s[0];if(n.dataFilter&&(t=n.dataFilter(t,n.dataType)),s[1])for(i in n.converters)u[i.toLowerCase()]=n.converters[i];for(;r=s[++h];)if("*"!==r){if("*"!==f&&f!==r){if(i=u[f+" "+r]||u["* "+r],!i)for(o in u)if(e=o.split(" "),e[1]===r&&(i=u[f+" "+e[0]]||u["* "+e[0]])){i===!0?i=u[o]:u[o]!==!0&&(r=e[0],s.splice(h--,0,r));break}if(i!==!0)if(i&&n.throws)t=i(t);else try{t=i(t)}catch(c){return{state:"parsererror",error:i?c:"No conversion from "+f+" to "+r}}}f=r}return{state:"success",data:t}}function nf(){try{return new n.XMLHttpRequest}catch(t){}}function ao(){try{return new n.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function tf(){return setTimeout(function(){tt=t}),tt=i.now()}function wo(n,t){i.each(t,function(t,i){for(var u=(ft[t]||[]).concat(ft["*"]),r=0,f=u.length;f>r;r++)if(u[r].call(n,t,i))return})}function rf(n,t,r){var h,e,o=0,l=yt.length,f=i.Deferred().always(function(){delete c.elem}),c=function(){if(e)return!1;for(var s=tt||tf(),t=Math.max(0,u.startTime+u.duration-s),h=t/u.duration||0,i=1-h,r=0,o=u.tweens.length;o>r;r++)u.tweens[r].run(i);return f.notifyWith(n,[u,i,t]),1>i&&o?t:(f.resolveWith(n,[u]),!1)},u=f.promise({elem:n,props:i.extend({},t),opts:i.extend(!0,{specialEasing:{}},r),originalProperties:t,originalOptions:r,startTime:tt||tf(),duration:r.duration,tweens:[],createTween:function(t,r){var f=i.Tween(n,u.opts,t,r,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(f),f},stop:function(t){var i=0,r=t?u.tweens.length:0;if(e)return this;for(e=!0;r>i;i++)u.tweens[i].run(1);return t?f.resolveWith(n,[u,t]):f.rejectWith(n,[u,t]),this}}),s=u.props;for(bo(s,u.opts.specialEasing);l>o;o++)if(h=yt[o].call(u,n,s,u.opts))return h;return wo(u,s),i.isFunction(u.opts.start)&&u.opts.start.call(n,u),i.fx.timer(i.extend(c,{elem:n,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function bo(n,t){var u,f,r,e,o;for(r in n)if(f=i.camelCase(r),e=t[f],u=n[r],i.isArray(u)&&(e=u[1],u=n[r]=u[0]),r!==f&&(n[f]=u,delete n[r]),o=i.cssHooks[f],o&&"expand"in o){u=o.expand(u);delete n[f];for(r in u)r in n||(n[r]=u[r],t[r]=e)}else t[f]=e}function ko(n,t,r){var u,o,w,a,s,v,l,f,b,h=this,e=n.style,y={},p=[],c=n.nodeType&&ut(n);r.queue||(f=i._queueHooks(n,"fx"),null==f.unqueued&&(f.unqueued=0,b=f.empty.fire,f.empty.fire=function(){f.unqueued||b()}),f.unqueued++,h.always(function(){h.always(function(){f.unqueued--;i.queue(n,"fx").length||f.empty.fire()})}));1===n.nodeType&&("height"in t||"width"in t)&&(r.overflow=[e.overflow,e.overflowX,e.overflowY],"inline"===i.css(n,"display")&&"none"===i.css(n,"float")&&(i.support.inlineBlockNeedsLayout&&"inline"!==cu(n.nodeName)?e.zoom=1:e.display="inline-block"));r.overflow&&(e.overflow="hidden",i.support.shrinkWrapBlocks||h.always(function(){e.overflow=r.overflow[0];e.overflowX=r.overflow[1];e.overflowY=r.overflow[2]}));for(o in t)if(a=t[o],vo.exec(a)){if(delete t[o],v=v||"toggle"===a,a===(c?"hide":"show"))continue;p.push(o)}if(w=p.length)for(s=i._data(n,"fxshow")||i._data(n,"fxshow",{}),("hidden"in s)&&(c=s.hidden),v&&(s.hidden=!c),c?i(n).show():h.done(function(){i(n).hide()}),h.done(function(){var t;i._removeData(n,"fxshow");for(t in y)i.style(n,t,y[t])}),o=0;w>o;o++)u=p[o],l=h.createTween(u,c?s[u]:0),y[u]=s[u]||i.style(n,u),u in s||(s[u]=l.start,c&&(l.end=l.start,l.start="width"===u||"height"===u?1:0))}function f(n,t,i,r,u){return new f.prototype.init(n,t,i,r,u)}function pt(n,t){var r,i={height:n},u=0;for(t=t?1:0;4>u;u+=2-t)r=p[u],i["margin"+r]=i["padding"+r]=n;return t&&(i.opacity=i.width=n),i}function uf(n){return i.isWindow(n)?n:9===n.nodeType?n.defaultView||n.parentWindow:!1}var et,wi,o=typeof t,r=n.document,ff=n.location,ef=n.jQuery,of=n.$,ot={},b=[],wt="1.9.1",bi=b.concat,bt=b.push,l=b.slice,ki=b.indexOf,sf=ot.toString,it=ot.hasOwnProperty,kt=wt.trim,i=function(n,t){return new i.fn.init(n,t,wi)},st=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,s=/\S+/g,hf=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,cf=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,di=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,lf=/^[\],:{}\s]*$/,af=/(?:^|:|,)(?:\s*\[)+/g,vf=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,yf=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,pf=/^-ms-/,wf=/-([\da-z])/gi,bf=function(n,t){return t.toUpperCase()},h=function(n){(r.addEventListener||"load"===n.type||"complete"===r.readyState)&&(gi(),i.ready())},gi=function(){r.addEventListener?(r.removeEventListener("DOMContentLoaded",h,!1),n.removeEventListener("load",h,!1)):(r.detachEvent("onreadystatechange",h),n.detachEvent("onload",h))},gt,nr,tr,pi,lt,g,nt,gu,at;i.fn=i.prototype={jquery:wt,constructor:i,init:function(n,u,f){var e,o;if(!n)return this;if("string"==typeof n){if(e="<"===n.charAt(0)&&">"===n.charAt(n.length-1)&&n.length>=3?[null,n,null]:cf.exec(n),!e||!e[1]&&u)return!u||u.jquery?(u||f).find(n):this.constructor(u).find(n);if(e[1]){if(u=u instanceof i?u[0]:u,i.merge(this,i.parseHTML(e[1],u&&u.nodeType?u.ownerDocument||u:r,!0)),di.test(e[1])&&i.isPlainObject(u))for(e in u)i.isFunction(this[e])?this[e](u[e]):this.attr(e,u[e]);return this}if(o=r.getElementById(e[2]),o&&o.parentNode){if(o.id!==e[2])return f.find(n);this.length=1;this[0]=o}return this.context=r,this.selector=n,this}return n.nodeType?(this.context=this[0]=n,this.length=1,this):i.isFunction(n)?f.ready(n):(n.selector!==t&&(this.selector=n.selector,this.context=n.context),i.makeArray(n,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return l.call(this)},get:function(n){return null==n?this.toArray():0>n?this[this.length+n]:this[n]},pushStack:function(n){var t=i.merge(this.constructor(),n);return t.prevObject=this,t.context=this.context,t},each:function(n,t){return i.each(this,n,t)},ready:function(n){return i.ready.promise().done(n),this},slice:function(){return this.pushStack(l.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(n){var i=this.length,t=+n+(0>n?i:0);return this.pushStack(t>=0&&i>t?[this[t]]:[])},map:function(n){return this.pushStack(i.map(this,function(t,i){return n.call(t,i,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:bt,sort:[].sort,splice:[].splice};i.fn.init.prototype=i.fn;i.extend=i.fn.extend=function(){var u,o,r,e,s,h,n=arguments[0]||{},f=1,l=arguments.length,c=!1;for("boolean"==typeof n&&(c=n,n=arguments[1]||{},f=2),"object"==typeof n||i.isFunction(n)||(n={}),l===f&&(n=this,--f);l>f;f++)if(null!=(s=arguments[f]))for(e in s)u=n[e],r=s[e],n!==r&&(c&&r&&(i.isPlainObject(r)||(o=i.isArray(r)))?(o?(o=!1,h=u&&i.isArray(u)?u:[]):h=u&&i.isPlainObject(u)?u:{},n[e]=i.extend(c,h,r)):r!==t&&(n[e]=r));return n};i.extend({noConflict:function(t){return n.$===i&&(n.$=of),t&&n.jQuery===i&&(n.jQuery=ef),i},isReady:!1,readyWait:1,holdReady:function(n){n?i.readyWait++:i.ready(!0)},ready:function(n){if(n===!0?!--i.readyWait:!i.isReady){if(!r.body)return setTimeout(i.ready);i.isReady=!0;n!==!0&&--i.readyWait>0||(et.resolveWith(r,[i]),i.fn.trigger&&i(r).trigger("ready").off("ready"))}},isFunction:function(n){return"function"===i.type(n)},isArray:Array.isArray||function(n){return"array"===i.type(n)},isWindow:function(n){return null!=n&&n==n.window},isNumeric:function(n){return!isNaN(parseFloat(n))&&isFinite(n)},type:function(n){return null==n?n+"":"object"==typeof n||"function"==typeof n?ot[sf.call(n)]||"object":typeof n},isPlainObject:function(n){if(!n||"object"!==i.type(n)||n.nodeType||i.isWindow(n))return!1;try{if(n.constructor&&!it.call(n,"constructor")&&!it.call(n.constructor.prototype,"isPrototypeOf"))return!1}catch(u){return!1}for(var r in n);return r===t||it.call(n,r)},isEmptyObject:function(n){for(var t in n)return!1;return!0},error:function(n){throw Error(n);},parseHTML:function(n,t,u){if(!n||"string"!=typeof n)return null;"boolean"==typeof t&&(u=t,t=!1);t=t||r;var f=di.exec(n),e=!u&&[];return f?[t.createElement(f[1])]:(f=i.buildFragment([n],t,e),e&&i(e).remove(),i.merge([],f.childNodes))},parseJSON:function(r){return n.JSON&&n.JSON.parse?n.JSON.parse(r):null===r?r:"string"==typeof r&&(r=i.trim(r),r&&lf.test(r.replace(vf,"@").replace(yf,"]").replace(af,"")))?Function("return "+r)():(i.error("Invalid JSON: "+r),t)},parseXML:function(r){var u,f;if(!r||"string"!=typeof r)return null;try{n.DOMParser?(f=new DOMParser,u=f.parseFromString(r,"text/xml")):(u=new ActiveXObject("Microsoft.XMLDOM"),u.async="false",u.loadXML(r))}catch(e){u=t}return u&&u.documentElement&&!u.getElementsByTagName("parsererror").length||i.error("Invalid XML: "+r),u},noop:function(){},globalEval:function(t){t&&i.trim(t)&&(n.execScript||function(t){n.eval.call(n,t)})(t)},camelCase:function(n){return n.replace(pf,"ms-").replace(wf,bf)},nodeName:function(n,t){return n.nodeName&&n.nodeName.toLowerCase()===t.toLowerCase()},each:function(n,t,i){var u,r=0,f=n.length,e=dt(n);if(i){if(e){for(;f>r;r++)if(u=t.apply(n[r],i),u===!1)break}else for(r in n)if(u=t.apply(n[r],i),u===!1)break}else if(e){for(;f>r;r++)if(u=t.call(n[r],r,n[r]),u===!1)break}else for(r in n)if(u=t.call(n[r],r,n[r]),u===!1)break;return n},trim:kt&&!kt.call("\ufeff\u00a0")?function(n){return null==n?"":kt.call(n)}:function(n){return null==n?"":(n+"").replace(hf,"")},makeArray:function(n,t){var r=t||[];return null!=n&&(dt(Object(n))?i.merge(r,"string"==typeof n?[n]:n):bt.call(r,n)),r},inArray:function(n,t,i){var r;if(t){if(ki)return ki.call(t,n,i);for(r=t.length,i=i?0>i?Math.max(0,r+i):i:0;r>i;i++)if(i in t&&t[i]===n)return i}return-1},merge:function(n,i){var f=i.length,u=n.length,r=0;if("number"==typeof f)for(;f>r;r++)n[u++]=i[r];else while(i[r]!==t)n[u++]=i[r++];return n.length=u,n},grep:function(n,t,i){var u,f=[],r=0,e=n.length;for(i=!!i;e>r;r++)u=!!t(n[r],r),i!==u&&f.push(n[r]);return f},map:function(n,t,i){var u,r=0,e=n.length,o=dt(n),f=[];if(o)for(;e>r;r++)u=t(n[r],r,i),null!=u&&(f[f.length]=u);else for(r in n)u=t(n[r],r,i),null!=u&&(f[f.length]=u);return bi.apply([],f)},guid:1,proxy:function(n,r){var f,u,e;return"string"==typeof r&&(e=n[r],r=n,n=e),i.isFunction(n)?(f=l.call(arguments,2),u=function(){return n.apply(r||this,f.concat(l.call(arguments)))},u.guid=n.guid=n.guid||i.guid++,u):t},access:function(n,r,u,f,e,o,s){var h=0,l=n.length,c=null==u;if("object"===i.type(u)){e=!0;for(h in u)i.access(n,r,h,u[h],!0,o,s)}else if(f!==t&&(e=!0,i.isFunction(f)||(s=!0),c&&(s?(r.call(n,f),r=null):(c=r,r=function(n,t,r){return c.call(i(n),r)})),r))for(;l>h;h++)r(n[h],u,s?f:f.call(n[h],h,r(n[h],u)));return e?n:c?r.call(n):l?r(n[0],u):o},now:function(){return(new Date).getTime()}});i.ready.promise=function(t){if(!et)if(et=i.Deferred(),"complete"===r.readyState)setTimeout(i.ready);else if(r.addEventListener)r.addEventListener("DOMContentLoaded",h,!1),n.addEventListener("load",h,!1);else{r.attachEvent("onreadystatechange",h);n.attachEvent("onload",h);var u=!1;try{u=null==n.frameElement&&r.documentElement}catch(e){}u&&u.doScroll&&function f(){if(!i.isReady){try{u.doScroll("left")}catch(n){return setTimeout(f,50)}gi();i.ready()}}()}return et.promise(t)};i.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(n,t){ot["[object "+t+"]"]=t.toLowerCase()});wi=i(r);gt={};i.Callbacks=function(n){n="string"==typeof n?gt[n]||kf(n):i.extend({},n);var o,f,c,s,e,l,r=[],u=!n.once&&[],a=function(t){for(f=n.memory&&t,c=!0,e=l||0,l=0,s=r.length,o=!0;r&&s>e;e++)if(r[e].apply(t[0],t[1])===!1&&n.stopOnFalse){f=!1;break}o=!1;r&&(u?u.length&&a(u.shift()):f?r=[]:h.disable())},h={add:function(){if(r){var t=r.length;(function u(t){i.each(t,function(t,f){var e=i.type(f);"function"===e?n.unique&&h.has(f)||r.push(f):f&&f.length&&"string"!==e&&u(f)})})(arguments);o?s=r.length:f&&(l=t,a(f))}return this},remove:function(){return r&&i.each(arguments,function(n,t){for(var u;(u=i.inArray(t,r,u))>-1;)r.splice(u,1),o&&(s>=u&&s--,e>=u&&e--)}),this},has:function(n){return n?i.inArray(n,r)>-1:!(!r||!r.length)},empty:function(){return r=[],this},disable:function(){return r=u=f=t,this},disabled:function(){return!r},lock:function(){return u=t,f||h.disable(),this},locked:function(){return!u},fireWith:function(n,t){return t=t||[],t=[n,t.slice?t.slice():t],!r||c&&!u||(o?u.push(t):a(t)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!c}};return h};i.extend({Deferred:function(n){var u=[["resolve","done",i.Callbacks("once memory"),"resolved"],["reject","fail",i.Callbacks("once memory"),"rejected"],["notify","progress",i.Callbacks("memory")]],f="pending",r={state:function(){return f},always:function(){return t.done(arguments).fail(arguments),this},then:function(){var n=arguments;return i.Deferred(function(f){i.each(u,function(u,e){var s=e[0],o=i.isFunction(n[u])&&n[u];t[e[1]](function(){var n=o&&o.apply(this,arguments);n&&i.isFunction(n.promise)?n.promise().done(f.resolve).fail(f.reject).progress(f.notify):f[s+"With"](this===r?f.promise():this,o?[n]:arguments)})});n=null}).promise()},promise:function(n){return null!=n?i.extend(n,r):r}},t={};return r.pipe=r.then,i.each(u,function(n,i){var e=i[2],o=i[3];r[i[1]]=e.add;o&&e.add(function(){f=o},u[1^n][2].disable,u[2][2].lock);t[i[0]]=function(){return t[i[0]+"With"](this===t?r:this,arguments),this};t[i[0]+"With"]=e.fireWith}),r.promise(t),n&&n.call(t,t),t},when:function(n){var t=0,u=l.call(arguments),r=u.length,e=1!==r||n&&i.isFunction(n.promise)?r:0,f=1===e?n:i.Deferred(),h=function(n,t,i){return function(r){t[n]=this;i[n]=arguments.length>1?l.call(arguments):r;i===o?f.notifyWith(t,i):--e||f.resolveWith(t,i)}},o,c,s;if(r>1)for(o=Array(r),c=Array(r),s=Array(r);r>t;t++)u[t]&&i.isFunction(u[t].promise)?u[t].promise().done(h(t,s,u)).fail(f.reject).progress(h(t,c,o)):--e;return e||f.resolveWith(s,u),f.promise()}});i.support=function(){var u,s,e,f,h,c,l,a,y,v,t=r.createElement("div");if(t.setAttribute("className","t"),t.innerHTML="  <link/><table><\/table><a href='/a'>a<\/a><input type='checkbox'/>",s=t.getElementsByTagName("*"),e=t.getElementsByTagName("a")[0],!s||!e||!s.length)return{};h=r.createElement("select");l=h.appendChild(r.createElement("option"));f=t.getElementsByTagName("input")[0];e.style.cssText="top:1px;float:left;opacity:.5";u={getSetAttribute:"t"!==t.className,leadingWhitespace:3===t.firstChild.nodeType,tbody:!t.getElementsByTagName("tbody").length,htmlSerialize:!!t.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:"/a"===e.getAttribute("href"),opacity:/^0.5/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:!!f.value,optSelected:l.selected,enctype:!!r.createElement("form").enctype,html5Clone:"<:nav><\/:nav>"!==r.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===r.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1};f.checked=!0;u.noCloneChecked=f.cloneNode(!0).checked;h.disabled=!0;u.optDisabled=!l.disabled;try{delete t.test}catch(p){u.deleteExpando=!1}f=r.createElement("input");f.setAttribute("value","");u.input=""===f.getAttribute("value");f.value="t";f.setAttribute("type","radio");u.radioValue="t"===f.value;f.setAttribute("checked","t");f.setAttribute("name","t");c=r.createDocumentFragment();c.appendChild(f);u.appendChecked=f.checked;u.checkClone=c.cloneNode(!0).cloneNode(!0).lastChild.checked;t.attachEvent&&(t.attachEvent("onclick",function(){u.noCloneEvent=!1}),t.cloneNode(!0).click());for(v in{submit:!0,change:!0,focusin:!0})t.setAttribute(a="on"+v,"t"),u[v+"Bubbles"]=a in n||t.attributes[a].expando===!1;return t.style.backgroundClip="content-box",t.cloneNode(!0).style.backgroundClip="",u.clearCloneStyle="content-box"===t.style.backgroundClip,i(function(){var e,f,i,h="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",s=r.getElementsByTagName("body")[0];s&&(e=r.createElement("div"),e.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",s.appendChild(e).appendChild(t),t.innerHTML="<table><tr><td><\/td><td>t<\/td><\/tr><\/table>",i=t.getElementsByTagName("td"),i[0].style.cssText="padding:0;margin:0;border:0;display:none",y=0===i[0].offsetHeight,i[0].style.display="",i[1].style.display="none",u.reliableHiddenOffsets=y&&0===i[0].offsetHeight,t.innerHTML="",t.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",u.boxSizing=4===t.offsetWidth,u.doesNotIncludeMarginInBodyOffset=1!==s.offsetTop,n.getComputedStyle&&(u.pixelPosition="1%"!==(n.getComputedStyle(t,null)||{}).top,u.boxSizingReliable="4px"===(n.getComputedStyle(t,null)||{width:"4px"}).width,f=t.appendChild(r.createElement("div")),f.style.cssText=t.style.cssText=h,f.style.marginRight=f.style.width="0",t.style.width="1px",u.reliableMarginRight=!parseFloat((n.getComputedStyle(f,null)||{}).marginRight)),typeof t.style.zoom!==o&&(t.innerHTML="",t.style.cssText=h+"width:1px;padding:1px;display:inline;zoom:1",u.inlineBlockNeedsLayout=3===t.offsetWidth,t.style.display="block",t.innerHTML="<div><\/div>",t.firstChild.style.width="5px",u.shrinkWrapBlocks=3!==t.offsetWidth,u.inlineBlockNeedsLayout&&(s.style.zoom=1)),s.removeChild(e),e=t=i=f=null)}),s=h=c=l=e=f=null,u}();nr=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/;tr=/([A-Z])/g;i.extend({cache:{},expando:"jQuery"+(wt+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(n){return n=n.nodeType?i.cache[n[i.expando]]:n[i.expando],!!n&&!ni(n)},data:function(n,t,i){return ir(n,t,i)},removeData:function(n,t){return rr(n,t)},_data:function(n,t,i){return ir(n,t,i,!0)},_removeData:function(n,t){return rr(n,t,!0)},acceptData:function(n){if(n.nodeType&&1!==n.nodeType&&9!==n.nodeType)return!1;var t=n.nodeName&&i.noData[n.nodeName.toLowerCase()];return!t||t!==!0&&n.getAttribute("classid")===t}});i.fn.extend({data:function(n,r){var e,f,u=this[0],o=0,s=null;if(n===t){if(this.length&&(s=i.data(u),1===u.nodeType&&!i._data(u,"parsedAttrs"))){for(e=u.attributes;e.length>o;o++)f=e[o].name,f.indexOf("data-")||(f=i.camelCase(f.slice(5)),ur(u,f,s[f]));i._data(u,"parsedAttrs",!0)}return s}return"object"==typeof n?this.each(function(){i.data(this,n)}):i.access(this,function(r){return r===t?u?ur(u,n,i.data(u,n)):null:(this.each(function(){i.data(this,n,r)}),t)},null,r,arguments.length>1,null,!0)},removeData:function(n){return this.each(function(){i.removeData(this,n)})}});i.extend({queue:function(n,r,u){var f;return n?(r=(r||"fx")+"queue",f=i._data(n,r),u&&(!f||i.isArray(u)?f=i._data(n,r,i.makeArray(u)):f.push(u)),f||[]):t},dequeue:function(n,t){t=t||"fx";var f=i.queue(n,t),e=f.length,r=f.shift(),u=i._queueHooks(n,t),o=function(){i.dequeue(n,t)};"inprogress"===r&&(r=f.shift(),e--);u.cur=r;r&&("fx"===t&&f.unshift("inprogress"),delete u.stop,r.call(n,o,u));!e&&u&&u.empty.fire()},_queueHooks:function(n,t){var r=t+"queueHooks";return i._data(n,r)||i._data(n,r,{empty:i.Callbacks("once memory").add(function(){i._removeData(n,t+"queue");i._removeData(n,r)})})}});i.fn.extend({queue:function(n,r){var u=2;return"string"!=typeof n&&(r=n,n="fx",u--),u>arguments.length?i.queue(this[0],n):r===t?this:this.each(function(){var t=i.queue(this,n,r);i._queueHooks(this,n);"fx"===n&&"inprogress"!==t[0]&&i.dequeue(this,n)})},dequeue:function(n){return this.each(function(){i.dequeue(this,n)})},delay:function(n,t){return n=i.fx?i.fx.speeds[n]||n:n,t=t||"fx",this.queue(t,function(t,i){var r=setTimeout(t,n);i.stop=function(){clearTimeout(r)}})},clearQueue:function(n){return this.queue(n||"fx",[])},promise:function(n,r){var u,e=1,o=i.Deferred(),f=this,s=this.length,h=function(){--e||o.resolveWith(f,[f])};for("string"!=typeof n&&(r=n,n=t),n=n||"fx";s--;)u=i._data(f[s],n+"queueHooks"),u&&u.empty&&(e++,u.empty.add(h));return h(),o.promise(r)}});var k,fr,ti=/[\t\r\n]/g,df=/\r/g,gf=/^(?:input|select|textarea|button|object)$/i,ne=/^(?:a|area)$/i,er=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,ii=/^(?:checked|selected)$/i,a=i.support.getSetAttribute,ri=i.support.input;i.fn.extend({attr:function(n,t){return i.access(this,i.attr,n,t,arguments.length>1)},removeAttr:function(n){return this.each(function(){i.removeAttr(this,n)})},prop:function(n,t){return i.access(this,i.prop,n,t,arguments.length>1)},removeProp:function(n){return n=i.propFix[n]||n,this.each(function(){try{this[n]=t;delete this[n]}catch(i){}})},addClass:function(n){var e,t,r,u,o,f=0,h=this.length,c="string"==typeof n&&n;if(i.isFunction(n))return this.each(function(t){i(this).addClass(n.call(this,t,this.className))});if(c)for(e=(n||"").match(s)||[];h>f;f++)if(t=this[f],r=1===t.nodeType&&(t.className?(" "+t.className+" ").replace(ti," "):" ")){for(o=0;u=e[o++];)0>r.indexOf(" "+u+" ")&&(r+=u+" ");t.className=i.trim(r)}return this},removeClass:function(n){var e,t,r,u,o,f=0,h=this.length,c=0===arguments.length||"string"==typeof n&&n;if(i.isFunction(n))return this.each(function(t){i(this).removeClass(n.call(this,t,this.className))});if(c)for(e=(n||"").match(s)||[];h>f;f++)if(t=this[f],r=1===t.nodeType&&(t.className?(" "+t.className+" ").replace(ti," "):"")){for(o=0;u=e[o++];)while(r.indexOf(" "+u+" ")>=0)r=r.replace(" "+u+" "," ");t.className=n?i.trim(r):""}return this},toggleClass:function(n,t){var r=typeof n,u="boolean"==typeof t;return i.isFunction(n)?this.each(function(r){i(this).toggleClass(n.call(this,r,this.className,t),t)}):this.each(function(){if("string"===r)for(var f,c=0,h=i(this),e=t,l=n.match(s)||[];f=l[c++];)e=u?e:!h.hasClass(f),h[e?"addClass":"removeClass"](f);else(r===o||"boolean"===r)&&(this.className&&i._data(this,"__className__",this.className),this.className=this.className||n===!1?"":i._data(this,"__className__")||"")})},hasClass:function(n){for(var i=" "+n+" ",t=0,r=this.length;r>t;t++)if(1===this[t].nodeType&&(" "+this[t].className+" ").replace(ti," ").indexOf(i)>=0)return!0;return!1},val:function(n){var u,r,e,f=this[0];return arguments.length?(e=i.isFunction(n),this.each(function(u){var f,o=i(this);1===this.nodeType&&(f=e?n.call(this,u,o.val()):n,null==f?f="":"number"==typeof f?f+="":i.isArray(f)&&(f=i.map(f,function(n){return null==n?"":n+""})),r=i.valHooks[this.type]||i.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&r.set(this,f,"value")!==t||(this.value=f))})):f?(r=i.valHooks[f.type]||i.valHooks[f.nodeName.toLowerCase()],r&&"get"in r&&(u=r.get(f,"value"))!==t?u:(u=f.value,"string"==typeof u?u.replace(df,""):null==u?"":u)):void 0}});i.extend({valHooks:{option:{get:function(n){var t=n.attributes.value;return!t||t.specified?n.value:n.text}},select:{get:function(n){for(var e,t,o=n.options,r=n.selectedIndex,u="select-one"===n.type||0>r,s=u?null:[],h=u?r+1:o.length,f=0>r?h:u?r:0;h>f;f++)if(t=o[f],!(!t.selected&&f!==r||(i.support.optDisabled?t.disabled:null!==t.getAttribute("disabled"))||t.parentNode.disabled&&i.nodeName(t.parentNode,"optgroup"))){if(e=i(t).val(),u)return e;s.push(e)}return s},set:function(n,t){var r=i.makeArray(t);return i(n).find("option").each(function(){this.selected=i.inArray(i(this).val(),r)>=0}),r.length||(n.selectedIndex=-1),r}}},attr:function(n,r,u){var f,s,e,h=n.nodeType;if(n&&3!==h&&8!==h&&2!==h)return typeof n.getAttribute===o?i.prop(n,r,u):(s=1!==h||!i.isXMLDoc(n),s&&(r=r.toLowerCase(),f=i.attrHooks[r]||(er.test(r)?fr:k)),u===t?f&&s&&"get"in f&&null!==(e=f.get(n,r))?e:(typeof n.getAttribute!==o&&(e=n.getAttribute(r)),null==e?t:e):null!==u?f&&s&&"set"in f&&(e=f.set(n,u,r))!==t?e:(n.setAttribute(r,u+""),u):(i.removeAttr(n,r),t))},removeAttr:function(n,t){var r,u,e=0,f=t&&t.match(s);if(f&&1===n.nodeType)while(r=f[e++])u=i.propFix[r]||r,er.test(r)?!a&&ii.test(r)?n[i.camelCase("default-"+r)]=n[u]=!1:n[u]=!1:i.attr(n,r,""),n.removeAttribute(a?r:u)},attrHooks:{type:{set:function(n,t){if(!i.support.radioValue&&"radio"===t&&i.nodeName(n,"input")){var r=n.value;return n.setAttribute("type",t),r&&(n.value=r),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(n,r,u){var e,f,s,o=n.nodeType;if(n&&3!==o&&8!==o&&2!==o)return s=1!==o||!i.isXMLDoc(n),s&&(r=i.propFix[r]||r,f=i.propHooks[r]),u!==t?f&&"set"in f&&(e=f.set(n,u,r))!==t?e:n[r]=u:f&&"get"in f&&null!==(e=f.get(n,r))?e:n[r]},propHooks:{tabIndex:{get:function(n){var i=n.getAttributeNode("tabindex");return i&&i.specified?parseInt(i.value,10):gf.test(n.nodeName)||ne.test(n.nodeName)&&n.href?0:t}}}});fr={get:function(n,r){var u=i.prop(n,r),f="boolean"==typeof u&&n.getAttribute(r),e="boolean"==typeof u?ri&&a?null!=f:ii.test(r)?n[i.camelCase("default-"+r)]:!!f:n.getAttributeNode(r);return e&&e.value!==!1?r.toLowerCase():t},set:function(n,t,r){return t===!1?i.removeAttr(n,r):ri&&a||!ii.test(r)?n.setAttribute(!a&&i.propFix[r]||r,r):n[i.camelCase("default-"+r)]=n[r]=!0,r}};ri&&a||(i.attrHooks.value={get:function(n,r){var u=n.getAttributeNode(r);return i.nodeName(n,"input")?n.defaultValue:u&&u.specified?u.value:t},set:function(n,r,u){return i.nodeName(n,"input")?(n.defaultValue=r,t):k&&k.set(n,r,u)}});a||(k=i.valHooks.button={get:function(n,i){var r=n.getAttributeNode(i);return r&&("id"===i||"name"===i||"coords"===i?""!==r.value:r.specified)?r.value:t},set:function(n,i,r){var u=n.getAttributeNode(r);return u||n.setAttributeNode(u=n.ownerDocument.createAttribute(r)),u.value=i+="","value"===r||i===n.getAttribute(r)?i:t}},i.attrHooks.contenteditable={get:k.get,set:function(n,t,i){k.set(n,""===t?!1:t,i)}},i.each(["width","height"],function(n,r){i.attrHooks[r]=i.extend(i.attrHooks[r],{set:function(n,i){return""===i?(n.setAttribute(r,"auto"),i):t}})}));i.support.hrefNormalized||(i.each(["href","src","width","height"],function(n,r){i.attrHooks[r]=i.extend(i.attrHooks[r],{get:function(n){var i=n.getAttribute(r,2);return null==i?t:i}})}),i.each(["href","src"],function(n,t){i.propHooks[t]={get:function(n){return n.getAttribute(t,4)}}}));i.support.style||(i.attrHooks.style={get:function(n){return n.style.cssText||t},set:function(n,t){return n.style.cssText=t+""}});i.support.optSelected||(i.propHooks.selected=i.extend(i.propHooks.selected,{get:function(n){var t=n.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}));i.support.enctype||(i.propFix.enctype="encoding");i.support.checkOn||i.each(["radio","checkbox"],function(){i.valHooks[this]={get:function(n){return null===n.getAttribute("value")?"on":n.value}}});i.each(["radio","checkbox"],function(){i.valHooks[this]=i.extend(i.valHooks[this],{set:function(n,r){return i.isArray(r)?n.checked=i.inArray(i(n).val(),r)>=0:t}})});var ui=/^(?:input|select|textarea)$/i,te=/^key/,ie=/^(?:mouse|contextmenu)|click/,or=/^(?:focusinfocus|focusoutblur)$/,sr=/^([^.]*)(?:\.(.+)|)$/;i.event={global:{},add:function(n,r,u,f,e){var b,p,k,w,c,l,a,v,h,d,g,y=i._data(n);if(y){for(u.handler&&(w=u,u=w.handler,e=w.selector),u.guid||(u.guid=i.guid++),(p=y.events)||(p=y.events={}),(l=y.handle)||(l=y.handle=function(n){return typeof i===o||n&&i.event.triggered===n.type?t:i.event.dispatch.apply(l.elem,arguments)},l.elem=n),r=(r||"").match(s)||[""],k=r.length;k--;)b=sr.exec(r[k])||[],h=g=b[1],d=(b[2]||"").split(".").sort(),c=i.event.special[h]||{},h=(e?c.delegateType:c.bindType)||h,c=i.event.special[h]||{},a=i.extend({type:h,origType:g,data:f,handler:u,guid:u.guid,selector:e,needsContext:e&&i.expr.match.needsContext.test(e),namespace:d.join(".")},w),(v=p[h])||(v=p[h]=[],v.delegateCount=0,c.setup&&c.setup.call(n,f,d,l)!==!1||(n.addEventListener?n.addEventListener(h,l,!1):n.attachEvent&&n.attachEvent("on"+h,l))),c.add&&(c.add.call(n,a),a.handler.guid||(a.handler.guid=u.guid)),e?v.splice(v.delegateCount++,0,a):v.push(a),i.event.global[h]=!0;n=null}},remove:function(n,t,r,u,f){var y,o,h,b,p,a,c,l,e,w,k,v=i.hasData(n)&&i._data(n);if(v&&(a=v.events)){for(t=(t||"").match(s)||[""],p=t.length;p--;)if(h=sr.exec(t[p])||[],e=k=h[1],w=(h[2]||"").split(".").sort(),e){for(c=i.event.special[e]||{},e=(u?c.delegateType:c.bindType)||e,l=a[e]||[],h=h[2]&&RegExp("(^|\\.)"+w.join("\\.(?:.*\\.|)")+"(\\.|$)"),b=y=l.length;y--;)o=l[y],!f&&k!==o.origType||r&&r.guid!==o.guid||h&&!h.test(o.namespace)||u&&u!==o.selector&&("**"!==u||!o.selector)||(l.splice(y,1),o.selector&&l.delegateCount--,c.remove&&c.remove.call(n,o));b&&!l.length&&(c.teardown&&c.teardown.call(n,w,v.handle)!==!1||i.removeEvent(n,e,v.handle),delete a[e])}else for(e in a)i.event.remove(n,e+t[p],r,u,!0);i.isEmptyObject(a)&&(delete v.handle,i._removeData(n,"events"))}},trigger:function(u,f,e,o){var a,v,h,p,l,c,w,b=[e||r],s=it.call(u,"type")?u.type:u,y=it.call(u,"namespace")?u.namespace.split("."):[];if(h=c=e=e||r,3!==e.nodeType&&8!==e.nodeType&&!or.test(s+i.event.triggered)&&(s.indexOf(".")>=0&&(y=s.split("."),s=y.shift(),y.sort()),v=0>s.indexOf(":")&&"on"+s,u=u[i.expando]?u:new i.Event(s,"object"==typeof u&&u),u.isTrigger=!0,u.namespace=y.join("."),u.namespace_re=u.namespace?RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,u.result=t,u.target||(u.target=e),f=null==f?[u]:i.makeArray(f,[u]),l=i.event.special[s]||{},o||!l.trigger||l.trigger.apply(e,f)!==!1)){if(!o&&!l.noBubble&&!i.isWindow(e)){for(p=l.delegateType||s,or.test(p+s)||(h=h.parentNode);h;h=h.parentNode)b.push(h),c=h;c===(e.ownerDocument||r)&&b.push(c.defaultView||c.parentWindow||n)}for(w=0;(h=b[w++])&&!u.isPropagationStopped();)u.type=w>1?p:l.bindType||s,a=(i._data(h,"events")||{})[u.type]&&i._data(h,"handle"),a&&a.apply(h,f),a=v&&h[v],a&&i.acceptData(h)&&a.apply&&a.apply(h,f)===!1&&u.preventDefault();if(u.type=s,!(o||u.isDefaultPrevented()||l._default&&l._default.apply(e.ownerDocument,f)!==!1||"click"===s&&i.nodeName(e,"a")||!i.acceptData(e)||!v||!e[s]||i.isWindow(e))){c=e[v];c&&(e[v]=null);i.event.triggered=s;try{e[s]()}catch(k){}i.event.triggered=t;c&&(e[v]=c)}return u.result}},dispatch:function(n){n=i.event.fix(n);var o,e,r,u,s,h=[],c=l.call(arguments),a=(i._data(this,"events")||{})[n.type]||[],f=i.event.special[n.type]||{};if(c[0]=n,n.delegateTarget=this,!f.preDispatch||f.preDispatch.call(this,n)!==!1){for(h=i.event.handlers.call(this,n,a),o=0;(u=h[o++])&&!n.isPropagationStopped();)for(n.currentTarget=u.elem,s=0;(r=u.handlers[s++])&&!n.isImmediatePropagationStopped();)(!n.namespace_re||n.namespace_re.test(r.namespace))&&(n.handleObj=r,n.data=r.data,e=((i.event.special[r.origType]||{}).handle||r.handler).apply(u.elem,c),e!==t&&(n.result=e)===!1&&(n.preventDefault(),n.stopPropagation()));return f.postDispatch&&f.postDispatch.call(this,n),n.result}},handlers:function(n,r){var e,o,f,s,c=[],h=r.delegateCount,u=n.target;if(h&&u.nodeType&&(!n.button||"click"!==n.type))for(;u!=this;u=u.parentNode||this)if(1===u.nodeType&&(u.disabled!==!0||"click"!==n.type)){for(f=[],s=0;h>s;s++)o=r[s],e=o.selector+" ",f[e]===t&&(f[e]=o.needsContext?i(e,this).index(u)>=0:i.find(e,this,null,[u]).length),f[e]&&f.push(o);f.length&&c.push({elem:u,handlers:f})}return r.length>h&&c.push({elem:this,handlers:r.slice(h)}),c},fix:function(n){if(n[i.expando])return n;var e,o,s,u=n.type,f=n,t=this.fixHooks[u];for(t||(this.fixHooks[u]=t=ie.test(u)?this.mouseHooks:te.test(u)?this.keyHooks:{}),s=t.props?this.props.concat(t.props):this.props,n=new i.Event(f),e=s.length;e--;)o=s[e],n[o]=f[o];return n.target||(n.target=f.srcElement||r),3===n.target.nodeType&&(n.target=n.target.parentNode),n.metaKey=!!n.metaKey,t.filter?t.filter(n,f):n},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(n,t){return null==n.which&&(n.which=null!=t.charCode?t.charCode:t.keyCode),n}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(n,i){var u,o,f,e=i.button,s=i.fromElement;return null==n.pageX&&null!=i.clientX&&(o=n.target.ownerDocument||r,f=o.documentElement,u=o.body,n.pageX=i.clientX+(f&&f.scrollLeft||u&&u.scrollLeft||0)-(f&&f.clientLeft||u&&u.clientLeft||0),n.pageY=i.clientY+(f&&f.scrollTop||u&&u.scrollTop||0)-(f&&f.clientTop||u&&u.clientTop||0)),!n.relatedTarget&&s&&(n.relatedTarget=s===n.target?i.toElement:s),n.which||e===t||(n.which=1&e?1:2&e?3:4&e?2:0),n}},special:{load:{noBubble:!0},click:{trigger:function(){return i.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t}},focus:{trigger:function(){if(this!==r.activeElement&&this.focus)try{return this.focus(),!1}catch(n){}},delegateType:"focusin"},blur:{trigger:function(){return this===r.activeElement&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},beforeunload:{postDispatch:function(n){n.result!==t&&(n.originalEvent.returnValue=n.result)}}},simulate:function(n,t,r,u){var f=i.extend(new i.Event,r,{type:n,isSimulated:!0,originalEvent:{}});u?i.event.trigger(f,null,t):i.event.dispatch.call(t,f);f.isDefaultPrevented()&&r.preventDefault()}};i.removeEvent=r.removeEventListener?function(n,t,i){n.removeEventListener&&n.removeEventListener(t,i,!1)}:function(n,t,i){var r="on"+t;n.detachEvent&&(typeof n[r]===o&&(n[r]=null),n.detachEvent(r,i))};i.Event=function(n,r){return this instanceof i.Event?(n&&n.type?(this.originalEvent=n,this.type=n.type,this.isDefaultPrevented=n.defaultPrevented||n.returnValue===!1||n.getPreventDefault&&n.getPreventDefault()?ht:d):this.type=n,r&&i.extend(this,r),this.timeStamp=n&&n.timeStamp||i.now(),this[i.expando]=!0,t):new i.Event(n,r)};i.Event.prototype={isDefaultPrevented:d,isPropagationStopped:d,isImmediatePropagationStopped:d,preventDefault:function(){var n=this.originalEvent;this.isDefaultPrevented=ht;n&&(n.preventDefault?n.preventDefault():n.returnValue=!1)},stopPropagation:function(){var n=this.originalEvent;this.isPropagationStopped=ht;n&&(n.stopPropagation&&n.stopPropagation(),n.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=ht;this.stopPropagation()}};i.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(n,t){i.event.special[n]={delegateType:t,bindType:t,handle:function(n){var u,f=this,r=n.relatedTarget,e=n.handleObj;return(!r||r!==f&&!i.contains(f,r))&&(n.type=e.origType,u=e.handler.apply(this,arguments),n.type=t),u}}});i.support.submitBubbles||(i.event.special.submit={setup:function(){return i.nodeName(this,"form")?!1:(i.event.add(this,"click._submit keypress._submit",function(n){var u=n.target,r=i.nodeName(u,"input")||i.nodeName(u,"button")?u.form:t;r&&!i._data(r,"submitBubbles")&&(i.event.add(r,"submit._submit",function(n){n._submit_bubble=!0}),i._data(r,"submitBubbles",!0))}),t)},postDispatch:function(n){n._submit_bubble&&(delete n._submit_bubble,this.parentNode&&!n.isTrigger&&i.event.simulate("submit",this.parentNode,n,!0))},teardown:function(){return i.nodeName(this,"form")?!1:(i.event.remove(this,"._submit"),t)}});i.support.changeBubbles||(i.event.special.change={setup:function(){return ui.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(i.event.add(this,"propertychange._change",function(n){"checked"===n.originalEvent.propertyName&&(this._just_changed=!0)}),i.event.add(this,"click._change",function(n){this._just_changed&&!n.isTrigger&&(this._just_changed=!1);i.event.simulate("change",this,n,!0)})),!1):(i.event.add(this,"beforeactivate._change",function(n){var t=n.target;ui.test(t.nodeName)&&!i._data(t,"changeBubbles")&&(i.event.add(t,"change._change",function(n){!this.parentNode||n.isSimulated||n.isTrigger||i.event.simulate("change",this.parentNode,n,!0)}),i._data(t,"changeBubbles",!0))}),t)},handle:function(n){var i=n.target;return this!==i||n.isSimulated||n.isTrigger||"radio"!==i.type&&"checkbox"!==i.type?n.handleObj.handler.apply(this,arguments):t},teardown:function(){return i.event.remove(this,"._change"),!ui.test(this.nodeName)}});i.support.focusinBubbles||i.each({focus:"focusin",blur:"focusout"},function(n,t){var u=0,f=function(n){i.event.simulate(t,n.target,i.event.fix(n),!0)};i.event.special[t]={setup:function(){0==u++&&r.addEventListener(n,f,!0)},teardown:function(){0==--u&&r.removeEventListener(n,f,!0)}}});i.fn.extend({on:function(n,r,u,f,e){var s,o;if("object"==typeof n){"string"!=typeof r&&(u=u||r,r=t);for(s in n)this.on(s,r,u,n[s],e);return this}if(null==u&&null==f?(f=r,u=r=t):null==f&&("string"==typeof r?(f=u,u=t):(f=u,u=r,r=t)),f===!1)f=d;else if(!f)return this;return 1===e&&(o=f,f=function(n){return i().off(n),o.apply(this,arguments)},f.guid=o.guid||(o.guid=i.guid++)),this.each(function(){i.event.add(this,n,f,u,r)})},one:function(n,t,i,r){return this.on(n,t,i,r,1)},off:function(n,r,u){var f,e;if(n&&n.preventDefault&&n.handleObj)return f=n.handleObj,i(n.delegateTarget).off(f.namespace?f.origType+"."+f.namespace:f.origType,f.selector,f.handler),this;if("object"==typeof n){for(e in n)this.off(e,r,n[e]);return this}return(r===!1||"function"==typeof r)&&(u=r,r=t),u===!1&&(u=d),this.each(function(){i.event.remove(this,n,u,r)})},bind:function(n,t,i){return this.on(n,null,t,i)},unbind:function(n,t){return this.off(n,null,t)},delegate:function(n,t,i,r){return this.on(t,n,i,r)},undelegate:function(n,t,i){return 1===arguments.length?this.off(n,"**"):this.off(t,n||"**",i)},trigger:function(n,t){return this.each(function(){i.event.trigger(n,t,this)})},triggerHandler:function(n,r){var u=this[0];return u?i.event.trigger(n,r,u,!0):t}}),function(n,t){function ti(n){return tr.test(n+"")}function ii(){var n,t=[];return n=function(i,u){return t.push(i+=" ")>r.cacheLength&&delete n[t.shift()],n[i]=u}}function l(n){return n[f]=!0,n}function b(n){var t=s.createElement("div");try{return n(t)}catch(i){return!1}finally{t=null}}function u(n,t,i,r){var y,u,e,l,p,v,w,h,d,b;if((t?t.ownerDocument||t:k)!==s&&it(t),t=t||s,i=i||[],!n||"string"!=typeof n)return i;if(1!==(l=t.nodeType)&&9!==l)return[];if(!c&&!r){if(y=ir.exec(n))if(e=y[1]){if(9===l){if(u=t.getElementById(e),!u||!u.parentNode)return i;if(u.id===e)return i.push(u),i}else if(t.ownerDocument&&(u=t.ownerDocument.getElementById(e))&&et(t,u)&&u.id===e)return i.push(u),i}else{if(y[2])return ut.apply(i,ft.call(t.getElementsByTagName(n),0)),i;if((e=y[3])&&o.getByClassName&&t.getElementsByClassName)return ut.apply(i,ft.call(t.getElementsByClassName(e),0)),i}if(o.qsa&&!a.test(n)){if(w=!0,h=f,d=t,b=9===l&&n,1===l&&"object"!==t.nodeName.toLowerCase()){for(v=yt(n),(w=t.getAttribute("id"))?h=w.replace(fr,"\\$&"):t.setAttribute("id",h),h="[id='"+h+"'] ",p=v.length;p--;)v[p]=h+pt(v[p]);d=ni.test(n)&&t.parentNode||t;b=v.join(",")}if(b)try{return ut.apply(i,ft.call(d.querySelectorAll(b),0)),i}catch(g){}finally{w||t.removeAttribute("id")}}}return lr(n.replace(at,"$1"),t,i,r)}function yi(n,t){var i=t&&n,r=i&&(~t.sourceIndex||li)-(~n.sourceIndex||li);if(r)return r;if(i)while(i=i.nextSibling)if(i===t)return-1;return n?1:-1}function or(n){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===n}}function sr(n){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===n}}function g(n){return l(function(t){return t=+t,l(function(i,r){for(var u,f=n([],i.length,t),e=f.length;e--;)i[u=f[e]]&&(i[u]=!(r[u]=i[u]))})})}function yt(n,t){var e,f,s,o,i,h,c,l=hi[n+" "];if(l)return t?0:l.slice(0);for(i=n,h=[],c=r.preFilter;i;){(!e||(f=ki.exec(i)))&&(f&&(i=i.slice(f[0].length)||i),h.push(s=[]));e=!1;(f=di.exec(i))&&(e=f.shift(),s.push({value:e,type:f[0].replace(at," ")}),i=i.slice(e.length));for(o in r.filter)(f=vt[o].exec(i))&&(!c[o]||(f=c[o](f)))&&(e=f.shift(),s.push({value:e,type:o,matches:f}),i=i.slice(e.length));if(!e)break}return t?i.length:i?u.error(n):hi(n,h).slice(0)}function pt(n){for(var t=0,r=n.length,i="";r>t;t++)i+=n[t].value;return i}function ri(n,t,i){var r=t.dir,u=i&&"parentNode"===r,e=wi++;return t.first?function(t,i,f){while(t=t[r])if(1===t.nodeType||u)return n(t,i,f)}:function(t,i,o){var h,s,c,l=v+" "+e;if(o){while(t=t[r])if((1===t.nodeType||u)&&n(t,i,o))return!0}else while(t=t[r])if(1===t.nodeType||u)if(c=t[f]||(t[f]={}),(s=c[r])&&s[0]===l){if((h=s[1])===!0||h===ot)return h===!0}else if(s=c[r]=[l],s[1]=n(t,i,o)||ot,s[1]===!0)return!0}}function ui(n){return n.length>1?function(t,i,r){for(var u=n.length;u--;)if(!n[u](t,i,r))return!1;return!0}:n[0]}function wt(n,t,i,r,u){for(var e,o=[],f=0,s=n.length,h=null!=t;s>f;f++)(e=n[f])&&(!i||i(e,r,u))&&(o.push(e),h&&t.push(f));return o}function fi(n,t,i,r,u,e){return r&&!r[f]&&(r=fi(r)),u&&!u[f]&&(u=fi(u,e)),l(function(f,e,o,s){var l,c,a,p=[],y=[],w=e.length,b=f||cr(t||"*",o.nodeType?[o]:o,[]),v=!n||!f&&t?b:wt(b,p,n,o,s),h=i?u||(f?n:w||r)?[]:e:v;if(i&&i(v,h,o,s),r)for(l=wt(h,y),r(l,[],o,s),c=l.length;c--;)(a=l[c])&&(h[y[c]]=!(v[y[c]]=a));if(f){if(u||n){if(u){for(l=[],c=h.length;c--;)(a=h[c])&&l.push(v[c]=a);u(null,h=[],l,s)}for(c=h.length;c--;)(a=h[c])&&(l=u?dt.call(f,a):p[c])>-1&&(f[l]=!(e[l]=a))}}else h=wt(h===e?h.splice(w,h.length):h),u?u(null,e,h,s):ut.apply(e,h)})}function ei(n){for(var s,u,i,o=n.length,h=r.relative[n[0].type],c=h||r.relative[" "],t=h?1:0,l=ri(function(n){return n===s},c,!0),a=ri(function(n){return dt.call(s,n)>-1},c,!0),e=[function(n,t,i){return!h&&(i||t!==ht)||((s=t).nodeType?l(n,t,i):a(n,t,i))}];o>t;t++)if(u=r.relative[n[t].type])e=[ri(ui(e),u)];else{if(u=r.filter[n[t].type].apply(null,n[t].matches),u[f]){for(i=++t;o>i;i++)if(r.relative[n[i].type])break;return fi(t>1&&ui(e),t>1&&pt(n.slice(0,t-1)).replace(at,"$1"),u,i>t&&ei(n.slice(t,i)),o>i&&ei(n=n.slice(i)),o>i&&pt(n))}e.push(u)}return ui(e)}function hr(n,t){var f=0,i=t.length>0,e=n.length>0,o=function(o,h,c,l,a){var p,d,b,w=[],k=0,y="0",g=o&&[],nt=null!=a,tt=ht,rt=o||e&&r.find.TAG("*",a&&h.parentNode||h),it=v+=null==tt?1:Math.random()||.1;for(nt&&(ht=h!==s&&h,ot=f);null!=(p=rt[y]);y++){if(e&&p){for(d=0;b=n[d++];)if(b(p,h,c)){l.push(p);break}nt&&(v=it,ot=++f)}i&&((p=!b&&p)&&k--,o&&g.push(p))}if(k+=y,i&&y!==k){for(d=0;b=t[d++];)b(g,w,h,c);if(o){if(k>0)while(y--)g[y]||w[y]||(w[y]=bi.call(l));w=wt(w)}ut.apply(l,w);nt&&!o&&w.length>0&&k+t.length>1&&u.uniqueSort(l)}return nt&&(v=it,ht=tt),g};return i?l(o):o}function cr(n,t,i){for(var r=0,f=t.length;f>r;r++)u(n,t[r],i);return i}function lr(n,t,i,u){var o,f,e,h,l,s=yt(n);if(!u&&1===s.length){if(f=s[0]=s[0].slice(0),f.length>2&&"ID"===(e=f[0]).type&&9===t.nodeType&&!c&&r.relative[f[1].type]){if(t=r.find.ID(e.matches[0].replace(p,w),t)[0],!t)return i;n=n.slice(f.shift().value.length)}for(o=vt.needsContext.test(n)?0:f.length;o--;){if(e=f[o],r.relative[h=e.type])break;if((l=r.find[h])&&(u=l(e.matches[0].replace(p,w),ni.test(f[0].type)&&t.parentNode||t))){if(f.splice(o,1),n=u.length&&pt(f),!n)return ut.apply(i,ft.call(u,0)),i;break}}}return bt(n,s)(u,t,c,i,ni.test(n)),i}function pi(){}var nt,ot,r,st,oi,bt,tt,ht,it,s,h,c,a,rt,ct,et,kt,f="sizzle"+-new Date,k=n.document,o={},v=0,wi=0,si=ii(),hi=ii(),ci=ii(),y=typeof t,li=-2147483648,lt=[],bi=lt.pop,ut=lt.push,ft=lt.slice,dt=lt.indexOf||function(n){for(var t=0,i=this.length;i>t;t++)if(this[t]===n)return t;return-1},e="[\\x20\\t\\r\\n\\f]",d="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ai=d.replace("w","w#"),vi="\\["+e+"*("+d+")"+e+"*(?:([*^$|!~]?=)"+e+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ai+")|)|)"+e+"*\\]",gt=":("+d+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+vi.replace(3,8)+")*)|.*)\\)|)",at=RegExp("^"+e+"+|((?:^|[^\\\\])(?:\\\\.)*)"+e+"+$","g"),ki=RegExp("^"+e+"*,"+e+"*"),di=RegExp("^"+e+"*([\\x20\\t\\r\\n\\f>+~])"+e+"*"),gi=RegExp(gt),nr=RegExp("^"+ai+"$"),vt={ID:RegExp("^#("+d+")"),CLASS:RegExp("^\\.("+d+")"),NAME:RegExp("^\\[name=['\"]?("+d+")['\"]?\\]"),TAG:RegExp("^("+d.replace("w","w*")+")"),ATTR:RegExp("^"+vi),PSEUDO:RegExp("^"+gt),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+e+"*(even|odd|(([+-]|)(\\d*)n|)"+e+"*(?:([+-]|)"+e+"*(\\d+)|))"+e+"*\\)|)","i"),needsContext:RegExp("^"+e+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+e+"*((?:-\\d)?\\d*)"+e+"*\\)|)(?=[^-]|$)","i")},ni=/[\x20\t\r\n\f]*[+~]/,tr=/^[^{]+\{\s*\[native code/,ir=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rr=/^(?:input|select|textarea|button)$/i,ur=/^h\d$/i,fr=/'|\\/g,er=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,p=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,w=function(n,t){var i="0x"+t-65536;return i!==i?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(55296|i>>10,56320|1023&i)};try{ft.call(k.documentElement.childNodes,0)[0].nodeType}catch(ar){ft=function(n){for(var t,i=[];t=this[n++];)i.push(t);return i}}oi=u.isXML=function(n){var t=n&&(n.ownerDocument||n).documentElement;return t?"HTML"!==t.nodeName:!1};it=u.setDocument=function(n){var i=n?n.ownerDocument||n:k;return i!==s&&9===i.nodeType&&i.documentElement?(s=i,h=i.documentElement,c=oi(i),o.tagNameNoComments=b(function(n){return n.appendChild(i.createComment("")),!n.getElementsByTagName("*").length}),o.attributes=b(function(n){n.innerHTML="<select><\/select>";var t=typeof n.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),o.getByClassName=b(function(n){return n.innerHTML="<div class='hidden e'><\/div><div class='hidden'><\/div>",n.getElementsByClassName&&n.getElementsByClassName("e").length?(n.lastChild.className="e",2===n.getElementsByClassName("e").length):!1}),o.getByName=b(function(n){n.id=f+0;n.innerHTML="<a name='"+f+"'><\/a><div name='"+f+"'><\/div>";h.insertBefore(n,h.firstChild);var t=i.getElementsByName&&i.getElementsByName(f).length===2+i.getElementsByName(f+0).length;return o.getIdNotName=!i.getElementById(f),h.removeChild(n),t}),r.attrHandle=b(function(n){return n.innerHTML="<a href='#'><\/a>",n.firstChild&&typeof n.firstChild.getAttribute!==y&&"#"===n.firstChild.getAttribute("href")})?{}:{href:function(n){return n.getAttribute("href",2)},type:function(n){return n.getAttribute("type")}},o.getIdNotName?(r.find.ID=function(n,t){if(typeof t.getElementById!==y&&!c){var i=t.getElementById(n);return i&&i.parentNode?[i]:[]}},r.filter.ID=function(n){var t=n.replace(p,w);return function(n){return n.getAttribute("id")===t}}):(r.find.ID=function(n,i){if(typeof i.getElementById!==y&&!c){var r=i.getElementById(n);return r?r.id===n||typeof r.getAttributeNode!==y&&r.getAttributeNode("id").value===n?[r]:t:[]}},r.filter.ID=function(n){var t=n.replace(p,w);return function(n){var i=typeof n.getAttributeNode!==y&&n.getAttributeNode("id");return i&&i.value===t}}),r.find.TAG=o.tagNameNoComments?function(n,i){return typeof i.getElementsByTagName!==y?i.getElementsByTagName(n):t}:function(n,t){var i,r=[],f=0,u=t.getElementsByTagName(n);if("*"===n){while(i=u[f++])1===i.nodeType&&r.push(i);return r}return u},r.find.NAME=o.getByName&&function(n,i){return typeof i.getElementsByName!==y?i.getElementsByName(name):t},r.find.CLASS=o.getByClassName&&function(n,i){return typeof i.getElementsByClassName===y||c?t:i.getElementsByClassName(n)},rt=[],a=[":focus"],(o.qsa=ti(i.querySelectorAll))&&(b(function(n){n.innerHTML="<select><option selected=''><\/option><\/select>";n.querySelectorAll("[selected]").length||a.push("\\["+e+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)");n.querySelectorAll(":checked").length||a.push(":checked")}),b(function(n){n.innerHTML="<input type='hidden' i=''/>";n.querySelectorAll("[i^='']").length&&a.push("[*^$]="+e+"*(?:\"\"|'')");n.querySelectorAll(":enabled").length||a.push(":enabled",":disabled");n.querySelectorAll("*,:x");a.push(",.*:")})),(o.matchesSelector=ti(ct=h.matchesSelector||h.mozMatchesSelector||h.webkitMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&b(function(n){o.disconnectedMatch=ct.call(n,"div");ct.call(n,"[s!='']:x");rt.push("!=",gt)}),a=RegExp(a.join("|")),rt=RegExp(rt.join("|")),et=ti(h.contains)||h.compareDocumentPosition?function(n,t){var r=9===n.nodeType?n.documentElement:n,i=t&&t.parentNode;return n===i||!(!i||1!==i.nodeType||!(r.contains?r.contains(i):n.compareDocumentPosition&&16&n.compareDocumentPosition(i)))}:function(n,t){if(t)while(t=t.parentNode)if(t===n)return!0;return!1},kt=h.compareDocumentPosition?function(n,t){var r;return n===t?(tt=!0,0):(r=t.compareDocumentPosition&&n.compareDocumentPosition&&n.compareDocumentPosition(t))?1&r||n.parentNode&&11===n.parentNode.nodeType?n===i||et(k,n)?-1:t===i||et(k,t)?1:0:4&r?-1:1:n.compareDocumentPosition?-1:1}:function(n,t){var r,u=0,o=n.parentNode,s=t.parentNode,f=[n],e=[t];if(n===t)return tt=!0,0;if(!o||!s)return n===i?-1:t===i?1:o?-1:s?1:0;if(o===s)return yi(n,t);for(r=n;r=r.parentNode;)f.unshift(r);for(r=t;r=r.parentNode;)e.unshift(r);while(f[u]===e[u])u++;return u?yi(f[u],e[u]):f[u]===k?-1:e[u]===k?1:0},tt=!1,[0,0].sort(kt),o.detectDuplicates=tt,s):s};u.matches=function(n,t){return u(n,null,null,t)};u.matchesSelector=function(n,t){if((n.ownerDocument||n)!==s&&it(n),t=t.replace(er,"='$1']"),!(!o.matchesSelector||c||rt&&rt.test(t)||a.test(t)))try{var i=ct.call(n,t);if(i||o.disconnectedMatch||n.document&&11!==n.document.nodeType)return i}catch(r){}return u(t,s,null,[n]).length>0};u.contains=function(n,t){return(n.ownerDocument||n)!==s&&it(n),et(n,t)};u.attr=function(n,t){var i;return(n.ownerDocument||n)!==s&&it(n),c||(t=t.toLowerCase()),(i=r.attrHandle[t])?i(n):c||o.attributes?n.getAttribute(t):((i=n.getAttributeNode(t))||n.getAttribute(t))&&n[t]===!0?t:i&&i.specified?i.value:null};u.error=function(n){throw Error("Syntax error, unrecognized expression: "+n);};u.uniqueSort=function(n){var r,u=[],t=1,i=0;if(tt=!o.detectDuplicates,n.sort(kt),tt){for(;r=n[t];t++)r===n[t-1]&&(i=u.push(t));while(i--)n.splice(u[i],1)}return n};st=u.getText=function(n){var r,i="",u=0,t=n.nodeType;if(t){if(1===t||9===t||11===t){if("string"==typeof n.textContent)return n.textContent;for(n=n.firstChild;n;n=n.nextSibling)i+=st(n)}else if(3===t||4===t)return n.nodeValue}else for(;r=n[u];u++)i+=st(r);return i};r=u.selectors={cacheLength:50,createPseudo:l,match:vt,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(n){return n[1]=n[1].replace(p,w),n[3]=(n[4]||n[5]||"").replace(p,w),"~="===n[2]&&(n[3]=" "+n[3]+" "),n.slice(0,4)},CHILD:function(n){return n[1]=n[1].toLowerCase(),"nth"===n[1].slice(0,3)?(n[3]||u.error(n[0]),n[4]=+(n[4]?n[5]+(n[6]||1):2*("even"===n[3]||"odd"===n[3])),n[5]=+(n[7]+n[8]||"odd"===n[3])):n[3]&&u.error(n[0]),n},PSEUDO:function(n){var i,t=!n[5]&&n[2];return vt.CHILD.test(n[0])?null:(n[4]?n[2]=n[4]:t&&gi.test(t)&&(i=yt(t,!0))&&(i=t.indexOf(")",t.length-i)-t.length)&&(n[0]=n[0].slice(0,i),n[2]=t.slice(0,i)),n.slice(0,3))}},filter:{TAG:function(n){return"*"===n?function(){return!0}:(n=n.replace(p,w).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===n})},CLASS:function(n){var t=si[n+" "];return t||(t=RegExp("(^|"+e+")"+n+"("+e+"|$)"))&&si(n,function(n){return t.test(n.className||typeof n.getAttribute!==y&&n.getAttribute("class")||"")})},ATTR:function(n,t,i){return function(r){var f=u.attr(r,n);return null==f?"!="===t:t?(f+="","="===t?f===i:"!="===t?f!==i:"^="===t?i&&0===f.indexOf(i):"*="===t?i&&f.indexOf(i)>-1:"$="===t?i&&f.slice(-i.length)===i:"~="===t?(" "+f+" ").indexOf(i)>-1:"|="===t?f===i||f.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(n,t,i,r,u){var s="nth"!==n.slice(0,3),o="last"!==n.slice(-4),e="of-type"===t;return 1===r&&0===u?function(n){return!!n.parentNode}:function(t,i,h){var a,k,c,l,y,w,b=s!==o?"nextSibling":"previousSibling",p=t.parentNode,g=e&&t.nodeName.toLowerCase(),d=!h&&!e;if(p){if(s){while(b){for(c=t;c=c[b];)if(e?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;w=b="only"===n&&!w&&"nextSibling"}return!0}if(w=[o?p.firstChild:p.lastChild],o&&d){for(k=p[f]||(p[f]={}),a=k[n]||[],y=a[0]===v&&a[1],l=a[0]===v&&a[2],c=y&&p.childNodes[y];c=++y&&c&&c[b]||(l=y=0)||w.pop();)if(1===c.nodeType&&++l&&c===t){k[n]=[v,y,l];break}}else if(d&&(a=(t[f]||(t[f]={}))[n])&&a[0]===v)l=a[1];else while(c=++y&&c&&c[b]||(l=y=0)||w.pop())if((e?c.nodeName.toLowerCase()===g:1===c.nodeType)&&++l&&(d&&((c[f]||(c[f]={}))[n]=[v,l]),c===t))break;return l-=u,l===r||0==l%r&&l/r>=0}}},PSEUDO:function(n,t){var e,i=r.pseudos[n]||r.setFilters[n.toLowerCase()]||u.error("unsupported pseudo: "+n);return i[f]?i(t):i.length>1?(e=[n,n,"",t],r.setFilters.hasOwnProperty(n.toLowerCase())?l(function(n,r){for(var u,f=i(n,t),e=f.length;e--;)u=dt.call(n,f[e]),n[u]=!(r[u]=f[e])}):function(n){return i(n,0,e)}):i}},pseudos:{not:l(function(n){var i=[],r=[],t=bt(n.replace(at,"$1"));return t[f]?l(function(n,i,r,u){for(var e,o=t(n,null,u,[]),f=n.length;f--;)(e=o[f])&&(n[f]=!(i[f]=e))}):function(n,u,f){return i[0]=n,t(i,null,f,r),!r.pop()}}),has:l(function(n){return function(t){return u(n,t).length>0}}),contains:l(function(n){return function(t){return(t.textContent||t.innerText||st(t)).indexOf(n)>-1}}),lang:l(function(n){return nr.test(n||"")||u.error("unsupported lang: "+n),n=n.replace(p,w).toLowerCase(),function(t){var i;do if(i=c?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang)return i=i.toLowerCase(),i===n||0===i.indexOf(n+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=n.location&&n.location.hash;return i&&i.slice(1)===t.id},root:function(n){return n===h},focus:function(n){return n===s.activeElement&&(!s.hasFocus||s.hasFocus())&&!!(n.type||n.href||~n.tabIndex)},enabled:function(n){return n.disabled===!1},disabled:function(n){return n.disabled===!0},checked:function(n){var t=n.nodeName.toLowerCase();return"input"===t&&!!n.checked||"option"===t&&!!n.selected},selected:function(n){return n.parentNode&&n.parentNode.selectedIndex,n.selected===!0},empty:function(n){for(n=n.firstChild;n;n=n.nextSibling)if(n.nodeName>"@"||3===n.nodeType||4===n.nodeType)return!1;return!0},parent:function(n){return!r.pseudos.empty(n)},header:function(n){return ur.test(n.nodeName)},input:function(n){return rr.test(n.nodeName)},button:function(n){var t=n.nodeName.toLowerCase();return"input"===t&&"button"===n.type||"button"===t},text:function(n){var t;return"input"===n.nodeName.toLowerCase()&&"text"===n.type&&(null==(t=n.getAttribute("type"))||t.toLowerCase()===n.type)},first:g(function(){return[0]}),last:g(function(n,t){return[t-1]}),eq:g(function(n,t,i){return[0>i?i+t:i]}),even:g(function(n,t){for(var i=0;t>i;i+=2)n.push(i);return n}),odd:g(function(n,t){for(var i=1;t>i;i+=2)n.push(i);return n}),lt:g(function(n,t,i){for(var r=0>i?i+t:i;--r>=0;)n.push(r);return n}),gt:g(function(n,t,i){for(var r=0>i?i+t:i;t>++r;)n.push(r);return n})}};for(nt in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[nt]=or(nt);for(nt in{submit:!0,reset:!0})r.pseudos[nt]=sr(nt);bt=u.compile=function(n,t){var r,u=[],e=[],i=ci[n+" "];if(!i){for(t||(t=yt(n)),r=t.length;r--;)i=ei(t[r]),i[f]?u.push(i):e.push(i);i=ci(n,hr(e,u))}return i};r.pseudos.nth=r.pseudos.eq;r.filters=pi.prototype=r.pseudos;r.setFilters=new pi;it();u.attr=i.attr;i.find=u;i.expr=u.selectors;i.expr[":"]=i.expr.pseudos;i.unique=u.uniqueSort;i.text=u.getText;i.isXMLDoc=u.isXML;i.contains=u.contains}(n);var re=/Until$/,ue=/^(?:parents|prev(?:Until|All))/,fe=/^.[^:#\[\.,]*$/,hr=i.expr.match.needsContext,ee={children:!0,contents:!0,next:!0,prev:!0};i.fn.extend({find:function(n){var t,r,f,u=this.length;if("string"!=typeof n)return f=this,this.pushStack(i(n).filter(function(){for(t=0;u>t;t++)if(i.contains(f[t],this))return!0}));for(r=[],t=0;u>t;t++)i.find(n,this[t],r);return r=this.pushStack(u>1?i.unique(r):r),r.selector=(this.selector?this.selector+" ":"")+n,r},has:function(n){var t,r=i(n,this),u=r.length;return this.filter(function(){for(t=0;u>t;t++)if(i.contains(this,r[t]))return!0})},not:function(n){return this.pushStack(lr(this,n,!1))},filter:function(n){return this.pushStack(lr(this,n,!0))},is:function(n){return!!n&&("string"==typeof n?hr.test(n)?i(n,this.context).index(this[0])>=0:i.filter(n,this).length>0:this.filter(n).length>0)},closest:function(n,t){for(var r,f=0,o=this.length,u=[],e=hr.test(n)||"string"!=typeof n?i(n,t||this.context):0;o>f;f++)for(r=this[f];r&&r.ownerDocument&&r!==t&&11!==r.nodeType;){if(e?e.index(r)>-1:i.find.matchesSelector(r,n)){u.push(r);break}r=r.parentNode}return this.pushStack(u.length>1?i.unique(u):u)},index:function(n){return n?"string"==typeof n?i.inArray(this[0],i(n)):i.inArray(n.jquery?n[0]:n,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(n,t){var r="string"==typeof n?i(n,t):i.makeArray(n&&n.nodeType?[n]:n),u=i.merge(this.get(),r);return this.pushStack(i.unique(u))},addBack:function(n){return this.add(null==n?this.prevObject:this.prevObject.filter(n))}});i.fn.andSelf=i.fn.addBack;i.each({parent:function(n){var t=n.parentNode;return t&&11!==t.nodeType?t:null},parents:function(n){return i.dir(n,"parentNode")},parentsUntil:function(n,t,r){return i.dir(n,"parentNode",r)},next:function(n){return cr(n,"nextSibling")},prev:function(n){return cr(n,"previousSibling")},nextAll:function(n){return i.dir(n,"nextSibling")},prevAll:function(n){return i.dir(n,"previousSibling")},nextUntil:function(n,t,r){return i.dir(n,"nextSibling",r)},prevUntil:function(n,t,r){return i.dir(n,"previousSibling",r)},siblings:function(n){return i.sibling((n.parentNode||{}).firstChild,n)},children:function(n){return i.sibling(n.firstChild)},contents:function(n){return i.nodeName(n,"iframe")?n.contentDocument||n.contentWindow.document:i.merge([],n.childNodes)}},function(n,t){i.fn[n]=function(r,u){var f=i.map(this,t,r);return re.test(n)||(u=r),u&&"string"==typeof u&&(f=i.filter(u,f)),f=this.length>1&&!ee[n]?i.unique(f):f,this.length>1&&ue.test(n)&&(f=f.reverse()),this.pushStack(f)}});i.extend({filter:function(n,t,r){return r&&(n=":not("+n+")"),1===t.length?i.find.matchesSelector(t[0],n)?[t[0]]:[]:i.find.matches(n,t)},dir:function(n,r,u){for(var e=[],f=n[r];f&&9!==f.nodeType&&(u===t||1!==f.nodeType||!i(f).is(u));)1===f.nodeType&&e.push(f),f=f[r];return e},sibling:function(n,t){for(var i=[];n;n=n.nextSibling)1===n.nodeType&&n!==t&&i.push(n);return i}});var vr="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",oe=/ jQuery\d+="(?:null|\d+)"/g,yr=RegExp("<(?:"+vr+")[\\s/>]","i"),fi=/^\s+/,pr=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,wr=/<([\w:]+)/,br=/<tbody/i,se=/<|&#?\w+;/,he=/<(?:script|style|link)/i,ei=/^(?:checkbox|radio)$/i,ce=/checked\s*(?:[^=]|=\s*.checked.)/i,kr=/^$|\/(?:java|ecma)script/i,le=/^true\/(.*)/,ae=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,e={option:[1,"<select multiple='multiple'>","<\/select>"],legend:[1,"<fieldset>","<\/fieldset>"],area:[1,"<map>","<\/map>"],param:[1,"<object>","<\/object>"],thead:[1,"<table>","<\/table>"],tr:[2,"<table><tbody>","<\/tbody><\/table>"],col:[2,"<table><tbody><\/tbody><colgroup>","<\/colgroup><\/table>"],td:[3,"<table><tbody><tr>","<\/tr><\/tbody><\/table>"],_default:i.support.htmlSerialize?[0,"",""]:[1,"X<div>","<\/div>"]},ve=ar(r),oi=ve.appendChild(r.createElement("div"));e.optgroup=e.option;e.tbody=e.tfoot=e.colgroup=e.caption=e.thead;e.th=e.td;i.fn.extend({text:function(n){return i.access(this,function(n){return n===t?i.text(this):this.empty().append((this[0]&&this[0].ownerDocument||r).createTextNode(n))},null,n,arguments.length)},wrapAll:function(n){if(i.isFunction(n))return this.each(function(t){i(this).wrapAll(n.call(this,t))});if(this[0]){var t=i(n,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]);t.map(function(){for(var n=this;n.firstChild&&1===n.firstChild.nodeType;)n=n.firstChild;return n}).append(this)}return this},wrapInner:function(n){return i.isFunction(n)?this.each(function(t){i(this).wrapInner(n.call(this,t))}):this.each(function(){var t=i(this),r=t.contents();r.length?r.wrapAll(n):t.append(n)})},wrap:function(n){var t=i.isFunction(n);return this.each(function(r){i(this).wrapAll(t?n.call(this,r):n)})},unwrap:function(){return this.parent().each(function(){i.nodeName(this,"body")||i(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(n){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(n)})},prepend:function(){return this.domManip(arguments,!0,function(n){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(n,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(n){this.parentNode&&this.parentNode.insertBefore(n,this)})},after:function(){return this.domManip(arguments,!1,function(n){this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling)})},remove:function(n,t){for(var r,f=0;null!=(r=this[f]);f++)(!n||i.filter(n,[r]).length>0)&&(t||1!==r.nodeType||i.cleanData(u(r)),r.parentNode&&(t&&i.contains(r.ownerDocument,r)&&si(u(r,"script")),r.parentNode.removeChild(r)));return this},empty:function(){for(var n,t=0;null!=(n=this[t]);t++){for(1===n.nodeType&&i.cleanData(u(n,!1));n.firstChild;)n.removeChild(n.firstChild);n.options&&i.nodeName(n,"select")&&(n.options.length=0)}return this},clone:function(n,t){return n=null==n?!1:n,t=null==t?n:t,this.map(function(){return i.clone(this,n,t)})},html:function(n){return i.access(this,function(n){var r=this[0]||{},f=0,o=this.length;if(n===t)return 1===r.nodeType?r.innerHTML.replace(oe,""):t;if(!("string"!=typeof n||he.test(n)||!i.support.htmlSerialize&&yr.test(n)||!i.support.leadingWhitespace&&fi.test(n)||e[(wr.exec(n)||["",""])[1].toLowerCase()])){n=n.replace(pr,"<$1><\/$2>");try{for(;o>f;f++)r=this[f]||{},1===r.nodeType&&(i.cleanData(u(r,!1)),r.innerHTML=n);r=0}catch(s){}}r&&this.empty().append(n)},null,n,arguments.length)},replaceWith:function(n){var t=i.isFunction(n);return t||"string"==typeof n||(n=i(n).not(this).detach()),this.domManip([n],!0,function(n){var r=this.nextSibling,t=this.parentNode;t&&(i(this).remove(),t.insertBefore(n,r))})},detach:function(n){return this.remove(n,!0)},domManip:function(n,r,f){n=bi.apply([],n);var c,e,l,s,y,h,o=0,a=this.length,w=this,b=a-1,v=n[0],p=i.isFunction(v);if(p||!(1>=a||"string"!=typeof v||i.support.checkClone)&&ce.test(v))return this.each(function(i){var u=w.eq(i);p&&(n[0]=v.call(this,i,r?u.html():t));u.domManip(n,r,f)});if(a&&(h=i.buildFragment(n,this[0].ownerDocument,!1,this),c=h.firstChild,1===h.childNodes.length&&(h=c),c)){for(r=r&&i.nodeName(c,"tr"),s=i.map(u(h,"script"),dr),l=s.length;a>o;o++)e=h,o!==b&&(e=i.clone(e,!0,!0),l&&i.merge(s,u(e,"script"))),f.call(r&&i.nodeName(this[o],"table")?ye(this[o],"tbody"):this[o],e,o);if(l)for(y=s[s.length-1].ownerDocument,i.map(s,gr),o=0;l>o;o++)e=s[o],kr.test(e.type||"")&&!i._data(e,"globalEval")&&i.contains(y,e)&&(e.src?i.ajax({url:e.src,type:"GET",dataType:"script",async:!1,global:!1,throws:!0}):i.globalEval((e.text||e.textContent||e.innerHTML||"").replace(ae,"")));h=c=null}return this}});i.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(n,t){i.fn[n]=function(n){for(var u,r=0,f=[],e=i(n),o=e.length-1;o>=r;r++)u=r===o?this:this.clone(!0),i(e[r])[t](u),bt.apply(f,u.get());return this.pushStack(f)}});i.extend({clone:function(n,t,r){var f,h,o,e,s,c=i.contains(n.ownerDocument,n);if(i.support.html5Clone||i.isXMLDoc(n)||!yr.test("<"+n.nodeName+">")?o=n.cloneNode(!0):(oi.innerHTML=n.outerHTML,oi.removeChild(o=oi.firstChild)),!(i.support.noCloneEvent&&i.support.noCloneChecked||1!==n.nodeType&&11!==n.nodeType||i.isXMLDoc(n)))for(f=u(o),s=u(n),e=0;null!=(h=s[e]);++e)f[e]&&pe(h,f[e]);if(t)if(r)for(s=s||u(n),f=f||u(o),e=0;null!=(h=s[e]);e++)nu(h,f[e]);else nu(n,o);return f=u(o,"script"),f.length>0&&si(f,!c&&u(n,"script")),f=s=h=null,o},buildFragment:function(n,t,r,f){for(var h,o,w,s,y,p,l,b=n.length,a=ar(t),c=[],v=0;b>v;v++)if(o=n[v],o||0===o)if("object"===i.type(o))i.merge(c,o.nodeType?[o]:o);else if(se.test(o)){for(s=s||a.appendChild(t.createElement("div")),y=(wr.exec(o)||["",""])[1].toLowerCase(),l=e[y]||e._default,s.innerHTML=l[1]+o.replace(pr,"<$1><\/$2>")+l[2],h=l[0];h--;)s=s.lastChild;if(!i.support.leadingWhitespace&&fi.test(o)&&c.push(t.createTextNode(fi.exec(o)[0])),!i.support.tbody)for(o="table"!==y||br.test(o)?"<table>"!==l[1]||br.test(o)?0:s:s.firstChild,h=o&&o.childNodes.length;h--;)i.nodeName(p=o.childNodes[h],"tbody")&&!p.childNodes.length&&o.removeChild(p);for(i.merge(c,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=a.lastChild}else c.push(t.createTextNode(o));for(s&&a.removeChild(s),i.support.appendChecked||i.grep(u(c,"input"),we),v=0;o=c[v++];)if((!f||-1===i.inArray(o,f))&&(w=i.contains(o.ownerDocument,o),s=u(a.appendChild(o),"script"),w&&si(s),r))for(h=0;o=s[h++];)kr.test(o.type||"")&&r.push(o);return s=null,a},cleanData:function(n,t){for(var r,f,u,e,c=0,s=i.expando,h=i.cache,l=i.support.deleteExpando,a=i.event.special;null!=(r=n[c]);c++)if((t||i.acceptData(r))&&(u=r[s],e=u&&h[u])){if(e.events)for(f in e.events)a[f]?i.event.remove(r,f):i.removeEvent(r,f,e.handle);h[u]&&(delete h[u],l?delete r[s]:typeof r.removeAttribute!==o?r.removeAttribute(s):r[s]=null,b.push(u))}}});var rt,v,y,hi=/alpha\([^)]*\)/i,be=/opacity\s*=\s*([^)]*)/,ke=/^(top|right|bottom|left)$/,de=/^(none|table(?!-c[ea]).+)/,tu=/^margin/,ge=RegExp("^("+st+")(.*)$","i"),ct=RegExp("^("+st+")(?!px)[a-z%]+$","i"),no=RegExp("^([+-])=("+st+")","i"),iu={BODY:"block"},to={position:"absolute",visibility:"hidden",display:"block"},ru={letterSpacing:0,fontWeight:400},p=["Top","Right","Bottom","Left"],uu=["Webkit","O","Moz","ms"];i.fn.extend({css:function(n,r){return i.access(this,function(n,r,u){var e,o,s={},f=0;if(i.isArray(r)){for(o=v(n),e=r.length;e>f;f++)s[r[f]]=i.css(n,r[f],!1,o);return s}return u!==t?i.style(n,r,u):i.css(n,r)},n,r,arguments.length>1)},show:function(){return eu(this,!0)},hide:function(){return eu(this)},toggle:function(n){var t="boolean"==typeof n;return this.each(function(){(t?n:ut(this))?i(this).show():i(this).hide()})}});i.extend({cssHooks:{opacity:{get:function(n,t){if(t){var i=y(n,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:i.support.cssFloat?"cssFloat":"styleFloat"},style:function(n,r,u,f){if(n&&3!==n.nodeType&&8!==n.nodeType&&n.style){var o,s,e,h=i.camelCase(r),c=n.style;if(r=i.cssProps[h]||(i.cssProps[h]=fu(c,h)),e=i.cssHooks[r]||i.cssHooks[h],u===t)return e&&"get"in e&&(o=e.get(n,!1,f))!==t?o:c[r];if(s=typeof u,"string"===s&&(o=no.exec(u))&&(u=(o[1]+1)*o[2]+parseFloat(i.css(n,r)),s="number"),!(null==u||"number"===s&&isNaN(u)||("number"!==s||i.cssNumber[h]||(u+="px"),i.support.clearCloneStyle||""!==u||0!==r.indexOf("background")||(c[r]="inherit"),e&&"set"in e&&(u=e.set(n,u,f))===t)))try{c[r]=u}catch(l){}}},css:function(n,r,u,f){var h,e,o,s=i.camelCase(r);return r=i.cssProps[s]||(i.cssProps[s]=fu(n.style,s)),o=i.cssHooks[r]||i.cssHooks[s],o&&"get"in o&&(e=o.get(n,!0,u)),e===t&&(e=y(n,r,f)),"normal"===e&&r in ru&&(e=ru[r]),""===u||u?(h=parseFloat(e),u===!0||i.isNumeric(h)?h||0:e):e},swap:function(n,t,i,r){var f,u,e={};for(u in t)e[u]=n.style[u],n.style[u]=t[u];f=i.apply(n,r||[]);for(u in t)n.style[u]=e[u];return f}});n.getComputedStyle?(v=function(t){return n.getComputedStyle(t,null)},y=function(n,r,u){var s,h,c,o=u||v(n),e=o?o.getPropertyValue(r)||o[r]:t,f=n.style;return o&&(""!==e||i.contains(n.ownerDocument,n)||(e=i.style(n,r)),ct.test(e)&&tu.test(r)&&(s=f.width,h=f.minWidth,c=f.maxWidth,f.minWidth=f.maxWidth=f.width=e,e=o.width,f.width=s,f.minWidth=h,f.maxWidth=c)),e}):r.documentElement.currentStyle&&(v=function(n){return n.currentStyle},y=function(n,i,r){var s,e,o,h=r||v(n),u=h?h[i]:t,f=n.style;return null==u&&f&&f[i]&&(u=f[i]),ct.test(u)&&!ke.test(i)&&(s=f.left,e=n.runtimeStyle,o=e&&e.left,o&&(e.left=n.currentStyle.left),f.left="fontSize"===i?"1em":u,u=f.pixelLeft+"px",f.left=s,o&&(e.left=o)),""===u?"auto":u});i.each(["height","width"],function(n,r){i.cssHooks[r]={get:function(n,u,f){return u?0===n.offsetWidth&&de.test(i.css(n,"display"))?i.swap(n,to,function(){return hu(n,r,f)}):hu(n,r,f):t},set:function(n,t,u){var f=u&&v(n);return ou(n,t,u?su(n,r,u,i.support.boxSizing&&"border-box"===i.css(n,"boxSizing",!1,f),f):0)}}});i.support.opacity||(i.cssHooks.opacity={get:function(n,t){return be.test((t&&n.currentStyle?n.currentStyle.filter:n.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(n,t){var r=n.style,u=n.currentStyle,e=i.isNumeric(t)?"alpha(opacity="+100*t+")":"",f=u&&u.filter||r.filter||"";r.zoom=1;(t>=1||""===t)&&""===i.trim(f.replace(hi,""))&&r.removeAttribute&&(r.removeAttribute("filter"),""===t||u&&!u.filter)||(r.filter=hi.test(f)?f.replace(hi,e):f+" "+e)}});i(function(){i.support.reliableMarginRight||(i.cssHooks.marginRight={get:function(n,r){return r?i.swap(n,{display:"inline-block"},y,[n,"marginRight"]):t}});!i.support.pixelPosition&&i.fn.position&&i.each(["top","left"],function(n,r){i.cssHooks[r]={get:function(n,u){return u?(u=y(n,r),ct.test(u)?i(n).position()[r]+"px":u):t}}})});i.expr&&i.expr.filters&&(i.expr.filters.hidden=function(n){return 0>=n.offsetWidth&&0>=n.offsetHeight||!i.support.reliableHiddenOffsets&&"none"===(n.style&&n.style.display||i.css(n,"display"))},i.expr.filters.visible=function(n){return!i.expr.filters.hidden(n)});i.each({margin:"",padding:"",border:"Width"},function(n,t){i.cssHooks[n+t]={expand:function(i){for(var r=0,f={},u="string"==typeof i?i.split(" "):[i];4>r;r++)f[n+p[r]+t]=u[r]||u[r-2]||u[0];return f}};tu.test(n)||(i.cssHooks[n+t].set=ou)});var io=/%20/g,ro=/\[\]$/,au=/\r?\n/g,uo=/^(?:submit|button|image|reset|file)$/i,fo=/^(?:input|select|textarea|keygen)/i;i.fn.extend({serialize:function(){return i.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var n=i.prop(this,"elements");return n?i.makeArray(n):this}).filter(function(){var n=this.type;return this.name&&!i(this).is(":disabled")&&fo.test(this.nodeName)&&!uo.test(n)&&(this.checked||!ei.test(n))}).map(function(n,t){var r=i(this).val();return null==r?null:i.isArray(r)?i.map(r,function(n){return{name:t.name,value:n.replace(au,"\r\n")}}):{name:t.name,value:r.replace(au,"\r\n")}}).get()}});i.param=function(n,r){var u,f=[],e=function(n,t){t=i.isFunction(t)?t():null==t?"":t;f[f.length]=encodeURIComponent(n)+"="+encodeURIComponent(t)};if(r===t&&(r=i.ajaxSettings&&i.ajaxSettings.traditional),i.isArray(n)||n.jquery&&!i.isPlainObject(n))i.each(n,function(){e(this.name,this.value)});else for(u in n)ci(u,n[u],r,e);return f.join("&").replace(io,"+")};i.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(n,t){i.fn[t]=function(n,i){return arguments.length>0?this.on(t,null,n,i):this.trigger(t)}});i.fn.hover=function(n,t){return this.mouseenter(n).mouseleave(t||n)};var w,c,li=i.now(),ai=/\?/,eo=/#.*$/,vu=/([?&])_=[^&]*/,oo=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,so=/^(?:GET|HEAD)$/,ho=/^\/\//,yu=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,pu=i.fn.load,wu={},vi={},bu="*/".concat("*");try{c=ff.href}catch(go){c=r.createElement("a");c.href="";c=c.href}w=yu.exec(c.toLowerCase())||[];i.fn.load=function(n,r,u){if("string"!=typeof n&&pu)return pu.apply(this,arguments);var f,s,h,e=this,o=n.indexOf(" ");return o>=0&&(f=n.slice(o,n.length),n=n.slice(0,o)),i.isFunction(r)?(u=r,r=t):r&&"object"==typeof r&&(h="POST"),e.length>0&&i.ajax({url:n,type:h,dataType:"html",data:r}).done(function(n){s=arguments;e.html(f?i("<div>").append(i.parseHTML(n)).find(f):n)}).complete(u&&function(n,t){e.each(u,s||[n.responseText,t,n])}),this};i.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(n,t){i.fn[t]=function(n){return this.on(t,n)}});i.each(["get","post"],function(n,r){i[r]=function(n,u,f,e){return i.isFunction(u)&&(e=e||f,f=u,u=t),i.ajax({url:n,type:r,dataType:e,data:u,success:f})}});i.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:c,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(w[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":bu,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":n.String,"text html":!0,"text json":i.parseJSON,"text xml":i.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(n,t){return t?yi(yi(n,i.ajaxSettings),t):yi(i.ajaxSettings,n)},ajaxPrefilter:ku(wu),ajaxTransport:ku(vi),ajax:function(n,r){function k(n,r,s,c){var l,k,w,rt,p,a=r;2!==o&&(o=2,g&&clearTimeout(g),y=t,d=c||"",f.readyState=n>0?4:0,s&&(rt=co(u,f,s)),n>=200&&300>n||304===n?(u.ifModified&&(p=f.getResponseHeader("Last-Modified"),p&&(i.lastModified[e]=p),p=f.getResponseHeader("etag"),p&&(i.etag[e]=p)),204===n?(l=!0,a="nocontent"):304===n?(l=!0,a="notmodified"):(l=lo(u,rt),a=l.state,k=l.data,w=l.error,l=!w)):(w=a,(n||!a)&&(a="error",0>n&&(n=0))),f.status=n,f.statusText=(r||a)+"",l?tt.resolveWith(h,[k,a,f]):tt.rejectWith(h,[f,a,w]),f.statusCode(b),b=t,v&&nt.trigger(l?"ajaxSuccess":"ajaxError",[f,u,l?k:w]),it.fireWith(h,[f,a]),v&&(nt.trigger("ajaxComplete",[f,u]),--i.active||i.event.trigger("ajaxStop")))}"object"==typeof n&&(r=n,n=t);r=r||{};var l,a,e,d,g,v,y,p,u=i.ajaxSetup({},r),h=u.context||u,nt=u.context&&(h.nodeType||h.jquery)?i(h):i.event,tt=i.Deferred(),it=i.Callbacks("once memory"),b=u.statusCode||{},rt={},ut={},o=0,ft="canceled",f={readyState:0,getResponseHeader:function(n){var t;if(2===o){if(!p)for(p={};t=oo.exec(d);)p[t[1].toLowerCase()]=t[2];t=p[n.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===o?d:null},setRequestHeader:function(n,t){var i=n.toLowerCase();return o||(n=ut[i]=ut[i]||n,rt[n]=t),this},overrideMimeType:function(n){return o||(u.mimeType=n),this},statusCode:function(n){var t;if(n)if(2>o)for(t in n)b[t]=[b[t],n[t]];else f.always(n[f.status]);return this},abort:function(n){var t=n||ft;return y&&y.abort(t),k(0,t),this}};if(tt.promise(f).complete=it.add,f.success=f.done,f.error=f.fail,u.url=((n||u.url||c)+"").replace(eo,"").replace(ho,w[1]+"//"),u.type=r.method||r.type||u.method||u.type,u.dataTypes=i.trim(u.dataType||"*").toLowerCase().match(s)||[""],null==u.crossDomain&&(l=yu.exec(u.url.toLowerCase()),u.crossDomain=!(!l||l[1]===w[1]&&l[2]===w[2]&&(l[3]||("http:"===l[1]?80:443))==(w[3]||("http:"===w[1]?80:443)))),u.data&&u.processData&&"string"!=typeof u.data&&(u.data=i.param(u.data,u.traditional)),du(wu,u,r,f),2===o)return f;v=u.global;v&&0==i.active++&&i.event.trigger("ajaxStart");u.type=u.type.toUpperCase();u.hasContent=!so.test(u.type);e=u.url;u.hasContent||(u.data&&(e=u.url+=(ai.test(e)?"&":"?")+u.data,delete u.data),u.cache===!1&&(u.url=vu.test(e)?e.replace(vu,"$1_="+li++):e+(ai.test(e)?"&":"?")+"_="+li++));u.ifModified&&(i.lastModified[e]&&f.setRequestHeader("If-Modified-Since",i.lastModified[e]),i.etag[e]&&f.setRequestHeader("If-None-Match",i.etag[e]));(u.data&&u.hasContent&&u.contentType!==!1||r.contentType)&&f.setRequestHeader("Content-Type",u.contentType);f.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+bu+"; q=0.01":""):u.accepts["*"]);for(a in u.headers)f.setRequestHeader(a,u.headers[a]);if(u.beforeSend&&(u.beforeSend.call(h,f,u)===!1||2===o))return f.abort();ft="abort";for(a in{success:1,error:1,complete:1})f[a](u[a]);if(y=du(vi,u,r,f)){f.readyState=1;v&&nt.trigger("ajaxSend",[f,u]);u.async&&u.timeout>0&&(g=setTimeout(function(){f.abort("timeout")},u.timeout));try{o=1;y.send(rt,k)}catch(et){if(!(2>o))throw et;k(-1,et)}}else k(-1,"No Transport");return f},getScript:function(n,r){return i.get(n,t,r,"script")},getJSON:function(n,t,r){return i.get(n,t,r,"json")}});i.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(n){return i.globalEval(n),n}}});i.ajaxPrefilter("script",function(n){n.cache===t&&(n.cache=!1);n.crossDomain&&(n.type="GET",n.global=!1)});i.ajaxTransport("script",function(n){if(n.crossDomain){var u,f=r.head||i("head")[0]||r.documentElement;return{send:function(t,i){u=r.createElement("script");u.async=!0;n.scriptCharset&&(u.charset=n.scriptCharset);u.src=n.url;u.onload=u.onreadystatechange=function(n,t){(t||!u.readyState||/loaded|complete/.test(u.readyState))&&(u.onload=u.onreadystatechange=null,u.parentNode&&u.parentNode.removeChild(u),u=null,t||i(200,"success"))};f.insertBefore(u,f.firstChild)},abort:function(){u&&u.onload(t,!0)}}}});pi=[];lt=/(=)\?(?=&|$)|\?\?/;i.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var n=pi.pop()||i.expando+"_"+li++;return this[n]=!0,n}});i.ajaxPrefilter("json jsonp",function(r,u,f){var e,s,o,h=r.jsonp!==!1&&(lt.test(r.url)?"url":"string"==typeof r.data&&!(r.contentType||"").indexOf("application/x-www-form-urlencoded")&&lt.test(r.data)&&"data");return h||"jsonp"===r.dataTypes[0]?(e=r.jsonpCallback=i.isFunction(r.jsonpCallback)?r.jsonpCallback():r.jsonpCallback,h?r[h]=r[h].replace(lt,"$1"+e):r.jsonp!==!1&&(r.url+=(ai.test(r.url)?"&":"?")+r.jsonp+"="+e),r.converters["script json"]=function(){return o||i.error(e+" was not called"),o[0]},r.dataTypes[0]="json",s=n[e],n[e]=function(){o=arguments},f.always(function(){n[e]=s;r[e]&&(r.jsonpCallback=u.jsonpCallback,pi.push(e));o&&i.isFunction(s)&&s(o[0]);o=s=t}),"script"):t});gu=0;at=n.ActiveXObject&&function(){for(var n in g)g[n](t,!0)};i.ajaxSettings.xhr=n.ActiveXObject?function(){return!this.isLocal&&nf()||ao()}:nf;nt=i.ajaxSettings.xhr();i.support.cors=!!nt&&"withCredentials"in nt;nt=i.support.ajax=!!nt;nt&&i.ajaxTransport(function(r){if(!r.crossDomain||i.support.cors){var u;return{send:function(f,e){var h,s,o=r.xhr();if(r.username?o.open(r.type,r.url,r.async,r.username,r.password):o.open(r.type,r.url,r.async),r.xhrFields)for(s in r.xhrFields)o[s]=r.xhrFields[s];r.mimeType&&o.overrideMimeType&&o.overrideMimeType(r.mimeType);r.crossDomain||f["X-Requested-With"]||(f["X-Requested-With"]="XMLHttpRequest");try{for(s in f)o.setRequestHeader(s,f[s])}catch(c){}o.send(r.hasContent&&r.data||null);u=function(n,f){var s,a,l,c;try{if(u&&(f||4===o.readyState))if(u=t,h&&(o.onreadystatechange=i.noop,at&&delete g[h]),f)4!==o.readyState&&o.abort();else{c={};s=o.status;a=o.getAllResponseHeaders();"string"==typeof o.responseText&&(c.text=o.responseText);try{l=o.statusText}catch(y){l=""}s||!r.isLocal||r.crossDomain?1223===s&&(s=204):s=c.text?200:404}}catch(v){f||e(-1,v)}c&&e(s,l,c,a)};r.async?4===o.readyState?setTimeout(u):(h=++gu,at&&(g||(g={},i(n).unload(at)),g[h]=u),o.onreadystatechange=u):u()},abort:function(){u&&u(t,!0)}}}});var tt,vt,vo=/^(?:toggle|show|hide)$/,yo=RegExp("^(?:([+-])=|)("+st+")([a-z%]*)$","i"),po=/queueHooks$/,yt=[ko],ft={"*":[function(n,t){var o,s,r=this.createTween(n,t),e=yo.exec(t),h=r.cur(),u=+h||0,f=1,c=20;if(e){if(o=+e[2],s=e[3]||(i.cssNumber[n]?"":"px"),"px"!==s&&u){u=i.css(r.elem,n,!0)||o||1;do f=f||".5",u/=f,i.style(r.elem,n,u+s);while(f!==(f=r.cur()/h)&&1!==f&&--c)}r.unit=s;r.start=u;r.end=e[1]?u+(e[1]+1)*o:o}return r}]};i.Animation=i.extend(rf,{tweener:function(n,t){i.isFunction(n)?(t=n,n=["*"]):n=n.split(" ");for(var r,u=0,f=n.length;f>u;u++)r=n[u],ft[r]=ft[r]||[],ft[r].unshift(t)},prefilter:function(n,t){t?yt.unshift(n):yt.push(n)}});i.Tween=f;f.prototype={constructor:f,init:function(n,t,r,u,f,e){this.elem=n;this.prop=r;this.easing=f||"swing";this.options=t;this.start=this.now=this.cur();this.end=u;this.unit=e||(i.cssNumber[r]?"":"px")},cur:function(){var n=f.propHooks[this.prop];return n&&n.get?n.get(this):f.propHooks._default.get(this)},run:function(n){var r,t=f.propHooks[this.prop];return this.pos=r=this.options.duration?i.easing[this.easing](n,this.options.duration*n,0,1,this.options.duration):n,this.now=(this.end-this.start)*r+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),t&&t.set?t.set(this):f.propHooks._default.set(this),this}};f.prototype.init.prototype=f.prototype;f.propHooks={_default:{get:function(n){var t;return null==n.elem[n.prop]||n.elem.style&&null!=n.elem.style[n.prop]?(t=i.css(n.elem,n.prop,""),t&&"auto"!==t?t:0):n.elem[n.prop]},set:function(n){i.fx.step[n.prop]?i.fx.step[n.prop](n):n.elem.style&&(null!=n.elem.style[i.cssProps[n.prop]]||i.cssHooks[n.prop])?i.style(n.elem,n.prop,n.now+n.unit):n.elem[n.prop]=n.now}}};f.propHooks.scrollTop=f.propHooks.scrollLeft={set:function(n){n.elem.nodeType&&n.elem.parentNode&&(n.elem[n.prop]=n.now)}};i.each(["toggle","show","hide"],function(n,t){var r=i.fn[t];i.fn[t]=function(n,i,u){return null==n||"boolean"==typeof n?r.apply(this,arguments):this.animate(pt(t,!0),n,i,u)}});i.fn.extend({fadeTo:function(n,t,i,r){return this.filter(ut).css("opacity",0).show().end().animate({opacity:t},n,i,r)},animate:function(n,t,r,u){var o=i.isEmptyObject(n),e=i.speed(t,r,u),f=function(){var t=rf(this,i.extend({},n),e);f.finish=function(){t.stop(!0)};(o||i._data(this,"finish"))&&t.stop(!0)};return f.finish=f,o||e.queue===!1?this.each(f):this.queue(e.queue,f)},stop:function(n,r,u){var f=function(n){var t=n.stop;delete n.stop;t(u)};return"string"!=typeof n&&(u=r,r=n,n=t),r&&n!==!1&&this.queue(n||"fx",[]),this.each(function(){var o=!0,t=null!=n&&n+"queueHooks",e=i.timers,r=i._data(this);if(t)r[t]&&r[t].stop&&f(r[t]);else for(t in r)r[t]&&r[t].stop&&po.test(t)&&f(r[t]);for(t=e.length;t--;)e[t].elem!==this||null!=n&&e[t].queue!==n||(e[t].anim.stop(u),o=!1,e.splice(t,1));(o||!u)&&i.dequeue(this,n)})},finish:function(n){return n!==!1&&(n=n||"fx"),this.each(function(){var t,f=i._data(this),r=f[n+"queue"],e=f[n+"queueHooks"],u=i.timers,o=r?r.length:0;for(f.finish=!0,i.queue(this,n,[]),e&&e.cur&&e.cur.finish&&e.cur.finish.call(this),t=u.length;t--;)u[t].elem===this&&u[t].queue===n&&(u[t].anim.stop(!0),u.splice(t,1));for(t=0;o>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete f.finish})}});i.each({slideDown:pt("show"),slideUp:pt("hide"),slideToggle:pt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(n,t){i.fn[n]=function(n,i,r){return this.animate(t,n,i,r)}});i.speed=function(n,t,r){var u=n&&"object"==typeof n?i.extend({},n):{complete:r||!r&&t||i.isFunction(n)&&n,duration:n,easing:r&&t||t&&!i.isFunction(t)&&t};return u.duration=i.fx.off?0:"number"==typeof u.duration?u.duration:u.duration in i.fx.speeds?i.fx.speeds[u.duration]:i.fx.speeds._default,(null==u.queue||u.queue===!0)&&(u.queue="fx"),u.old=u.complete,u.complete=function(){i.isFunction(u.old)&&u.old.call(this);u.queue&&i.dequeue(this,u.queue)},u};i.easing={linear:function(n){return n},swing:function(n){return.5-Math.cos(n*Math.PI)/2}};i.timers=[];i.fx=f.prototype.init;i.fx.tick=function(){var u,n=i.timers,r=0;for(tt=i.now();n.length>r;r++)u=n[r],u()||n[r]!==u||n.splice(r--,1);n.length||i.fx.stop();tt=t};i.fx.timer=function(n){n()&&i.timers.push(n)&&i.fx.start()};i.fx.interval=13;i.fx.start=function(){vt||(vt=setInterval(i.fx.tick,i.fx.interval))};i.fx.stop=function(){clearInterval(vt);vt=null};i.fx.speeds={slow:600,fast:200,_default:400};i.fx.step={};i.expr&&i.expr.filters&&(i.expr.filters.animated=function(n){return i.grep(i.timers,function(t){return n===t.elem}).length});i.fn.offset=function(n){if(arguments.length)return n===t?this:this.each(function(t){i.offset.setOffset(this,n,t)});var r,e,f={top:0,left:0},u=this[0],s=u&&u.ownerDocument;if(s)return r=s.documentElement,i.contains(r,u)?(typeof u.getBoundingClientRect!==o&&(f=u.getBoundingClientRect()),e=uf(s),{top:f.top+(e.pageYOffset||r.scrollTop)-(r.clientTop||0),left:f.left+(e.pageXOffset||r.scrollLeft)-(r.clientLeft||0)}):f};i.offset={setOffset:function(n,t,r){var f=i.css(n,"position");"static"===f&&(n.style.position="relative");var e=i(n),o=e.offset(),l=i.css(n,"top"),a=i.css(n,"left"),v=("absolute"===f||"fixed"===f)&&i.inArray("auto",[l,a])>-1,u={},s={},h,c;v?(s=e.position(),h=s.top,c=s.left):(h=parseFloat(l)||0,c=parseFloat(a)||0);i.isFunction(t)&&(t=t.call(n,r,o));null!=t.top&&(u.top=t.top-o.top+h);null!=t.left&&(u.left=t.left-o.left+c);"using"in t?t.using.call(n,u):e.css(u)}};i.fn.extend({position:function(){if(this[0]){var n,r,t={top:0,left:0},u=this[0];return"fixed"===i.css(u,"position")?r=u.getBoundingClientRect():(n=this.offsetParent(),r=this.offset(),i.nodeName(n[0],"html")||(t=n.offset()),t.top+=i.css(n[0],"borderTopWidth",!0),t.left+=i.css(n[0],"borderLeftWidth",!0)),{top:r.top-t.top-i.css(u,"marginTop",!0),left:r.left-t.left-i.css(u,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var n=this.offsetParent||r.documentElement;n&&!i.nodeName(n,"html")&&"static"===i.css(n,"position");)n=n.offsetParent;return n||r.documentElement})}});i.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(n,r){var u=/Y/.test(r);i.fn[n]=function(f){return i.access(this,function(n,f,e){var o=uf(n);return e===t?o?r in o?o[r]:o.document.documentElement[f]:n[f]:(o?o.scrollTo(u?i(o).scrollLeft():e,u?e:i(o).scrollTop()):n[f]=e,t)},n,f,arguments.length,null)}});i.each({Height:"height",Width:"width"},function(n,r){i.each({padding:"inner"+n,content:r,"":"outer"+n},function(u,f){i.fn[f]=function(f,e){var o=arguments.length&&(u||"boolean"!=typeof f),s=u||(f===!0||e===!0?"margin":"border");return i.access(this,function(r,u,f){var e;return i.isWindow(r)?r.document.documentElement["client"+n]:9===r.nodeType?(e=r.documentElement,Math.max(r.body["scroll"+n],e["scroll"+n],r.body["offset"+n],e["offset"+n],e["client"+n])):f===t?i.css(r,u,s):i.style(r,u,f,s)},r,o?f:t,o,null)}})});n.jQuery=n.$=i;"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return i})})(window);decerpbrowser={versions:function(){var n=navigator.userAgent,t=navigator.appVersion;return{trident:n.indexOf("Trident")>-1,presto:n.indexOf("Presto")>-1,webKit:n.indexOf("AppleWebKit")>-1,gecko:n.indexOf("Gecko")>-1&&n.indexOf("KHTML")==-1,mobile:!!n.match(/AppleWebKit.*Mobile.*/)||!!n.match(/AppleWebKit/),ios:!!n.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:n.indexOf("Android")>-1||n.indexOf("Linux")>-1,iPhone:n.indexOf("iPhone")>-1||n.indexOf("Mac")>-1,iPad:n.indexOf("iPad")>-1,webApp:n.indexOf("Safari")==-1}}()};!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.io=t():n.io=t()}(this,function(){return function(n){function t(r){if(i[r])return i[r].exports;var u=i[r]={exports:{},id:r,loaded:!1};return n[r].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var i={};return t.m=n,t.c=i,t.p="",t(0)}([function(n,t,i){"use strict";function u(n,t){"object"===("undefined"==typeof n?"undefined":o(n))&&(t=n,n=void 0);t=t||{};var c,i=s(n),h=i.source,u=i.id,l=i.path,a=r[u]&&l in r[u].nsps,v=t.forceNew||t["force new connection"]||!1===t.multiplex||a;return v?(e("ignoring socket cache for %s",h),c=f(h,t)):(r[u]||(e("new io instance for %s",h),r[u]=f(h,t)),c=r[u]),i.query&&!t.query&&(t.query=i.query),c.socket(i.path,t)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},s=i(1),h=i(7),f=i(13),e=i(3)("socket.io-client"),r;n.exports=t=u;r=t.managers={};t.protocol=h.protocol;t.connect=u;t.Manager=i(13);t.Socket=i(39)},function(n,t,i){(function(t){"use strict";function u(n,i){var u=n,o,e;return i=i||t.location,null==n&&(n=i.protocol+"//"+i.host),"string"==typeof n&&("/"===n.charAt(0)&&(n="/"===n.charAt(1)?i.protocol+n:i.host+n),/^(https?|wss?):\/\//.test(n)||(r("protocol-less url %s",n),n="undefined"!=typeof i?i.protocol+"//"+n:"https://"+n),r("parse %s",n),u=f(n)),u.port||(/^(http|ws)$/.test(u.protocol)?u.port="80":/^(http|ws)s$/.test(u.protocol)&&(u.port="443")),u.path=u.path||"/",o=u.host.indexOf(":")!==-1,e=o?"["+u.host+"]":u.host,u.id=u.protocol+"://"+e+":"+u.port,u.href=u.protocol+"://"+e+(i&&i.port===u.port?"":":"+u.port),u}var f=i(2),r=i(3)("socket.io-client:url");n.exports=u}).call(t,function(){return this}())},function(n){var t=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];n.exports=function(n){var o=n,u=n.indexOf("["),f=n.indexOf("]");u!=-1&&f!=-1&&(n=n.substring(0,u)+n.substring(u,f).replace(/:/g,";")+n.substring(f,n.length));for(var s=t.exec(n||""),r={},e=14;e--;)r[i[e]]=s[e]||"";return u!=-1&&f!=-1&&(r.source=o,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r}},function(n,t,i){(function(r){function f(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function e(n){var i=this.useColors,r,u,f;(n[0]=(i?"%c":"")+this.namespace+(i?" %c":" ")+n[0]+(i?"%c ":" ")+"+"+t.humanize(this.diff),i)&&(r="color: "+this.color,n.splice(1,0,r,"color: inherit"),u=0,f=0,n[0].replace(/%[a-zA-Z%]/g,function(n){"%%"!==n&&(u++,"%c"===n&&(f=u))}),n.splice(f,0,r))}function o(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(n){try{null==n?t.storage.removeItem("debug"):t.storage.debug=n}catch(i){}}function u(){var n;try{n=t.storage.debug}catch(i){}return!n&&"undefined"!=typeof r&&"env"in r&&(n=r.env.DEBUG),n}function h(){try{return window.localStorage}catch(n){}}t=n.exports=i(5);t.log=o;t.formatArgs=e;t.save=s;t.load=u;t.useColors=f;t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:h();t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];t.formatters.j=function(n){try{return JSON.stringify(n)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}};t.enable(u())}).call(t,i(4))},function(n){function h(){throw new Error("setTimeout has not been defined");}function c(){throw new Error("clearTimeout has not been defined");}function l(n){if(r===setTimeout)return setTimeout(n,0);if((r===h||!r)&&setTimeout)return r=setTimeout,setTimeout(n,0);try{return r(n,0)}catch(t){try{return r.call(null,n,0)}catch(t){return r.call(this,n,0)}}}function y(n){if(u===clearTimeout)return clearTimeout(n);if((u===c||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(n);try{return u(n)}catch(t){try{return u.call(null,n)}catch(t){return u.call(this,n)}}}function p(){o&&e&&(o=!1,e.length?f=e.concat(f):s=-1,f.length&&a())}function a(){var t,n;if(!o){for(t=l(p),o=!0,n=f.length;n;){for(e=f,f=[];++s<n;)e&&e[s].run();s=-1;n=f.length}e=null;o=!1;y(t)}}function v(n,t){this.fun=n;this.array=t}function i(){}var r,u,t=n.exports={};!function(){try{r="function"==typeof setTimeout?setTimeout:h}catch(n){r=h}try{u="function"==typeof clearTimeout?clearTimeout:c}catch(n){u=c}}();var e,f=[],o=!1,s=-1;t.nextTick=function(n){var i=new Array(arguments.length-1),t;if(arguments.length>1)for(t=1;t<arguments.length;t++)i[t-1]=arguments[t];f.push(new v(n,i));1!==f.length||o||l(a)};v.prototype.run=function(){this.fun.apply(null,this.array)};t.title="browser";t.browser=!0;t.env={};t.argv=[];t.version="";t.versions={};t.on=i;t.addListener=i;t.once=i;t.off=i;t.removeListener=i;t.removeAllListeners=i;t.emit=i;t.prependListener=i;t.prependOnceListener=i;t.listeners=function(){return[]};t.binding=function(){throw new Error("process.binding is not supported");};t.cwd=function(){return"/"};t.chdir=function(){throw new Error("process.chdir is not supported");};t.umask=function(){return 0}},function(n,t,i){function f(n){var r,i=0;for(r in n)i=(i<<5)-i+n.charCodeAt(r),i|=0;return t.colors[Math.abs(i)%t.colors.length]}function r(n){function i(){var n,f,e,s;if(i.enabled){var r=i,o=+new Date,h=o-(u||o);for(r.diff=h,r.prev=u,r.curr=o,u=o,n=new Array(arguments.length),f=0;f<n.length;f++)n[f]=arguments[f];n[0]=t.coerce(n[0]);"string"!=typeof n[0]&&n.unshift("%O");e=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,function(i,u){var f,o;return"%%"===i?i:(e++,f=t.formatters[u],"function"==typeof f&&(o=n[e],i=f.call(r,o),n.splice(e,1),e--),i)});t.formatArgs.call(r,n);s=i.log||t.log||console.log.bind(console);s.apply(r,n)}}return i.namespace=n,i.enabled=t.enabled(n),i.useColors=t.useColors(),i.color=f(n),"function"==typeof t.init&&t.init(i),i}function e(n){t.save(n);t.names=[];t.skips=[];for(var r=("string"==typeof n?n:"").split(/[\s,]+/),u=r.length,i=0;i<u;i++)r[i]&&(n=r[i].replace(/\*/g,".*?"),"-"===n[0]?t.skips.push(new RegExp("^"+n.substr(1)+"$")):t.names.push(new RegExp("^"+n+"$")))}function o(){t.enable("")}function s(n){for(var i=0,r=t.skips.length;i<r;i++)if(t.skips[i].test(n))return!1;for(i=0,r=t.names.length;i<r;i++)if(t.names[i].test(n))return!0;return!1}function h(n){return n instanceof Error?n.stack||n.message:n}t=n.exports=r.debug=r["default"]=r;t.coerce=h;t.disable=o;t.enable=e;t.enabled=s;t.humanize=i(6);t.names=[];t.skips=[];t.formatters={};var u},function(n){function e(n){var e,f,o;if((n=String(n),!(n.length>100))&&(e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(n),e)){f=parseFloat(e[1]);o=(e[2]||"ms").toLowerCase();switch(o){case"years":case"year":case"yrs":case"yr":case"y":return f*h;case"days":case"day":case"d":return f*u;case"hours":case"hour":case"hrs":case"hr":case"h":return f*r;case"minutes":case"minute":case"mins":case"min":case"m":return f*i;case"seconds":case"second":case"secs":case"sec":case"s":return f*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}function o(n){return n>=u?Math.round(n/u)+"d":n>=r?Math.round(n/r)+"h":n>=i?Math.round(n/i)+"m":n>=t?Math.round(n/t)+"s":n+"ms"}function s(n){return f(n,u,"day")||f(n,r,"hour")||f(n,i,"minute")||f(n,t,"second")||n+" ms"}function f(n,t,i){if(!(n<t))return n<1.5*t?Math.floor(n/t)+" "+i:Math.ceil(n/t)+" "+i+"s"}var t=1e3,i=60*t,r=60*i,u=24*r,h=365.25*u;n.exports=function(n,t){t=t||{};var i=typeof n;if("string"===i&&n.length>0)return e(n);if("number"===i&&isNaN(n)===!1)return t.long?s(n):o(n);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(n));}},function(n,t,i){function o(){}function s(n){var i=""+n.type;return t.BINARY_EVENT!==n.type&&t.BINARY_ACK!==n.type||(i+=n.attachments+"-"),n.nsp&&"/"!==n.nsp&&(i+=n.nsp+","),null!=n.id&&(i+=n.id),null!=n.data&&(i+=JSON.stringify(n.data)),f("encoded %j as %s",n,i),i}function c(n,t){function i(n){var i=e.deconstructPacket(n),u=s(i.packet),r=i.buffers;r.unshift(u);t(r)}e.removeBlobs(n,i)}function r(){this.reconstructor=null}function l(n){var i=0,r={type:Number(n.charAt(0))},e,o,u;if(null==t.types[r.type])return h();if(t.BINARY_EVENT===r.type||t.BINARY_ACK===r.type){for(e="";"-"!==n.charAt(++i)&&(e+=n.charAt(i),i!=n.length););if(e!=Number(e)||"-"!==n.charAt(i))throw new Error("Illegal attachments");r.attachments=Number(e)}if("/"===n.charAt(i+1))for(r.nsp="";++i;){if(u=n.charAt(i),","===u)break;if(r.nsp+=u,i===n.length)break}else r.nsp="/";if(o=n.charAt(i+1),""!==o&&Number(o)==o){for(r.id="";++i;){if(u=n.charAt(i),null==u||Number(u)!=u){--i;break}if(r.id+=n.charAt(i),i===n.length)break}r.id=Number(r.id)}return n.charAt(++i)&&(r=a(r,n.substr(i))),f("decoded %s as %j",n,r),r}function a(n,t){try{n.data=JSON.parse(t)}catch(i){return h()}return n}function u(n){this.reconPack=n;this.buffers=[]}function h(){return{type:t.ERROR,data:"parser error"}}var f=i(3)("socket.io-parser"),v=i(8),y=i(9),e=i(11),p=i(12);t.protocol=4;t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"];t.CONNECT=0;t.DISCONNECT=1;t.EVENT=2;t.ACK=3;t.ERROR=4;t.BINARY_EVENT=5;t.BINARY_ACK=6;t.Encoder=o;t.Decoder=r;o.prototype.encode=function(n,i){if(n.type!==t.EVENT&&n.type!==t.ACK||!y(n.data)||(n.type=n.type===t.EVENT?t.BINARY_EVENT:t.BINARY_ACK),f("encoding packet %j",n),t.BINARY_EVENT===n.type||t.BINARY_ACK===n.type)c(n,i);else{var r=s(n);i([r])}};v(r.prototype);r.prototype.add=function(n){var i;if("string"==typeof n)i=l(n),t.BINARY_EVENT===i.type||t.BINARY_ACK===i.type?(this.reconstructor=new u(i),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",i)):this.emit("decoded",i);else{if(!p(n)&&!n.base64)throw new Error("Unknown type: "+n);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");i=this.reconstructor.takeBinaryData(n);i&&(this.reconstructor=null,this.emit("decoded",i))}};r.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()};u.prototype.takeBinaryData=function(n){if(this.buffers.push(n),this.buffers.length===this.reconPack.attachments){var t=e.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null};u.prototype.finishedReconstruction=function(){this.reconPack=null;this.buffers=[]}},function(n){function t(n){if(n)return i(n)}function i(n){for(var i in t.prototype)n[i]=t.prototype[i];return n}n.exports=t;t.prototype.on=t.prototype.addEventListener=function(n,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(t),this};t.prototype.once=function(n,t){function i(){this.off(n,i);t.apply(this,arguments)}return i.fn=t,this.on(n,i),this};t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(n,t){var i,u,r;if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;if(i=this._callbacks["$"+n],!i)return this;if(1==arguments.length)return delete this._callbacks["$"+n],this;for(r=0;r<i.length;r++)if(u=i[r],u===t||u.fn===t){i.splice(r,1);break}return this};t.prototype.emit=function(n){var r,t,i,u;if(this._callbacks=this._callbacks||{},r=[].slice.call(arguments,1),t=this._callbacks["$"+n],t)for(t=t.slice(0),i=0,u=t.length;i<u;++i)t[i].apply(this,r);return this};t.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]};t.prototype.hasListeners=function(n){return!!this.listeners(n).length}},function(n,t,i){(function(t){function r(n){var i,s,u;if(!n||"object"!=typeof n)return!1;if(f(n)){for(i=0,s=n.length;i<s;i++)if(r(n[i]))return!0;return!1}if("function"==typeof t.Buffer&&t.Buffer.isBuffer&&t.Buffer.isBuffer(n)||"function"==typeof t.ArrayBuffer&&n instanceof ArrayBuffer||e&&n instanceof Blob||o&&n instanceof File)return!0;if(n.toJSON&&"function"==typeof n.toJSON&&1===arguments.length)return r(n.toJSON(),!0);for(u in n)if(Object.prototype.hasOwnProperty.call(n,u)&&r(n[u]))return!0;return!1}var f=i(10),u=Object.prototype.toString,e="function"==typeof t.Blob||"[object BlobConstructor]"===u.call(t.Blob),o="function"==typeof t.File||"[object FileConstructor]"===u.call(t.File);n.exports=r}).call(t,function(){return this}())},function(n){var t={}.toString;n.exports=Array.isArray||function(n){return"[object Array]"==t.call(n)}},function(n,t,i){(function(n){function r(n,t){var s,u,i,o;if(!n)return n;if(e(n))return s={_placeholder:!0,num:t.length},t.push(n),s;if(f(n)){for(i=new Array(n.length),u=0;u<n.length;u++)i[u]=r(n[u],t);return i}if("object"==typeof n&&!(n instanceof Date)){i={};for(o in n)i[o]=r(n[o],t);return i}return n}function u(n,t){var i,r;if(!n)return n;if(n&&n._placeholder)return t[n.num];if(f(n))for(i=0;i<n.length;i++)n[i]=u(n[i],t);else if("object"==typeof n)for(r in n)n[r]=u(n[r],t);return n}var f=i(10),e=i(12),o=Object.prototype.toString,s="function"==typeof n.Blob||"[object BlobConstructor]"===o.call(n.Blob),h="function"==typeof n.File||"[object FileConstructor]"===o.call(n.File);t.deconstructPacket=function(n){var t=[],u=n.data,i=n;return i.data=r(u,t),i.attachments=t.length,{packet:i,buffers:t}};t.reconstructPacket=function(n,t){return n.data=u(n.data,t),n.attachments=void 0,n};t.removeBlobs=function(n,t){function r(n,o,c){var a,l,v;if(!n)return n;if(s&&n instanceof Blob||h&&n instanceof File)u++,a=new FileReader,a.onload=function(){c?c[o]=this.result:i=this.result;--u||t(i)},a.readAsArrayBuffer(n);else if(f(n))for(l=0;l<n.length;l++)r(n[l],l,n);else if("object"==typeof n&&!e(n))for(v in n)r(n[v],v,n)}var u=0,i=n;r(i);u||t(i)}}).call(t,function(){return this}())},function(n,t){(function(t){function i(n){return t.Buffer&&t.Buffer.isBuffer(n)||t.ArrayBuffer&&n instanceof ArrayBuffer}n.exports=i}).call(t,function(){return this}())},function(n,t,i){"use strict";function r(n,t){if(!(this instanceof r))return new r(n,t);n&&"object"===("undefined"==typeof n?"undefined":h(n))&&(t=n,n=void 0);t=t||{};t.path=t.path||"/socket.io";this.nsps={};this.subs=[];this.opts=t;this.reconnection(t.reconnection!==!1);this.reconnectionAttempts(t.reconnectionAttempts||1/0);this.reconnectionDelay(t.reconnectionDelay||1e3);this.reconnectionDelayMax(t.reconnectionDelayMax||5e3);this.randomizationFactor(t.randomizationFactor||.5);this.backoff=new y({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()});this.timeout(null==t.timeout?2e4:t.timeout);this.readyState="closed";this.uri=n;this.connecting=[];this.lastPing=null;this.encoding=!1;this.packetBuffer=[];var i=t.parser||v;this.encoder=new i.Encoder;this.decoder=new i.Decoder;this.autoConnect=t.autoConnect!==!1;this.autoConnect&&this.open()}var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},c=i(14),l=i(39),a=i(8),v=i(7),f=i(41),e=i(42),u=i(3)("socket.io-client:manager"),o=i(37),y=i(43),s=Object.prototype.hasOwnProperty;n.exports=r;r.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var n in this.nsps)s.call(this.nsps,n)&&this.nsps[n].emit.apply(this.nsps[n],arguments)};r.prototype.updateSocketIds=function(){for(var n in this.nsps)s.call(this.nsps,n)&&(this.nsps[n].id=this.generateId(n))};r.prototype.generateId=function(n){return("/"===n?"":n+"#")+this.engine.id};a(r.prototype);r.prototype.reconnection=function(n){return arguments.length?(this._reconnection=!!n,this):this._reconnection};r.prototype.reconnectionAttempts=function(n){return arguments.length?(this._reconnectionAttempts=n,this):this._reconnectionAttempts};r.prototype.reconnectionDelay=function(n){return arguments.length?(this._reconnectionDelay=n,this.backoff&&this.backoff.setMin(n),this):this._reconnectionDelay};r.prototype.randomizationFactor=function(n){return arguments.length?(this._randomizationFactor=n,this.backoff&&this.backoff.setJitter(n),this):this._randomizationFactor};r.prototype.reconnectionDelayMax=function(n){return arguments.length?(this._reconnectionDelayMax=n,this.backoff&&this.backoff.setMax(n),this):this._reconnectionDelayMax};r.prototype.timeout=function(n){return arguments.length?(this._timeout=n,this):this._timeout};r.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()};r.prototype.open=r.prototype.connect=function(n){var i,t,e,o,r,s;return(u("readyState %s",this.readyState),~this.readyState.indexOf("open"))?this:(u("opening %s",this.uri),this.engine=c(this.uri,this.opts),i=this.engine,t=this,this.readyState="opening",this.skipReconnect=!1,e=f(i,"open",function(){t.onopen();n&&n()}),o=f(i,"error",function(i){if(u("connect_error"),t.cleanup(),t.readyState="closed",t.emitAll("connect_error",i),n){var r=new Error("Connection error");r.data=i;n(r)}else t.maybeReconnectOnOpen()}),!1!==this._timeout&&(r=this._timeout,u("connect attempt will timeout after %d",r),s=setTimeout(function(){u("connect attempt timed out after %d",r);e.destroy();i.close();i.emit("error","timeout");t.emitAll("connect_timeout",r)},r),this.subs.push({destroy:function(){clearTimeout(s)}})),this.subs.push(e),this.subs.push(o),this)};r.prototype.onopen=function(){u("open");this.cleanup();this.readyState="open";this.emit("open");var n=this.engine;this.subs.push(f(n,"data",e(this,"ondata")));this.subs.push(f(n,"ping",e(this,"onping")));this.subs.push(f(n,"pong",e(this,"onpong")));this.subs.push(f(n,"error",e(this,"onerror")));this.subs.push(f(n,"close",e(this,"onclose")));this.subs.push(f(this.decoder,"decoded",e(this,"ondecoded")))};r.prototype.onping=function(){this.lastPing=new Date;this.emitAll("ping")};r.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)};r.prototype.ondata=function(n){this.decoder.add(n)};r.prototype.ondecoded=function(n){this.emit("packet",n)};r.prototype.onerror=function(n){u("error",n);this.emitAll("error",n)};r.prototype.socket=function(n,t){function u(){~o(r.connecting,i)||r.connecting.push(i)}var i=this.nsps[n],r;return i||(i=new l(this,n,t),this.nsps[n]=i,r=this,i.on("connecting",u),i.on("connect",function(){i.id=r.generateId(n)}),this.autoConnect&&u()),i};r.prototype.destroy=function(n){var t=o(this.connecting,n);~t&&this.connecting.splice(t,1);this.connecting.length||this.close()};r.prototype.packet=function(n){u("writing packet %j",n);var t=this;n.query&&0===n.type&&(n.nsp+="?"+n.query);t.encoding?t.packetBuffer.push(n):(t.encoding=!0,this.encoder.encode(n,function(i){for(var r=0;r<i.length;r++)t.engine.write(i[r],n.options);t.encoding=!1;t.processPacketQueue()}))};r.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var n=this.packetBuffer.shift();this.packet(n)}};r.prototype.cleanup=function(){var t,n,i;for(u("cleanup"),t=this.subs.length,n=0;n<t;n++)i=this.subs.shift(),i.destroy();this.packetBuffer=[];this.encoding=!1;this.lastPing=null;this.decoder.destroy()};r.prototype.close=r.prototype.disconnect=function(){u("disconnect");this.skipReconnect=!0;this.reconnecting=!1;"opening"===this.readyState&&this.cleanup();this.backoff.reset();this.readyState="closed";this.engine&&this.engine.close()};r.prototype.onclose=function(n){u("onclose");this.cleanup();this.backoff.reset();this.readyState="closed";this.emit("close",n);this._reconnection&&!this.skipReconnect&&this.reconnect()};r.prototype.reconnect=function(){var n,t,i;if(this.reconnecting||this.skipReconnect)return this;n=this;this.backoff.attempts>=this._reconnectionAttempts?(u("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1):(t=this.backoff.duration(),u("will wait %dms before reconnect attempt",t),this.reconnecting=!0,i=setTimeout(function(){n.skipReconnect||(u("attempting reconnect"),n.emitAll("reconnect_attempt",n.backoff.attempts),n.emitAll("reconnecting",n.backoff.attempts),n.skipReconnect||n.open(function(t){t?(u("reconnect attempt error"),n.reconnecting=!1,n.reconnect(),n.emitAll("reconnect_error",t.data)):(u("reconnect success"),n.onreconnect())}))},t),this.subs.push({destroy:function(){clearTimeout(i)}}))};r.prototype.onreconnect=function(){var n=this.backoff.attempts;this.reconnecting=!1;this.backoff.reset();this.updateSocketIds();this.emitAll("reconnect",n)}},function(n,t,i){n.exports=i(15)},function(n,t,i){n.exports=i(16);n.exports.parser=i(23)},function(n,t,i){(function(t){function r(n,i){if(!(this instanceof r))return new r(n,i);i=i||{};n&&"object"==typeof n&&(i=n,n=null);n?(n=e(n),i.hostname=n.host,i.secure="https"===n.protocol||"wss"===n.protocol,i.port=n.port,n.query&&(i.query=n.query)):i.host&&(i.hostname=e(i.host).host);this.secure=null!=i.secure?i.secure:t.location&&"https:"===location.protocol;i.hostname&&!i.port&&(i.port=this.secure?"443":"80");this.agent=i.agent||!1;this.hostname=i.hostname||(t.location?location.hostname:"localhost");this.port=i.port||(t.location&&location.port?location.port:this.secure?443:80);this.query=i.query||{};"string"==typeof this.query&&(this.query=a.decode(this.query));this.upgrade=!1!==i.upgrade;this.path=(i.path||"/engine.io").replace(/\/$/,"")+"/";this.forceJSONP=!!i.forceJSONP;this.jsonp=!1!==i.jsonp;this.forceBase64=!!i.forceBase64;this.enablesXDR=!!i.enablesXDR;this.timestampParam=i.timestampParam||"t";this.timestampRequests=i.timestampRequests;this.transports=i.transports||["polling","websocket"];this.transportOptions=i.transportOptions||{};this.readyState="";this.writeBuffer=[];this.prevBufferLen=0;this.policyPort=i.policyPort||843;this.rememberUpgrade=i.rememberUpgrade||!1;this.binaryType=null;this.onlyBinaryUpgrades=i.onlyBinaryUpgrades;this.perMessageDeflate=!1!==i.perMessageDeflate&&(i.perMessageDeflate||{});!0===this.perMessageDeflate&&(this.perMessageDeflate={});this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024);this.pfx=i.pfx||null;this.key=i.key||null;this.passphrase=i.passphrase||null;this.cert=i.cert||null;this.ca=i.ca||null;this.ciphers=i.ciphers||null;this.rejectUnauthorized=void 0===i.rejectUnauthorized||i.rejectUnauthorized;this.forceNode=!!i.forceNode;var u="object"==typeof t&&t;u.global===u&&(i.extraHeaders&&Object.keys(i.extraHeaders).length>0&&(this.extraHeaders=i.extraHeaders),i.localAddress&&(this.localAddress=i.localAddress));this.id=null;this.upgrades=null;this.pingInterval=null;this.pingTimeout=null;this.pingIntervalTimer=null;this.pingTimeoutTimer=null;this.open()}function o(n){var i={};for(var t in n)n.hasOwnProperty(t)&&(i[t]=n[t]);return i}var s=i(17),h=i(8),u=i(3)("engine.io-client:socket"),c=i(37),f=i(23),e=i(2),l=i(38),a=i(31);n.exports=r;r.priorWebsocketSuccess=!1;h(r.prototype);r.protocol=f.protocol;r.Socket=r;r.Transport=i(22);r.transports=i(17);r.parser=i(23);r.prototype.createTransport=function(n){var i,t;return u('creating transport "%s"',n),i=o(this.query),i.EIO=f.protocol,i.transport=n,t=this.transportOptions[n]||{},this.id&&(i.sid=this.id),new s[n]({query:i,socket:this,agent:t.agent||this.agent,hostname:t.hostname||this.hostname,port:t.port||this.port,secure:t.secure||this.secure,path:t.path||this.path,forceJSONP:t.forceJSONP||this.forceJSONP,jsonp:t.jsonp||this.jsonp,forceBase64:t.forceBase64||this.forceBase64,enablesXDR:t.enablesXDR||this.enablesXDR,timestampRequests:t.timestampRequests||this.timestampRequests,timestampParam:t.timestampParam||this.timestampParam,policyPort:t.policyPort||this.policyPort,pfx:t.pfx||this.pfx,key:t.key||this.key,passphrase:t.passphrase||this.passphrase,cert:t.cert||this.cert,ca:t.ca||this.ca,ciphers:t.ciphers||this.ciphers,rejectUnauthorized:t.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:t.perMessageDeflate||this.perMessageDeflate,extraHeaders:t.extraHeaders||this.extraHeaders,forceNode:t.forceNode||this.forceNode,localAddress:t.localAddress||this.localAddress,requestTimeout:t.requestTimeout||this.requestTimeout,protocols:t.protocols||void 0})};r.prototype.open=function(){var n,t;if(this.rememberUpgrade&&r.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)n="websocket";else{if(0===this.transports.length)return t=this,void setTimeout(function(){t.emit("error","No transports available")},0);n=this.transports[0]}this.readyState="opening";try{n=this.createTransport(n)}catch(i){return this.transports.shift(),void this.open()}n.open();this.setTransport(n)};r.prototype.setTransport=function(n){u("setting transport %s",n.name);var t=this;this.transport&&(u("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners());this.transport=n;n.on("drain",function(){t.onDrain()}).on("packet",function(n){t.onPacket(n)}).on("error",function(n){t.onError(n)}).on("close",function(){t.onClose("transport close")})};r.prototype.probe=function(n){function o(){if(i.onlyBinaryUpgrades){var e=!this.supportsBinary&&i.transport.supportsBinary;f=f||e}f||(u('probe transport "%s" opened',n),t.send([{type:"ping",data:"probe"}]),t.once("packet",function(e){if(!f)if("pong"===e.type&&"probe"===e.data){if(u('probe transport "%s" pong',n),i.upgrading=!0,i.emit("upgrading",t),!t)return;r.priorWebsocketSuccess="websocket"===t.name;u('pausing current transport "%s"',i.transport.name);i.transport.pause(function(){f||"closed"!==i.readyState&&(u("changing transport and sending upgrade packet"),a(),i.setTransport(t),t.send([{type:"upgrade"}]),i.emit("upgrade",t),t=null,i.upgrading=!1,i.flush())})}else{u('probe transport "%s" failed',n);var o=new Error("probe error");o.transport=t.name;i.emit("upgradeError",o)}}))}function s(){f||(f=!0,a(),t.close(),t=null)}function e(r){var f=new Error("probe error: "+r);f.transport=t.name;s();u('probe transport "%s" failed because of error: %s',n,r);i.emit("upgradeError",f)}function h(){e("transport closed")}function c(){e("socket closed")}function l(n){t&&n.name!==t.name&&(u('"%s" works - aborting "%s"',n.name,t.name),s())}function a(){t.removeListener("open",o);t.removeListener("error",e);t.removeListener("close",h);i.removeListener("close",c);i.removeListener("upgrading",l)}u('probing transport "%s"',n);var t=this.createTransport(n,{probe:1}),f=!1,i=this;r.priorWebsocketSuccess=!1;t.once("open",o);t.once("error",e);t.once("close",h);this.once("close",c);this.once("upgrading",l);t.open()};r.prototype.onOpen=function(){if(u("socket open"),this.readyState="open",r.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){u("starting upgrade probes");for(var n=0,t=this.upgrades.length;n<t;n++)this.probe(this.upgrades[n])}};r.prototype.onPacket=function(n){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(u('socket receive: type "%s", data "%s"',n.type,n.data),this.emit("packet",n),this.emit("heartbeat"),n.type){case"open":this.onHandshake(l(n.data));break;case"pong":this.setPing();this.emit("pong");break;case"error":var t=new Error("server error");t.code=n.data;this.onError(t);break;case"message":this.emit("data",n.data);this.emit("message",n.data)}else u('packet received with socket readyState "%s"',this.readyState)};r.prototype.onHandshake=function(n){this.emit("handshake",n);this.id=n.sid;this.transport.query.sid=n.sid;this.upgrades=this.filterUpgrades(n.upgrades);this.pingInterval=n.pingInterval;this.pingTimeout=n.pingTimeout;this.onOpen();"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))};r.prototype.onHeartbeat=function(n){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!==t.readyState&&t.onClose("ping timeout")},n||t.pingInterval+t.pingTimeout)};r.prototype.setPing=function(){var n=this;clearTimeout(n.pingIntervalTimer);n.pingIntervalTimer=setTimeout(function(){u("writing ping packet - expecting pong within %sms",n.pingTimeout);n.ping();n.onHeartbeat(n.pingTimeout)},n.pingInterval)};r.prototype.ping=function(){var n=this;this.sendPacket("ping",function(){n.emit("ping")})};r.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen);this.prevBufferLen=0;0===this.writeBuffer.length?this.emit("drain"):this.flush()};r.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(u("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))};r.prototype.write=r.prototype.send=function(n,t,i){return this.sendPacket("message",n,t,i),this};r.prototype.sendPacket=function(n,t,i,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof i&&(r=i,i=null),"closing"!==this.readyState&&"closed"!==this.readyState){i=i||{};i.compress=!1!==i.compress;var u={type:n,data:t,options:i};this.emit("packetCreate",u);this.writeBuffer.push(u);r&&this.once("flush",r);this.flush()}};r.prototype.close=function(){function i(){n.onClose("forced close");u("socket closing - telling transport to close");n.transport.close()}function t(){n.removeListener("upgrade",t);n.removeListener("upgradeError",t);i()}function r(){n.once("upgrade",t);n.once("upgradeError",t)}if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var n=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?r():i()}):this.upgrading?r():i()}return this};r.prototype.onError=function(n){u("socket error %j",n);r.priorWebsocketSuccess=!1;this.emit("error",n);this.onClose("transport error",n)};r.prototype.onClose=function(n,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){u('socket close with reason: "%s"',n);var i=this;clearTimeout(this.pingIntervalTimer);clearTimeout(this.pingTimeoutTimer);this.transport.removeAllListeners("close");this.transport.close();this.transport.removeAllListeners();this.readyState="closed";this.id=null;this.emit("close",n,t);i.writeBuffer=[];i.prevBufferLen=0}};r.prototype.filterUpgrades=function(n){for(var i=[],t=0,r=n.length;t<r;t++)~c(this.transports,n[t])&&i.push(n[t]);return i}}).call(t,function(){return this}())},function(n,t,i){(function(n){function r(t){var o,s=!1,h=!1,c=!1!==t.jsonp,r,i;if(n.location&&(r="https:"===location.protocol,i=location.port,i||(i=r?443:80),s=t.hostname!==location.hostname||i!==t.port,h=t.secure!==r),t.xdomain=s,t.xscheme=h,o=new u(t),"open"in o&&!t.forceJSONP)return new f(t);if(!c)throw new Error("JSONP disabled");return new e(t)}var u=i(18),f=i(20),e=i(34),o=i(35);t.polling=r;t.websocket=o}).call(t,function(){return this}())},function(n,t,i){(function(t){var r=i(19);n.exports=function(n){var i=n.xdomain,u=n.xscheme,f=n.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!i||r))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!u&&f)return new XDomainRequest}catch(e){}if(!i)try{return new t[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(e){}}}).call(t,function(){return this}())},function(n){try{n.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){n.exports=!1}},function(n,t,i){(function(t){function e(){}function u(n){if(s.call(this,n),this.requestTimeout=n.requestTimeout,this.extraHeaders=n.extraHeaders,t.location){var r="https:"===location.protocol,i=location.port;i||(i=r?443:80);this.xd=n.hostname!==t.location.hostname||i!==n.port;this.xs=n.secure!==r}}function r(n){this.method=n.method||"GET";this.uri=n.uri;this.xd=!!n.xd;this.xs=!!n.xs;this.async=!1!==n.async;this.data=void 0!==n.data?n.data:null;this.agent=n.agent;this.isBinary=n.isBinary;this.supportsBinary=n.supportsBinary;this.enablesXDR=n.enablesXDR;this.requestTimeout=n.requestTimeout;this.pfx=n.pfx;this.key=n.key;this.passphrase=n.passphrase;this.cert=n.cert;this.ca=n.ca;this.ciphers=n.ciphers;this.rejectUnauthorized=n.rejectUnauthorized;this.extraHeaders=n.extraHeaders;this.create()}function o(){for(var n in r.requests)r.requests.hasOwnProperty(n)&&r.requests[n].abort()}var h=i(18),s=i(21),c=i(8),l=i(32),f=i(3)("engine.io-client:polling-xhr");n.exports=u;n.exports.Request=r;l(u,s);u.prototype.supportsBinary=!0;u.prototype.request=function(n){return n=n||{},n.uri=this.uri(),n.xd=this.xd,n.xs=this.xs,n.agent=this.agent||!1,n.supportsBinary=this.supportsBinary,n.enablesXDR=this.enablesXDR,n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,n.requestTimeout=this.requestTimeout,n.extraHeaders=this.extraHeaders,new r(n)};u.prototype.doWrite=function(n,t){var r="string"!=typeof n&&void 0!==n,i=this.request({method:"POST",data:n,isBinary:r}),u=this;i.on("success",t);i.on("error",function(n){u.onError("xhr post error",n)});this.sendXhr=i};u.prototype.doPoll=function(){f("xhr poll");var n=this.request(),t=this;n.on("data",function(n){t.onData(n)});n.on("error",function(n){t.onError("xhr poll error",n)});this.pollXhr=n};c(r.prototype);r.prototype.create=function(){var i={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR},n,u,e;i.pfx=this.pfx;i.key=this.key;i.passphrase=this.passphrase;i.cert=this.cert;i.ca=this.ca;i.ciphers=this.ciphers;i.rejectUnauthorized=this.rejectUnauthorized;n=this.xhr=new h(i);u=this;try{f("xhr open %s: %s",this.method,this.uri);n.open(this.method,this.uri,this.async);try{if(this.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(e in this.extraHeaders)this.extraHeaders.hasOwnProperty(e)&&n.setRequestHeader(e,this.extraHeaders[e])}}catch(o){}if("POST"===this.method)try{this.isBinary?n.setRequestHeader("Content-type","application/octet-stream"):n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(o){}try{n.setRequestHeader("Accept","*/*")}catch(o){}"withCredentials"in n&&(n.withCredentials=!0);this.requestTimeout&&(n.timeout=this.requestTimeout);this.hasXDR()?(n.onload=function(){u.onLoad()},n.onerror=function(){u.onError(n.responseText)}):n.onreadystatechange=function(){if(2===n.readyState){var t;try{t=n.getResponseHeader("Content-Type")}catch(i){}"application/octet-stream"===t&&(n.responseType="arraybuffer")}4===n.readyState&&(200===n.status||1223===n.status?u.onLoad():setTimeout(function(){u.onError(n.status)},0))};f("xhr data %s",this.data);n.send(this.data)}catch(o){return void setTimeout(function(){u.onError(o)},0)}t.document&&(this.index=r.requestsCount++,r.requests[this.index]=this)};r.prototype.onSuccess=function(){this.emit("success");this.cleanup()};r.prototype.onData=function(n){this.emit("data",n);this.onSuccess()};r.prototype.onError=function(n){this.emit("error",n);this.cleanup(!0)};r.prototype.cleanup=function(n){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=e:this.xhr.onreadystatechange=e,n)try{this.xhr.abort()}catch(i){}t.document&&delete r.requests[this.index];this.xhr=null}};r.prototype.onLoad=function(){var n,t;try{try{t=this.xhr.getResponseHeader("Content-Type")}catch(i){}n="application/octet-stream"===t?this.xhr.response||this.xhr.responseText:this.xhr.responseText}catch(i){this.onError(i)}null!=n&&this.onData(n)};r.prototype.hasXDR=function(){return"undefined"!=typeof t.XDomainRequest&&!this.xs&&this.enablesXDR};r.prototype.abort=function(){this.cleanup()};r.requestsCount=0;r.requests={};t.document&&(t.attachEvent?t.attachEvent("onunload",o):t.addEventListener&&t.addEventListener("beforeunload",o,!1))}).call(t,function(){return this}())},function(n,t,i){function u(n){var t=n&&n.forceBase64;o&&!t||(this.supportsBinary=!1);f.call(this,n)}var f=i(22),s=i(31),e=i(23),h=i(32),c=i(33),r=i(3)("engine.io-client:polling"),o;n.exports=u;o=function(){var n=i(18),t=new n({xdomain:!1});return null!=t.responseType}();h(u,f);u.prototype.name="polling";u.prototype.doOpen=function(){this.poll()};u.prototype.pause=function(n){function i(){r("paused");u.readyState="paused";n()}var u=this,t;(this.readyState="pausing",this.polling||!this.writable)?(t=0,this.polling&&(r("we are currently polling - waiting to pause"),t++,this.once("pollComplete",function(){r("pre-pause polling complete");--t||i()})),this.writable||(r("we are currently writing - waiting to pause"),t++,this.once("drain",function(){r("pre-pause writing complete");--t||i()}))):i()};u.prototype.poll=function(){r("polling");this.polling=!0;this.doPoll();this.emit("poll")};u.prototype.onData=function(n){var t=this,i;r("polling got data %s",n);i=function(n){return"opening"===t.readyState&&t.onOpen(),"close"===n.type?(t.onClose(),!1):void t.onPacket(n)};e.decodePayload(n,this.socket.binaryType,i);"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():r('ignoring poll - transport state "%s"',this.readyState))};u.prototype.doClose=function(){function n(){r("writing close packet");t.write([{type:"close"}])}var t=this;"open"===this.readyState?(r("transport open - closing"),n()):(r("transport not open - deferring close"),this.once("open",n))};u.prototype.write=function(n){var t=this,i;this.writable=!1;i=function(){t.writable=!0;t.emit("drain")};e.encodePayload(n,this.supportsBinary,function(n){t.doWrite(n,i)})};u.prototype.uri=function(){var n=this.query||{},t=this.secure?"https":"http",i="",r;return!1!==this.timestampRequests&&(n[this.timestampParam]=c()),this.supportsBinary||n.sid||(n.b64=1),n=s.encode(n),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(i=":"+this.port),n.length&&(n="?"+n),r=this.hostname.indexOf(":")!==-1,t+"://"+(r?"["+this.hostname+"]":this.hostname)+i+this.path+n}},function(n,t,i){function r(n){this.path=n.path;this.hostname=n.hostname;this.port=n.port;this.secure=n.secure;this.query=n.query;this.timestampParam=n.timestampParam;this.timestampRequests=n.timestampRequests;this.readyState="";this.agent=n.agent||!1;this.socket=n.socket;this.enablesXDR=n.enablesXDR;this.pfx=n.pfx;this.key=n.key;this.passphrase=n.passphrase;this.cert=n.cert;this.ca=n.ca;this.ciphers=n.ciphers;this.rejectUnauthorized=n.rejectUnauthorized;this.forceNode=n.forceNode;this.extraHeaders=n.extraHeaders;this.localAddress=n.localAddress}var u=i(23),f=i(8);n.exports=r;f(r.prototype);r.prototype.onError=function(n,t){var i=new Error(n);return i.type="TransportError",i.description=t,this.emit("error",i),this};r.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this};r.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this};r.prototype.send=function(n){if("open"!==this.readyState)throw new Error("Transport not open");this.write(n)};r.prototype.onOpen=function(){this.readyState="open";this.writable=!0;this.emit("open")};r.prototype.onData=function(n){var t=u.decodePacket(n,this.socket.binaryType);this.onPacket(t)};r.prototype.onPacket=function(n){this.emit("packet",n)};r.prototype.onClose=function(){this.readyState="closed";this.emit("close")}},function(n,t,i){(function(n){function a(n,i){var r="b"+t.packets[n.type]+n.data.data;return i(r)}function v(n,i,r){var u;if(!i)return t.encodeBase64Packet(n,r);var e=n.data,s=new Uint8Array(e),f=new Uint8Array(1+e.byteLength);for(f[0]=o[n.type],u=0;u<s.length;u++)f[u+1]=s[u];return r(f.buffer)}function y(n,i,r){if(!i)return t.encodeBase64Packet(n,r);var u=new FileReader;return u.onload=function(){n.data=u.result;t.encodePacket(n,i,!0,r)},u.readAsArrayBuffer(n.data)}function p(n,i,r){var f,e;return i?l?y(n,i,r):(f=new Uint8Array(1),f[0]=o[n.type],e=new u([f.buffer,n.data]),r(e)):t.encodeBase64Packet(n,r)}function w(n){try{n=c.decode(n,{strict:!1})}catch(t){return!1}return n}function s(n,t,i){for(var u=new Array(n.length),f=d(n.length,i),e=function(n,i,r){t(i,function(t,i){u[n]=i;r(t,u)})},r=0;r<n.length;r++)e(r,n[r],f)}var h,b=i(24),k=i(9),e=i(25),d=i(26),c=i(27);n&&n.ArrayBuffer&&(h=i(29));var g="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),nt="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),l=g||nt;t.protocol=3;var o=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},f=b(o),r={type:"error",data:"parser error"},u=i(30);t.encodePacket=function(t,i,r,f){var e,s;return("function"==typeof i&&(f=i,i=!1),"function"==typeof r&&(f=r,r=null),e=void 0===t.data?void 0:t.data.buffer||t.data,n.ArrayBuffer&&e instanceof ArrayBuffer)?v(t,i,f):u&&e instanceof n.Blob?p(t,i,f):e&&e.base64?a(t,f):(s=o[t.type],void 0!==t.data&&(s+=r?c.encode(String(t.data),{strict:!1}):String(t.data)),f(""+s))};t.encodeBase64Packet=function(i,r){var o="b"+t.packets[i.type],f,s;if(u&&i.data instanceof n.Blob)return f=new FileReader,f.onload=function(){var n=f.result.split(",")[1];r(o+n)},f.readAsDataURL(i.data);try{s=String.fromCharCode.apply(null,new Uint8Array(i.data))}catch(l){for(var h=new Uint8Array(i.data),c=new Array(h.length),e=0;e<h.length;e++)c[e]=h[e];s=String.fromCharCode.apply(null,c)}return o+=n.btoa(s),r(o)};t.decodePacket=function(n,i,o){var s;if(void 0===n)return r;if("string"==typeof n)return"b"===n.charAt(0)?t.decodeBase64Packet(n.substr(1),i):o&&(n=w(n),n===!1)?r:(s=n.charAt(0),Number(s)==s&&f[s]?n.length>1?{type:f[s],data:n.substring(1)}:{type:f[s]}:r);var c=new Uint8Array(n),s=c[0],h=e(n,1);return u&&"blob"===i&&(h=new u([h])),{type:f[s],data:h}};t.decodeBase64Packet=function(n,t){var r=f[n.charAt(0)],i;return h?(i=h.decode(n.substr(1)),"blob"===t&&u&&(i=new u([i])),{type:r,data:i}):{type:r,data:{base64:!0,data:n.substr(1)}}};t.encodePayload=function(n,i,r){function e(n){return n.length+":"+n}function o(n,r){t.encodePacket(n,!!f&&i,!1,function(n){r(null,e(n))})}"function"==typeof i&&(r=i,i=null);var f=k(n);return i&&f?u&&!l?t.encodePayloadAsBlob(n,r):t.encodePayloadAsArrayBuffer(n,r):n.length?void s(n,o,function(n,t){return r(t.join(""))}):r("0:")};t.decodePayload=function(n,i,u){var o,c,a;if("string"!=typeof n)return t.decodePayloadAsBinary(n,i,u);if("function"==typeof i&&(u=i,i=null),""===n)return u(r,0,1);for(var s,h,f="",e=0,l=n.length;e<l;e++)if(c=n.charAt(e),":"===c){if(""===f||f!=(s=Number(f))||(h=n.substr(e+1,s),f!=h.length))return u(r,0,1);if(h.length){if(o=t.decodePacket(h,i,!1),r.type===o.type&&r.data===o.data)return u(r,0,1);if(a=u(o,e+s,l),!1===a)return}e+=s;f=""}else f+=c;if(""!==f)return u(r,0,1)};t.encodePayloadAsArrayBuffer=function(n,i){function r(n,i){t.encodePacket(n,!0,!0,function(n){return i(null,n)})}return n.length?void s(n,r,function(n,t){var f=t.reduce(function(n,t){var i;return i="string"==typeof t?t.length:t.byteLength,n+i.toString().length+i+2},0),r=new Uint8Array(f),u=0;return t.forEach(function(n){var o="string"==typeof n,f=n,e,i,t;if(o){for(i=new Uint8Array(n.length),t=0;t<n.length;t++)i[t]=n.charCodeAt(t);f=i.buffer}for(r[u++]=o?0:1,e=f.byteLength.toString(),t=0;t<e.length;t++)r[u++]=parseInt(e[t]);for(r[u++]=255,i=new Uint8Array(f),t=0;t<i.length;t++)r[u++]=i[t]}),i(r.buffer)}):i(new ArrayBuffer(0))};t.encodePayloadAsBlob=function(n,i){function r(n,i){t.encodePacket(n,!0,!0,function(n){var f=new Uint8Array(1),e,t,s;if(f[0]=1,"string"==typeof n){for(e=new Uint8Array(n.length),t=0;t<n.length;t++)e[t]=n.charCodeAt(t);n=e.buffer;f[0]=0}for(var h=n instanceof ArrayBuffer?n.byteLength:n.size,r=h.toString(),o=new Uint8Array(r.length+1),t=0;t<r.length;t++)o[t]=parseInt(r[t]);(o[r.length]=255,u)&&(s=new u([f.buffer,o.buffer,n]),i(null,s))})}s(n,r,function(n,t){return i(new u(t))})};t.decodePayloadAsBinary=function(n,i,u){var f,c,h,a,s,v;for("function"==typeof i&&(u=i,i=null),f=n,c=[];f.byteLength>0;){for(var l=new Uint8Array(f),y=0===l[0],o="",s=1;255!==l[s];s++){if(o.length>310)return u(r,0,1);o+=l[s]}if(f=e(f,2+o.length),o=parseInt(o),h=e(f,0,o),y)try{h=String.fromCharCode.apply(null,new Uint8Array(h))}catch(p){for(a=new Uint8Array(h),h="",s=0;s<a.length;s++)h+=String.fromCharCode(a[s])}c.push(h);f=e(f,o)}v=c.length;c.forEach(function(n,r){u(t.decodePacket(n,i,!0),r,v)})}}).call(t,function(){return this}())},function(n){n.exports=Object.keys||function(n){var t=[],r=Object.prototype.hasOwnProperty;for(var i in n)r.call(n,i)&&t.push(i);return t}},function(n){n.exports=function(n,t,i){var r=n.byteLength;if(t=t||0,i=i||r,n.slice)return n.slice(t,i);if(t<0&&(t+=r),i<0&&(i+=r),i>r&&(i=r),t>=r||t>=i||0===r)return new ArrayBuffer(0);for(var o=new Uint8Array(n),f=new Uint8Array(i-t),u=t,e=0;u<i;u++,e++)f[e]=o[u];return f.buffer}},function(n){function t(n,t,r){function u(n,i){if(u.count<=0)throw new Error("after called too many times");--u.count;n?(f=!0,t(n),t=r):0!==u.count||f||t(null,i)}var f=!1;return r=r||i,u.count=n,0===n?t():u}function i(){}n.exports=t},function(n,t,i){var r;(function(n,u){!function(f){function v(n){for(var t,u,r=[],i=0,f=n.length;i<f;)t=n.charCodeAt(i++),t>=55296&&t<=56319&&i<f?(u=n.charCodeAt(i++),56320==(64512&u)?r.push(((1023&t)<<10)+(1023&u)+65536):(r.push(t),i--)):r.push(t);return r}function w(n){for(var t,u=n.length,r=-1,i="";++r<u;)t=n[r],t>65535&&(t-=65536,i+=e(t>>>10&1023|55296),t=56320|1023&t),i+=e(t);return i}function y(n,t){if(n>=55296&&n<=57343){if(t)throw Error("Lone surrogate U+"+n.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function a(n,t){return e(n>>t&63|128)}function b(n,t){if(0==(4294967168&n))return e(n);var i="";return 0==(4294965248&n)?i=e(n>>6&31|192):0==(4294901760&n)?(y(n,t)||(n=65533),i=e(n>>12&15|224),i+=a(n,6)):0==(4292870144&n)&&(i=e(n>>18&7|240),i+=a(n,12),i+=a(n,6)),i+e(63&n|128)}function k(n,t){t=t||{};for(var i,e=!1!==t.strict,r=v(n),o=r.length,u=-1,f="";++u<o;)i=r[u],f+=b(i,e);return f}function s(){if(o>=l)throw Error("Invalid byte index");var n=255&c[o];if(o++,128==(192&n))return 63&n;throw Error("Invalid continuation byte");}function d(n){var i,r,u,f,t;if(o>l)throw Error("Invalid byte index");if(o==l)return!1;if(i=255&c[o],o++,0==(128&i))return i;if(192==(224&i)){if(r=s(),t=(31&i)<<6|r,t>=128)return t;throw Error("Invalid continuation byte");}if(224==(240&i)){if(r=s(),u=s(),t=(15&i)<<12|r<<6|u,t>=2048)return y(t,n)?t:65533;throw Error("Invalid continuation byte");}if(240==(248&i)&&(r=s(),u=s(),f=s(),t=(7&i)<<18|r<<12|u<<6|f,t>=65536&&t<=1114111))return t;throw Error("Invalid UTF-8 detected");}function g(n,t){var r,u,i;for(t=t||{},r=!1!==t.strict,c=v(n),l=c.length,o=0,i=[];(u=d(r))!==!1;)i.push(u);return w(i)}var nt="object"==typeof t&&t,h=("object"==typeof n&&n&&n.exports==nt&&n,"object"==typeof u&&u),c,l,o,e,p;h.global!==h&&h.window!==h||(f=h);e=String.fromCharCode;p={version:"2.1.2",encode:k,decode:g};r=function(){return p}.call(t,i,t,n);!(void 0!==r&&(n.exports=r))}(this)}).call(t,i(28)(n),function(){return this}())},function(n){n.exports=function(n){return n.webpackPolyfill||(n.deprecate=function(){},n.paths=[],n.children=[],n.webpackPolyfill=1),n}},function(n,t){!function(){"use strict";for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=new Uint8Array(256),r=0;r<n.length;r++)i[n.charCodeAt(r)]=r;t.encode=function(t){for(var u=new Uint8Array(t),f=u.length,i="",r=0;r<f;r+=3)i+=n[u[r]>>2],i+=n[(3&u[r])<<4|u[r+1]>>4],i+=n[(15&u[r+1])<<2|u[r+2]>>6],i+=n[63&u[r+2]];return f%3==2?i=i.substring(0,i.length-1)+"=":f%3==1&&(i=i.substring(0,i.length-2)+"=="),i};t.decode=function(n){var t,h,u,f,c,e=.75*n.length,l=n.length,o=0,s,r;for("="===n[n.length-1]&&(e--,"="===n[n.length-2]&&e--),s=new ArrayBuffer(e),r=new Uint8Array(s),t=0;t<l;t+=4)h=i[n.charCodeAt(t)],u=i[n.charCodeAt(t+1)],f=i[n.charCodeAt(t+2)],c=i[n.charCodeAt(t+3)],r[o++]=h<<2|u>>4,r[o++]=(15&u)<<4|f>>2,r[o++]=(3&f)<<6|63&c;return s}}()},function(n,t){(function(t){function r(n){for(var t,r,u,i=0;i<n.length;i++)t=n[i],t.buffer instanceof ArrayBuffer&&(r=t.buffer,t.byteLength!==r.byteLength&&(u=new Uint8Array(t.byteLength),u.set(new Uint8Array(r,t.byteOffset,t.byteLength)),r=u.buffer),n[i]=r)}function f(n,t){var u,f;for(t=t||{},u=new i,r(n),f=0;f<n.length;f++)u.append(n[f]);return t.type?u.getBlob(t.type):u.getBlob()}function e(n,t){return r(n),new Blob(n,t||{})}var i=t.BlobBuilder||t.WebKitBlobBuilder||t.MSBlobBuilder||t.MozBlobBuilder,u=function(){try{var n=new Blob(["hi"]);return 2===n.size}catch(t){return!1}}(),o=u&&function(){try{var n=new Blob([new Uint8Array([1,2])]);return 2===n.size}catch(t){return!1}}(),s=i&&i.prototype.append&&i.prototype.getBlob;n.exports=function(){return u?o?t.Blob:e:s?f:void 0}()}).call(t,function(){return this}())},function(n,t){t.encode=function(n){var t="";for(var i in n)n.hasOwnProperty(i)&&(t.length&&(t+="&"),t+=encodeURIComponent(i)+"="+encodeURIComponent(n[i]));return t};t.decode=function(n){for(var i,r={},u=n.split("&"),t=0,f=u.length;t<f;t++)i=u[t].split("="),r[decodeURIComponent(i[0])]=decodeURIComponent(i[1]);return r}},function(n){n.exports=function(n,t){var i=function(){};i.prototype=t.prototype;n.prototype=new i;n.prototype.constructor=n}},function(n){"use strict";function r(n){var t="";do t=e[n%i]+t,n=Math.floor(n/i);while(n>0);return t}function h(n){var r=0;for(t=0;t<n.length;t++)r=r*i+o[n.charAt(t)];return r}function u(){var n=r(+new Date);return n!==f?(s=0,f=n):n+"."+r(s++)}for(var f,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),i=64,o={},s=0,t=0;t<i;t++)o[e[t]]=t;u.encode=r;u.decode=h;n.exports=u},function(n,t,i){(function(t){function s(){}function r(n){f.call(this,n);this.query=this.query||{};u||(t.___eio||(t.___eio=[]),u=t.___eio);this.index=u.length;var i=this;u.push(function(n){i.onData(n)});this.query.j=this.index;t.document&&t.addEventListener&&t.addEventListener("beforeunload",function(){i.script&&(i.script.onerror=s)},!1)}var f=i(21),h=i(32),u,e,o;n.exports=r;e=/\n/g;o=/\\n/g;h(r,f);r.prototype.supportsBinary=!1;r.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null);this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null);f.prototype.doClose.call(this)};r.prototype.doPoll=function(){var r=this,n=document.createElement("script"),t,i;this.script&&(this.script.parentNode.removeChild(this.script),this.script=null);n.async=!0;n.src=this.uri();n.onerror=function(n){r.onError("jsonp poll error",n)};t=document.getElementsByTagName("script")[0];t?t.parentNode.insertBefore(n,t):(document.head||document.body).appendChild(n);this.script=n;i="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);i&&setTimeout(function(){var n=document.createElement("iframe");document.body.appendChild(n);document.body.removeChild(n)},100)};r.prototype.doWrite=function(n,t){function s(){h();t()}function h(){if(i.iframe)try{i.form.removeChild(i.iframe)}catch(n){i.onError("jsonp polling iframe removal error",n)}try{var t='<iframe src="javascript:0" name="'+i.iframeId+'">';u=document.createElement(t)}catch(n){u=document.createElement("iframe");u.name=i.iframeId;u.src="javascript:0"}u.id=i.iframeId;i.form.appendChild(u);i.iframe=u}var i=this;if(!this.form){var u,r=document.createElement("form"),f=document.createElement("textarea"),c=this.iframeId="eio_iframe_"+this.index;r.className="socketio";r.style.position="absolute";r.style.top="-1000px";r.style.left="-1000px";r.target=c;r.method="POST";r.setAttribute("accept-charset","utf-8");f.name="d";r.appendChild(f);document.body.appendChild(r);this.form=r;this.area=f}this.form.action=this.uri();h();n=n.replace(o,"\\\n");this.area.value=n.replace(e,"\\n");try{this.form.submit()}catch(l){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===i.iframe.readyState&&s()}:this.iframe.onload=s}}).call(t,function(){return this}())},function(n,t,i){(function(t){function r(n){var t=n&&n.forceBase64;t&&(this.supportsBinary=!1);this.perMessageDeflate=n.perMessageDeflate;this.usingBrowserWebSocket=o&&!n.forceNode;this.protocols=n.protocols;this.usingBrowserWebSocket||(u=f);e.call(this,n)}var f,e=i(22),s=i(23),h=i(31),c=i(32),l=i(33),a=i(3)("engine.io-client:websocket"),o=t.WebSocket||t.MozWebSocket,u;if("undefined"==typeof window)try{f=i(36)}catch(v){}u=o;u||"undefined"!=typeof window||(u=f);n.exports=r;c(r,e);r.prototype.name="websocket";r.prototype.supportsBinary=!0;r.prototype.doOpen=function(){if(this.check()){var t=this.uri(),i=this.protocols,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx;n.key=this.key;n.passphrase=this.passphrase;n.cert=this.cert;n.ca=this.ca;n.ciphers=this.ciphers;n.rejectUnauthorized=this.rejectUnauthorized;this.extraHeaders&&(n.headers=this.extraHeaders);this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?i?new u(t,i):new u(t):new u(t,i,n)}catch(r){return this.emit("error",r)}void 0===this.ws.binaryType&&(this.supportsBinary=!1);this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer";this.addEventListeners()}};r.prototype.addEventListeners=function(){var n=this;this.ws.onopen=function(){n.onOpen()};this.ws.onclose=function(){n.onClose()};this.ws.onmessage=function(t){n.onData(t.data)};this.ws.onerror=function(t){n.onError("websocket error",t)}};r.prototype.write=function(n){function f(){i.emit("flush");setTimeout(function(){i.writable=!0;i.emit("drain")},0)}var i=this;this.writable=!1;for(var u=n.length,r=0,e=u;r<e;r++)!function(n){s.encodePacket(n,i.supportsBinary,function(r){var e,o;i.usingBrowserWebSocket||(e={},(n.options&&(e.compress=n.options.compress),i.perMessageDeflate)&&(o="string"==typeof r?t.Buffer.byteLength(r):r.length,o<i.perMessageDeflate.threshold&&(e.compress=!1)));try{i.usingBrowserWebSocket?i.ws.send(r):i.ws.send(r,e)}catch(s){a("websocket closed before onclose event")}--u||f()})}(n[r])};r.prototype.onClose=function(){e.prototype.onClose.call(this)};r.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()};r.prototype.uri=function(){var n=this.query||{},t=this.secure?"wss":"ws",i="",r;return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(i=":"+this.port),this.timestampRequests&&(n[this.timestampParam]=l()),this.supportsBinary||(n.b64=1),n=h.encode(n),n.length&&(n="?"+n),r=this.hostname.indexOf(":")!==-1,t+"://"+(r?"["+this.hostname+"]":this.hostname)+i+this.path+n};r.prototype.check=function(){return!(!u||"__initialize"in u&&this.name===r.prototype.name)}}).call(t,function(){return this}())},function(){},function(n){var t=[].indexOf;n.exports=function(n,i){if(t)return n.indexOf(i);for(var r=0;r<n.length;++r)if(n[r]===i)return r;return-1}},function(n,t){(function(t){var i=/^[\],:{}\s]*$/,r=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,u=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,f=/(?:^|:|,)(?:\s*\[)+/g,e=/^\s+/,o=/\s+$/;n.exports=function(n){return"string"==typeof n&&n?(n=n.replace(e,"").replace(o,""),t.JSON&&JSON.parse?JSON.parse(n):i.test(n.replace(r,"@").replace(u,"]").replace(f,""))?new Function("return "+n)():void 0):null}}).call(t,function(){return this}())},function(n,t,i){"use strict";function r(n,t,i){this.io=n;this.nsp=t;this.json=this;this.ids=0;this.acks={};this.receiveBuffer=[];this.sendBuffer=[];this.connected=!1;this.disconnected=!0;i&&i.query&&(this.query=i.query);this.io.autoConnect&&this.open()}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},u=i(7),c=i(8),o=i(40),s=i(41),h=i(42),f=i(3)("socket.io-client:socket"),v=i(31),l,e;n.exports=t=r;l={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1};e=c.prototype.emit;c(r.prototype);r.prototype.subEvents=function(){if(!this.subs){var n=this.io;this.subs=[s(n,"open",h(this,"onopen")),s(n,"packet",h(this,"onpacket")),s(n,"close",h(this,"onclose"))]}};r.prototype.open=r.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)};r.prototype.send=function(){var n=o(arguments);return n.unshift("message"),this.emit.apply(this,n),this};r.prototype.emit=function(n){if(l.hasOwnProperty(n))return e.apply(this,arguments),this;var i=o(arguments),t={type:u.EVENT,data:i};return t.options={},t.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof i[i.length-1]&&(f("emitting packet with ack id %d",this.ids),this.acks[this.ids]=i.pop(),t.id=this.ids++),this.connected?this.packet(t):this.sendBuffer.push(t),delete this.flags,this};r.prototype.packet=function(n){n.nsp=this.nsp;this.io.packet(n)};r.prototype.onopen=function(){if(f("transport is open - connecting"),"/"!==this.nsp)if(this.query){var n="object"===a(this.query)?v.encode(this.query):this.query;f("sending connect packet with query %s",n);this.packet({type:u.CONNECT,query:n})}else this.packet({type:u.CONNECT})};r.prototype.onclose=function(n){f("close (%s)",n);this.connected=!1;this.disconnected=!0;delete this.id;this.emit("disconnect",n)};r.prototype.onpacket=function(n){if(n.nsp===this.nsp)switch(n.type){case u.CONNECT:this.onconnect();break;case u.EVENT:this.onevent(n);break;case u.BINARY_EVENT:this.onevent(n);break;case u.ACK:this.onack(n);break;case u.BINARY_ACK:this.onack(n);break;case u.DISCONNECT:this.ondisconnect();break;case u.ERROR:this.emit("error",n.data)}};r.prototype.onevent=function(n){var t=n.data||[];f("emitting event %j",t);null!=n.id&&(f("attaching ack callback to event"),t.push(this.ack(n.id)));this.connected?e.apply(this,t):this.receiveBuffer.push(t)};r.prototype.ack=function(n){var i=this,t=!1;return function(){if(!t){t=!0;var r=o(arguments);f("sending ack %j",r);i.packet({type:u.ACK,id:n,data:r})}}};r.prototype.onack=function(n){var t=this.acks[n.id];"function"==typeof t?(f("calling ack %s with %j",n.id,n.data),t.apply(this,n.data),delete this.acks[n.id]):f("bad ack %s",n.id)};r.prototype.onconnect=function(){this.connected=!0;this.disconnected=!1;this.emit("connect");this.emitBuffered()};r.prototype.emitBuffered=function(){for(var n=0;n<this.receiveBuffer.length;n++)e.apply(this,this.receiveBuffer[n]);for(this.receiveBuffer=[],n=0;n<this.sendBuffer.length;n++)this.packet(this.sendBuffer[n]);this.sendBuffer=[]};r.prototype.ondisconnect=function(){f("server disconnect (%s)",this.nsp);this.destroy();this.onclose("io server disconnect")};r.prototype.destroy=function(){if(this.subs){for(var n=0;n<this.subs.length;n++)this.subs[n].destroy();this.subs=null}this.io.destroy(this)};r.prototype.close=r.prototype.disconnect=function(){return this.connected&&(f("performing disconnect (%s)",this.nsp),this.packet({type:u.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this};r.prototype.compress=function(n){return this.flags=this.flags||{},this.flags.compress=n,this}},function(n){function t(n,t){var r=[],i;for(t=t||0,i=t||0;i<n.length;i++)r[i-t]=n[i];return r}n.exports=t},function(n){"use strict";function t(n,t,i){return n.on(t,i),{destroy:function(){n.removeListener(t,i)}}}n.exports=t},function(n){var t=[].slice;n.exports=function(n,i){if("string"==typeof i&&(i=n[i]),"function"!=typeof i)throw new Error("bind() requires a function");var r=t.call(arguments,2);return function(){return i.apply(n,r.concat(t.call(arguments)))}}},function(n){function t(n){n=n||{};this.ms=n.min||100;this.max=n.max||1e4;this.factor=n.factor||2;this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0;this.attempts=0}n.exports=t;t.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++),t,i;return this.jitter&&(t=Math.random(),i=Math.floor(t*this.jitter*n),n=0==(1&Math.floor(10*t))?n-i:n+i),0|Math.min(n,this.max)};t.prototype.reset=function(){this.attempts=0};t.prototype.setMin=function(n){this.ms=n};t.prototype.setMax=function(n){this.max=n};t.prototype.setJitter=function(n){this.jitter=n}}])});var printData=null,isDebug=!0,g_android_print_config=null,custormTracePrintSwitch=!1;var _g_sv_uit_cache_name,_g_old_url="http://decerp.cc",_g_everyDaySerialNumber=!1,rankDemotion=!1,availableIntegralSwitch=!0,rankPromotionIsON=!1,MembershipGradeGroupingIsON=!0,moduleConfigList="",g_liushuihao=1,_g_sp_salesclerkid=0,decerpLogoUrl_270="/images/logo.jpg",decerpLogoUrl_80="/images/dklogo.png",successionPrintModel="",sv_enable_wechatpay=!1,sv_enable_alipay=!1,is_open_print="",Is_verify_store_version=!0,verify_distributor_id=1,_g_is_distributor_customer=!1,isOpenMicroMall=!1,IsStore=!1,_g_old_sv_versionid=4,sv_current_operato="",g_play_sound_queue_url=[],g_play_sound_queue_start=[],g_play_sound_queue_end=[],g_play_sound_queue_html=[],g_PlaySoundTimer,g_dec_payment_method="",g_dec_payment_config="",_g_system_storagealertis=!1,def_system_storagealertis=$.Deferred(),def_system_paySetting=$.Deferred(),def_system_printLoad=$.Deferred(),def_buy_shop_valueed=$.Deferred(),def_system_getsalesConfig=$.Deferred(),def_system_getHardwareConfig=$.Deferred(),_g_get_cache_name_def=$.Deferred(),Preferential_TopUpGiving_ConfigList="",g_AutomaticallyGenerateProductBarcode=!1,g_memberAutoIdstr,g_memberAutoIdstrOld,g_TraceabilityCode=!1,serialNumberOfDailyExpressions="",g_AutomaticallyGenerateMemberId=!1,_g_res_images_url="http://res.decerp.cc",user_id,automaticDevanning=!1,MultiSpecification=!1,DishIsPrintedOnce=!0,SuccessionSwitch=!1,g_WhetherStartusingConsumptionMarket=!1,_g_user_config="",g_SubmitIdList=[],Is_open_commission=!1,g_DisableManualInput=!1,g_ShareTheResults=!0,g_WhetherSendtextMessageRemindMember=!1,WeighingStableAutomaticDetermine=!1,g_ZeroInventorySalesQ=!0,g_ShopCateringWechatConfig=!1,_g_uc_dixian={auto:0,whether:!1},_g_Catering_Is_Ceremonial_Eat=0,_g_CateringOnlineIsAutoOrderAndPrint=0,_g_TakeOutFoodPrintIP="",_g_TakeOutFoodPrintPort="",_g_ValueAddedServices_Recommend_MALL=!1,_g_ValueAddedServices_Recommend_MALL_Date="",_g_ValueAddedServices_Recommend_TOFoodinOneSet=!1,_g_ValueAddedServices_Recommend_TOFoodinOneSet_Date="",_g_ValueAddedServices_Recommend_TOScanOrder=!1,_g_ValueAddedServices_Recommend_TOScanOrder_Date="",receptionPtNum=1,receptionPtNum=1,receptionPtName,backstagePtNum=0,backstagePtName,printSet_network_enable=!1,printSet_network_device_font_islabel=!1,printSet_network_device_back_islabel=!1,printSet_network_devive_isandroid_enable=!1,_g_is_ic_flag=!1,_g_is_ic_userid="",_g_is_ic_pwd="",_g_is_ic_type="0",g_set_pos_t1_secondscreen_enable=!1,g_set_pos_t1_secondscreen_size="",g_set_pos_t1_secondscreen_style="",g_set_pos_t1_secondscreen_images="",g_set_pos_t1_secondscreen_video="";$(document).ready(function(){$(".sidleabtn").click(function(){$(this).parent("li").addClass("active").siblings().removeClass("active").find(".two-menu").fadeOut(0);$(this).siblings(".two-menu").fadeIn(10)});var n;$(".sidleabtn").hover(function(){$(this).parent("li").addClass("active").siblings().removeClass("active").find(".two-menu").fadeOut(0);$(this).siblings(".two-menu").fadeIn(10);$(this).siblings(".caretactive").fadeIn(10);clearTimeout(n)},function(){n=setTimeout(function(){$(".helodao").hide(0);$(".caretactive").css("display","none")},400)});$(".helodao").hover(function(){clearTimeout(n);$(this).show()},function(){$(this).hide();$(".caretactive").css("display","none")})});loggin={chklogn:function(n){if(n==-1){layer.alert("\u767b\u5f55\u5df2\u5931\u6548\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55\uff01",function(){window.location.href="/login.html"});return}}};_g_homeGetUserLoginData?getIsLoginData(_g_homeGetUserLoginData,!1):$.get("/Ajaxdata/Islogin?ISD="+new Date,function(n){getIsLoginData(n,!0)});_g_get_cache_name_def.then(function(){if(_g_sv_uit_cache_name=="cache_name_catering")try{var n=io("http://139.196.24.17:3001");n.on("common_alluser",function(t){t&&t.id&&n.emit("reg_shop_event"+t.id,{user_id:user_id})});n.on("decerp_Catering_PcOrPhone_Switch",function(n){n.cateringSwitch&&getMessageBox(user_id)});n.on("disconnect",function(n){console.log(n)})}catch(t){console.log(t.message)}});setInterval(function(){getMessageBox(user_id)},1e5);try{user_id&&getMessageBox(user_id)}catch(e){}_g_getMessageBoxFalg=!1;$("#userLogOut").click(function(){$.post("/AjaxUser/LogOut",null,function(){location.href=_g_is_distributor_customer||verify_distributor_id==100?"/Dealerlogin.html":"/login.html"})});$(document).on("change","#upLoadImg",function(){$.commonUploadImg("upLoadImg","ShopLogo","true",function(n){$.post("/AjaxUser/UploadLogo?id=2&imgurl="+n,function(t){t.id==!0?($("#userImg").attr("src",_g_res_images_url+n),$("#showImg").attr("src",_g_res_images_url+n)):layer.msg(t.name)})})});$("#changePwd").click(function(){layerpage.Deke_layerpage.getpage3("\u4fee\u6539\u5bc6\u7801","/ajaxHtml_N3/system/changePassword.html?v=60",changePwd,["400px",""])});addUserFeedback();$("#change_skin").click(function(){layerpage.Deke_layerpage.getpage3("\u4fee\u6539\u76ae\u80a4","/ajaxHtml_N3/system/changeSkin.html?v=60",null,["400px","200px"])});$(document).unbind("click","#skincolorBox li").on("click","#skincolorBox li",function(){var n=$(this).data("type"),t=$(this).data("bgcolor");n&&$.post("/System/setUserSkin",{skinValue:n},function(n){n&&($("#headerBackgroundColor").css("background-color","#"+t),$("#headerBackgroundColor").find("#smalllogoimg").css("background-color","#"+t),layer.closeAll(),layer.msg("\u8bbe\u7f6e\u6210\u529f"))})});Date.prototype.addDays=function(n){this.setDate(this.getDate()+n)};Date.prototype.Format=function(n){var i={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()},t;/(y+)/.test(n)&&(n=n.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(t in i)new RegExp("("+t+")").test(n)&&(n=n.replace(RegExp.$1,RegExp.$1.length==1?i[t]:("00"+i[t]).substr((""+i[t]).length)));return n};sidebarleft=$(".sidebar-menu li .nav-title");$(document).on("click","#goleft",function(){$(this).hasClass("open")?($(this).removeClass("open"),$("#smalllogoimg").animate({width:"175px"},300),$("#index-content").animate({paddingLeft:"170px"},300),sidebarleft.animate({width:"98px"},300),$(".message i").removeClass("changecolor"),$(".today-summarize").removeClass("navchangecolor"),$("#logoid").attr("src",decerpLogoUrl_270)):($(this).addClass("open"),$("#smalllogoimg").animate({width:"77px"},300),$("#index-content").animate({paddingLeft:"77px"},300),sidebarleft.animate({width:"0"},300),$(".message i").addClass("changecolor"),$(".today-summarize").addClass("navchangecolor"),$("#logoid").attr("src",decerpLogoUrl_270))});header_move_nav=$("#headermove li.active");nav_content=$(".nav-content");header_move_nav.each(function(n,t){$(t).on("click",function(){if(header_move_nav.eq(n).hasClass("open"))nav_content.eq(n).fadeOut(300),header_move_nav.eq(n).removeClass("open");else{header_move_nav.eq(n).addClass("open").siblings("li.active").removeClass("open");nav_content.eq(n).fadeIn(300).siblings(".nav-content").fadeOut(300);nav_content.eq(n).on("mouseleave",function(){header_move_nav.eq(n).removeClass("open");$(this).fadeOut(300)})}})});$("#systemInformation").click(function(){$(this).hasClass("open")?($(this).removeClass("open"),$(".newscenter").animate({right:-370},400).hide(300)):($(this).addClass("open"),$(".newscenter").show().animate({right:0},400))});$("#showhardwareorderlist").click(function(){$(this).hasClass("open")?($(this).removeClass("open"),$("#hardwarecart-center").animate({right:-370},400)):($(this).addClass("open"),$("#hardwarecart-center").show().animate({right:0},400))});$("#newscenter-nav>li").each(function(n,t){$(t).click(function(){$(this).addClass("oldclick");var t=$(this).data("type");$(this).hasClass("oldclick")&&t!=undefined&&getSystemUpdatedMessageList(t,6);$("#newscenter-nav>li:eq("+n+")").addClass("active").siblings("li").removeClass("active");$(".newscenter-content:eq("+n+")").addClass("active").siblings(".newscenter-content").removeClass("active")})});count=0;memberlistnav=$("#memberlistnav li.frist");memberlistnav.each(function(n,t){$(t).on("mouseover",function(){$(".memberactive").eq(n).fadeIn(300)});$(t).on("mouseleave",function(){$(".memberactive").eq(n).fadeOut(0)})});memberlistnavnew=$("#memberlistnavnew li.frist");memberlistnavnew.each(function(n,t){$(t).on("mouseover",function(){$(".memberactivenew").eq(n).fadeIn(300)});$(t).on("mouseleave",function(){$(".memberactivenew").eq(n).fadeOut(0)})});productlistnav=$("#productlistnav li.frist");productlistnav.each(function(n,t){$(t).on("mouseover",function(){$(".memberactive").eq(n).fadeIn(300)});$(t).on("mouseleave",function(){$(".memberactive").eq(n).fadeOut(0)})});$(document).on("click","#memberfilter",function(){$(this).toggleClass("open");$("#filterbox").slideToggle(500);$("#memberreport").fadeOut(300)});$(document).on("click",".eye",function(){$("#memberreport").slideToggle(300)});$(document).on("click","#changememberlist",function(){$(".memberlistactive").slideToggle(300)});var index=0,layerpage={Deke_layerpage:{show_Url2:function(n,t,i,r,u){$.get(i,function(i){n=layer.open({type:1,title:t,shade:.6,moveType:1,shift:5,area:r||["620px","540px"],closeBtn:1,content:i,scrollbar:!0,isOutAnim:!1,shadeClose:!1,success:function(){u&&u()}})})},noneClosePage:function(n,t,i,r,u){$.get(i,function(i){n=layer.open({type:1,title:t,shade:.6,moveType:1,shift:5,area:r||["620px","540px"],closeBtn:0,content:i,scrollbar:!0,isOutAnim:!1,shadeClose:!1,success:function(){u&&u()}})})},noneClosePageData:function(n,t,i,r,u){$.get(t,function(t){index=layer.open({type:1,title:n,shade:.6,moveType:1,shift:5,area:r||["620px","540px"],closeBtn:0,content:t,scrollbar:!0,isOutAnim:!1,shadeClose:!1,success:function(){var n=u;i&&i(n)}})})},getpage2:function(n,t,i,r,u,f){$.get(i,function(i){n=layer.open({type:1,title:t,shade:.6,moveType:1,shift:5,area:r||["620px","540px"],closeBtn:1,content:i,scrollbar:!0,isOutAnim:!1,shadeClose:!1,success:function(){var n=f;u&&u(f)}})})},getpage3:function(n,t,i,r,u){$.get(t,function(t){index=layer.open({id:u,type:1,title:n,shade:.6,moveType:1,shift:5,area:r||["620px","540px"],closeBtn:1,content:t,scrollbar:!0,shadeClose:!1,success:function(){i&&i()}})})}}},index="";$.extend({getJson:function(n,t,i){return $.ajax({url:n,type:"get",dataType:"json",async:!1,cache:!0,data:t,success:function(n){i(n)}})},getAsyncJson:function(n,t,i){return $.ajax({url:n,type:"get",dataType:"json",async:!0,cache:!0,data:t,success:function(n){i(n)}})},postAsyncJson:function(n,t,i){return $.ajax({url:n,type:"post",dataType:"json",async:!0,cache:!1,data:t,success:function(n){i(n)}})},postAsyncContentJson:function(n,t,i){return t=JSON.stringify(t),$.ajax({url:n,type:"post",dataType:"json",contentType:"application/json",async:!0,cache:!1,data:t,success:function(n){i(n)}})},postJson:function(n,t,i){return $.ajax({url:n,type:"post",dataType:"json",async:!1,cache:!1,data:t,success:function(n){i(n)}})},getHtml:function(n,t,i){return $.ajax({url:n,type:"get",dataType:"html",async:!1,cache:!1,data:t,success:function(n){i(n)}})},getAsyncHtml:function(n,t,i){return $.ajax({url:n,type:"get",dataType:"html",async:!0,cache:!1,data:t,success:function(n){i(n)}})},postHtml:function(n,t,i){return $.ajax({url:n,type:"post",dataType:"html",async:!0,cache:!1,data:t,success:function(n){i(eval(n))}})},commonUploadImg:function(n,t,i,r){if(!n){layer.msg("\u4e0a\u4f20\u63a7\u4ef6ID\u4e0d\u80fd\u4e3a\u7a7a\uff01");return}var u=new FormData,f=$("#"+n)[0].files[0];if(!f){layer.msg("\u8bf7\u9009\u62e9\u56fe\u7247\u6587\u4ef6");return}if(f.size>5242880){layer.msg("\u8bf7\u4e0a\u4f20\u5c0f\u4e8e5M\u4ee5\u4e0b\u7684\u56fe\u7247");return}if(f.type!="image/jpeg"&&f.type!="image/png"){layer.msg("\u8bf7\u4e0a\u4f20\u56fe\u7247\u6587\u4ef6\uff01");return}u.append("file",f);u.append("userId",user_id);u.append("uploadFileType",t);u.append("isCompress",i);$.ajax({url:"http://res.decerp.cc/api/UploadImg/CommonImg",type:"POST",data:u,processData:!1,contentType:!1,async:!1,cache:!1,success:function(n){n&&n.succeed?r(n.values):n.errmsg?layer.msg(n.errmsg):layer.msg("\u4e0a\u4f20\u56fe\u7247\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01")}})},commonUploadExelFile:function(n,t,i){if(!n){layer.msg("\u4e0a\u4f20\u63a7\u4ef6ID\u4e0d\u80fd\u4e3a\u7a7a\uff01");return}var r=new FormData,u=$("#"+n)[0].files[0];if(!u){layer.msg("\u8bf7\u9009\u62e9exel\u6587\u4ef6");return}if(u.size>5242880){layer.msg("\u8bf7\u4e0a\u4f20\u5c0f\u4e8e5M\u4ee5\u4e0b\u7684\u6587\u4ef6");return}r.append("file",u);r.append("userId",user_id);r.append("uploadFileType","excel");$.ajax({url:"http://qode.decerp.cc"+t,type:"POST",data:r,processData:!1,contentType:!1,async:!1,cache:!1,success:function(n){n?i(JSON.parse(n)):layer.msg("\u4e0a\u4f20\u6587\u4ef6\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01")}})}});newphotosrcarray=[];footernavhtml='<footer class="determinebtn-closebtn"><div class="btnbox fr"><button type="button" class="btn btn-success">\u786e\u5b9a<\/button><button type="button" class="btn btn-default closepage">\u53d6\u6d88<\/button><\/div><\/footer>';tipsFn();_g_getShareSessionPermissions_data="";getShareSessionPermissions();$("#handover").click(function(){if(SuccessionSwitch){var n="";n=_g_user_config.order_operator==null?"\u7ba1\u7406\u5458":_g_user_config.order_operator;layerpage.Deke_layerpage.getpage2("1","\u5458\u5de5\u5de5\u53f7:"+n,"/employeeHandover/_PartialEmployeeHandover_N3",["680px","520px"],employeeHandover)}else layer.msg("\u672a\u5f00\u542f\u4ea4\u63a5\u73ed\u529f\u80fd\uff01")});successionPrintModel=null;$(document).unbind("click","#successionReconciliation").on("click","#successionReconciliation",function(){SuccessionMethods($("#begindateval2").val(),$("#enddateval2").val())});preventTheRepeatClick=!0;$(document).unbind("click","#successionAndExit").on("click","#successionAndExit",function(){if(preventTheRepeatClick)if(preventTheRepeatClick=!1,$("#successionPrint").hasClass("open"))PrintSuccessionInfo();else var n=$.ajax({url:"/AjaxUser/LogOut",timeout:5e3,type:"post",data:{order_operator:_g_user_config.order_operator,startDate:$("#selectDate-money").val(),endDate:$("#selectDate-money2").val(),flag:"exit"},dataType:"json",success:function(){location.href=_g_is_distributor_customer||verify_distributor_id==100?"/Dealerlogin.html":"/login.html"},complete:function(t,i){i=="timeout"&&(n.abort(),layer.msg("\u4ea4\u63a5\u73ed\u8bf7\u6c42\u8d85\u65f6"),preventTheRepeatClick=!0)}})});$(document).on("click","#sidebar .sv_func_id",function(){var i=$(this).attr("sv_func_id"),n=$(this).attr("href"),t="?";n.indexOf(t)>=0&&(t="&");n=n+t+"sv_func_id="+i;$(this).attr("href","javascript:void(0)");window.location.href=n});$("#systemmenu .sv_func_id").click(function(n){if(checkVersionPower2(this,n)==!1){$(this).attr("href","");return}if(checkVersionPower2(this,n)=="needControl"){var r=$(this).attr("sv_func_id"),t=$(this).attr("href"),i="?";t.indexOf(i)>=0&&(i="&");t=t+i+"sv_func_id="+r;$(this).attr("href","javascript:void(0)");layerpage.Deke_layerpage.getpage2("1","\u5f53\u524d\u7248\u672c\u4e3a\u201c\u514d\u8d39\u7248\u201d","/html/PermissionsPrompt.html?v=15",["400px","190"],freeVersionShowMsg,t);return}var r=$(this).attr("sv_func_id"),t=$(this).attr("href"),i="?";t.indexOf(i)>=0&&(i="&");t=t+i+"sv_func_id="+r;$(this).attr("href","javascript:void(0)");window.location.href=t});$(document).unbind("click","#successionPrint").on("click","#successionPrint",function(){$(this).toggleClass("open")});$(document).unbind("click","#gotohardwareprice").on("click","#gotohardwareprice",function(){localStorage.setItem("hardwareOrderInfow",JSON.stringify({hardwareId:0,hardwareNumber:0,type:0}));window.location.href="/home/HardwareOrderList_N3?type=0&hardwareId=0&hardwareNumber=0"});$(document).unbind("click","#deletehardwarelist").on("click","#deletehardwarelist",function(){var t=$("#cartHtml li .hardwarelistcheck:checked"),n="";$.each(t,function(){n+=$(this).data("id")+","});n.length>0&&$.post("http://api.decerp.cc/api/HardwareStore/DeleteCart",{sv_shop_user_id:user_id,cartIds:n.substr(0,n.length-1),isDeleteAll:!1},function(n){n?(layer.msg("\u5220\u9664\u6210\u529f\uff01"),getCartListFn(user_id)):layer.msg("\u5220\u9664\u5931\u8d25\uff01")})});$("#advisory").mouseover(function(){$("#advisory-info").show(100)});$("#advisory").mouseleave(function(){$("#advisory-info").hide(0)});system={index:function(){function t(){$.getJSON("/UserModuleConfig/GetUserModuleConfigList?module_code=Catering_Is_Ceremonial_Eat",function(n){var t,i,r;if(n!=null&&(t=n.childInfolist,t!=null&&t.length>0))for($("#selectCatering_Is_Ceremonial_Eat").attr("data-configid",t[0].sv_user_config_id).attr("data-moduleid",t[0].sv_user_module_id),i=0;i<t.length;i++)t[i].childDetailList&&t[i].childDetailList.length>0&&(r=t[i].childDetailList[0],r&&$("#selectCatering_Is_Ceremonial_Eat").attr("data-id",r.sv_user_configdetail_id).val(r.sv_detail_value))})}function i(){if(n!=""&&n!=null&&n!=undefined)for(var t in n)$("._"+t).val(n[t]);else $.getJSON("/AjaxUser/GetUserinfo/",function(n){loggin.chklogn(n);for(t in n)$("._"+t).val(n[t])});$.get("/Ajaxdata/GetIndustryType",function(n){var t,i;if(n.length>0){if(n){t="";for(i in n)t+="<option value="+n[i].industrytype_id+">"+n[i].sv_uit_name+"<\/option>"}$("#_sv_us_industrytype").html(t)}}).then(function(){$("#_sv_us_industrytype").val($("._sv_us_industrytype").val())});$.get("/Ajaxdata/GetPCD/1",function(n){var t,i;if(n.length>0){t="";for(i in n)t+='<option value="'+n[i].code+'">'+n[i].name+"<\/option>";$("#_sv_us_province").html(t)}}).then(function(){$("#_sv_us_province").val($("._sv_us_province").val()).change()});$("#_sv_us_province").change(function(){$("#_sv_us_district").empty();$.get("/Ajaxdata/GetCityInterlock/"+$("#_sv_us_province").val(),function(n){$("#_sv_us_city").empty();for(var t in n)$("#_sv_us_city").append('<option value="'+n[t].code+'">'+n[t].name+"<\/option>")}).then(function(){$("#_sv_us_city").val($("._sv_us_city").val());$("#_sv_us_city").change()})});$("#_sv_us_city").change(function(){$.get("/Ajaxdata/GetDistrictInterlock/"+$("#_sv_us_city").val(),function(n){if(n.length>0){$("#_sv_us_district").empty();for(var t in n)$("#_sv_us_district").append('<option value="'+n[t].code+'">'+n[t].name+"<\/option>")}}).then(function(){$("#_sv_us_district").val($("._sv_us_district").val())})})}$("#system-nav li").eq(0).find("a").addClass("active");var n="";$.getJSON("/AjaxUser/GetUserinfo/",function(i){if(i&&i!=null){n=i;for(key in i){if(key!="sv_versionname")if(key=="sv_versionexpiration"&&(i[key]==""||i[key].slice(0,4)=="0001"))$("#_"+key).text(""),(i.sv_versionid==1||i.sv_versionid==5||i.sv_versionname.indexOf("\u81f3\u5c0a")>=0)&&$("#_sv_versionexpiration").text("\u6c38\u4e45");else if(key=="sv_versionexpiration")if(i.sv_versionid!=1){var r=new Date(i[key]).Format("yyyy-MM-dd"),u=new Date,f=new Date(r),e=(f.getTime()-u.getTime())/864e5;$("#_"+key).text("\u8ddd\u5230\u671f\u5929\u6570\uff1a"+parseInt(e)+"\u5929")}else $("#_sv_versionexpiration").text("\u6c38\u4e45");else key=="sv_ul_email"?i[key]&&$("#"+key).text(i[key]):key=="sv_ul_regdate"?$("#"+key).text(new Date(i[key]).Format("yyyy-MM-dd hh:mm:sss")):($("#_"+key).text(i[key]||""),$("#"+key).text(i[key]||""),$("."+key).text(i[key]||""));else $("#_"+key).text(i[key]),isNullOrWhiteSpace(i[key])?$("#sv_versionname").text(i[key]):$("#sv_versionname").text("\u514d\u8d39\u7248");key=="isStore"&&i[key]==!0&&$("#showlogoImg").removeAttr("onclick");key=="sv_versionid"&&i[key]!=1?($("#TrialVersion").hide(),i[key]==2&&$("#btnSelectImg").attr("href","/Home/paylinkage_N3?version=5&distributor="+i.distributor_id+"&gobackpage=system")):key=="sv_versionid"&&i[key]==1&&($("#btnRenewVersion").hide(),$("#TrialVersion").show(),$("#btnSelectImg").attr("href","/Home/paylinkage_N3?version=5&distributor="+i.distributor_id+"&gobackpage=system"));key=="sv_store_logo"&&(isNullOrWhiteSpace(key)&&isNullOrWhiteSpace(i[key])?($("#showlogoImg").attr("src",_g_res_images_url+i[key]),$(".showlogoImg").attr("src",_g_res_images_url+i[key]),$("#logoid").attr("src",_g_res_images_url+i[key])):($("#showlogoImg").attr("src",decerpLogoUrl_270),$(".showlogoImg").attr("src",decerpLogoUrl_270),$("#logoid").attr("src",decerpLogoUrl_270)));key=="sv_us_logo"&&isNullOrWhiteSpace(key)&&isNullOrWhiteSpace(i[key])&&($("#userImg").attr("src",_g_res_images_url+i[key]),$("#showImg").attr("src",_g_res_images_url+i[key]));key=="user_id"&&($("#user_id").html(""+i[key]),$(".user_id").html(""+i[key]))}def_system_getsalesConfig.then(function(){_g_sv_uit_cache_name=="cache_name_catering"&&(t(),$("#Catering_Is_Ceremonial_Eat_li, #CateringOnlineIsAutoOrderAndPrint_li").show())})}});$(document).on("change","#uplogoImg",function(){$.commonUploadImg("uplogoImg","ShopLogo","true",function(n){n&&$.post("/AjaxUser/UploadLogo?id=1&imgurl="+n,function(t){t.id==!0?($("#logoid").attr("src",_g_res_images_url+n),$("#showlogoImg").attr("src",_g_res_images_url+n),$(".showlogoImg").attr("src",_g_res_images_url+n)):layer.msg(t.name)})})});$(document).on("click","#TrialVersion",function(){$.get("/AjaxUser/GetTrialVersionPermissions/",function(n){n==1?layer.msg("\u60a8\u5df2\u9886\u53d6\u8fc7\u4e86\uff01\uff01"):$.post("/AjaxUser/ReceiveTrialVersion",function(n){n==1?layer.msg("\u606d\u559c\u60a8\uff0c\u6210\u529f\u9886\u53d6\u4e86\u9ad8\u7ea7\u8bd5\u7528\u7248,\u9000\u51fa\u91cd\u65b0\u767b\u5f55\u5373\u53ef\u4eab\u53d7\u9ad8\u7ea7\u7248\u529f\u80fd"):n==2?layer.msg("\u9886\u53d6\u5931\u8d25\uff0c\u5237\u65b0\u91cd\u65b0\u8bd5\u9886"):n==2&&layer.msg("\u60a8\u5df2\u9886\u53d6\u8fc7\u4e86\uff01\uff01")})})});$("#selectCatering_Is_Ceremonial_Eat").change(function(){var i=$(this).val(),n=[],t={sv_user_configdetail_id:parseInt($(this).attr("data-id")),sv_detail_value:$(this).val(),sv_user_config_id:parseInt($(this).attr("data-configid")),sv_user_module_id:parseInt($(this).attr("data-moduleid")),sv_detail_is_enable:!0,sv_user_configdetail_name:$(this).attr("data-name"),sv_remark:"\u9910\u996e\u5e97\u94fa\u8425\u4e1a\u6a21\u5f0f"};n.push(t);n.length!=0&&$.postAsyncContentJson("/UserModuleConfig/SaveConfigdetailList?moduleCode=Catering_Is_Ceremonial_Eat",n,function(n){n&&(n==1?layer.msg("\u4fdd\u5b58\u6210\u529f"):n==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):layer.msg("\u4fdd\u5b58\u5931\u8d25"))})});$("#editshopinformation").click(function(){layerpage.Deke_layerpage.show_Url2("1","\u4fee\u6539\u5e97\u94fa\u8d44\u6599","/ajaxHtml_N3/system/editshopinformation.html?="+getTimeStamp(),["350px","490px"],i)});$(document).unbind("click","#saveEditShopInfoBtn").on("click","#saveEditShopInfoBtn",function(){var t=$("._sv_ul_name").val().trim(),n=$("._sv_us_shortname").val().trim(),i=$("._sv_us_name").val().trim(),u,r;if(!isNullOrEmpty(t)){$("._sv_ul_name").focus();layer.msg("\u5e97\u4e3b\u59d3\u540d\u4e0d\u80fd\u4e3a\u7a7a\uff01");return}if(isNullOrEmpty(n)){if(n.length<2||n.length>8){layer.msg("\u5e97\u94fa\u7b80\u79f0\u957f\u5ea6\u4e3a2-8\u5b57\u7b26");return}}else{$("._sv_us_shortname").focus();layer.msg("\u5e97\u94fa\u7b80\u79f0\u4e0d\u80fd\u4e3a\u7a7a\uff01");return}if(!isNullOrEmpty(i)){$("._sv_us_name").focus();layer.msg("\u5e97\u94fa\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a\uff01");return}u=layer.load();r={sv_wechat_number:$("._sv_wechat_number").val(),sv_ul_name:t,sv_us_shortname:n,sv_us_name:i,sv_wechat_number:$("._sv_wechat_number").val(),sv_us_phone:$("._sv_us_phone").val(),sv_us_address:$("._sv_us_address").val(),sv_us_province:$("#_sv_us_province").val()||0,sv_us_city:$("#_sv_us_city").val()||0,sv_us_district:$("#_sv_us_district").val()||0,sv_us_industrytype:$("#_sv_us_industrytype").val()};$.ajax({url:"/System/UpdaueShopInfo",type:"post",data:JSON.stringify(r),contentType:"application/json",async:!1,success:function(n){n==!0?($("#username").text($("._sv_us_name").val()),$("#dianzhu").text($("._sv_ul_name").val()),layer.closeAll(),layer.msg("\u8d44\u6599\u4fee\u6539\u6210\u529f\uff01"),$.getJSON("/AjaxUser/GetUserinfo/",function(n){loggin.chklogn(n);for(key in n)(key="sv_ul_regdate")?($("#"+key).text(new Date(n[key]).Format("yyyy-MM-dd hh:mm:ss")),$("."+key).text(new Date(n[key]).Format("yyyy-MM-dd hh:mm:ss"))):($("#"+key).text(n[key]),$("."+key).text(n[key]))})):n==-2?(layer.closeAll(),layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01")):(layer.closeAll(),layer.msg("\u8d44\u6599\u4fee\u6539\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u91cd\u8bd5"))}})})},branch:function(){function n(n){$.get("/BranchStore/BranchStoreCount/",null,function(t){var i=15,u=Math.ceil(t/i);laypage({cont:$("#pageGro"),pages:u,skin:"molv",skip:!0,first:"\u9996\u9875",last:"\u5c3e\u9875",prev:"\u4e0a\u4e00\u9875",next:"\u4e0b\u4e00\u9875",jump:function(t){r(t.curr,i,n)}})})}function r(n,t,i){$.getJSON("/BranchStore/GetBranchStorelist/",{page:n,conditions:i,pageIndex:t},function(n){if(n!=null&&n.length>0){var t="";$.each(n,function(n,i){t+='<tr data-id="'+i.sv_subbranch_id+'">';t+="<td>"+i.sv_us_name+"<\/td>";t+=isNullOrWhiteSpace(i.sv_us_shortname)?"<td>"+i.sv_us_shortname+"<\/td>":"<td><\/td>";t+="<td>"+i.sv_ul_name+"<\/td>";t+="<td>"+i.sv_ul_mobile+"<\/td>";t+="<td>"+i.av_shopstateName+"<\/td>";t+="<td>"+i.sv_deliverywayName+"<\/td>";t+="<td>"+i.sv_us_address+"<\/td>";t+="<td>"+new Date(i.sv_ul_regdate).Format("yyyy-MM-dd")+"<\/td>";t+="<td>";t+='<div class="testswitch">';t+=i.is_open_micromall==!1?'<input class="testswitch-checkbox" data-is_open_micromall="'+i.is_open_micromall+'" value="'+i.sv_subbranch_id+'" id="shop_id_'+i.sv_subbranch_id+'" type="checkbox">':'<input class="testswitch-checkbox" data-is_open_micromall="'+i.is_open_micromall+'" value="'+i.sv_subbranch_id+'" checked="checked" id="shop_id_'+i.sv_subbranch_id+'" type="checkbox">';t+='<label class="testswitch-label" data-id="'+i.sv_subbranch_id+'" for="shop_id_'+i.sv_subbranch_id+'">';t+='<span class="testswitch-inner" data-on="\u542f\u7528" data-off="\u5173\u95ed"><\/span>';t+='<span class="testswitch-switch"><\/span>';t+="<\/label>";t+="<\/div>";t+="<\/td>";t+='<td class="operatinglist">';t+='<a href="javascript:void(0);" class="updateBranchManage" data-id="'+i.sv_subbranch_id+'">\u4fee\u6539<\/a>';t+="<\/td>";t+="<\/tr>"});$("#allbigCategorieslist").html(t)}else $("#allbigCategorieslist").html('tr><td class="text-center sad" style="text-align:center !important;" colspan="10"><img src="../skin_N3/images/sad.png" /><i class="padd0">\u6682\u65e0\u6570\u636e<\/i><\/td><\/tr>')})}function t(n){n!=null&&n!=undefined&&n!=""?u(n):i();$("#sv_ul_loginpwd").keypress(function(n){(n.which==8||n.which==46)&&$("#sv_ul_loginpwd").val("")})}function u(n){$.get("/BranchStore/GetBranchStore?id="+n,function(n){for(var t in n)$("#"+t).val(n[t]),t=="sv_ul_mobile"&&$("#origsv_ul_mobile").val(n[t]),t=="sv_us_industrytype"&&$("."+t).val(n[t]),t=="sv_positionid"&&$("."+t).val(n[t]),t=="sv_us_province"&&$("."+t).val(n[t]),t=="sv_us_city"&&$("."+t).val(n[t]),t=="sv_us_district"&&$("."+t).val(n[t]),t=="sv_deliveryway"&&$("."+t).val(n[t]),t=="av_shopstate"&&$("."+t).val(n[t])}).then(function(){i()})}function i(){$.get("/BranchStore/getStateWaylist?type=1",function(n){var t,i;if(n==-2)layer.msg("\u60a8\u6ca1\u6709\u8be5\u6743\u9650\uff01");else{t="";for(i in n)t+='    <option value="'+i+'">'+n[i]+"<\/option>";$("#av_shopstate").html(t);$("#av_shopstate").val($(".av_shopstate").val())}});$.get("/BranchStore/getStateWaylist?type=2",function(n){var t,i;if(n==-2)layer.msg("\u60a8\u6ca1\u6709\u8be5\u6743\u9650\uff01");else{t="";for(i in n)t+='<option value="'+i+'">'+n[i]+"<\/option>";$("#sv_deliveryway").html(t);$("#sv_deliveryway").val($(".sv_deliveryway").val())}});$.get("/Ajaxdata/GetPCD/1",function(n){if(n.length>0){for(var t in n)$("#sv_us_province").append('<option value="'+n[t].code+'">'+n[t].name+"<\/option>");$("#sv_us_province").val($(".sv_us_province").val()).change()}});$("#sv_us_province").change(function(){$("#sv_us_district").empty();$.get("/Ajaxdata/GetCityInterlock/"+$("#sv_us_province").val(),function(n){$("#sv_us_city").empty();for(var t in n)$("#sv_us_city").append('<option value="'+n[t].code+'">'+n[t].name+"<\/option>");$("#sv_us_city").val($(".sv_us_city").val()).change()})});$("#sv_us_city").change(function(){$.get("/Ajaxdata/GetDistrictInterlock/"+$("#sv_us_city").val(),function(n){if(n.length>0){$("#sv_us_district").empty();for(var t in n)$("#sv_us_district").append('<option value="'+n[t].code+'">'+n[t].name+"<\/option>").val();$("#sv_us_district").val($(".sv_us_district").val())}})});$.get("/Grouping/GroupingList",function(n){if(n==-2)layer.msg("\u60a8\u6ca1\u6709\u8be5\u6743\u9650\uff01");else if(n.length>0){for(var t in n)$("#sv_positionid").append('<option value="'+n[t].sp_grouping_id+'">'+n[t].sp_grouping_name+"<\/option>").val();$("#sv_positionid").val($(".sv_positionid").val())}});$.get("/Ajaxdata/GetIndustryType",function(n){if(n.length>0)for(var t in n)$("#sv_us_industrytype").append('<option value="'+n[t].industrytype_id+'">'+n[t].sv_uit_name+"<\/option>");$(".sv_us_industrytype").val()==null||$(".sv_us_industrytype").val()==""||$(".sv_us_industrytype").val()==undefined||$(".sv_us_industrytype").val()==0?$("#sv_us_industrytype option:first").prop("selected","selected"):$("#sv_us_industrytype").val($(".sv_us_industrytype").val())});isNullOrWhiteSpace($("#sv_subbranch_id").val())||$.get("/BranchStore/GetBranchStoreYearsNumber/",function(n){var t,i;if(n==-2)layer.msg("\u60a8\u6ca1\u6709\u8be5\u6743\u9650\uff01");else if(n==-1)$("#_BranchStoreYears").hide(),layer.closeAll(),layer.confirm("\u5f53\u524d\u5e97\u94fa\u5206\u5e97\u6570\u91cf\u4e0d\u8db3\uff0c\u662f\u5426\u524d\u5f80\u8d2d\u4e70\u5206\u5e97\uff1f",{btn:["\u524d\u5f80\u8d2d\u4e70","\u53d6\u6d88"]},function(){location.href="/Home/Payheight_N3?id="+_g_old_sv_versionid+""},function(){layer.closeAll()});else{$("#_BranchStoreYears").show();t="";for(i in n)t+=n[i];$("#BranchStoreYears").html(t)}})}function f(){var n="";$.get("/Employee/Total/",null,function(t){var i=Math.ceil(t/8);laypage({cont:$("#staffpageGro"),pages:i,skin:"molv",first:"\u9996\u9875",last:"\u5c3e\u9875",prev:"\u4e0a\u4e00\u9875",next:"\u4e0b\u4e00\u9875",jump:function(t){e(t.curr,n)}})})}function e(n,t){var i="";$.getJson("/Employee/PageList/",{pageIndex:n,seach:t},function(n){if(n!=null&&n.length>0){for(var t=0;t<n.length;t++)i+='<tr data-sv_mr_cardno="'+n[t].sv_employee_name+'" data-id="'+n[t].sv_employee_phone+'" data-name="'+n[t].sv_employee_name+'">',i+="<td><span>"+n[t].sv_employee_name+"<\/span><\/td>",i+="<td><span>"+n[t].sv_employee_phone+"<\/span><\/td>",i+="<td><span>"+n[t].sp_grouping_name+"<\/span><\/td>",i+="<td><span>"+n[t].sv_employee_branch+"<\/span><\/td>",i+="<td><span>"+new Date(n[t].sv_employee_leavedate).Format("yyyy-MM-dd")+"<\/span><\/td>",i+="<td><span>"+new Date(n[t].sv_employee_adddate).Format("yyyy-MM-dd")+"<\/span><\/td>",i+='<td class="changeproduct3"><button href="javascript:void(0);" class="selectBarchPeople btn editproductinfo" data-sv_mr_cardno="'+n[t].sv_employee_name+'" data-id="'+n[t].sv_employee_phone+'" data-name="'+n[t].sv_employee_name+'">\u9009\u62e9<\/button><\/td>',i+="<\/tr>";$("#branchPeople").html(i)}else $("#branchPeople").html('<tr><td class="text-center sad" style="text-align:center !important;" colspan="7"><img src="../skin_N3/images/sad.png" /><i class="padd0">\u6682\u65e0\u6570\u636e<\/i><\/td><\/tr>')})}$("#system-nav li").eq(1).find("a").addClass("active");n("");$("#addbranch").click(function(){layerpage.Deke_layerpage.getpage2("1","\u6dfb\u52a0\u5206\u5e97","/ajaxHtml_N3/system/addbranch.html?="+getTimeStamp(),["450px","530px"],t,null)});$(document).unbind("click","#allbigCategorieslist .updateBranchManage").on("click","#allbigCategorieslist .updateBranchManage",function(){var n=$(this).data("id");layerpage.Deke_layerpage.getpage2("1","\u4fee\u6539\u5206\u5e97\u4fe1\u606f","/ajaxHtml_N3/system/addbranch.html?="+getTimeStamp(),["450px","530px"],t,n)});$(document).unbind("click","#saveBranchInfoBtn").on("click","#saveBranchInfoBtn",function(){var i=$("#sv_us_industrytype").val(),t;if(!isNullOrWhiteSpace($("#sv_us_name").val())){$("#sv_us_name").addClass("err").focus();layer.msg($("#sv_us_name").attr("placeholder"),{time:2e3});return}if(!isNullOrWhiteSpace($("#sv_ul_name").val())){$("#sv_ul_name").addClass("err").focus();layer.msg($("#sv_ul_name").attr("placeholder"),{time:2e3});return}if(isNullOrWhiteSpace($("#sv_ul_mobile").val())){if($("#origsv_ul_mobile").val()==$("#sv_ul_mobile").val()&&isNullOrWhiteSpace($("#origsv_ul_mobile").val()))if(/^1[3|4|5|7|8]\d{9}$/.test($("#sv_ul_mobile").val()))(!isNullOrWhiteSpace($("#sv_subbranch_id").val())||$("#origsv_ul_mobile").val()!=$("#sv_ul_mobile").val()&&isNullOrWhiteSpace($("#origsv_ul_mobile").val()))&&$.ajax({url:"/AjaxUser/IsSameMobile?mobile="+$("#sv_ul_mobile").val(),type:"post",success:function(n){if(!n)return $("#sv_ul_mobile").focus(),layer.msg("\u624b\u673a\u53f7\u7801\u91cd\u590d",{time:2e3}),n}});else{layer.msg("\u624b\u673a\u683c\u5f0f\u4e0d\u5408\u6cd5",{time:2e3});return}}else{$("#sv_ul_mobile").addClass("err").focus();layer.msg($("#sv_ul_mobile").attr("placeholder"),{time:2e3});return}if(!isNullOrWhiteSpace($("#sv_subbranch_id").val())&&!isNullOrWhiteSpace($("#BranchStoreYears").val())){layer.msg("\u8bf7\u9009\u62e9\u5e97\u94fa\u5e74\u9650",{time:2e3});return}if(!isNullOrWhiteSpace($("#sv_ul_loginpwd").val())||$("#sv_ul_loginpwd").val().length<6){$("#sv_ul_loginpwd").addClass("err").focus();layer.msg("\u767b\u5f55\u5bc6\u7801\u4e0d\u80fd\u5c11\u4e8e6\u4f4d\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165",{time:2e3});return}if(!isNullOrWhiteSpace($("#sv_subbranch_id").val())&&($("#sv_positionid").val()<=0||$("#sv_positionid").val()==null||$("#sv_positionid").val()=="")){layer.msg("\u8bf7\u5148\u6dfb\u52a0\u5c97\u4f4d\u518d\u64cd\u4f5c\uff01");return}if(!isNullOrWhiteSpace($("#sv_us_address").val())){$("#sv_us_address").addClass("err").focus();layer.msg($("#sv_us_address").attr("placeholder"),{time:2e3});return}if(i<=0){layer.msg("\u8bf7\u9009\u62e9\u884c\u4e1a");return}t={distributor_id:verify_distributor_id,sv_us_name:$("#sv_us_name").val(),sv_headquarters_id:$("#sv_headquarters_id").val(),sv_subbranch_id:$("#sv_subbranch_id").val(),sv_us_shortname:$("#sv_us_shortname").val(),sv_ul_name:$("#sv_ul_name").val(),sv_ul_mobile:$("#sv_ul_mobile").val(),sv_ul_loginpwd:$("#sv_ul_loginpwd").val(),sv_us_address:$("#sv_us_address").val(),sv_us_phone:$("#sv_us_phone").val(),av_shopstate:$("#av_shopstate option:selected").val(),sv_deliveryway:$("#sv_deliveryway option:selected").val(),user_id:$("#user_id").val(),sv_us_logo:$("#sv_us_logo").val(),sv_positionid:$("#sv_positionid").val(),sv_us_province:isNullOrWhiteSpace($("#sv_us_province").val())?$("#sv_us_province").val():0,sv_us_district:isNullOrWhiteSpace($("#sv_us_district").val())?$("#sv_us_district").val():0,sv_us_city:isNullOrWhiteSpace($("#sv_us_city").val())?$("#sv_us_city").val():0,sv_employee_id:$("#sv_employee_id").val(),sv_us_industrytype:$("#sv_us_industrytype").val(),branchStoreYearsNumberId:$("#BranchStoreYears").val()||0};layer.load(1,{shade:[.1,"#fff"]});$.ajax({url:"/BranchStore/BranchRegister/",type:"post",dataType:"text",data:{jsondata:JSON.stringify(t)},success:function(t){isNullOrWhiteSpace(t)?(t=JSON.parse(t),t.succeed?(layer.msg(t.values),layer.closeAll("loading"),setTimeout(function(){layer.closeAll()},2e3),n("")):t.values==-2?(layer.closeAll("loading"),layer.msg("\u4f60\u6ca1\u6709\u64cd\u4f5c\u6743\u9650\uff01",{time:2e3}),layer.close(index)):t.values==-4?(layer.closeAll("loading"),layer.msg("\u5206\u5e97\u6570\u91cf\u5df2\u4e0a\u9650\uff01",{time:2e3}),layer.close(index)):(layer.closeAll("loading"),layer.msg(t.values,{time:2e3}))):(layer.closeAll("loading"),layer.msg("\u64cd\u4f5c\u5931\u8d25\uff01",{time:2e3}))}})});$(document).unbind("click","#selectManagerBtn").on("click","#selectManagerBtn",function(){layerpage.Deke_layerpage.show_Url2("1","\u9009\u62e9\u5206\u5e97\u8d1f\u8d23\u4eba","/ajaxHtml_N3/system/selectBranchPeople.html?="+getTimeStamp(),["780px","520px"],f)});$(document).unbind("click","#branchPeople .selectBarchPeople").on("click","#branchPeople .selectBarchPeople",function(){$("#sv_ul_name").val($(this).parent().parent().data("name"));$("#sv_ul_mobile").val($(this).parent().parent().data("id"));$("#origsv_ul_mobile").val($(this).parent().parent().data("id"));$("#sv_ul_loginpwd").val("");layer.close(layer.index)});$(document).unbind("click","#allbigCategorieslist .updateBranchManage").on("click","#allbigCategorieslist .updateBranchManage",function(){});$(document).unbind("click","#allbigCategorieslist .testswitch-label").on("click","#allbigCategorieslist .testswitch-label",function(){var n=$(this).data("id"),t=$("#shop_id_"+n).is(":checked"),i=t==!1?"\u542f\u7528":"\u5173\u95ed";$.post("/BranchStore/OpenMicroMall",{id:n,isOpenMicroMall:!t},function(n){n?layer.msg("\u5206\u5e97\u5fae\u5546\u57ce"+i+"\u6210\u529f"):n==-2?layer.msg("\u4f60\u6ca1\u6709\u64cd\u4f5c\u6743\u9650\uff01"):layer.msg("\u5206\u5e97\u5fae\u5546\u57ce"+i+"\u5931\u8d25")})})},employee:{employeeOperating:function(){function n(){$.get("/Salesclerk/Count/",null,function(n){var t=Math.ceil(n/10);laypage({cont:$("#pageGro"),pages:t,skip:!0,skin:"molv",first:"\u9996\u9875",last:"\u5c3e\u9875",prev:"\u4e0a\u4e00\u9875",next:"\u4e0b\u4e00\u9875",jump:function(n){pageinxe=n.curr;i(n.curr)}})})}function i(n){var t='<thead class="tableheade"><tr><th><\/th>';t+="<th>\u5e10\u53f7<\/th><th>\u59d3\u540d<\/th><th>\u804c\u4f4d<\/th><th>\u72b6\u6001<\/th><th>\u767b\u5f55\u6b21\u6570<\/th><th>\u6dfb\u52a0\u65e5\u671f<\/th>";t+="<\/tr><\/thead>";t+='<tbody id="listhtml">';$.getJSON("/Salesclerk/PageList/",{page:n},function(n){if(n!=null)for(var i=0;i<n.length;i++)t+='<tr><td><input type="checkbox" class="checkinput" name="operatingName" id="" data-id="'+n[i].sp_salesclerkid+'" data-id="" value="'+n[i].sp_salesclerkid+'" /><\/td>',t+="<td><span>"+n[i].sp_salesclerk_accounts+"<\/span><\/td>",t+=isNullOrWhiteSpace(n[i].sv_employee_name)?"<td><span>"+n[i].sv_employee_name+"<\/span><\/td>":"<td><span><\/span><\/td>",t+=isNullOrWhiteSpace(n[i].sp_grouping_name)?"<td><span>"+n[i].sp_grouping_name+"<\/span><\/td>":"<td><span><\/span><\/td>",t+=n[i].sp_salesclerk_sate==0?"<td><span>\u505c\u6b62\u4f7f\u7528<\/span><\/td>":"<td><span>\u6b63\u5728\u4f7f\u7528<\/span><\/td>",t+="<td><span>"+n[i].sp_salesclerk_loingnum+"<\/span><\/td>",t+=" <td><span>"+new Date(n[i].sp_salesclerk_adddate).Format("yyyy-MM-dd")+"<\/span><\/td>";else t='<tr><td class="text-center sad" style="text-align:center !important;" colspan="7"><img src="../skin_N3/images/sad.png" /><i class="padd0">\u6682\u65e0\u6570\u636e<\/i><\/td><\/tr>';t+="<\/tbody>";$("#employeeOperatingList").html(t)})}function t(){f();r();u()}function r(){$.get("/Employee/EmpList",function(n){var i,t,r;if(n==-2)layer.msg("\u60a8\u6ca1\u6709\u8be5\u6743\u9650\uff01");else{for(i="",t=0;t<n.length;t++)i+='    <option value="'+n[t].sv_employee_id+'">'+n[t].sv_employee_name+"<\/option>";$("#sv_employeeid").html(i)}r=$("#listhtml input[name='operatingName']:checked");r.length==1&&$.getJSON("/Salesclerk/Edit/",{salesclerkid:r.data("id")},function(n){for(var t in n)t=="sp_salesclerk_accounts"&&($("#originalAccounts").val(n[t]),$("#accountsPrefix").val($("#accountsPrefix").val()+n[t])),$("#"+t).val(n[t])})})}function u(){$.getAsyncJson("/Salesclerk/AccountsPrefix",null,function(n){n!=null&&$("#accountsPrefix").val(n+"@")})}function f(){$("#btnSalesclerk").delegate("click").click(function(){var t;isNullOrWhiteSpace($("#sp_salesclerk_accounts").val())?/^\d+$/.test($("#sp_salesclerk_accounts").val().trim())?$("#sp_salesclerk_accounts").val().trim().length>10?(layer.msg("\u7528\u6237\u540d\u957f\u5ea6\u4e0d\u80fd\u5927\u4e8e10\uff01"),$("#sp_salesclerk_accounts").focus()):isNullOrWhiteSpace($("#sp_salesclerk_password").val())?$("#sv_employeeid").val()<=0||$("#sv_employeeid").val()==null||$("#sv_employeeid").val()==""?layer.msg("\u8bf7\u5148\u6dfb\u52a0\u5458\u5de5\u518d\u64cd\u4f5c\uff01"):(t={sp_salesclerk_accounts:$("#sp_salesclerk_accounts").val().trim(),sp_salesclerk_password:$("#sp_salesclerk_password").val().trim(),sp_salesclerkid:$("#sp_salesclerkid").val().trim(),sv_employeeid:$("#sv_employeeid").val()},$.postJson("/Salesclerk/Save",t,function(t){t==!1?(layer.msg("\u4fdd\u5b58\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01"),layer.close(index)):t==!0?(layer.closeAll(),layer.msg("\u64cd\u4f5c\u5458\u6dfb\u52a0\u6210\u529f\uff01"),n()):t==-3?($("#sp_salesclerk_accounts").focus(),layer.msg("\u8be5\u7528\u6237\u540d\u5df2\u5b58\u5728\uff01")):t==-2?(layer.closeAll(),layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01")):t==-4&&(layer.closeAll(),layer.msg("\u64cd\u4f5c\u5458\u6570\u91cf\u5df2\u4e0a\u9650\uff01"))})):($("#sp_salesclerk_password").focus(),layer.msg("\u64cd\u4f5c\u5458\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a\uff01")):(layer.msg("\u7528\u6237\u540d\u53ea\u80fd\u8f93\u5165\u6570\u5b57\uff01"),$("#sp_salesclerk_accounts").focus()):($("#sp_salesclerk_accounts").focus(),layer.msg("\u64cd\u4f5c\u5458\u8d26\u53f7\u4e0d\u80fd\u4e3a\u7a7a\uff01"))})}$("#system-nav li").eq(2).find("a").addClass("active");getShareSessionPermissions();n();$("#btn-operator").click(function(){layerpage.Deke_layerpage.show_Url2("1","\u65b0\u589e\u64cd\u4f5c\u5458","/ajaxHtml_N3/system/addOperator.html?="+getTimeStamp(),["400px","305px"],t)});$(document).unbind("change keyup","#sp_salesclerk_accounts").on("change keyup","#sp_salesclerk_accounts",function(){$("#accountsPrefix").val($("#accountsPrefix").val().split("@")[0]+"@"+$(this).val())});$("#edit-operator").click(function(){var n=$("#listhtml input[name='operatingName']:checked");n.length==1?layerpage.Deke_layerpage.show_Url2("1","\u4fee\u6539\u64cd\u4f5c\u5458","/ajaxHtml_N3/system/addOperator.html?="+getTimeStamp(),["400px","305px"],t):layer.msg("\u8bf7\u9009\u62e9\u64cd\u4f5c\u5458\u5728\u6267\u884c\u6b64\u64cd\u4f5c,\u81f3\u591a\u53ea\u80fd\u9009\u62e9\u4e00\u4e2a\u64cd\u4f5c\u5458\uff01")});$("#delete-operator").click(function(){var t=$("#listhtml input[name='operatingName']:checked");t.length==1?layer.confirm("\u786e\u8ba4\u8981\u5220\u9664\u9009\u4e2d\u7684\u4fe1\u606f\u5417\uff1f",{btn:["\u786e\u8ba4","\u53d6\u6d88\u5220\u9664"]},function(){$.post("/Salesclerk/Delete",{salesclerkid:t.data("id")},function(t){t==!0?(layer.msg("\u5220\u9664\u6210\u529f"),n()):t==-2?(layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"),layer.closeAll()):(layer.msg("\u5220\u9664\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01"),layer.closeAll())})}):layer.msg("\u8bf7\u9009\u62e9\u8981\u5220\u9664\u7684\u4fe1\u606f\uff0c\u4e0d\u80fd\u9009\u62e9\u591a\u4e2a")});$("#res-operator").click(function(){n();layer.msg("\u5237\u65b0\u6210\u529f\uff01")})},employeeOperatingLog:function(){function n(n){$.get("/Log_operate/Total/",{seach:n},function(i){var r=Math.ceil(i/10);laypage({cont:$("#pageGro"),pages:r,skin:"molv",skip:!0,first:"\u9996\u9875",last:"\u5c3e\u9875",prev:"\u4e0a\u4e00\u9875",next:"\u4e0b\u4e00\u9875",jump:function(i){t(i.curr,n)}})})}function t(n,t){$.getJSON("/Log_operate/PageList/",{pageIndex:n,seach:t},function(n){var i,t;if(n&&n.length>0){for(i="",t=0;t<n.length;t++)i+="<tr><td><span>"+n[t].log_operatename+"<\/span><\/td>",i+="<td><span>"+n[t].log_operatemok+"<\/span><\/td>",i+="<td><span>"+n[t].log_operatemdec+"<\/span><\/td>",i+="<td><span>"+new Date(n[t].log_operatetime).Format("yyyy-MM-dd hh:mm:ss")+"<\/span><\/td><\/tr>";$("#operatorLogList").html(i)}else $("#operatorLogList").html('<tr><td class="text-center sad" style="text-align:center !important;" colspan="4"><img src="../skin_N3/images/sad.png" /><i class="padd0">\u6682\u65e0\u6570\u636e<\/i><\/td><\/tr>')})}$("#system-nav li").eq(2).find("a").addClass("active");getShareSessionPermissions();n("");$("#seachLog_btn").click(function(){n($("#seachLog").val().trim())});$("#seachLog").keypress(function(t){var i=t.which;i==13&&n($("#seachLog").val().trim())})},employeeLoginLog:function(){function n(){$.get("/System/GetLoginLogTotal",{seachStr:$("#seachLog").val(),startDate:$("#begindateval").val(),endDate:$("#enddateval").val()},function(n){var i=Math.ceil(n/10);laypage({cont:$("#pageGro"),pages:i,skin:"molv",skip:!0,first:"\u9996\u9875",last:"\u5c3e\u9875",prev:"\u4e0a\u4e00\u9875",next:"\u4e0b\u4e00\u9875",jump:function(n){t(n.curr)}})})}function t(n){var i=$("#seachLog").val(),t="";$.getJSON("/System/GetLoginLogList",{pageIndex:n,pageSize:10,seachStr:i,startDate:$("#begindateval").val(),endDate:$("#enddateval").val()},function(n){if(n!=null){for(var i=0;i<n.length;i++)t+="<tr><td><span>"+n[i].sv_acountno+"<\/span><\/td>",t+="<td><span>"+n[i].sv_login_ip+"<\/span><\/td>",t+="<td><span>"+n[i].sv_login_cityname+"<\/span><\/td>",t+="<td><span>\u767b\u5f55<\/span><\/td>",n!=null&&n.length>i&&n[i].sv_login_user_type!=null?(n[i].sv_login_user_type==0&&(t+="<td><span>\u7ba1\u7406\u5458\u767b\u5f55<\/span><\/td>"),n[i].sv_login_user_type==1&&(t+="<td><span>\u64cd\u4f5c\u5458\u767b\u5f55<\/span><\/td>")):t+="<td><span><\/span><\/td>",t+=" <td><span>"+new Date(n[i].sv_logintime).Format("yyyy-MM-dd hh:mm:ss")+"<\/span><\/td><\/tr>";$("#loginLogList").html(t)}else $("#loginLogList").html('<tr><td class="text-center sad" style="text-align:center !important;" colspan="6"><img src="../skin_N3/images/sad.png" /><i class="padd0">\u6682\u65e0\u767b\u5f55\u65e5\u8bb0\u6570\u636e<\/i><\/td><\/tr>')})}$("#system-nav li").eq(2).find("a").addClass("active");getShareSessionPermissions();$("#begindate").datetimepicker({language:"zh",weekStart:1,todayBtn:1,autoclose:1,todayHighlight:1,startView:2,minView:2,forceParse:0,endDate:new Date,pickerPosition:"bottom-left",format:"yyyy-mm-dd 00:00:00"}).on("change",function(){var n=$("#begindateval").val();$("#enddate").datetimepicker("setStartDate",n);$("#begindate").datetimepicker("hide")});$("#enddate").datetimepicker({language:"zh",weekStart:1,todayBtn:1,autoclose:1,todayHighlight:1,startView:2,minView:2,forceParse:0,startDate:$("#begindateval").val(),endDate:new Date,pickerPosition:"bottom-left",format:"yyyy-mm-dd 23:59:59"}).on("change",function(){var n=$("#enddateval").val();$("#begindate").datetimepicker("setReturnDate",n);$("#enddate").datetimepicker("hide")});n();$("#seachLog_btn,#otherday").click(function(){n()})},employeeShitfClass:function(){function n(){$.get("/System/GetSuccessionTotal",{seachStr:$("#seachLog").val(),startDate:$("#begindateval").val(),endDate:$("#enddateval").val()},function(n){var i=Math.ceil(n/10);laypage({cont:$("#pageGro"),pages:i,skin:"molv",skip:!0,first:"\u9996\u9875",last:"\u5c3e\u9875",prev:"\u4e0a\u4e00\u9875",next:"\u4e0b\u4e00\u9875",jump:function(n){t(n.curr)}})})}function t(n){var t="";$.getJSON("/System/GetSuccessionList",{pageIndex:n,pageSize:10,seachStr:$("#seachLog").val(),startDate:$("#begindateval").val(),endDate:$("#enddateval").val()},function(n){var i,r,u;if(n&&n.length>0){for(i=0;i<n.length;i++)r=new Date(n[i].start_time).Format("yyyy-MM-dd hh:mm:ss"),u=new Date(n[i].end_time).Format("yyyy-MM-dd hh:mm:ss"),t+="<tr><td><span>"+n[i].order_operator+"<\/span><\/td>",t+="<td><span>"+r+"<\/span><\/td>",t+="<td><span>"+u+"<\/span><\/td>",t+=" <td><span>"+new Date(n[i].succession_time).Format("yyyy-MM-dd hh:mm:ss")+"<\/span><\/td>",t+='<td class="refinementdetails"><a href="javascript:void(0);" class="reconciliation" data-name="'+n[i].order_operator+'" data-startTime="'+r+'" data-endTime="'+u+'">\u5bf9\u8d26<\/a><\/td><\/tr>';$("#shitfClassList").html(t)}else $("#shitfClassList").html('<tr><td class="text-center sad" style="text-align:center !important;" colspan="4"><img src="../skin_N3/images/sad.png" /><i class="padd0">\u6682\u65e0\u4ea4\u63a5\u73ed\u8bb0\u5f55<\/i><\/td><\/tr>')})}function i(n){$("#successionAndExit").hide();$.getJSON("/intelligent/Succession",{order_operator:"",startDate:n.startTime,endDate:n.endTime},function(n){if(n!=null){successionPrintModel=n;$("#Succession_individual").html(n.individual);$("#Succession_userindividual").html(n.userindividual);$("#Succession_xreceivable").html(n.xreceivable);$("#Succession_wreceivable").html(n.wreceivable);$("#Succession_yreceivable").html(n.yreceivable);$("#Succession_creceivable").html(n.creceivable);$("#Succession_zreceivable").html(n.zreceivable);$("#Succession_mreceivable").html(n.mreceivable);$("#Succession_kreceivable").html(n.kreceivable);$("#Succession_sreceivable").html(n.sreceivable);$("#Succession_sszreceivable").html(n.sszreceivable);$("#Succession_hy_receivable").html(n.hy_receivable);$("#Succession_sxreceivable").html(n.sxreceivable);$("#Succession_swreceivable").html(n.swreceivable);$("#Succession_syreceivable").html(n.syreceivable);$("#Succession_szreceivable").html(n.szreceivable);$("#Succession_smreceivable").html(n.smreceivable);$("#Succession_skreceivable").html(n.skreceivable);$("#Succession_ssreceivable").html(n.ssreceivable);$("#Succession_xk_receivable").html(n.xk_receivable);$("#Succession_jici").html(n.jici);var t=n.xk_receivable+(n.xmoney+n.wmoney+n.ymoney+n.zmoney+n.qxmoney+n.qwxmoney+n.qymoney+n.qzmoney+n.xreceivable+n.wreceivable+n.yreceivable+n.zreceivable);$("#Succession_totalRevenue").html(t);$("#successionStartTime").html(n.startTime);$("#successionEndTime").html(n.endTime);$("#selectDate-money").val(n.startTime);$("#selectDate-money2").val(n.endTime)}})}$("#system-nav li").eq(2).find("a").addClass("active");getShareSessionPermissions();$("#begindate2").datetimepicker({language:"zh",weekStart:1,todayBtn:1,autoclose:1,todayHighlight:1,startView:2,minView:2,forceParse:0,endDate:new Date,pickerPosition:"bottom-left",format:"yyyy-mm-dd 00:00:00"}).on("change",function(){var n=$("#begindateval2").val();$("#enddate2").datetimepicker("setStartDate",n);$("#begindate2").datetimepicker("hide")});$("#enddate2").datetimepicker({language:"zh",weekStart:1,todayBtn:1,autoclose:1,todayHighlight:1,startView:2,minView:2,forceParse:0,startDate:$("#begindateval2").val(),endDate:new Date,pickerPosition:"bottom-left",format:"yyyy-mm-dd 23:59:59"}).on("change",function(){var n=$("#enddateval2").val();$("#begindate2").datetimepicker("setReturnDate",n);$("#enddate2").datetimepicker("hide")});n();$("#seachLog_btn,#otherday").click(function(){n()});$(document).unbind("click","#shitfClassList .reconciliation").on("click","#shitfClassList .reconciliation",function(){var n={name:$(this).data("name"),startTime:$(this).data("starttime"),endTime:$(this).data("endtime")};layerpage.Deke_layerpage.getpage2("1","\u4ea4\u63a5\u5458\u5de5\uff1a"+$(this).data("name"),"/employeeHandover/_PartialEmployeeHandover_N3",["670px","520px"],i,n)})},employeeManagement:function(){function t(n,t,i){i=i||5;var r=0;n=="StoreSearch"&&(r=1);$.get("/BranchStore/GetStorelist/?type="+r+"&Storeid="+t+"&StorePageState="+i,function(t){var i,u;if(t==-2)layer.msg("\u60a8\u6ca1\u6709\u8be5\u6743\u9650\uff01");else if(t==-1)$("#StoreSearch").hide();else{$("#StoreSearch").show();i="";for(u in t)i+=t[u];r==0?$("#Store").html(i):$("#"+n).html(i)}})}function n(n,i){isNullOrWhiteSpace(i)||t("StoreSearch","");$.get("/Employee/Total/",{id:i,seach:n},function(t){var r=Math.ceil(t/30);laypage({cont:$("#pageGro"),pages:r,skin:"molv",skip:!0,first:"\u9996\u9875",last:"\u5c3e\u9875",prev:"\u4e0a\u4e00\u9875",next:"\u4e0b\u4e00\u9875",jump:function(t){f(t.curr,n,i,30)}})})}function f(n,t,i,r){var u="";$.getJson("/Employee/PageList/",{pageIndex:n,seach:t,id:i,pageSize:r},function(n){var t,i,r;if(n&&n.length>0){for(t=0;t<n.length;t++)i="",i=n[t].sv_employee_branch==0?n[t].user_id:n[t].sv_employee_branch,i!=n[t].user_id&&(i+=","+n[t].user_id),i="'"+i+"'",u+='<tr><td><input class="checkinput" type="checkbox" name="subbox" data-branch='+i+' value="'+n[t].sv_employee_id+'"><\/td>',u+="<td><span>"+n[t].sv_employee_name+"<\/span><\/td>",u+="<td><span>"+n[t].sv_employee_age+"<\/span><\/td>",u+="<td><span>"+n[t].sp_grouping_name+"<\/span><\/td>",u+="<td><span>"+n[t].sv_employee_phone+"<\/span><\/td>",u+="<td><span>"+n[t].sv_employee_basepay+"<\/span><\/td>",u+=isNullOrWhiteSpace(n[t].sv_employee_branchName)?"<td><span>"+n[t].sv_employee_branchName+"<\/span><\/td>":"<td><span>"+$("#username").text()+"<\/span><\/td>",u+="<td><span>"+new Date(n[t].sv_employee_leavedate).Format("yyyy-MM-dd")+"<\/span><\/td>",u+="<td><span>"+new Date(n[t].sv_employee_adddate).Format("yyyy-MM-dd")+"<\/span><\/td>",r=n[t].sv_configtype||0,r="'"+r+"'",u+='<td class="refinementdetails"><a class="employeeInfoListBtn" href="javascript:void(0);" data-sv_employee_id='+n[t].sv_employee_id+" data-configtype="+r+" data-employee_branch="+i+" >\u63d0\u6210\u660e\u7ec6<\/a><\/td> <\/tr>";$("#employeeInfoList").html(u)}else $("#employeeInfoList").html('<tr><td class="text-center sad" style="text-align:center !important;" colspan="11"><img src="../skin_N3/images/sad.png" /><i class="padd0">\u6682\u65e0\u6570\u636e<\/i><\/td><\/tr>')})}function i(n){var i=(new Date).Format("yyyy-MM-dd");$("#sv_employee_birthday").val(i);$("#sv_employee_leavedate").val(i);selectBirthdayOrOrtherTime("sv_employee_birthday");selectBirthdayOrOrtherTime("sv_employee_leavedate");n=n||"";$.get("/Grouping/GroupingList/?id="+n,function(n){var i,t;if(n==-2)layer.msg("\u60a8\u6ca1\u6709\u8be5\u6743\u9650\uff01");else if(i="",n&&n.length>0){for(t=0;t<n.length;t++)i+='    <option value="'+n[t].sp_grouping_id+'">'+n[t].sp_grouping_name+"<\/option>";$("#sv_positionid").html(i)}});t("",0,4);r()}function r(){$("#saveAddEmployeeBtn").delegate("click").click(function(){var t=$("#branchID").val(),i=$("#employeeInfoList .checkinput[name='subbox']:checked"),n=!0;isNullOrWhiteSpace(t)&&i.length>0&&(layer.confirm("\u5f53\u524d\u4fee\u6539\u7684\u5458\u5de5\u4fe1\u606f\u5c5e\u4e8e\u5206\u5e97\u786e\u5b9a\u8981\u4fee\u6539\u4fe1\u606f\uff1f",{btn:["\u786e\u8ba4","\u53d6\u6d88"]},function(){u()}),n=!1);n&&u()})}function u(){var t;isNullOrWhiteSpace($("#sv_employee_name").val())?$("#sv_positionid").val()<=0||$("#sv_positionid").val()==null||$("#sv_positionid").val()==""?layer.msg("\u8bf7\u5148\u6dfb\u52a0\u5c97\u4f4d\u518d\u64cd\u4f5c\uff01"):($("#Store").removeAttr("disabled"),t={sv_employee_id:$("#sv_employee_id").val().trim(),sv_employee_name:$("#sv_employee_name").val().trim(),sv_employee_birthday:$("#sv_employee_birthday").val(),sv_employee_phone:$("#sv_employee_phone").val().trim(),sv_employee_basepay:$("#sv_employee_basepay").val().trim(),sv_employee_leavedate:$("#sv_employee_leavedate").val(),sv_positionid:$("#sv_positionid").val(),sv_employee_age:$("#sv_employee_age").val().trim(),sv_employee_branch:$("#Store").val(),branchID:$("#StoreSearch").val()==-1?"":$("#StoreSearch").val()},$.postAsyncJson("/Employee/Save",t,function(t){t==!0?(layer.closeAll(),layer.msg("\u4fdd\u5b58\u6210\u529f\uff01"),n("")):t==-2?(layer.closeAll(),layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01")):(layer.closeAll(),layer.msg("\u4fdd\u5b58\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01"))})):($("#sv_employee_name").focus(),layer.msg("\u5458\u5de5\u59d3\u540d\u4e0d\u80fd\u4e3a\u7a7a\uff01"))}function e(){var n,t;r();n=0;selectBirthdayOrOrtherTime("sv_employee_birthday");selectBirthdayOrOrtherTime("sv_employee_leavedate");t=$("#employeeInfoList .checkinput[name='subbox']:checked");t.length==1&&$.getJSON("/Employee/Edit/",{empId:t.val()},function(t){for(var i in t)$("#"+i).val(t[i]),n=t.sv_employee_branch,n==0&&(n=t.user_id),isNullOrWhiteSpace($("#branchID").val())&&$("#sv_employee_phone,#sv_employee_name").attr("disabled","disabled"),(i=="sv_employee_birthday"||i=="sv_employee_leavedate")&&($("#sv_employee_birthday").val(new Date(t[i]).Format("yyyy-MM-dd")),$("#sv_employee_leavedate").val(new Date(t[i]).Format("yyyy-MM-dd")))})}$("#system-nav li").eq(2).find("a").addClass("active");getShareSessionPermissions();n("");$("#btn_addemployee").click(function(){layerpage.Deke_layerpage.show_Url2("1","\u6dfb\u52a0\u5458\u5de5","/ajaxHtml_N3/system/addEmployee.html?="+getTimeStamp(),["400px","495px"],i)});$("#btn_editemployee").click(function(){var n=$("#employeeInfoList .checkinput[name='subbox']:checked");n.length==1?(layerpage.Deke_layerpage.show_Url2("1","\u6dfb\u52a0\u5458\u5de5\u5c97\u4f4d","/ajaxHtml_N3/system/addEmployee.html?="+getTimeStamp(),["400px","495px"],e),i()):layer.msg("\u8bf7\u9009\u62e9\u8981\u4fee\u6539\u7684\u5458\u5de5\uff0c\u53ea\u80fd\u9009\u62e9\u4e00\u4e2a\u5458\u5de5\u4fee\u6539\uff01")});$("#btn_deleteemployee").click(function(){var t=$("#employeeInfoList .checkinput[name='subbox']:checked");t.length==1?layer.confirm("\u786e\u8ba4\u8981\u5220\u9664\u9009\u4e2d\u7684\u4fe1\u606f\u5417\uff1f",{btn:["\u786e\u8ba4","\u53d6\u6d88\u5220\u9664"]},function(){$.post("/Employee/Delete",{empId:t.val(),branchID:t.data("branch")},function(t){t==!1?layer.msg("\u5220\u9664\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01"):t==!0?(layer.msg("\u5220\u9664\u6210\u529f"),n("")):t==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):t==-3?layer.msg("\u8be5\u5458\u5de5\u4e0d\u80fd\u88ab\u5220\u9664\uff0c\u5982\u679c\u8981\u5220\u9664\u5fc5\u987b\u5148\u8c03\u6574\u4e0e\u4e4b\u5173\u8054\u7684\u64cd\u4f5c\u5458\u7ba1\u7406\u4e2d\u7684\u5458\u5de5\uff01"):t==-4&&layer.msg("\u8be5\u5458\u5de5\u4e0d\u80fd\u88ab\u5220\u9664\uff0c\u5982\u679c\u8981\u5220\u9664\u5fc5\u987b\u5148\u8c03\u6574\u4e0e\u4e4b\u5173\u8054\u7684\u5206\u5e97\u4fe1\u606f\uff01")})}):layer.msg("\u8bf7\u9009\u62e9\u8981\u5220\u9664\u7684\u4fe1\u606f\uff0c\u4e0d\u80fd\u9009\u62e9\u591a\u4e2a")});$("#btn_resemployee").click(function(){n("")});$("#StoreSearch").change(function(){n("",$("#StoreSearch").val())});$(document).unbind("click","#employeeInfoList .employeeInfoListBtn").on("click","#employeeInfoList .employeeInfoListBtn",function(){$("#staffpostpage").hide();$("#employeecommissionpage").show();var n=$(this).data("sv_employee_id"),t=$(this).data("configtype"),i=$(this).data("employee_branch");system.employee.employeeCommission(n,t,i)});$(document).unbind("click","#renturnListPage").on("click","#renturnListPage",function(){$("#employeecommissionpage").hide();$("#staffpostpage").show()})},employeeCommission:function(n,t,i){function l(){var t=new Date,n=parseInt(t.getFullYear()),i=t.getMonth()+1;$(".naconte span").text(n+"-"+i);$(".naconte span").data("dateyear",n);$(".naconte span").data("datemonth",i);$(".neri").click(function(){var t=$(".naconte span").data("datemonth")+1,i;t>12&&(t=1,n++);i=n+"-"+t;$(".naconte span").text(i);$(".naconte span").data("datemonth",t);o()});$(".nelf").click(function(){var t=$(".naconte span").data("datemonth")-1,i;t<1&&(t=12,n--);i=n+"-"+t;$(".naconte span").text(i);$(".naconte span").data("datemonth",t);o()});o()}function o(){var n=$(".naconte span").text();$.get("/EmploysCommissionDetail/GetEmploysCommissionDetailTotal/",{employee_id:e,configtype:s,YearsMonthDate:n,branchid:i,shareTheResults:g_ShareTheResults?1:0},function(t){var l,a,v,y,o;if(t.commissioninfo)for(l in t.commissioninfo)if(l!="employee_name"&&l!="childList"&&l!="commissionRecordList")$("#"+l).text("\uffe5"+t.commissioninfo[l]||0);else if(l=="employee_name")$("#"+l).text("\u3010"+t.commissioninfo.employee_name+"\u3011");else break;if(t.commissioninfo.childList&&t.commissioninfo.childList!=null&&t.commissioninfo.childList.length>0){for(a="",o=0;o<t.commissioninfo.childList.length;o++){if(a+="<div><span>"+t.commissioninfo.childList[o].commissionName+'\u9879\u76ee\u63d0\u6210\uff08\u4e1a\u7ee9/\u63d0\u6210\uff09<\/span><\/div><ul class="commissionListBox">',t.commissioninfo.childList[o].childList&&t.commissioninfo.childList[o].childList.length>0)for(v=0;v<t.commissioninfo.childList[o].childList.length;v++)y=t.commissioninfo.childList[o].childList[v].commissionName,t.commissioninfo.childList[o].childList[v].commissionName=="\u670d\u52a1\u63d0\u6210"&&(y+="(\u5145\u6b21)"),a+="<li data-value="+o+""+v+">",a+='<div class="name"><span>'+y+"<\/span><\/div>",a+='<div class="money"><span>'+t.commissioninfo.childList[o].childList[v].consumptionMoney+"/"+t.commissioninfo.childList[o].childList[v].commissionMoney+"<\/span><\/div>",a+="<\/li>";a+="<\/ul>"}$("#commissionInfoList").html(a)}$(document).unbind("click",".commissionListBox li").on("click",".commissionListBox li",function(){($(this).attr("data-value")=="00"||$(this).attr("data-value")=="01")&&($(this).hasClass("active")?($(this).removeClass("active"),r=!0,u=!0,f=!0):($(".commissionListBox li").removeClass("active"),$(this).addClass("active"),r=!0,u=!1,f=!1));$(this).attr("data-value")=="02"&&($(this).hasClass("active")?($(this).removeClass("active"),r=!0,u=!0,f=!0):($(".commissionListBox li").removeClass("active"),$(this).addClass("active"),r=!1,u=!0,f=!1));$(this).attr("data-value")=="03"&&($(this).hasClass("active")?($(this).removeClass("active"),r=!0,u=!0,f=!0):($(".commissionListBox li").removeClass("active"),$(this).addClass("active"),r=!1,u=!1,f=!0));c(pageindex,e,s,n,i)});o=Math.ceil(t.total/h);laypage({cont:$("#layerpage"),pages:o,skin:"molv",first:"\u9996\u9875",last:"\u5c3e\u9875",prev:"\u4e0a\u4e00\u9875",next:"\u4e0b\u4e00\u9875",jump:function(t){pageindex=t.curr;c(pageindex,e,s,n,i)}})})}function c(n,t,i,e,o){var s="";$.getJSON("/EmploysCommissionDetail/GetEmploysCommissionDetaillist/",{employee_id:t,configtype:i,YearsMonthDate:e,pageIndex:n,pageSize:h,branchid:o,shareTheResults:g_ShareTheResults?1:0,has_topup_opencard:r,has_order_details:u,has_service_details:f},function(n){if(n&&n.length>0){for(var t=0;t<n.length;t++)n[t].recordid>=1&&(s+='<tr class="context">',s+=isNullOrWhiteSpace(n[t].productName)?n[t].productName.length>11?'<td  id="name'+n[t].product_id+'"  data-toggle="tooltip" data-placement="top" title="'+n[t].productName+'">'+n[t].productName.substring(0,10)+"......<\/td>":"<td>"+n[t].productName+"<\/td>":"<td><\/td>",s+="<td>"+n[t].consumptionname+"<\/td>",s+=n[t].memberscard!=null?"<td>"+n[t].memberscard+"<\/td>":"<td><\/td>",s+=n[t].sv_recordtable=="sv_memberrechargerecord"&&n[t].sv_mrr_type==0?"<td>\u5145\u503c\u4e1a\u7ee9<\/td>":n[t].sv_recordtable=="sv_memberrechargerecord"&&n[t].sv_mrr_type==4?"<td>\u5f00\u5361\u5145\u503c\u4e1a\u7ee9<\/td>":n[t].sv_recordtable=="sv_membercardrecharge"?"<td>\u51b2\u6b21\u4e1a\u7ee9<\/td>":n[t].sv_recordtable=="order_product"?"<td>\u5356\u54c1\u4e1a\u7ee9<\/td>":n[t].commissionmoney<0?"<td>\u624b\u52a8\u6263\u9664<\/td>":"<td>\u624b\u52a8\u5956\u52b1<\/td>",s+="<td>"+n[t].consumptionmoney+"/"+n[t].commissionresultsomney+"<\/td>",s+="<td>\uffe5"+n[t].commissionmoney+"<\/td>",s+="<td>"+new Date(n[t].consumptiondate).Format("yyyy-MM-dd hh:mm:ss")+"<\/td>",s+="<td>"+n[t].consumeusername+"<\/td>",s+="<td>"+n[t].username+"<\/td>",s+="<td>"+n[t].remark+"<\/td>",s+="<\/tr>");$("#employeeCommissionList").html(s)}else $("#employeeCommissionList").html('<tr><td class="text-center sad" style="text-align:center !important;" colspan="9"><img src="../skin_N3/images/sad.png" /><i class="padd0">\u6682\u65e0\u6570\u636e<\/i><\/td><\/tr>')})}function a(n,t,r,u){var f=i;t>0?$.postJson("/EmploysCommissionDetail/AddManuallyAdjustMoney",{commissionemployes:n,sv_consumptionmoney:t,Adjusttype:r,sv_remark:u,sv_user_id:f},function(n){n==1?(layer.closeAll(),o()):layer.msg("\u8c03\u6574\u91d1\u989d\u5931\u8d25")}):layer.msg("\u8bf7\u8f93\u5165\u6709\u6548\u91d1\u989d")}var e=n,s=t,i=i,h=10,r=!0,u=!0,f=!0;l();$("#adjustmentBtn").unbind("click").on("click",function(){layerpage.Deke_layerpage.show_Url2("1","\u8c03\u6574\u5458\u5de5\u4fe1\u606f","/ajaxHtml_N3/system/adjustmentMoney.html?="+getTimeStamp(),["400px","260px"],null)});$(document).unbind("click","#SaveAdjustMoney").on("click","#SaveAdjustMoney",function(){var n=$(".checkinput[name='adjustMoney']:checked").data("id"),t=parseFloat($(".ManuallyAdjustMoney").val()||0),r=t*n,u=parseFloat($("#basicSalary").text().replace(/\uffe5/gi,"")||0),f=parseFloat($("#commissionSumMoney").text().replace(/\uffe5/gi,"")||0),i;$("#adjustMoney").text("\uffe5"+(parseFloat($("#adjustMoney").text().replace(/\uffe5/gi,"")||0)+r));$("#sumMoney").text("\uffe5"+(parseFloat($("#adjustMoney").text().replace(/\uffe5/gi,"")||0)+u+f));i=$("#AdjustRemark").val()||(n==1?"\u5956\u52b1":"\u6263\u9664");a(e,t,n,i)});$(document).on("keyup",".ManuallyAdjustMoney",function(){$(this).val($(this).val().replace(/[^\d\.]/g,""))})},staffPostManagement:function(){function r(){$.get("/Grouping/Count/",null,function(n){var t=Math.ceil(n/10);laypage({cont:$("#pageGro"),pages:t,skin:"molv",skip:!0,first:"\u9996\u9875",last:"\u5c3e\u9875",prev:"\u4e0a\u4e00\u9875",next:"\u4e0b\u4e00\u9875",jump:function(n){s(n.curr)}})})}function s(n){var t="";$.getJson("/Grouping/PageList/",{pageIndex:n},function(n){if(n!=null){for(var i=0;i<n.length;i++)t+='<tr><td><input class="checkinput" type="checkbox" name="subbox" data-sv_configtype="'+n[i].sv_configtype+'" value="'+n[i].sp_grouping_id+'"><\/td>',t+="<td><span>"+n[i].sp_grouping_name+"<\/span><\/td>",t+='<td><button class="btn addpost setPcPost" onclick="setPermissions('+n[i].sp_grouping_id+');" data-id="'+n[i].sp_grouping_id+'"><i class="icon-plus"><\/i><\/button><\/td>',t+='<td><button class="btn addpost setAppPost" data-id="'+n[i].sp_grouping_id+'"><i class="icon-plus"><\/i><\/button><\/td>',t+=isNullOrWhiteSpace(n[i].sp_grouping_dec)?"<td><span>"+n[i].sp_grouping_dec+"<\/span><\/td><\/tr>":"<td><span><\/span><\/td><\/tr>";$("#allbigCategorieslist").html(t)}else $("#allbigCategorieslist").html('<tr><td class="text-center sad" style="text-align:center !important;" colspan="5"><img src="../skin_N3/images/sad.png" /><i class="padd0">\u6682\u65e0\u6570\u636e<\/i><\/td><\/tr>')})}function h(n){$("#positionid").val(n);$.post("/Grouping/GetRoleAppConfig",{groupingid:n},function(n){var i,u,r,t;if(n&&(i=JSON.parse(n),i&&i.module))for(u=i.module,r=$(".setapppermissions").find("ul").find("li"),t=0;t<r.length;t++)u[t]=="1"&&$(r[t]).children("input").eq(0).prop("checked","checked")})}function c(){$("#selectcommission .selectCommissionbox").delegate("click").click(function(){$(this).toggleClass("active");$(this).hasClass("active")&&$(this).parents("li.one").siblings("li.one").find(".selectCommissionbox").removeClass("active")});$("#determineSelectCommission").delegate("click").click(function(){var i=$("#selectcommission a.active"),n,t;if(n="",i.each(function(){n+=$(this).data("id")+","}),n!="")n=n.substr(0,n.length-1),t=0,layer.closeAll(),$("#staffpostpagedisplay").hide(0),$("#employeecommissionpagedisplay").show(),u(t,n);else return layer.msg("\u8bf7\u9009\u62e9\u81f3\u5c11\u4e00\u79cd\u7c7b\u578b"),!1})}function u(n,t){$.get("/Commission/GetPositionCommissionconlist?positionid="+n+"&configtype="+t,function(n){var r,w,b,s,e,h,y,p,v,o,c,a,t,u,g;if(n&&n.length>0)for(r=0;r<n.length;r++){if(n[r].groupingmodel!=null)for(w in n[r].groupingmodel)$("#"+w).val(n[r].groupingmodel[w]);for(b in n[r])if(s="",b=="sv_configcode"&&(s=n[r][b]),s=="ProjectCommission"||s=="PersonalCommission"||s=="StoreTotalCommissions"){$("#"+n[r].sv_configcode).show();$("."+s).text(n[r].sv_configname);$("#"+s+"_commissiontype").val(n[r].sv_configtype);$("#ResultsDetail_StoreTotalCommissions").show(0);var l="",nt="",k="",d="";if(n[r].childList!=null&&n[r].childList.length>0&&(s=="PersonalCommission"||s=="StoreTotalCommissions"))for(e=0;e<n[r].childList.length;e++){if(n[r].childList[e].commission&&n[r].childList[e].commission!=null&n[r].childList[e].commission.length>0){for(t=n[r].childList[e].commission,l+='<ul id="'+n[r].childList[e].sv_configid+s+'" data-configid="'+n[r].childList[e].sv_configid+'" data-sv_configname="'+n[r].childList[e].sv_configname+'">',l+='<li data-configid="'+n[r].childList[e].sv_configid+'"><span>\u3010'+n[r].childList[e].sv_configname+'\u3011<\/span><button data-codeid="'+s+'" data-configid="'+n[r].childList[e].sv_configid+s+'" type="button" class="btn deletebtn RemoveResultsdata"><i class="icon-remove"><\/i><\/button><\/li>',k+=n[r].childList[e].sv_configid+",",d+=n[r].childList[e].sv_configname+"|",h=0;h<t.length;h++)i(n[r].sv_configtype,t[h].sv_commissionid,t[h].sv_configid,t[h].sv_commissionname,t[h].sv_maxmoney,t[h].sv_minmoney,t[h].sv_commissiontype,t[h].sv_commissionratio),l+='<li class="coslist" data-sv_configtype='+n[r].sv_configtype+" data-sv_commissionid="+t[h].sv_commissionid+"  data-sv_configid="+t[h].sv_configid+' data-sv_commissionname="'+t[h].sv_commissionname+'" data-sv_maxmoney='+t[h].sv_maxmoney+" data-sv_minmoney="+t[h].sv_minmoney+" data-sv_commissiontype="+t[h].sv_commissiontype+" data-sv_commissionratio="+t[h].sv_commissionratio+'><div class="editcommissioninfo">',l+='<span class="col-xs-4 fl4">',l+=" <i>\u63d0\u6210\u533a\u6bb5<\/i>",l+="<i>\u00a5"+t[h].sv_minmoney+"<\/i>",l+="<\/span>",l+='<span class="col-xs-4 fl4">',l+=" <i>\u63d0\u6210\u533a\u6bb5<\/i>",l+=t[h].sv_maxmoney==0?"<i>\u65e0\u9650<\/i>":"<i>\u00a5"+t[h].sv_maxmoney+"<\/i>",l+="<\/span>",l+='<span class="col-xs-4 fl4">',l+=" <i>\u63d0\u6210\u533a\u6bb5<\/i>",l+="<i>"+t[h].sv_commissionratio+"%<\/i>",l+="<\/span><\/div><\/li>";l+="<\/ul>"}nt+=k.indexOf(n[r].childList[e].sv_configid)>=0&&d.indexOf(n[r].childList[e].sv_configname)>=0?' <a  href="javascript:void(0);" id='+s+n[r].childList[e].sv_configid+'  class="regbtn active" data-configcode="'+s+'"  data-sv_configid="'+n[r].childList[e].sv_configid+'" data-sv_configname="'+n[r].childList[e].sv_configname+'">'+n[r].childList[e].sv_configname+"<\/a>":' <a href="javascript:void(0);" id='+s+n[r].childList[e].sv_configid+' data-configcode="'+s+'"  data-sv_configid="'+n[r].childList[e].sv_configid+'" class="regbtn" data-sv_configname="'+n[r].childList[e].sv_configname+'">'+n[r].childList[e].sv_configname+"<\/a>";$("#Results_"+s).html(nt);l!=""&&($("#"+s+"Id").val(k.replace(/\,$/,"")),$("#"+s+"Name").val(d.replace(/\|$/,"")),$("#ResultsDetail_"+s).show(),$("#ResultsDetail_"+s).html(l))}if(n[r].childList!=null&&n[r].childList.length>0&&s=="ProjectCommission")for(y="",p="",v=0;v<n[r].childList.length;v++){if(o=n[r].childList[v].sv_configcode,c=n[r].childList[v].sv_configid,$("#"+o+"_"+c).attr("data-sv_commissionid",0),$("#"+o+"_"+c).attr("data-sv_configtype",n[r].sv_configtype),$("#"+o+"_"+c).attr("data-sv_commissiontype",1),$("#"+o+"_"+c).attr("data-sv_configid",c),$("#"+o+"_"+c).attr("data-sv_classificationid",""),$("#"+o+"_"+c).attr("data-sv_maxmoney",0),$("#"+o+"_"+c).attr("data-sv_minmoney",0),$("#"+o+"_"+c).attr("data-sv_commissionratio",0),n[r].childList[v].commission!=null&&n[r].childList[v].commission.length>0)for(a="",p="",y="",t=n[r].childList[v].commission,u=0;u<t.length;u++)t[u].sv_commissionname!=null&&t[u].sv_commissionname!=""?(y+=t[u].sv_classificationid+",",p+=t[u].sv_commissionname+"|",i(n[r].sv_configtype,t[u].sv_commissionid,t[u].sv_configid,t[u].sv_classificationid,t[u].sv_maxmoney,t[u].sv_minmoney,t[u].sv_commissiontype,t[u].sv_commissionratio),$("#senior").addClass("active").siblings("a").removeClass("active"),$(".projectcommission-list .tip").fadeOut(0),$(".projectcommission-list .selectproductbtn").fadeIn(0),g=f(t[u].sv_classificationid,""),a+='<ul class="cosmax" data-sv_configtype='+n[r].sv_configtype+' data-sv_commissionid="'+t[u].sv_commissionid+'"  data-sv_configid="'+t[u].sv_configid+'" " data-sv_classificationid="'+t[u].sv_classificationid+'" data-sv_maxmoney='+t[u].sv_maxmoney+"  data-sv_minmoney="+t[u].sv_minmoney+' data-sv_commissiontype="'+t[u].sv_commissiontype+'" data-sv_commissionratio="'+t[u].sv_commissionratio+'"  data-categoname="'+t[u].sv_commissionname+'"  id="'+g+"_"+t[u].sv_commissionid+'">',a+="<li><span>\u3010"+n[r].childList[v].sv_configname+'\u3011<\/span><button type="button" class="btn deletebtn removeClassification" data-sv_configcode="'+o+'" data-id="'+g+"_"+t[u].sv_commissionid+'" data-sv_commissionid="'+t[u].sv_commissionid+'"><i class="icon-remove"><\/i><\/button><\/li>',a+="<li>",a+='<div class="editcommissioninfo">',a+='<span class="fl">'+t[u].sv_commissionname+"<\/span>",a+='<span class="fr">'+t[u].sv_commissionratio+"%<\/span>",a+="<\/div>",a+="<\/li>",a+="<\/ul>"):($("#"+o+"_"+c).val(t[u].sv_commissionratio),$("#"+o+"_"+c).attr("data-sv_configtype",n[r].sv_configtype),$("#"+o+"_"+c).attr("data-sv_commissionid",t[u].sv_commissionid),$("#"+o+"_"+c).attr("data-sv_configid",t[u].sv_configid),$("#"+o+"_"+c).attr("data-sv_classificationid",t[u].sv_classificationid),$("#"+o+"_"+c).attr("data-sv_maxmoney",t[u].sv_maxmoney),$("#"+o+"_"+c).attr("data-sv_minmoney",t[u].sv_minmoney),$("#"+o+"_"+c).attr("data-sv_commissiontype",t[u].sv_commissiontype),$("#"+o+"_"+c).attr("data-sv_commissionratio",t[u].sv_commissionratio));a!=""&&($("#"+o+"Id").val(y.replace(/\,$/,"")),$("#"+o+"Name").val(p.replace(/\|$/,"")),$("#ResultsDetail_"+o).show(),$("#ResultsDetail_"+o).html(a))}}}})}function l(n){$.get("/AjaxProduct/GetproductListByProducttypeid?producttypeid="+n.id,function(t){var i,r;if(t&&t.length>0){var u="",f=$("#"+n.sv_configcode+"Id").val(),e=$("#"+n.sv_configcode+"Name").val();for(i in t){u+='<li data-ptid="'+t[i].productcategory_id+'"><dl class="product_list_a">';for(r in t[i].subcategory)u+=f&&f.indexOf(t[i].subcategory[r].productsubcategory_id)>=0&&e&&e.indexOf(t[i].subcategory[r].sv_psc_name)>=0?'<dd class="curss" data-ptid="'+t[i].subcategory[r].productsubcategory_id+'">'+t[i].subcategory[r].sv_psc_name+"<\/dd>":'<dd  data-ptid="'+t[i].subcategory[r].productsubcategory_id+'">'+t[i].subcategory[r].sv_psc_name+"<\/dd>";u+="<\/dl>";u+='<div class="name" data-ptid="'+t[i].productcategory_id+'">'+t[i].sv_pc_name+"<\/div>";u+="<\/li> "}$("#AddCategories").val(n.sv_configcode);$("#commissopns_name_value").val(n.name);$("#AddCategories").attr("data-sv_configid",n.sv_configid);$("#commissions_product_list").html(u);a(f)}})}function a(n){var t="",i="";$("#typeid").val(n);$("#commissions_product_list .product_list_a dd").delegate("click").click(function(){if($(this).hasClass("curss"))return!1;$(this).toggleClass("active");var n=$(this).data("ptid")+"";t.indexOf(n)>-1&&!$(this).hasClass("active")&&(i=i.replace($(this).text()+"|",""),t=t.replace($(this).data("ptid")+",",""));$(this).hasClass("active")&&(i+=$(this).html()+"|",t+=$(this).data("ptid")+",");$("#Categoriesid").val(t.replace(/\,$/,""));$("#Categoriesname").val(i.replace(/\|$/,""))})}function v(n){var u;if(n!=1){var i=$(n).data("id"),r=$(n).data("sv_configcode"),f=$("#"+i).data("sv_classificationid"),e=$("#"+i).data("categoname"),o=$("#"+r+"Id").val(),s=$("#"+r+"Name").val(),h='{"sv_configtype":'+$("#"+i).data("sv_configtype")+',"sv_commissionid":'+$("#"+i).data("sv_commissionid")+',"sv_configid":'+$("#"+i).data("sv_configid")+',"sv_commissionname":"'+$("#"+i).data("sv_classificationid")+'","sv_maxmoney":'+$("#"+i).data("sv_maxmoney")+',"sv_minmoney":'+$("#"+i).data("sv_minmoney")+',"sv_commissiontype":'+$("#"+i).data("sv_commissiontype")+',"sv_commissionratio":'+$("#"+i).data("sv_commissionratio")+"},";$("#"+i).remove();t=t.replace(h,"");$("#"+r+"Id").val(o.replace(f,""));$("#"+r+"Name").val(s.replace(e,""));u=$("#ResultsDetail_"+r+" .cosmax").length;u==0&&($("#ResultsDetail_"+r).hide(),$("#"+r+"Id").val(""),$("#"+r+"Name").val(""))}}function y(t){var r=$(t).data("codeid"),u=$("#"+r+"_EmptyInterval  .funsilist").eq(n),f=u.find(".vuletext").val(),e="",i;f?($("#"+r+"_EmptyInterval  .funsilist").eq(n+1).find(".proportion").val()&&(e=$("#"+r+"_EmptyInterval  .funsilist").eq(n+1).find(".proportion").val()),i='<li class="funsilist">',i+='<div class="commissioninput">',i+='<span class="naem">\u63d0\u6210\u533a\u6bb5\uff1a<\/span>',i+='<span class="fl padding10 names">\u00a5'+(parseInt(f)+1)+"\u81f3<\/span>",i+='<div class="inputbox onfle">',i+='<input maxlength="8" type="text" class="form-control vuletext superiorsvalkeyup" placeholder="\u8bf7\u8f93\u5165\u91d1\u989d"  data-infinite="1" value="0"/>',i+="<\/div><\/div>",i+='<div class="commissioninput">',i+='<span class="naem">\u6b64\u533a\u6bb5\u63d0\u6210\u6bd4\u4f8b\uff1a<\/span>',i+='<div class="inputbox">',i+='<input type="text" class="form-control proportion proportionvalidation" name="" id="" value="'+e+'" placeholder="\u8bf7\u8f93\u51651-100\u7684\u63d0\u6210\u6bd4\u4f8b" />',i+="<\/div>",i+='<button data-codeid="StoreTotalCommissions" class="btn icon-minus addedit removeThisCommissions"><\/button>',i+="<\/div><\/li>",$("#"+r+"_EmptyInterval  .funsilist").eq(n-(n+1)).before(i),$("#"+r+"_EmptyInterval  .funsilist").eq(n-(n+1)).find(".names").text("\u81f3"),$("#"+r+"_EmptyInterval  .funsilist").eq(n-(n+1)).find(".proportion").val(""),n>=1&&u.find(".removeThisCommissions").remove(),n++):layer.msg("\u8bf7\u8f93\u5165\u6709\u6548\u533a\u6bb5\u503c")}function p(t){n--;n>0?$(t).parent().parent("li").prev().find(".commissioninput").eq(1).append('<button data-codeid="StoreTotalCommissions" class="btn icon-minus addedit removeThisCommissions"><\/button>'):n=0;var i=$(t).parent().prev().find(".vuletext").val();$(t).parent().parent().find(".names").text(parseInt(i)+1+"\u81f3");$(t).parent().parent().find(".vuletext").val($(t).parent().parent().find(".vuletext").val());$(t).parent().parent().remove();$(t).addClass("newsilist")}function w(n){return $(n).val($(n).val().replace(/[^\d\.]/g,"")),$(n).val()&&$(n).val()>100?(layer.msg("\u8bf7\u8f93\u5165\u6709\u6548\u6bd4\u4f8b\u503c"),$(n).val(100),!1):void 0}function b(n){$(n).val($(n).val().replace(/[^\d]/g,""));$(n).val(Number($(n).val()));$(n).val()&&$(n).val().length>=13?(layer.msg("\u8bf7\u8f93\u5165\u6709\u6548\u7684\u533a\u6bb5\u503c\uff01"),$(n).parent().parent().parent().nextAll().find(".names").text("\u00a50\u81f3"),$(n).val("")):($(n).parent().parent().find(".txtmsg").text(""),$(n).parent().parent().parent().next().find(".names").text("\u00a5"+(Number($(n).val()||-1)+1)+"\u81f3"))}function k(n){var r=$(n).data("configid"),i=$(n).data("codeid"),e="",u,f;$("#"+r+" .coslist").each(function(){var t=$(this).data("sv_maxmoney")=="\u65e0\u9650"?0:$(this).data("sv_maxmoney"),n;t.toString().indexOf("\u00a5")>=0&&(t=$(this).data("sv_maxmoney").replace("\u00a5",""));n=$(this).data("sv_minmoney");n.toString().indexOf("\u00a5")>=0&&(n=$(this).data("sv_minmoney").replace("\u00a5",""));e+='{"sv_configtype":'+$(this).data("sv_configtype")+',"sv_commissionid":'+$(this).data("sv_commissionid")+',"sv_configid":'+$(this).data("sv_configid")+',"sv_commissionname":"'+$(this).data("sv_commissionname")+'","sv_maxmoney":'+t+',"sv_minmoney":'+n+',"sv_commissiontype":'+$(this).data("sv_commissiontype")+',"sv_commissionratio":'+$(this).data("sv_commissionratio")+"},"});t=t.replace(e,"");u=$("#"+r).data("configid");f=$("#"+r).data("sv_configname");$("#"+r).remove();$("#"+i+u).removeClass("activess active");$("#ResultsDetail_"+i+" .cosbos").length==0?($("#"+i+"Id").val(""),$("#"+i+"Name").val(""),$("#"+i+"_Id").val(""),$("#"+i+"_Name").val("")):($("#"+i+"Id").val($("#"+i+"Id").val().replace(u,"")),$("#"+i+"Name").val($("#"+i+"Name").val().replace(f,"")),$("#"+i+"_Id").val($("#"+i+"_Id").val().replace(u,"")),$("#"+i+"_Name").val($("#"+i+"_Name").val().replace(f,"")))}function d(t){var i=$("#"+t+"_EmptyInterval .funsilist").length;$("#"+t+"_EmptyInterval .funsilist").each(function(){$(this).data("codeid")||(this.remove(),n=0)})}function i(n,i,r,u,f,e,o,s){u=u||"";f=="\u65e0\u9650"&&(f=0);t+='{"sv_configtype":'+n+',"sv_commissionid":'+i+',"sv_configid":'+r+',"sv_commissionname":"'+u+'","sv_maxmoney":'+f+',"sv_minmoney":'+e+',"sv_commissiontype":'+o+',"sv_commissionratio":'+parseFloat(s)+"},"}function f(n,t){return n.replace(/'/ig,t).replace(/,/ig,t)}function g(){$(".ProjectCommissionConfig").each(function(){var n;parseFloat($(this).val())>0?($(this).removeAttr("data-sv_commissionratio"),$(this).attr("data-sv_commissionratio",parseFloat($(this).val())),n='{"sv_configtype":'+$(this).data("sv_configtype")+',"sv_commissionid":'+$(this).data("sv_commissionid")+',"sv_configid":'+$(this).data("sv_configid")+',"sv_commissionname":"'+$(this).data("sv_classificationid")+'","sv_maxmoney":'+$(this).data("sv_maxmoney")+',"sv_minmoney":'+$(this).data("sv_minmoney")+',"sv_commissiontype":'+$(this).data("sv_commissiontype")+',"sv_commissionratio":'+parseFloat($(this).val())+"},",t=t.replace(n,""),i($(this).data("sv_configtype"),$(this).data("sv_commissionid"),$(this).data("sv_configid"),$(this).data("sv_classificationid"),$(this).data("sv_maxmoney"),$(this).data("sv_minmoney"),$(this).data("sv_commissiontype"),$(this).val())):$(this).data("sv_commissionratio")>0&&(n='{"sv_configtype":'+$(this).data("sv_configtype")+',"sv_commissionid":'+$(this).data("sv_commissionid")+',"sv_configid":'+$(this).data("sv_configid")+',"sv_commissionname":"'+$(this).data("sv_classificationid")+'","sv_maxmoney":'+$(this).data("sv_maxmoney")+',"sv_minmoney":'+$(this).data("sv_minmoney")+',"sv_commissiontype":'+$(this).data("sv_commissiontype")+',"sv_commissionratio":'+parseFloat($(this).data("sv_commissionratio"))+"},",t=t.replace(n,""))})}var e,o,t,n;getShareSessionPermissions();$("#system-nav li").eq(2).find("a").addClass("active");e=0;o="";r();$(document).unbind("click","#allbigCategorieslist .setAppPost").on("click","#allbigCategorieslist .setAppPost",function(){var n=$(this).data("id");layerpage.Deke_layerpage.getpage2("1","\u8bbe\u7f6eAPP\u6743\u9650","/ajaxHtml_N3/system/SetAppPermissions.html?="+getTimeStamp(),["620px","370px"],h,n)});$(document).unbind("click","#btn_setApppermissions_save").on("click","#btn_setApppermissions_save",function(){var n="",i,t;$(".appmodule[name='appPost']").each(function(){n+=$(this).is(":checked")?"1":"0"});i={module:n};t=$("#positionid").val();t&&$.post("/Grouping/SaveRoleAppConfig",{sp_grouping_id:t,sv_app_config:JSON.stringify(i)},function(n){n?(layer.closeAll(),layer.msg("\u8bbe\u7f6e\u6210\u529f")):layer.msg("\u8bbe\u7f6e\u5931\u8d25")})});$(document).unbind("click","#allcheckedpost").on("click","#allcheckedpost",function(){var n=$(this).is(":checked");n?$(".appmodule[name='appPost']").prop("checked",!0):$(".appmodule[name='appPost']").prop("checked",!1)});$("#btn-addCommission").click(function(){layerpage.Deke_layerpage.noneClosePage("1","\u6dfb\u52a0\u5458\u5de5\u5c97\u4f4d","/ajaxHtml_N3/system/selectCommission.html?="+getTimeStamp(),["650px","480px"],c)});t="";$(".ProjectCommissionConfig").keyup(function(){return $(this).val($(this).val().replace(/[^\d\.]/g,"")),$(this).val()&&$(this).val()>100?(layer.msg("\u8bf7\u8f93\u5165\u6709\u6548\u6bd4\u4f8b\u503c"),$(this).val(100),!1):void 0});$("#commissionLeven a").click(function(){var n=$(this).data("type");$(this).addClass("active").siblings("a").removeClass("active");n==0?($(".projectcommission-list .tip").fadeIn(0),$(".projectcommission-list .selectproductbtn").fadeOut(0)):($(".projectcommission-list .tip").fadeOut(0),$(".projectcommission-list .selectproductbtn").fadeIn(0))});$(".selectSeverProduct").click(function(){var t=$(this).data("configvalue"),i=$(this).data("sv_configcode"),n=$(this).data("name"),r=$(this).prev().prev().prev().data("sv_configid"),u={id:t,sv_configcode:i,sv_configid:r,name:n};layerpage.Deke_layerpage.getpage2("1",n+"\u5206\u7c7b\u9009\u62e9","/ajaxHtml_N3/system/selectProductList.html?v="+getTimeStamp()+10,["790px","520px"],l,u)});$(document).unbind("click","#AddCategories").on("click","#AddCategories",function(){if($("#Categoriesid").val()&&$("#inputbvalue").val()){var n="",r=$("#Categoriesid").val(),t=$(this).val(),o=$("#"+t+"Id").val(),c=$("#"+t+"Name").val(),u=$("#Categoriesname").val(),e=$("#inputbvalue").val(),s=f(r,""),h=$(this).data("sv_configid");n+='<ul class="cosmax" data-sv_configtype='+$("#ProjectCommission_commissiontype").val()+" data-sv_commissionid=0  data-sv_configid="+h+' data-sv_classificationid="'+r+'" data-sv_maxmoney=0,  data-sv_minmoney=0  data-sv_commissiontype=1 data-sv_commissionratio='+e+'    id="'+s+'_"  data-categoname="'+u+'">';n+="<li><span>\u3010"+$("#commissopns_name_value").val()+'\u63d0\u6210\u3011<\/span><button type="button" class="btn deletebtn removeClassification" data-sv_configcode="'+t+'" data-id="'+s+'_" data-sv_commissionid=""><i class="icon-remove"><\/i><\/button><\/li>';n+="<li>";n+='<div class="editcommissioninfo">';n+='<span class="fl">'+u+"<\/span>";n+='<span class="fr">'+e+"%<\/span>";n+="<\/div>";n+="<\/li>";n+="<\/ul>";n!=""&&r!=""&&(i($("#ProjectCommission_commissiontype").val(),0,h,r,0,0,1,e),$("#ResultsDetail_"+t).show(),$("#"+t+"Id").val(o+","+r),$("#"+t+"Name").val(o+"|"+u),$("#ResultsDetail_"+t).append(n));layer.closeAll()}else return $("#inputbvalue").focus(),layer.msg("\u8bf7\u9009\u62e9\u670d\u52a1\u5206\u7c7b\u6216\u8005\u6ca1\u586b\u6bd4\u4f8b"),!1});$(document).unbind("click",".removeClassification").on("click",".removeClassification",function(){v(this)});$(document).unbind("click",".shareSelectTypeCommission a").on("click",".shareSelectTypeCommission a",function(){var i=$(this).data("configcode"),n=$("#"+i+"Id").val(),t=$("#"+i+"Name").val(),r=$("#"+i+"_Id").val(),u=$("#"+i+"_Name").val(),f,e;if($(this).hasClass("activess"))return!1;$(this).toggleClass("active");f=$(this).data("sv_configid");e=$(this).data("sv_configname");$(this).hasClass("active")&&(n&&t?(t+="|"+$(this).text(),n+=","+$(this).data("sv_configid")):(t+=$(this).text()+"|",n+=$(this).data("sv_configid")+","),u&&r?(u+="|"+$(this).text(),r+=","+$(this).data("sv_configid")):(u+=$(this).text()+"|",r+=$(this).data("sv_configid")+","));n.indexOf(f)>=0&&!$(this).hasClass("active")&&t.indexOf(e)>=0&&(t=t.replace($(this).text()+"|",""),n=n.replace($(this).data("sv_configid")+",",""),t=t.replace($(this).text(),""),n=n.replace($(this).data("sv_configid"),""),u=u.replace($(this).text()+"|",""),r=r.replace($(this).data("sv_configid")+",",""),u=u.replace($(this).text(),""),r=r.replace($(this).data("sv_configid"),""));$("#"+i+"Id").val(n.replace(/\,$/,""));$("#"+i+"Name").val(t.replace(/\|$/,""));$("#"+i+"_Id").val(r.replace(/\,$/,""));$("#"+i+"_Name").val(u.replace(/\|$/,""))});$(document).unbind("click",".addCommissionsBtn").on("click",".addCommissionsBtn",function(){y(this)});n=0;$(document).unbind("click",".removeThisCommissions").on("click",".removeThisCommissions",function(){p(this)});$(document).unbind("keyup",".proportionvalidation").on("keyup",".proportionvalidation",function(){w(this)});$(document).unbind("keyup",".superiorsvalkeyup").on("keyup",".superiorsvalkeyup",function(){b(this)});$(document).unbind("click",".commissiondetermine").on("click",".commissiondetermine",function(){var n=$(this).data("name"),l=$("#"+n+"_EmptyInterval .onfle").length,f=!0,e=!0,s=$("#"+n+"_Id").val(),u=s.split(","),h=$("#"+n+"_Name").val(),c=h.split("|"),t,r,o;if(s){for(t="",r=0;r<u.length;r++)if(u[r]){if(o=-1,$($("#"+n+"_EmptyInterval .onfle")).find("input").each(function(){if(f&&e)if($(this).val()||$(this).data("infinite")){if($(this).hasClass("vuletext")){var n=$(this).val(),t=$(this).data("infinite");t=="\u65e0\u9650"&&(n=999999999999);parseInt(n)-o>=1||o==-1?o=$(this).val():f=!1}$(this).hasClass("proportion")&&$(this).val()>100&&(e=!1)}else $(this).hasClass("vuletext")&&(f=!1),$(this).hasClass("proportion")&&(e=!1);else return!1}),f){if(!e)return layer.msg("\u8bf7\u8f93\u5165\u6709\u6548\u7684\u63d0\u6210\u533a\u6bb5\u6bd4\u4f8b\uff01"),!1}else return layer.msg("\u8bf7\u8f93\u5165\u6709\u6548\u7684\u63d0\u6210\u533a\u6bb5\uff01"),!1;f&&e&&($("#"+n+u[r]).attr("class","regbtn active activess"),t+="<ul data-configid="+u[r]+" id="+u[r]+n+' data-sv_configname="'+c[r]+'">',t+='<li data-configid="'+u[r]+'"><span>\u3010'+c[r]+'\u3011<\/span><button type="button" data-codeid="'+n+'" data-configid='+u[r]+n+' class="btn deletebtn RemoveResultsdata"><i class="icon-remove"><\/i><\/button><\/li>',$($("#"+n+"_EmptyInterval .funsilist")).each(function(){var f=$(this).find(".vuletext").val();$(this).find(".vuletext").data("infinite")!="\u65e0\u9650"||f||(f=$(this).find(".vuletext").data("infinite"));i($("#"+n+"_commissiontype").val(),0,u[r],"",f,$(this).find(".names").text().replace("\u00a5","").replace("\u81f3",""),2,$(this).find(".proportion").val());t+='<li class="coslist" data-codeid="'+n+'"  data-sv_configtype='+$("#"+n+"_commissiontype").val()+"  data-sv_commissionid=0  data-sv_configid="+u[r]+' data-sv_commissionname="" data-sv_maxmoney='+$(this).find(".vuletext").val()+" data-sv_minmoney="+$(this).find(".names").text().replace("\u00a5","")+" data-sv_commissiontype=2 data-sv_commissionratio="+$(this).find(".proportion").val()+'><div class="editcommissioninfo">';t+='<span class="col-xs-4 fl4">';t+="<i>\u63d0\u6210\u533a\u6bb5<\/i>";t+="<i>"+$(this).find(".names").text()+"<\/i>";t+="<\/span>";t+='<span class="col-xs-4 fl4">';t+="<i>\u81f3<\/i>";t+=$(this).find(".vuletext").data("infinite")!="\u65e0\u9650"||$(this).find(".vuletext").val()?"<i>\u00a5"+$(this).find(".vuletext").val()+"<\/i>":"<i>\u00a5"+$(this).find(".vuletext").data("infinite")+"<\/i>";t+="<\/span>";t+='<span class="col-xs-4 fl4">';t+="<i>\u6b64\u533a\u6bb5\u63d0\u6210\u6bd4\u4f8b\uff1a<\/i>";t+="<i>"+$(this).find(".proportion").val()+"%<\/i>";t+="<\/span>";t+="<\/div>";t+="<\/li>"}),t+="<\/ul>")}e&&f&&($("#ResultsDetail_"+n).append(t),d(n),$("#"+n+"_Id").val($("#"+n+"_Id").val().replace(s,"")),$("#"+n+"_Name").val($("#"+n+"_Name").val().replace(h,"")),$("#"+n+"_EmptyInterval .names").text("\u00a50\u81f3"),$("#"+n+"_EmptyInterval .vuletext").val(""),$("#"+n+"_EmptyInterval .vuletext").eq(1).val("\u65e0\u9650"),$("#"+n+"_EmptyInterval .proportion").val(""))}else return layer.msg("\u9009\u62e9\u4e1a\u7ee9\u7c7b\u578b"),!1});$(document).unbind("click",".RemoveResultsdata").on("click",".RemoveResultsdata",function(){k(this)});$("#renturnbtnCommissions").click(function(){var n=$("#shareNavMoveGetListInfo a").data("url");$("#systemPartialViewContent").load("/system/_PartialStaffPostManagementE_N3")});$("#OperationConfig").click(function(){if(g(),$("#sp_grouping_name").val()!=""&&$("#sp_grouping_name").val()!=null){var n="["+t.replace(/,$/gi,"")+"]",i={listCommission:JSON.parse(n),sp_grouping_id:$("#sp_grouping_id").val(),sp_grouping_name:$("#sp_grouping_name").val(),sp_grouping_dec:$("#sp_grouping_dec").val()};$.ajax({url:"/Commission/OperationPositionCommissioncon",type:"post",data:JSON.stringify(i),contentType:"application/json",async:!1,success:function(n){if(n==1)layer.msg("\u64cd\u4f5c\u6210\u529f\uff01"),t="",setTimeout(function(){$("#systemPartialViewContent").load("/system/_PartialStaffPostManagementE_N3")},500);else{if(n==3)return layer.msg("\u5c97\u4f4d\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a\uff01"),$("#sp_grouping_name").focus(),!1;if(n==-2)t="",layer.msg("\u60a8\u6ca1\u6709\u6743\u9650\u64cd\u4f5c\uff01"),backQuarters();else return n==4?(layer.msg("\u5c97\u4f4d\u5df2\u5b58\u5728\uff01"),!1):(layer.msg("\u64cd\u4f5c\u5931\u8d25\uff01"),!1)}}})}else layer.msg("\u5c97\u4f4d\u4e0d\u80fd\u4e3a\u7a7a\uff01"),$("#sp_grouping_name").focus()});$("#edit-addCommission").on("click",function(){var n=$("#allbigCategorieslist").find("input[name='subbox']:checked"),t,i;n.length==1?(t=n.val(),i=n.data("sv_configtype"),$("#staffpostpagedisplay").hide(0),$("#employeecommissionpagedisplay").show(),u(t,i)):layer.msg("\u8bf7\u9009\u62e9\u4fee\u6539\u7684\u5c97\u4f4d\uff0c\u6700\u591a\u9009\u4e00\u4e2a\u3002")});$("#delete-addCommission").on("click",function(){var n=$("#allbigCategorieslist").find("input[name='subbox']:checked");n.length==1?$('input[name="subbox"]:checked').length==1&&layer.confirm("\u786e\u8ba4\u8981\u5220\u9664\u9009\u4e2d\u7684\u4fe1\u606f\u5417\uff1f",{btn:["\u786e\u8ba4","\u53d6\u6d88\u5220\u9664"]},function(){$.post("/Commission/DeletePositionCommissioncon",{positionid:n.val()},function(n){n==!1?layer.msg("\u5220\u9664\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01"):n==!0?(layer.msg("\u5220\u9664\u6210\u529f"),r()):n==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):n==-3&&layer.msg("\u8be5\u5c97\u4f4d\u4e0d\u80fd\u5220\u9664,\u5df2\u5728\u5458\u5de5\u8868\u4f7f\u7528\uff0c\u5982\u679c\u8981\u5220\u9664\u8be5\u5c97\u4f4d\u5fc5\u987b\u8c03\u6574\u4e0e\u8be5\u5c97\u4f4d\u5173\u8054\u7684\u5458\u5de5\u8fdb\u884c\u5c97\u4f4d\u8c03\u6574\uff01")})}):layer.msg("\u8bf7\u9009\u62e9\u4fee\u6539\u7684\u5c97\u4f4d\uff0c\u6700\u591a\u9009\u4e00\u4e2a\u3002")})}},memberConfig:function(){function i(){$.getJSON("/system/GetUserPage",function(t){var s,y,a,c,v,o,e,p,l,h,u,f,i,r;if(t){for($("#jifen_M").val(t.sv_uc_pointtocashset[0]),$("#jifen").val(t.sv_uc_pointtocashset[1]),t.GetUserLevel||(t.GetUserLevel=t.getUserLevel),t.GetMembergroup||(t.GetMembergroup=t.getMembergroup),t.GetSv_membertag||(t.GetSv_membertag=t.getSv_membertag),s=[],i=0;i<t.GetUserLevel.length;i++){for(y=t.GetUserLevel[i].sv_ml_gradegroupingno,a=!1,e=0;e<s.length;e++)c=s[e],y==c[0].sv_ml_gradegroupingno&&(a=!0,c[c.length]=t.GetUserLevel[i]);a==!1&&(v=[],v[0]=t.GetUserLevel[i],s[s.length]=v)}for(o=[],i=0;i<s.length;i++)u=s[i],o[i]=u[0].sv_ml_gradegroupingno;for(i=0;i<o.length;i++)for(e=0;e<o.length-i-1;e++)o[e]>o[e+1]&&(p=o[e+1],o[e+1]=o[e],o[e]=p);for(l=0,h=0;h<o.length;h++)for(i=0;i<s.length;i++)if(u=s[i],o[h]==u[0].sv_ml_gradegroupingno)for(f=0;f<u.length;f++)h==0?($("#integralLevelConfigurationList").append(n.replace("@sv_ml_initpoint",u[f].sv_ml_initpoint).replace("@sv_ml_endpoint",u[f].sv_ml_endpoint).replace("@sv_ml_commondiscount",u[f].sv_ml_commondiscount).replace("@sv_ml_name",u[f].sv_ml_name).replace("@id",u[f].memberlevel_id)),l++,f==0&&$("#member_config").find("[name='groupId']").val(u[f].sv_ml_gradegroupingno)):f==0?($("#integralLevelConfigurationList").append(n.replace("@sv_ml_initpoint",u[f].sv_ml_initpoint).replace("@sv_ml_endpoint",u[f].sv_ml_endpoint).replace("@sv_ml_commondiscount",u[f].sv_ml_commondiscount).replace("@sv_ml_name",u[f].sv_ml_name).replace("@id",u[f].memberlevel_id)),$("#member_config").find("[name='groupId']").val(u[f].sv_ml_gradegroupingno)):($("#integralLevelConfigurationList").append(n.replace("@sv_ml_initpoint",u[f].sv_ml_initpoint).replace("@sv_ml_endpoint",u[f].sv_ml_endpoint).replace("@sv_ml_commondiscount",u[f].sv_ml_commondiscount).replace("@sv_ml_name",u[f].sv_ml_name).replace("@id",u[f].memberlevel_id)),l++);l==0&&($("#integralLevelConfigurationList li").length<20?$("#integralLevelConfigurationList").append(n.replace("@sv_ml_initpoint",0).replace("@sv_ml_endpoint",0).replace("@sv_ml_commondiscount",0).replace("@sv_ml_name","").replace("@id",0)):(layer.msg("\u4f1a\u5458\u7b49\u7ea7\u6700\u591a\u652f\u630120\u4e2a"),layer.close(index)))}if(t.GetMembergroup.length>0){for(r="",i=0;i<t.GetMembergroup.length;i++)r+='<li data-name="'+t.GetMembergroup[i].membergroup_id+'"><span>'+t.GetMembergroup[i].sv_mg_name+'<\/span><i data-id="'+t.GetMembergroup[i].membergroup_id+'" class="icon-edit edit"><\/i><i data-id="'+t.GetMembergroup[i].membergroup_id+'" class="icon-trash delete"><\/i><\/li>';r+='<li class="saveshare"><button id="addMemberGroupingBtn" class="btn icon-plus"><\/button><\/li>';$("#memberGroupingList").html(r)}else r="",r+='<li class="saveshare"><button id="addMemberGroupingBtn" class="btn icon-plus"><\/button><\/li>',$("#memberGroupingList").html(r);if(t.sv_uc_callnameList.length>0){for(r="",i=0;i<t.sv_uc_callnameList.length;i++)r+='<li  data-id="0" data-name="chengwei"><span>'+t.sv_uc_callnameList[i]+'<\/span><i class="icon-edit edit"><\/i><i data-id="0" class="icon-trash delete"><\/i><\/li>';r+='<li class="saveshare"><button id="addMemberTitlegBtn" class="btn icon-plus"><\/button><\/li>';$("#memberTitleList").html(r)}else r="",r+='<li class="saveshare"><button id="addMemberTitlegBtn" class="btn icon-plus"><\/button><\/li>',$("#memberTitleList").html(r);if(t.GetSv_membertag.length>0){for(r="",i=0;i<t.GetSv_membertag.length;i++)r+='<li class="tag" style="background-color: '+t.GetSv_membertag[i].sv_mt_color+';">',r+='<img src="/skin_N3/images/tag-cover.png" alt="" /><span class="memberlabel">'+t.GetSv_membertag[i].sv_mt_name+'<\/span><i data-id="'+t.GetSv_membertag[i].membertag_id+'" class="deletememberlabel">\u00d7<\/i>',r+="<\/li>";r+='<li class="addmemberlabel"><button id="addMemberTagBtn" class="btn icon-plus"><\/button><\/li>';$("#memberTagList").html(r)}else r="",r+='<li class="addmemberlabel"><button id="addMemberTagBtn" class="btn icon-plus"><\/button><\/li>',$("#memberTagList").html(r);$("#fengzhucount").text(t.GetMembergroup.length);$("#chengweicount").text(t.sv_uc_callnameList.length);$("#tagcount").text(t.GetSv_membertag.length)})}function r(n,t,i,r){layer.prompt({title:t,value:i,formType:0},function(t){n==1?$.post("/System/Update_chengwei",{id:1,name:t,name2:i},function(n){var t,i;if(n.r==!0){if(n.sv_uc_callnameList.length>0){for(t="",i=0;i<n.sv_uc_callnameList.length;i++)t+='<li  data-id="0" data-name="chengwei"><span>'+n.sv_uc_callnameList[i]+'<\/span><i class="icon-edit edit"><\/i><i data-id="0" class="icon-trash delete"><\/i><\/li>';t+='<li class="saveshare"><button id="addMemberTitlegBtn" class="btn icon-plus"><\/button><\/li>';$("#memberTitleList").html(t)}$("#chengweicount").text(n.sv_uc_callnameList.length);layer.closeAll();layer.msg("\u79f0\u8c13\u4fee\u6539\u6210\u529f")}else n==-2?(layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"),layer.close(index)):layer.msg("\u6dfb\u52a0\u5206\u7ec4\u5931\u8d25")}):$.post("/System/Update_Membergroup",{id:r,name:t},function(n){var i,t;if(n.r==!0){if(n.getMembergroup.length>0){for(i="",t=0;t<n.getMembergroup.length;t++)i+='<li data-name="'+n.getMembergroup[t].membergroup_id+'"><span>'+n.getMembergroup[t].sv_mg_name+'<\/span><i data-id="'+n.getMembergroup[t].membergroup_id+'" class="icon-edit edit"><\/i><i data-id="'+n.getMembergroup[t].membergroup_id+'" class="icon-trash delete"><\/i><\/li>';i+='<li class="saveshare"><button id="addMemberGroupingBtn" class="btn icon-plus"><\/button><\/li>';$("#memberGroupingList").html(i)}$("#fengzhucount").text(n.getMembergroup.length);layer.closeAll();layer.msg("\u5206\u7ec4\u4fee\u6539\u6210\u529f")}else layer.msg("\u6dfb\u52a0\u5206\u7ec4\u5931\u8d25")})})}function t(){MembershipGradeGroupingIsON?$("#integralswitch[name='MembershipGradeGrouping']").prop("checked",!0):$("#integralswitch[name='MembershipGradeGrouping']").prop("checked",!1);h()}function h(){rankPromotionIsON&&MembershipGradeGroupingIsON?$("#integralRules[name='rankPromotion']").prop("checked",!0):$("#integralRules[name='rankPromotion']").prop("checked",!1)}function c(){rankDemotion&&MembershipGradeGroupingIsON&&rankPromotionIsON?$("#rankDemotion[data-name='rankDemotion']").prop("checked",!0):$("#rankDemotion[data-name='rankDemotion']").prop("checked",!1)}function u(){g_DisableManualInput?$("#disableManualInputSwitch[name='DisableManualInput']").prop("checked",!0):$("#disableManualInputSwitch[name='DisableManualInput']").prop("checked",!1)}function f(){g_AutomaticallyGenerateMemberId?$("#automaticallyGenerateMemberIdShowSwitch[name='AutomaticallyGenerateMemberId']").prop("checked",!0):$("#automaticallyGenerateMemberIdShowSwitch[name='AutomaticallyGenerateMemberId']").prop("checked",!1)}function e(){g_WhetherSendtextMessageRemindMember?$("#whetherSendtextMessageRemindMemberSwitch[name='WhetherSendtextMessageRemindMember']").prop("checked",!0):$("#whetherSendtextMessageRemindMemberSwitch[name='WhetherSendtextMessageRemindMember']").prop("checked",!1)}function l(){$.getJSON("/AjaxUser/GetUserinfo/",function(n){if(n){loggin.chklogn(n);n.isStore?$("#OperateMembersShare").hide():$("#OperateMembersShare").show();var t="";n.sv_branchrelation==2?t="crossShopEdit":n.sv_branchrelation==3&&(t="crossShopConsume");o(n.sv_branchrelation,t,1)}})}function o(n,t,i){var r=$("#membersShareSwitch[name='membersShare']"),u=$("#crossShopConsumeSwitch[name='crossShopConsume']"),f=$("#crossShopEditSwitch[name='crossShopEdit']");n==1?(r=$("#membersShareSwitch[name='membersShare']"),r.is(":checked")||r.prop("checked",!0),$("#crossShopSwitch").show()):n==2?(r.is(":checked")||r.prop("checked",!0),t=="crossShopConsume"&&u.is("checked")&&u.prop("checked",!1),t=="crossShopEdit"&&i==1&&u.prop("checked",!0),f.is(":checked")&&i!=0?f.prop("checked",!1):f.prop("checked",!0),$("#crossShopSwitch").show()):n==3?(r.is(":checked")||r.prop("checked",!0),f.is(":checked")&&f.prop("checked",!1),u.is(":checked")?u.prop("checked",!0):u.prop("checked",!0),$("#crossShopSwitch").show()):n==4?(t=="crossShopConsume"&&u.is(":checked")&&u.prop("checked",!1),t=="crossShopEdit"&&f.is(":checked")&&f.prop("checked",!1),r.is(":checked")||$("#crossShopSwitch").hide()):(u.is(":checked")&&u.prop("checked",!1),f.is(":checked")&&f.prop("checked",!1),r.is(":checked")&&r.prop("checked",!1),$("#crossShopSwitch").hide())}function a(n){var y,a,s,h,i,r,v,l;if(n=="MembershipGradeGrouping")MembershipGradeGroupingIsON=!MembershipGradeGroupingIsON,PreferentialTopUpGivingConfigList("MembershipGradeGrouping","MembershipGradeGrouping"),Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(h=Preferential_TopUpGiving_ConfigList[0].sv_detail_value,i=Preferential_TopUpGiving_ConfigList[0].sv_user_config_id,r=Preferential_TopUpGiving_ConfigList[0].sv_user_module_id,s=Preferential_TopUpGiving_ConfigList[0].sv_user_configdetail_id),sv_user_module_config!=null&&(i=sv_user_module_config.sv_user_config_id,r=sv_user_module_config.sv_user_module_id),a=[],l={sv_user_configdetail_id:s,sv_detail_value:h,sv_user_config_id:i,sv_user_module_id:r,sv_detail_is_enable:MembershipGradeGroupingIsON,sv_user_configdetail_name:"\u7b49\u7ea7\u5206\u7ec4\u5f00\u5173",sv_remark:"\u7b49\u7ea7\u5206\u7ec4\u5f00\u5173"},a.push(l),$.postAsyncContentJson("/UserModuleConfig/SaveConfigdetailList?moduleCode=MembershipGradeGrouping",a,function(n){n&&(n==1?(layer.msg("\u4fdd\u5b58\u6210\u529f"),getPrintSetingInfo(),t()):n==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):layer.msg("\u4fdd\u5b58\u5931\u8d25"))});else if(n=="rankPromotion")PreferentialTopUpGivingConfigList("rankPromotion","rankPromotion"),Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(h=Preferential_TopUpGiving_ConfigList[0].sv_detail_value,i=Preferential_TopUpGiving_ConfigList[0].sv_user_config_id,r=Preferential_TopUpGiving_ConfigList[0].sv_user_module_id,s=Preferential_TopUpGiving_ConfigList[0].sv_user_configdetail_id),rankPromotionIsON=!rankPromotionIsON,sv_user_module_config!=null&&(i=sv_user_module_config.sv_user_config_id,r=sv_user_module_config.sv_user_module_id),a=[],l={sv_user_configdetail_id:s,sv_detail_value:h,sv_user_config_id:i,sv_user_module_id:r,sv_detail_is_enable:rankPromotionIsON,sv_user_configdetail_name:"\u7b49\u7ea7\u664b\u5347",sv_remark:"\u7b49\u7ea7\u664b\u5347"},a.push(l),$.postAsyncContentJson("/UserModuleConfig/SaveConfigdetailList?moduleCode=rankPromotion",a,function(n){n&&(n==1?(layer.msg("\u4fdd\u5b58\u6210\u529f"),getPrintSetingInfo(),t()):n==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):layer.msg("\u4fdd\u5b58\u5931\u8d25"))});else if(n=="DisableManualInput")PreferentialTopUpGivingConfigList("DisableManualInput","DisableManualInput"),Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(h=Preferential_TopUpGiving_ConfigList[0].sv_detail_value,i=Preferential_TopUpGiving_ConfigList[0].sv_user_config_id,r=Preferential_TopUpGiving_ConfigList[0].sv_user_module_id,s=Preferential_TopUpGiving_ConfigList[0].sv_user_configdetail_id),g_DisableManualInput=!g_DisableManualInput,sv_user_module_config!=null&&(i=sv_user_module_config.sv_user_config_id,r=sv_user_module_config.sv_user_module_id),y=[],l={sv_user_configdetail_id:s,sv_detail_value:h,sv_user_config_id:i,sv_user_module_id:r,sv_detail_is_enable:g_DisableManualInput,sv_user_configdetail_name:"\u662f\u5426\u7981\u7528\u624b\u52a8\u8f93\u5165\u4f1a\u5458\u5361\u5361\u53f7",sv_remark:"\u662f\u5426\u7981\u7528\u624b\u52a8\u8f93\u5165\u4f1a\u5458\u5361\u5361\u53f7"},y.push(l),$.postAsyncContentJson("/UserModuleConfig/SaveConfigdetailList?moduleCode=DisableManualInput",y,function(n){n&&(n==1?(layer.msg("\u4fdd\u5b58\u6210\u529f"),u()):n==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):layer.msg("\u4fdd\u5b58\u5931\u8d25"))});else if(n=="AutomaticallyGenerateProductBarcode")PreferentialTopUpGivingConfigList("AutomaticallyGenerateProductBarcode","AutomaticallyGenerateProductBarcode"),Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(h=Preferential_TopUpGiving_ConfigList[0].sv_detail_value,i=Preferential_TopUpGiving_ConfigList[0].sv_user_config_id,r=Preferential_TopUpGiving_ConfigList[0].sv_user_module_id,s=Preferential_TopUpGiving_ConfigList[0].sv_user_configdetail_id),g_AutomaticallyGenerateProductBarcode=!g_AutomaticallyGenerateProductBarcode,sv_user_module_config!=null&&(i=sv_user_module_config.sv_user_config_id,r=sv_user_module_config.sv_user_module_id),a=[],l={sv_user_configdetail_id:s,sv_detail_value:h,sv_user_config_id:i,sv_user_module_id:r,sv_detail_is_enable:g_AutomaticallyGenerateProductBarcode,sv_user_configdetail_name:"\u662f\u5426\u81ea\u52a8\u751f\u6210\u5546\u54c1\u7f16\u7801",sv_remark:"\u662f\u5426\u81ea\u52a8\u751f\u6210\u5546\u54c1\u7f16\u7801"},a.push(l),$.postAsyncContentJson("/UserModuleConfig/SaveConfigdetailList?moduleCode=AutomaticallyGenerateProductBarcode",a,function(n){n&&(n==1?(layer.msg("\u4fdd\u5b58\u6210\u529f"),automaticallyGenerateProductBarcodeShow()):n==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):layer.msg("\u4fdd\u5b58\u5931\u8d25"))});else if(n=="AutomaticallyGenerateMemberId")PreferentialTopUpGivingConfigList("AutomaticallyGenerateMemberId","AutomaticallyGenerateMemberId"),Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(h=Preferential_TopUpGiving_ConfigList[0].sv_detail_value,i=Preferential_TopUpGiving_ConfigList[0].sv_user_config_id,r=Preferential_TopUpGiving_ConfigList[0].sv_user_module_id,s=Preferential_TopUpGiving_ConfigList[0].sv_user_configdetail_id),g_AutomaticallyGenerateMemberId=!g_AutomaticallyGenerateMemberId,sv_user_module_config!=null&&(i=sv_user_module_config.sv_user_config_id,r=sv_user_module_config.sv_user_module_id),a=[],l={sv_user_configdetail_id:s,sv_detail_value:h,sv_user_config_id:i,sv_user_module_id:r,sv_detail_is_enable:g_AutomaticallyGenerateMemberId,sv_user_configdetail_name:"\u662f\u5426\u81ea\u52a8\u751f\u6210\u4f1a\u5458id",sv_remark:"\u662f\u5426\u81ea\u52a8\u751f\u6210\u4f1a\u5458id"},a.push(l),$.postAsyncContentJson("/UserModuleConfig/SaveConfigdetailList?moduleCode=AutomaticallyGenerateMemberId",a,function(n){n&&(n==1?(layer.msg("\u4fdd\u5b58\u6210\u529f"),f()):n==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):layer.msg("\u4fdd\u5b58\u5931\u8d25"))});else if(n=="WhetherSendtextMessageRemindMember")PreferentialTopUpGivingConfigList("WhetherSendtextMessageRemindMember","WhetherSendtextMessageRemindMember"),Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(h=Preferential_TopUpGiving_ConfigList[0].sv_detail_value,i=Preferential_TopUpGiving_ConfigList[0].sv_user_config_id,r=Preferential_TopUpGiving_ConfigList[0].sv_user_module_id,s=Preferential_TopUpGiving_ConfigList[0].sv_user_configdetail_id),g_WhetherSendtextMessageRemindMember=!g_WhetherSendtextMessageRemindMember,sv_user_module_config!=null&&(i=sv_user_module_config.sv_user_config_id,r=sv_user_module_config.sv_user_module_id),v=[],l={sv_user_configdetail_id:s,sv_detail_value:h,sv_user_config_id:i,sv_user_module_id:r,sv_detail_is_enable:g_WhetherSendtextMessageRemindMember,sv_user_configdetail_name:"\u662f\u5426\u53d1\u9001\u77ed\u4fe1\u63d0\u9192\u4f1a\u5458",sv_remark:"\u662f\u5426\u53d1\u9001\u77ed\u4fe1\u63d0\u9192\u4f1a\u5458"},v.push(l),$.postAsyncContentJson("/UserModuleConfig/SaveConfigdetailList?moduleCode=WhetherSendtextMessageRemindMember",v,function(n){n&&(n==1?(layer.msg("\u4fdd\u5b58\u6210\u529f"),e()):n==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):layer.msg("\u4fdd\u5b58\u5931\u8d25"))});else if(n=="rankDemotion")MembershipGradeGroupingIsON&&rankPromotionIsON&&(rankDemotion=!rankDemotion,PreferentialTopUpGivingConfigList("rankDemotion","rankDemotion"),Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(h=Preferential_TopUpGiving_ConfigList[0].sv_detail_value,i=Preferential_TopUpGiving_ConfigList[0].sv_user_config_id,r=Preferential_TopUpGiving_ConfigList[0].sv_user_module_id,s=Preferential_TopUpGiving_ConfigList[0].sv_user_configdetail_id),sv_user_module_config!=null&&(i=sv_user_module_config.sv_user_config_id,r=sv_user_module_config.sv_user_module_id),v=[],l={sv_user_configdetail_id:s,sv_detail_value:h,sv_user_config_id:i,sv_user_module_id:r,sv_detail_is_enable:rankDemotion,sv_user_configdetail_name:"\u662f\u5426\u7981\u7528\u624b\u52a8\u8f93\u5165\u4f1a\u5458\u5361\u5361\u53f7",sv_remark:"\u662f\u5426\u7981\u7528\u624b\u52a8\u8f93\u5165\u4f1a\u5458\u5361\u5361\u53f7"},v.push(l),$.postAsyncContentJson("/UserModuleConfig/SaveConfigdetailList?moduleCode=rankDemotion",v,function(n){n&&(n==1?(layer.msg("\u4fdd\u5b58\u6210\u529f"),getPrintSetingInfo(),c()):n==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):layer.msg("\u4fdd\u5b58\u5931\u8d25"))}));else{var p=0,w=n,b=$("#"+n+"Switch").is(":checked");$.post("/System/MemberSharedOperate",{name:w,valu:b},function(n){n.succeed?(p=n.values,layer.msg("\u4fdd\u5b58\u6210\u529f\uff0c\u8bf7\u7ee7\u7eed\u64cd\u4f5c\uff01")):n.succeed?cr.values==-1?layer.msg("\u60a8\u7684\u5e97\u94fa\u8fd8\u6ca1\u6709\u5206\u5e97\u4e0d\u5141\u8bb8\u5f00\u542f\u4f1a\u5458\u5171\u4eab\uff01"):layer.msg("\u64cd\u4f5c\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01"):n.values==-1?layer.msg("\u60a8\u7684\u5e97\u94fa\u8fd8\u6ca1\u6709\u5206\u5e97\u4e0d\u5141\u8bb8\u5f00\u542f\u4f1a\u5458\u5171\u4eab\uff01"):window.location.href=n.values;o(p,w,0);w=="crossShopConsume"&&$("#crossShopEditSwitch[name='crossShopEdit']").is(":checked")&&$.post("/System/MemberSharedOperate",{name:"crossShopEdit",valu:!1},function(n){n.succeed&&(p=n.values)})})}}function v(){availableIntegralSwitch?$("#availableIntegral").prop("checked",!0):$("#accumulativeIntegral").prop("checked",!0)}function s(n){var u,f,t,i,r,e;PreferentialTopUpGivingConfigList("availableIntegralSwitch","availableIntegralSwitch");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(f=Preferential_TopUpGiving_ConfigList[0].sv_detail_value,t=Preferential_TopUpGiving_ConfigList[0].sv_user_config_id,i=Preferential_TopUpGiving_ConfigList[0].sv_user_module_id,u=Preferential_TopUpGiving_ConfigList[0].sv_user_configdetail_id);sv_user_module_config!=null&&(t=sv_user_module_config.sv_user_config_id,i=sv_user_module_config.sv_user_module_id);r=[];e={sv_user_configdetail_id:u,sv_detail_value:f,sv_user_config_id:t,sv_user_module_id:i,sv_detail_is_enable:n,sv_user_configdetail_name:"\u662f\u5426\u6309\u53ef\u7528\u79ef\u5206\u664b\u5347",sv_remark:"\u662f\u5426\u6309\u53ef\u7528\u79ef\u5206\u664b\u5347"};r.push(e);$.postAsyncContentJson("/UserModuleConfig/SaveConfigdetailList?moduleCode=MembershipGradeGrouping",r,function(t){t&&(t==1?(availableIntegralSwitch=n,layer.msg("\u4fdd\u5b58\u6210\u529f"),getPrintSetingInfo()):t==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):layer.msg("\u4fdd\u5b58\u5931\u8d25"))})}var n='<li class="setintegral"><span class="marright">\u5f53\u4f1a\u5458\u79ef\u5206\u5728<\/span><input type="text" class="form-control shareinput" name="sv_ml_initpoint" id="" value="@sv_ml_initpoint" placeholder="\u8f93\u5165\u91d1\u989d" /><span class="money">\u5230<\/span><input type="text" class="form-control shareinput" name="sv_ml_endpoint" id="" value="@sv_ml_endpoint" placeholder="\u8f93\u5165\u79ef\u5206" /><span class="money">\u4e4b\u95f4,<\/span><span class="marright">\u53ef\u4eab\u53d7<\/span><input type="text" class="form-control shareinput" name="sv_ml_commondiscount" id="" value="@sv_ml_commondiscount" placeholder="\u8f93\u5165\u79ef\u5206" /><span class="money">\u6298,<\/span><span class="marright">\u7b49\u7ea7\u540d\u79f0<\/span><input type="text" class="form-control shareinput" name="sv_ml_name" id="" value="@sv_ml_name" placeholder="\u8f93\u5165\u7b49\u7ea7\u540d\u79f0" /><button type="button" data-id="@id" class="btn saveintegral deleteintegrallevel">\u5220\u9664<\/button><\/li>';$("#system-nav li").eq(3).find("a").addClass("active");i();$("#addIntegralLevelConfigurationList").click(function(){$("#integralLevelConfigurationList li").length<20?$("#integralLevelConfigurationList").append(n.replace("@sv_ml_initpoint",0).replace("@sv_ml_endpoint",0).replace("@sv_ml_commondiscount",0).replace("@sv_ml_name","").replace("@id",0)):(layer.msg("\u4f1a\u5458\u7b49\u7ea7\u6700\u591a\u652f\u630120\u4e2a"),layer.close(index))});$(document).unbind("click","#integralLevelConfigurationList .deleteintegrallevel").on("click","#integralLevelConfigurationList .deleteintegrallevel",function(){var n=$(this),t;$(n).parent().siblings()!=null&&(t=$(n).parent().siblings().length);t!=null&&t>0?layer.confirm("\u786e\u8ba4\u8981\u5220\u9664\u9009\u4e2d\u7684\u7ea7\u522b\u5417\uff0c\u8be5\u7ea7\u522b\u7684\u4f1a\u5458\u90fd\u4f1a\u8f6c\u79fb\u5230\u9ed8\u8ba4\u7b2c\u4e00\u4e2a\u7ea7\u522b\uff01",function(){n.data("id")==0?(layer.closeAll(),n.parent().remove()):(layer.load(),$.post("/System/Update_dalete",{id:n.data("id")},function(t){t==!0?(layer.closeAll(),n.parent().remove()):t==-2?(layer.closeAll(),layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01")):(layer.closeAll(),layer.msg("\u5220\u9664\u7ea7\u522b\u5931\u8d25,\u6700\u540e\u4e00\u4e2a\u7b49\u7ea7\u4e0d\u80fd\u5220\u9664,\u8bf7\u4fee\u6539\uff01"))}))}):layer.msg("\u6700\u540e\u4e00\u4e2a\u7b49\u7ea7\u4e0d\u80fd\u5220\u9664,\u8bf7\u4fee\u6539\uff01")});$("#saveIntegralLevelConfigurationList").click(function(){var t,r,n=!0,u=0,f="",e=0,o=$("#integralLevelConfigurationList li");o.length>0&&(u=$("#member_config").find("[name='groupId']").val());f=o.map(function(i){var s=parseFloat($(this).find("input[name='sv_ml_commondiscount']").val()||-1),h=parseInt($(this).find("input[name='sv_ml_initpoint']").val()||0),c=parseInt($(this).find("input[name='sv_ml_endpoint']").val()||0),o,f;if(s<0||s>10){$(this).find("input[name='sv_ml_commondiscount']").focus();layer.msg("\u4f1a\u5458\u6298\u6263\u53ea\u80fd\u8f93\u51650--10");n=!1;return}if(h>=c){$(this).find("input[name='sv_ml_initpoint']").focus();layer.msg("\u5de6\u8fb9\u7684\u79ef\u5206\u4e0d\u80fd\u5927\u4e8e\u6216\u7b49\u4e8e\u53f3\u8fb9\u7684\u79ef\u5206");n=!1;return}if(i>0&&(o=parseInt($(this).find("input[name='sv_ml_endpoint']").val()||0),f=parseInt($(this).find("input[name='sv_ml_initpoint']").val()||0),f>=t&&f<=r||o>=t&&o<=r)){layer.msg("\u6ce8\u610f:\u8be5\u7ea7\u79ef\u5206\u88ab\u5305\u542b\u4e8e\u5176\u4ed6\u4f1a\u5458\u7b49\u7ea7");f>=t&&f<=r?$(this).find("input[name='sv_ml_initpoint']").focus():$(this).find("input[name='sv_ml_endpoint']").focus();n=!1;return}if(r=parseInt($(this).find("input[name='sv_ml_endpoint']").val()||0),t=parseInt($(this).find("input[name='sv_ml_initpoint']").val()||0),$(this).find("input[name='sv_ml_name']")==null||$(this).find("input[name='sv_ml_name']").val()==""){layer.msg("\u8bf7\u8f93\u5165\u7ea7\u522b\u540d\u5b57");$(this).find("input[name='sv_ml_name']").focus();n=!1;return}return e++,{sv_ml_gradegroupingno:u||0,sv_ml_initpoint:$(this).find("input[name='sv_ml_initpoint']").val(),sv_ml_endpoint:$(this).find("input[name='sv_ml_endpoint']").val(),sv_ml_name:$(this).find("input[name='sv_ml_name']").val(),memberlevel_id:$(this).find(".deleteintegrallevel").data("id"),sv_ml_commondiscount:$(this).find("input[name='sv_ml_commondiscount']").val()}}).get();n&&(e<=20?$.ajax({url:"/System/Update_Live",data:JSON.stringify(f),type:"POST",contentType:"application/json",success:function(n){n==!0?($("#integralLevelConfigurationList").empty(),i(),layer.msg("\u4fdd\u5b58\u6210\u529f~")):n==-2?(layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"),layer.close(index)):n==-1?(layer.msg("\u4f1a\u5458\u7b49\u7ea7\u6700\u591a\u652f\u630120\u4e2a,\u8bf7\u91cd\u65b0\u64cd\u4f5c"),layer.close(index)):(layer.msg("\u4fdd\u5b58\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u91cd\u8bd5"),layer.close(index))}}):(layer.msg("\u4f1a\u5458\u7b49\u7ea7\u6700\u591a\u652f\u630120\u4e2a,\u8bf7\u91cd\u65b0\u64cd\u4f5c"),layer.close(index)))});$(document).on("click","#serv_pointtocashset",function(){var n=$("#jifen_M").val(),t=$("#jifen").val();if(isNullOrWhiteSpace(n)&&isNullOrWhiteSpace(t)){if(parseInt(n)<=0){$("#jifen_M").focus();layer.msg("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u91d1\u989d\u5e76\u4e14\u5927\u4e8e0\uff01");return}if(parseInt(t)<=0){$("#jifen").focus();layer.msg("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u79ef\u5206\u5e76\u4e14\u5927\u4e8e0\uff01");return}$.post("/System/Update_Pointto",{jifen_M:n,jifen:t},function(n){n==!0?layer.msg("\u4fdd\u5b58\u6210\u529f\uff0c\u8bf7\u7ee7\u7eed\u64cd\u4f5c\uff01"):n==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):layer.msg("\u4fdd\u5b58\u5931\u8d25\uff01")})}else layer.msg("\u8bf7\u586b\u5199\u91d1\u989d\u4e0e\u5151\u6362\u79ef\u5206\u6570\u91cf\uff01")});$(document).unbind("click","#memberTitleList .edit").on("click","#memberTitleList .edit",function(){var n=$(this).siblings("span").text();r(1,"\u4fee\u6539\u9009\u4e2d\u7684\u4f1a\u5458\u79f0\u8c13",n,"")});$(document).unbind("click","#memberGroupingList .edit").on("click","#memberGroupingList .edit",function(){var n=$(this).data("id"),t=$(this).siblings("span").text();r(2,"\u4fee\u6539\u9009\u4e2d\u7684\u4f1a\u5458\u5206\u7ec4",t,n)});$(document).unbind("click","#addMemberGroupingBtn").on("click","#addMemberGroupingBtn",function(){layer.prompt({title:"\u6dfb\u52a0\u4f1a\u5458\u5206\u7ec4",formType:0},function(n){layer.load();$.post("/System/Update_Membergroup",{id:0,name:n},function(n){var i,t;if(n.r==!0){if(n.getMembergroup.length>0){for(i="",t=0;t<n.getMembergroup.length;t++)i+='<li data-name="'+n.getMembergroup[t].membergroup_id+'"><span>'+n.getMembergroup[t].sv_mg_name+'<\/span><i data-id="'+n.getMembergroup[t].membergroup_id+'" class="icon-edit edit"><\/i><i data-id="'+n.getMembergroup[t].membergroup_id+'" class="icon-trash delete"><\/i><\/li>';i+='<li class="saveshare"><button id="addMemberGroupingBtn" class="btn icon-plus"><\/button><\/li>';$("#memberGroupingList").html(i)}$("#fengzhucount").text(n.getMembergroup.length);layer.closeAll();layer.msg("\u6dfb\u52a0\u5206\u7ec4\u6210\u529f")}else n==-2?(layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"),layer.closeAll()):layer.msg("\u6dfb\u52a0\u5206\u7ec4\u5931\u8d25")})})});$(document).unbind("click","#addMemberTitlegBtn").on("click","#addMemberTitlegBtn",function(){layer.prompt({title:"\u6dfb\u52a0\u4f1a\u5458\u79f0\u8c13",formType:0},function(n){layer.load();$.post("/System/Update_chengwei",{id:0,name:n,name2:""},function(n){var t,i;if(n.r==!0){if(n.sv_uc_callnameList.length>0){for(t="",i=0;i<n.sv_uc_callnameList.length;i++)t+='<li  data-id="0" data-name="chengwei"><span>'+n.sv_uc_callnameList[i]+'<\/span><i class="icon-edit edit"><\/i><i data-id="0" class="icon-trash delete"><\/i><\/li>';t+='<li class="saveshare"><button id="addMemberTitlegBtn" class="btn icon-plus"><\/button><\/li>';$("#memberTitleList").html(t)}$("#chengweicount").text(n.sv_uc_callnameList.length);layer.closeAll();layer.msg("\u79f0\u8c13\u6dfb\u52a0\u6539\u6210\u529f")}else n==-2?(layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"),layer.closeAll()):(layer.msg("\u6dfb\u52a0\u79f0\u8c13\u5931\u8d25"),layer.closeAll())})})});$(document).unbind("click","#addMemberTagBtn").on("click","#addMemberTagBtn",function(){layer.prompt({title:"\u6dfb\u52a0\u4f1a\u5458\u6807\u7b7e",formType:3,value2:"#db913d"},function(n,t,i,r){layer.load();$.post("/System/Update_Tag",{id:0,name:n,color:r},function(n){var t,i;if(n.r==!0){if(n.getSv_membertag.length>0){for(t="",i=0;i<n.getSv_membertag.length;i++)t+='<li class="tag" style="background-color: '+n.getSv_membertag[i].sv_mt_color+';">',t+='<img src="/skin_N3/images/tag-cover.png" alt="" /><span class="memberlabel">'+n.getSv_membertag[i].sv_mt_name+'<\/span><i data-id="'+n.getSv_membertag[i].membertag_id+'" class="deletememberlabel">\u00d7<\/i>',t+="<\/li>";t+='<li class="addmemberlabel"><button id="addMemberTagBtn" class="btn icon-plus"><\/button><\/li>';$("#memberTagList").html(t)}layer.closeAll();layer.msg("\u6dfb\u52a0\u6807\u7b7e\u6210\u529f")}else n==-2?(layer.closeAll(),layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01")):(layer.closeAll(),layer.msg("\u6dfb\u52a0\u6807\u7b7e\u5931\u8d25"))})})});$(document).unbind("click","#memberGroupingList .delete,#memberTitleList .delete").on("click","#memberGroupingList .delete,#memberTitleList .delete",function(){var n=$(this);layer.confirm("\u786e\u8ba4\u8981\u5220\u9664\u5417\uff1f",function(){n.parent().data("id")==0?(layer.load(),$.post("/System/Update_chengwei",{id:2,name:n.prev().prev().text(),name2:""},function(t){t.r==!0?(n.parent().remove(),layer.closeAll(),layer.msg("\u79f0\u8c13\u5220\u9664\u6210\u529f"),$("#chengweicount").text($("#chengweicount").text()-1)):t==-2?(layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"),layer.closeAll()):layer.msg("\u6dfb\u52a0\u79f0\u8c13\u5931\u8d25")})):(layer.load(),$.post("/System/Membergroup_dalete",{id:n.data("id")},function(t){layer.closeAll();t==!0?(layer.msg("\u5220\u9664\u5206\u7ec4\u6210\u529f"),n.parent().remove(),$("#fengzhucount").text(parseInt($("#fengzhucount").text())-1)):t==-2?(layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"),layer.close()):layer.msg("\u5220\u9664\u5206\u7ec4\u6210\u529f")}))})});$(document).on("click","#memberTagList .deletememberlabel",function(){var n=$(this);layer.confirm("\u786e\u8ba4\u8981\u5220\u9664\u9009\u4e2d\u7684\u6807\u7b7e\u5417\uff1f",function(){layer.load();$.post("/System/Update_Tag",{id:-1,name:n.data("id")},function(t){t.r==!0?(layer.closeAll(),n.parent().remove(),$("#tagcount").text($("#tagcount").text()-1),layer.msg("\u5220\u9664\u6807\u7b7e\u6210\u529f\uff01")):t==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):layer.msg("\u5220\u9664\u6807\u7b7e\u5931\u8d25")})})});def_system_getsalesConfig.then(function(){v();t();u();f();e()});l();$("#member_config .share_member_switch").click(function(){var n=$(this).siblings(".share_member_switch_input").prop("name");a(n)});$("#availableIntegral").click(function(){MembershipGradeGroupingIsON&&rankPromotionIsON&&s(!0)});$("#accumulativeIntegral").click(function(){MembershipGradeGroupingIsON&&rankPromotionIsON&&s(!1)})},productConfig:function(){function i(){g_AutomaticallyGenerateProductBarcode?$("#automaticallyGenerateProductBarcodeSwitch[name='AutomaticallyGenerateProductBarcode']").prop("checked",!0):$("#automaticallyGenerateProductBarcodeSwitch[name='AutomaticallyGenerateProductBarcode']").prop("checked",!1)}function f(n){var f,e,t,r,u,o;n=="AutomaticallyGenerateProductBarcode"&&(PreferentialTopUpGivingConfigList("AutomaticallyGenerateProductBarcode","AutomaticallyGenerateProductBarcode"),Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(e=Preferential_TopUpGiving_ConfigList[0].sv_detail_value,t=Preferential_TopUpGiving_ConfigList[0].sv_user_config_id,r=Preferential_TopUpGiving_ConfigList[0].sv_user_module_id,f=Preferential_TopUpGiving_ConfigList[0].sv_user_configdetail_id),g_AutomaticallyGenerateProductBarcode=!g_AutomaticallyGenerateProductBarcode,sv_user_module_config!=null&&(t=sv_user_module_config.sv_user_config_id,r=sv_user_module_config.sv_user_module_id),u=[],o={sv_user_configdetail_id:f,sv_detail_value:e,sv_user_config_id:t,sv_user_module_id:r,sv_detail_is_enable:g_AutomaticallyGenerateProductBarcode,sv_user_configdetail_name:"\u662f\u5426\u81ea\u52a8\u751f\u6210\u5546\u54c1\u7f16\u7801",sv_remark:"\u662f\u5426\u81ea\u52a8\u751f\u6210\u5546\u54c1\u7f16\u7801"},u.push(o),$.postAsyncContentJson("/UserModuleConfig/SaveConfigdetailList?moduleCode=AutomaticallyGenerateProductBarcode",u,function(n){n&&(n==1?(layer.msg("\u4fdd\u5b58\u6210\u529f"),i()):n==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):layer.msg("\u4fdd\u5b58\u5931\u8d25"))}))}function r(){var n=$("#inventoryWarningSwitch[name='InventoryWarning']").is(":checked");n?$("#saveSettingInventoryBtn").removeAttr("readonly"):$("#saveSettingInventoryBtn").attr("readonly","readonly")}function n(){var n="";$.getJSON("/ProductCustomProperties/GetProductAttributeConfiglist",function(t){var i,r;if(t&&t.length>0){for(i=0;i<t.length;i++){if($("#productAttrList").append(e.replace(/@name/g,t[i].sv_configname).replace(/@id/g,t[i].sv_productconfigid)),n+='<div class="integralswitch padd10" id="configid_'+t[i].sv_productconfigid+'">',n+='<span class="fl">'+t[i].sv_configname+"<\/span>",n+='<div class="testswitch">',n+=t[i].sv_is_open?'<input class="testswitch-checkbox" checked="checked" id="productAttr_'+t[i].sv_productconfigid+'" type="checkbox">':'<input class="testswitch-checkbox" id="productAttr_'+t[i].sv_productconfigid+'" type="checkbox">',n+='<label class="testswitch-label productAttr_switch" data-id="'+t[i].sv_productconfigid+'" for="productAttr_'+t[i].sv_productconfigid+'">',n+='<span class="testswitch-inner" data-on="\u542f\u7528" data-off="\u5173\u95ed"><\/span>',n+='<span class="testswitch-switch"><\/span>',n+="<\/label><\/div><\/div>",n+='<div class="shaerlabel"><ul id="attributedetailtext'+t[i].sv_productconfigid+'">',t[i].childList!=null&&t[i].childList.length>0)for(r=0;r<t[i].childList.length;r++)n+='<li data-detailid="'+t[i].childList[r].sv_producdetailid+'" data-name="'+t[i].childList[r].sv_productattributename+'" data-code="'+t[i].childList[r].sv_productattributecode+'" data-configid="'+t[i].sv_productconfigid+'">',n+="<span>"+t[i].childList[r].sv_productattributename+"<\/span>",n+='<i data-id="'+t[i].childList[r].sv_producdetailid+'" class="icon-edit edit"><\/i>',n+='<i data-id="'+t[i].childList[r].sv_producdetailid+'" class="icon-trash delete"><\/i><\/li>';n+='<li class="saveshare"><button data-configid='+t[i].sv_productconfigid+'  id="attributedetail'+t[i].sv_productconfigid+'" class="btn icon-plus addAttributeDetail"><\/button><\/li>';n+="<\/ul><\/div>"}$("#productAttrList").append(u);$("#productAttrBox").html(n);$("#productAttrBox_content").show(0)}else $("#productAttrBox_content").hide(0),$("#productAttrList").append(u)})}function t(n){$("#attributedetailtext"+n).empty();$.getJSON("/ProductCustomProperties/GetProductAttributeDetaillist",{configid:n},function(t){var r="",i;if(t!=null&&t.length>=1){for(i=0;i<t.length;i++)r+='<li data-detailid="'+t[i].sv_producdetailid+'" data-name="'+t[i].sv_productattributename+'" data-code="'+t[i].sv_productattributecode+'" data-configid="'+t[i].sv_productconfigid+'">',r+="<span>"+t[i].sv_productattributename+"<\/span>",r+='<i data-id="'+t[i].sv_producdetailid+'" class="icon-edit edit" ><\/i>',r+='<i data-id="'+t[i].sv_producdetailid+'" class="icon-trash delete"><\/i><\/li>';r+='<li class="saveshare"><button data-configid='+n+'  id="attributedetail'+n+'" class="btn icon-plus addAttributeDetail"><\/button><\/li>'}else r+='<li class="saveshare"><button data-configid='+n+'  id="attributedetail'+n+'" class="btn icon-plus addAttributeDetail"><\/button><\/li>';$("#attributedetailtext"+n).html(r)})}$("#system-nav li").eq(4).find("a").addClass("active");def_system_getsalesConfig.then(function(){i()});$("#product_config .share_member_switch").click(function(){var n=$(this).siblings(".share_member_switch_input").prop("name");f(n)});$("#minInventoryTipsTime").datetimepicker({initialDate:"",weekStart:1,todayBtn:0,autoclose:1,todayHighlight:1,startView:1,minView:0,maxView:1,startDate:new Date,forceParse:0,pickerPosition:"bottom-left",format:"hh:ii"});def_system_storagealertis.then(function(n){var i,t,u,f;if(n.sv_uc_storagealertis?$("#inventoryWarningSwitch[name='InventoryWarning']").prop("checked",!0):$("#inventoryWarningSwitch[name='InventoryWarning']").prop("checked",!1),r(),i=JSON.parse(n.sv_uc_storagealert),$("#minInventoryValue").val(i.alertvalue),$("#minInventoryTipsTime").val(i.alerttime),i.alertmethod==0?$("#websiteTips").prop("checked",!0):$("#phoneTips").prop("checked",!0),t=JSON.parse(n.sv_uc_unit),u="",t&&t.length>0){for(f=0;f<t.length;f++)u+='<li data-id="0" data-name="unit"><span>'+t[f]+'<\/span><i data-name="unit" data-id="0" class="icon-edit edit"><\/i><i data-name="unit" data-id="0" class="icon-trash delete"><\/i><\/li>';u+='<li class="saveshare"><button id="addProductUnit" class="btn icon-plus"><\/button><\/li>';$("#productUnitSetting").html(u)}});$("#saveSettingInventoryBtn").click(function(){var n=$("#inventoryWarningSwitch[name='InventoryWarning']").is(":checked");n?$.post("/System/Update_repertory2",{dats:JSON.stringify({alertvalue:$("#minInventoryValue").val().trim(),alertmethod:$(".select[name='selectstyle']:checked").data("id"),alerttime:$("#minInventoryTipsTime").val()})},function(n){n==!0?layer.msg("\u4fdd\u5b58\u6210\u529f\uff0c\u8bf7\u7ee7\u7eed\u64cd\u4f5c\uff01"):n==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):layer.msg("\u64cd\u4f5c\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01")}):layer.msg("\u8bf7\u542f\u7528\u5e93\u5b58\u9884\u8b66\uff0c\u5728\u6267\u884c\u8bbe\u7f6e\u64cd\u4f5c")});$("#inventoryWarning").click(function(){var n=$("#inventoryWarningSwitch").is(":checked");$.post("/System/Update_repertory",{kaiqi:!n},function(n){n==!0?layer.msg("\u4fdd\u5b58\u6210\u529f\uff0c\u8bf7\u7ee7\u7eed\u64cd\u4f5c\uff01"):n==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):layer.msg("\u64cd\u4f5c\u5931\u8d25\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01");r()})});$(document).unbind("click","#addProductUnit").on("click","#addProductUnit",function(){layer.prompt({title:"\u6dfb\u52a0\u5546\u54c1\u5355\u4f4d",formType:0},function(n){layer.load();$.post("/System/Update_danwei",{id:0,name:n,name2:""},function(n){var r,t,i;if(n.r==!0){for(r=n.sv_uc_unit,t="",i=0;i<r.length;i++)t+='<li data-id="0" data-name="unit"><span>'+r[i]+'<\/span><i data-name="unit" data-id="0" class="icon-edit edit"><\/i><i data-name="unit" data-id="0" class="icon-trash delete"><\/i><\/li>';t+='<li class="saveshare"><button id="addProductUnit" class="btn icon-plus"><\/button><\/li>';$("#productUnitSetting").html(t);layer.closeAll();layer.msg("\u5355\u4f4d\u6dfb\u52a0\u6539\u6210\u529f")}else n==-2?(layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"),layer.closeAll()):(layer.msg("\u6dfb\u52a0\u5355\u4f4d\u5931\u8d25"),layer.closeAll())})})});$(document).unbind("click","#productUnitSetting .edit").on("click","#productUnitSetting .edit",function(){var n=$(this).parent().text();layer.prompt({title:"\u4fee\u6539\u9009\u4e2d\u7684\u5355\u4f4d",value:n,formType:0},function(t){$.post("/System/Update_danwei",{id:1,name:t,name2:n},function(n){var r,t,i;if(n.r==!0){for(r=n.sv_uc_unit,t="",i=0;i<r.length;i++)t+='<li data-id="0" data-name="unit"><span>'+r[i]+'<\/span><i data-name="unit" data-id="0" class="icon-edit edit"><\/i><i data-name="unit" data-id="0" class="icon-trash delete"><\/i><\/li>';t+='<li class="saveshare"><button id="addProductUnit" class="btn icon-plus"><\/button><\/li>';$("#productUnitSetting").html(t);layer.closeAll();layer.msg("\u5355\u4f4d\u4fee\u6539\u6210\u529f")}else n==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):(layer.msg("\u5355\u4f4d\u5206\u7ec4\u5931\u8d25"),layer.closeAll())})})});$(document).unbind("click","#productUnitSetting .delete").on("click","#productUnitSetting .delete",function(){var n=$(this).parent().text();layer.load();$.post("/System/Update_danwei",{id:2,name:n,name2:""},function(n){var r,t,i;if(n.r==!0){for(r=n.sv_uc_unit,t="",i=0;i<r.length;i++)t+='<li data-id="0" data-name="unit"><span>'+r[i]+'<\/span><i data-name="unit" data-id="0" class="icon-edit edit"><\/i><i data-name="unit" data-id="0" class="icon-trash delete"><\/i><\/li>';t+='<li class="saveshare"><button id="addProductUnit" class="btn icon-plus"><\/button><\/li>';$("#productUnitSetting").html(t);layer.closeAll();layer.msg("\u5355\u4f4d\u5220\u9664\u6210\u529f")}else n==-2?(layer.closeAll(),layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01")):(layer.msg("\u5355\u4f4d\u5931\u8d25"),layer.closeAll())})});var e='<li data-id="@id" data-name="@name"><span>@name<\/span><i data-id="@id" class="icon-edit edit"><\/i><i data-id="@id" class="icon-trash delete"><\/i><\/li>',u='<li class="saveshare"><button id="addProductAttr" class="btn icon-plus"><\/button><\/li>';n();$(document).unbind("click","#addProductAttr").on("click","#addProductAttr",function(){layer.prompt({title:"\u6dfb\u52a0\u4ea7\u54c1\u81ea\u5b9a\u4e49\u7c7b\u522b",formType:0},function(t){layer.load();$.post("/ProductCustomProperties/AddProductAttributeConfiginfo",{configname:t},function(t){t==!0?($("#productAttrList").empty(),n(),layer.closeAll(),layer.msg("\u6dfb\u52a0\u914d\u7f6e\u6210\u529f")):t==-2?(layer.closeAll(),layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01")):t==-3?(layer.closeAll(),layer.msg("\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a\uff01")):t==3?(layer.closeAll(),layer.msg("\u540d\u79f0\u4e0d\u80fd\u91cd\u590d\uff01")):(layer.closeAll(),layer.msg("\u6dfb\u52a0\u914d\u7f6e\u5931\u8d25\uff01"))})})});$(document).unbind("click","#productAttrList .delete").on("click","#productAttrList .delete",function(){var t=$(this).data("id");layer.confirm("\u786e\u8ba4\u8981\u5220\u9664\u9009\u4e2d\u4ea7\u54c1\u914d\u7f6e\u5417\uff1f",function(){layer.load();$.post("/ProductCustomProperties/DeleteProductAttributeConfiginfo",{ConfigId:t},function(t){t==1?($("#productAttrList").empty(),n(),layer.closeAll(),layer.msg("\u5220\u9664\u914d\u7f6e\u6210\u529f")):t==-2?(layer.closeAll(),layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01")):(layer.closeAll(),layer.msg("\u5220\u9664\u914d\u7f6e\u5931\u8d25"))})})});$(document).unbind("click","#productAttrList .edit").on("click","#productAttrList .edit",function(){var t=$(this).data("id");layer.prompt({title:"\u4ea7\u54c1\u81ea\u5b9a\u4e49\u5c5e\u6027\u914d\u7f6e",value:$(this).parent().data("name"),formType:0},function(i){$.post("/ProductCustomProperties/UpdateProductAttributeConfiginfo",{configid:t,configname:i},function(t){t==1?($("#productAttrList").empty(),n(),layer.closeAll(),layer.msg("\u4ea7\u54c1\u81ea\u5b9a\u4e49\u5c5e\u6027\u914d\u7f6e\u4fee\u6539\u6210\u529f")):t==-2?(layer.closeAll(),layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01")):(layer.closeAll(),layer.msg("\u4ea7\u54c1\u81ea\u5b9a\u4e49\u5c5e\u6027\u914d\u7f6e\u4fee\u6539"))})})});$(document).unbind("click","#productAttrBox .productAttr_switch").on("click","#productAttrBox .productAttr_switch",function(){var t=$(this).data("id"),i=$("#productAttr_"+t).is(":checked");$.post("/ProductCustomProperties/SwitchOperation",{configIid:t,isswitch:!i},function(t){t==!0?($("#productAttrList").empty(),n(),layer.msg("\u4fdd\u5b58\u6210\u529f\uff0c\u8bf7\u7ee7\u7eed\u64cd\u4f5c\uff01")):t==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):layer.msg("\u64cd\u4f5c\u5931\u8d25\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01")})});$(document).on("click","#productAttrBox .addAttributeDetail",function(){var n=$(this).data("configid");layer.prompt({title:"\u4ea7\u54c1\u81ea\u5b9a\u4e49\u5c5e\u6027\u6dfb\u52a0",formType:0},function(i){layer.load();$.post("/ProductCustomProperties/AddProductAttributeDetailinfo",{configid:n,detailid:0,detailname:i},function(i){i==!0?(t(n),layer.closeAll(),layer.msg("\u6dfb\u52a0\u5c5e\u6027\u6210\u529f")):i==-2?(layer.closeAll(),layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01")):i==-3?(layer.closeAll(),layer.msg("\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a\uff01")):i==3?(layer.closeAll(),layer.msg("\u540d\u79f0\u4e0d\u80fd\u91cd\u590d\uff01")):(layer.closeAll(),layer.msg("\u6dfb\u52a0\u5c5e\u6027\u5931\u8d25"))})})});$(document).unbind("click","#productAttrBox .delete").on("click","#productAttrBox .delete",function(){var i=$(this).data("id"),n=$(this).parent().data("configid");layer.confirm("\u786e\u8ba4\u8981\u5220\u9664\u5417\uff1f",function(){layer.load();$.post("/ProductCustomProperties/DeleteProductAttributeDetailinfo",{configid:n,detailid:i},function(i){i==1?(t(n),layer.closeAll(),layer.msg("\u5220\u9664\u8bbe\u7f6e\u6210\u529f")):i==-2?(layer.closeAll(),layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01")):(layer.closeAll(),layer.msg("\u5220\u9664\u8bbe\u7f6e\u5931\u8d25"))})})});$(document).unbind("click","#productAttrBox .edit").on("click","#productAttrBox .edit",function(){var n=$(this).parent().data("configid"),i=$(this).parent().data("detailid");layer.prompt({title:"\u4ea7\u54c1\u81ea\u5b9a\u4e49\u5c5e\u6027\u4fee\u6539",value:$(this).parent().data("name"),formType:0},function(r){layer.load();$.post("/ProductCustomProperties/AddProductAttributeDetailinfo",{configid:n,detailid:i,detailname:r},function(i){i==!0?(t(n),layer.closeAll(),layer.msg("\u4fee\u6539\u5c5e\u6027\u6210\u529f")):i==-2?(layer.closeAll(),layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01")):i==-3?(layer.closeAll(),layer.msg("\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a\uff01")):i==3?(layer.closeAll(),layer.msg("\u540d\u79f0\u4e0d\u80fd\u91cd\u590d\uff01")):(layer.closeAll(),layer.msg("\u4fee\u6539\u5c5e\u6027\u5931\u8d25"))})})})},salesConfig:function(){function t(){SuccessionSwitch?$("#sv_succession_switch").prop("checked",!0):$("#sv_succession_switch").prop("checked",!1)}function i(){automaticDevanning?$("#sv_devanning_switch").prop("checked",!0):$("#sv_devanning_switch").prop("checked",!1)}function o(){g_ZeroInventorySalesQ?$("#sv_zeroInventorySales_switch").prop("checked",!0):$("#sv_zeroInventorySales_switch").prop("checked",!1)}function r(){MultiSpecification?$("#multi_specification_switch").prop("checked",!0):$("#multi_specification_switch").prop("checked",!1)}function u(){g_WhetherStartusingConsumptionMarket?$("#whetherStartusingConsumptionMarket_switch").prop("checked",!0):$("#whetherStartusingConsumptionMarket_switch").prop("checked",!1)}function s(){var t,n;_g_everyDaySerialNumber?$("#everyDaySerialNumber_switch").prop("checked",!0):$("#everyDaySerialNumber_switch").prop("checked",!1);$("#everyDaySerialNumberExpressions").val(serialNumberOfDailyExpressions);PreferentialTopUpGivingConfigList("EveryDaySerialNumber","EveryDaySerialNumber");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(t=Preferential_TopUpGiving_ConfigList[0].sv_detail_value,t&&(n=JSON.parse(t),$("#liushuihaotianchongwei").val(n.tianchong),$("#liushuihaochangdu").val(n.changdu),$("#liushuihaoqianzhui").val(n.qianzhui)))}function h(){g_ShareTheResults?$("#shareTheResultsSwitch[name='ShareTheResults']").prop("checked",!0):$("#shareTheResultsSwitch[name='ShareTheResults']").prop("checked",!1)}function c(){g_TraceabilityCode?$("#TraceabilityCode_switch").prop("checked",!0):$("#TraceabilityCode_switch").prop("checked",!1)}function f(f){var w,v,k,y,p,d,b,c,l,o,s,h,a,g;if(f=="ShareTheResults")PreferentialTopUpGivingConfigList("ShareTheResults","ShareTheResults"),Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(l=Preferential_TopUpGiving_ConfigList[0].sv_detail_value,o=Preferential_TopUpGiving_ConfigList[0].sv_user_config_id,s=Preferential_TopUpGiving_ConfigList[0].sv_user_module_id,c=Preferential_TopUpGiving_ConfigList[0].sv_user_configdetail_id),g_ShareTheResults=!g_ShareTheResults,sv_user_module_config!=null&&(o=sv_user_module_config.sv_user_config_id,s=sv_user_module_config.sv_user_module_id),w=[],a={sv_user_configdetail_id:c,sv_detail_value:l,sv_user_config_id:o,sv_user_module_id:s,sv_detail_is_enable:g_ShareTheResults,sv_user_configdetail_name:"\u662f\u5426\u5e73\u5206\u4e1a\u7ee9",sv_remark:"\u662f\u5426\u5e73\u5206\u4e1a\u7ee9"},w.push(a),$.postAsyncContentJson("/UserModuleConfig/SaveConfigdetailList?moduleCode=ShareTheResults",w,function(n){n&&(n==1?(layer.msg("\u4fdd\u5b58\u6210\u529f"),g_ShareTheResults?$("#shareTheResultsSwitch[name='ShareTheResults']").prop("checked",!0):$("#shareTheResultsSwitch[name='ShareTheResults']").prop("checked",!1)):n==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):layer.msg("\u4fdd\u5b58\u5931\u8d25"))});else if(f=="sv_uc_serialnumberset_btn"){if(v=$("#txtSysSetAutoNomber").val().trim(),v==""&&(v="1"),!v||isNaN(v)){layer.msg("\u81ea\u52a8\u6d41\u6c34\u53f7\u5fc5\u987b\u5168\u90e8\u4e3a\u6570\u5b57\uff0c\u6216\u6539\u7528\u6bcf\u65e5\u6d41\u6c34\u53f7\u8bbe\u7f6e\u975e\u6570\u5b57\u524d\u7f00\u3002");return}$.post("/System/updateUserinfo",{name:"sv_uc_serialnumberset",key:"nomber",valu:v},function(n){n==!0?layer.msg("\u4fdd\u5b58\u6210\u529f\uff0c\u8bf7\u7ee7\u7eed\u64cd\u4f5c\uff01"):n==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):n==-5?layer.msg("\u5f53\u524d\u8bbe\u7f6e\u7684\u6d41\u6c34\u53f7\u5fc5\u987b\u5927\u4e8e\u4e0a\u6b21\u8bbe\u7f6e\u7684\u6d41\u6c34\u53f7\uff01"):layer.msg("\u64cd\u4f5c\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01")})}else if(f=="sv_uc_dixian_btn")y=$("#sv_uc_dixian_switch").is(":checked"),y?$.post("/System/updateUserinfo",{name:"sv_uc_dixian",key:"auto",valu:$("#integral_input").val().trim()},function(n){n==!0?layer.msg("\u4fdd\u5b58\u6210\u529f\uff0c\u8bf7\u7ee7\u7eed\u64cd\u4f5c\uff01"):n==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):layer.msg("\u64cd\u4f5c\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01")}):layer.msg("\u5148\u542f\u7528\u79ef\u5206\u62b5\u73b0\u5f00\u5173\uff0c\u5728\u6267\u884c\u4fdd\u5b58\u8bbe\u7f6e\u64cd\u4f5c\uff01");else if(f=="sv_uc_saletozeroset_btn")k=$(".zero[name='selectstyle_zero']:checked").data("id"),y=$("#sv_uc_saletozeroset_switch").is(":checked"),y?$.post("/System/updateUserinfo",{name:"sv_uc_saletozeroset",key:"auto",valu:k},function(n){n==!0?layer.msg("\u4fdd\u5b58\u6210\u529f\uff0c\u8bf7\u7ee7\u7eed\u64cd\u4f5c\uff01"):n==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):layer.msg("\u64cd\u4f5c\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01")}):layer.msg("\u5148\u542f\u7528\u9500\u552e\u62b9\u96f6\u8bbe\u7f6e\u5f00\u5173\uff0c\u5728\u6267\u884c\u4fdd\u5b58\u8bbe\u7f6e\u64cd\u4f5c\uff01");else if(f=="everyDaySerialNumber"){if(y=$("#everyDaySerialNumber_switch").is(":checked"),p="",n("liushuihaoqianzhui")&&(p+=$("#liushuihaoqianzhui").val()),n("liushuihaochangdu")&&!n("liushuihaotianchongwei")){layer.msg("\u8bf7\u8f93\u5165\u586b\u5145\u5b57\u7b26");return}if(n("liushuihaotianchongwei")&&!n("liushuihaochangdu")){layer.msg("\u8bf7\u8f93\u5165\u6700\u5c0f\u957f\u5ea6");return}if(n("liushuihaotianchongwei")||n("liushuihaochangdu")||(p+="[]"),n("liushuihaotianchongwei")&&n("liushuihaochangdu"))for(d=parseInt($("#liushuihaochangdu").val()||1),b=0;b<d;b++)p+="["+$("#liushuihaotianchongwei").val()+"]";p!="[]"&&$("#everyDaySerialNumberExpressions").val(p);y?e():layer.msg("\u5148\u542f\u7528\u6bcf\u65e5\u6d41\u6c34\u53f7\u5f00\u5173\uff0c\u5728\u6267\u884c\u4fdd\u5b58\u8bbe\u7f6e\u64cd\u4f5c\uff01")}else f=="sv_succession"?(SuccessionSwitch=!SuccessionSwitch,PreferentialTopUpGivingConfigList("succession","succession"),Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(l=Preferential_TopUpGiving_ConfigList[0].sv_detail_value,o=Preferential_TopUpGiving_ConfigList[0].sv_user_config_id,s=Preferential_TopUpGiving_ConfigList[0].sv_user_module_id,c=Preferential_TopUpGiving_ConfigList[0].sv_user_configdetail_id),sv_user_module_config!=null&&(o=sv_user_module_config.sv_user_config_id,s=sv_user_module_config.sv_user_module_id),h=[],a={sv_user_configdetail_id:c,sv_detail_value:l,sv_user_config_id:o,sv_user_module_id:s,sv_detail_is_enable:SuccessionSwitch,sv_user_configdetail_name:"\u4ea4\u63a5\u73ed",sv_remark:"\u4ea4\u63a5\u73ed"},h.push(a),$.postAsyncContentJson("/UserModuleConfig/SaveConfigdetailList?moduleCode=succession",h,function(n){n&&(n==1?(t(),layer.msg("\u4fdd\u5b58\u6210\u529f"),getPrintSetingInfo()):n==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):layer.msg("\u4fdd\u5b58\u5931\u8d25"))})):f=="sv_devanning"?(automaticDevanning=!automaticDevanning,PreferentialTopUpGivingConfigList("SplitOpenACase","SplitOpenACase"),Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(l=Preferential_TopUpGiving_ConfigList[0].sv_detail_value,o=Preferential_TopUpGiving_ConfigList[0].sv_user_config_id,s=Preferential_TopUpGiving_ConfigList[0].sv_user_module_id,c=Preferential_TopUpGiving_ConfigList[0].sv_user_configdetail_id),sv_user_module_config!=null&&(o=sv_user_module_config.sv_user_config_id,s=sv_user_module_config.sv_user_module_id),h=[],a={sv_user_configdetail_id:c,sv_detail_value:l,sv_user_config_id:o,sv_user_module_id:s,sv_detail_is_enable:automaticDevanning,sv_user_configdetail_name:"\u662f\u5426\u81ea\u52a8\u62c6\u7bb1",sv_remark:"\u662f\u5426\u81ea\u52a8\u62c6\u7bb1"},h.push(a),$.postAsyncContentJson("/UserModuleConfig/SaveConfigdetailList?moduleCode=SplitOpenACase",h,function(n){n&&(n==1?(layer.msg("\u4fdd\u5b58\u6210\u529f"),getPrintSetingInfo(),i()):n==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):layer.msg("\u4fdd\u5b58\u5931\u8d25"))})):f=="everyDaySerialNumberInput"?(_g_everyDaySerialNumber=!_g_everyDaySerialNumber,e()):f=="multi_specification"?(MultiSpecification=!MultiSpecification,PreferentialTopUpGivingConfigList("MultiSpecification","MultiSpecification"),Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(l=Preferential_TopUpGiving_ConfigList[0].sv_detail_value,o=Preferential_TopUpGiving_ConfigList[0].sv_user_config_id,s=Preferential_TopUpGiving_ConfigList[0].sv_user_module_id,c=Preferential_TopUpGiving_ConfigList[0].sv_user_configdetail_id),sv_user_module_config!=null&&(o=sv_user_module_config.sv_user_config_id,s=sv_user_module_config.sv_user_module_id),h=[],a={sv_user_configdetail_id:c,sv_detail_value:l,sv_user_config_id:o,sv_user_module_id:s,sv_detail_is_enable:MultiSpecification,sv_user_configdetail_name:"\u662f\u5426\u663e\u793a\u591a\u89c4\u683c",sv_remark:"\u662f\u5426\u663e\u793a\u591a\u89c4\u683c"},h.push(a),$.postAsyncContentJson("/UserModuleConfig/SaveConfigdetailList?moduleCode=MultiSpecification",h,function(n){n&&(n==1?(layer.msg("\u4fdd\u5b58\u6210\u529f"),getPrintSetingInfo(),r()):n==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):layer.msg("\u4fdd\u5b58\u5931\u8d25"))})):f=="TraceabilityCode"?(g_TraceabilityCode=!g_TraceabilityCode,PreferentialTopUpGivingConfigList("TraceabilityCode","TraceabilityCode"),Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(l=Preferential_TopUpGiving_ConfigList[0].sv_detail_value,o=Preferential_TopUpGiving_ConfigList[0].sv_user_config_id,s=Preferential_TopUpGiving_ConfigList[0].sv_user_module_id,c=Preferential_TopUpGiving_ConfigList[0].sv_user_configdetail_id),sv_user_module_config!=null&&(o=sv_user_module_config.sv_user_config_id,s=sv_user_module_config.sv_user_module_id),h=[],a={sv_user_configdetail_id:c,sv_detail_value:l,sv_user_config_id:o,sv_user_module_id:s,sv_detail_is_enable:g_TraceabilityCode,sv_user_configdetail_name:"\u662f\u5426\u542f\u7528\u8ffd\u6eaf\u7801",sv_remark:"\u662f\u5426\u542f\u7528\u8ffd\u6eaf\u7801"},h.push(a),$.postAsyncContentJson("/UserModuleConfig/SaveConfigdetailList?moduleCode=TraceabilityCode",h,function(n){n&&(n==1?(layer.msg("\u4fdd\u5b58\u6210\u529f"),getPrintSetingInfo(),TraceabilityCodeShow()):n==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):layer.msg("\u4fdd\u5b58\u5931\u8d25"))})):f=="WhetherStartusingConsumptionMarket"?(g_WhetherStartusingConsumptionMarket=!g_WhetherStartusingConsumptionMarket,PreferentialTopUpGivingConfigList("WhetherStartusingConsumptionMarket","WhetherStartusingConsumptionMarket"),Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(l=Preferential_TopUpGiving_ConfigList[0].sv_detail_value,o=Preferential_TopUpGiving_ConfigList[0].sv_user_config_id,s=Preferential_TopUpGiving_ConfigList[0].sv_user_module_id,c=Preferential_TopUpGiving_ConfigList[0].sv_user_configdetail_id),sv_user_module_config!=null&&(o=sv_user_module_config.sv_user_config_id,s=sv_user_module_config.sv_user_module_id),h=[],a={sv_user_configdetail_id:c,sv_detail_value:l,sv_user_config_id:o,sv_user_module_id:s,sv_detail_is_enable:g_WhetherStartusingConsumptionMarket,sv_user_configdetail_name:"\u662f\u5426\u663e\u793a\u591a\u89c4\u683c",sv_remark:"\u662f\u5426\u663e\u793a\u591a\u89c4\u683c"},h.push(a),$.postAsyncContentJson("/UserModuleConfig/SaveConfigdetailList?moduleCode=WhetherStartusingConsumptionMarket",h,function(n){n&&(n==1?(layer.msg("\u4fdd\u5b58\u6210\u529f"),getPrintSetingInfo(),u()):n==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):layer.msg("\u4fdd\u5b58\u5931\u8d25"))})):f=="sv_zeroInventorySales"?(g_ZeroInventorySalesQ=!g_ZeroInventorySalesQ,PreferentialTopUpGivingConfigList("ZeroInventorySales","ZeroInventorySales"),Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(l=Preferential_TopUpGiving_ConfigList[0].sv_detail_value,o=Preferential_TopUpGiving_ConfigList[0].sv_user_config_id,s=Preferential_TopUpGiving_ConfigList[0].sv_user_module_id,c=Preferential_TopUpGiving_ConfigList[0].sv_user_configdetail_id),sv_user_module_config!=null&&(o=sv_user_module_config.sv_user_config_id,s=sv_user_module_config.sv_user_module_id),h=[],a={sv_user_configdetail_id:c,sv_detail_value:l,sv_user_config_id:o,sv_user_module_id:s,sv_detail_is_enable:g_ZeroInventorySalesQ,sv_user_configdetail_name:"\u662f\u5426\u5141\u8bb8\u96f6\u5e93\u5b58\u9500\u552e",sv_remark:"\u662f\u5426\u5141\u8bb8\u96f6\u5e93\u5b58\u9500\u552e"},h.push(a),$.postAsyncContentJson("/UserModuleConfig/SaveConfigdetailList?moduleCode=ZeroInventorySales",h,function(n){n&&(n==1?(layer.msg("\u4fdd\u5b58\u6210\u529f"),g_ZeroInventorySalesQ?$("#sv_zeroInventorySales_switch").prop("checked",!0):$("#sv_zeroInventorySales_switch").prop("checked",!1)):n==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):layer.msg("\u4fdd\u5b58\u5931\u8d25"))})):(g=$("#"+f+"_switch").is(":checked"),$.post("/System/updateUserinfo",{name:f,key:"whether",valu:!g},function(n){n==!0?layer.msg("\u4fdd\u5b58\u6210\u529f\uff0c\u8bf7\u7ee7\u7eed\u64cd\u4f5c\uff01"):n==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):layer.msg("\u64cd\u4f5c\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01")}))}function e(){var f,n,t,i,r,u,e;serialNumberOfDailyExpressions=$("#everyDaySerialNumberExpressions").val();serialNumberOfDailyExpressions==""&&(serialNumberOfDailyExpressions="[0][0][0][0][0][0]");t="";PreferentialTopUpGivingConfigList("EveryDaySerialNumber","EveryDaySerialNumber");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(i=Preferential_TopUpGiving_ConfigList[0].sv_user_config_id,r=Preferential_TopUpGiving_ConfigList[0].sv_user_module_id,f=Preferential_TopUpGiving_ConfigList[0].sv_user_configdetail_id,t=Preferential_TopUpGiving_ConfigList[0].sv_detail_value,t==""&&(t='{"datetime":"'+(new Date).getDate()+'","SerialNumberExpression":"'+serialNumberOfDailyExpressions+'","SerialNumber":"'+g_liushuihao+'","tianchong":"'+$("#liushuihaotianchongwei").val()+'","changdu":"'+$("#liushuihaochangdu").val()+'","qianzhui":"'+$("#liushuihaoqianzhui").val()+'"}'),n=JSON.parse(t),n.SerialNumberExpression=serialNumberOfDailyExpressions,n.qianzhui=$("#liushuihaoqianzhui").val(),n.changdu=$("#liushuihaochangdu").val(),n.tianchong=$("#liushuihaotianchongwei").val());sv_user_module_config!=null&&(i=sv_user_module_config.sv_user_config_id,r=sv_user_module_config.sv_user_module_id);u=[];e={sv_user_configdetail_id:f,sv_detail_value:JSON.stringify(n),sv_user_config_id:i,sv_user_module_id:r,sv_detail_is_enable:_g_everyDaySerialNumber,sv_user_configdetail_name:"\u662f\u5426\u542f\u7528\u6bcf\u65e5\u6d41\u6c34\u53f7",sv_remark:"\u662f\u5426\u542f\u7528\u6bcf\u65e5\u6d41\u6c34\u53f7"};u.push(e);$.postAsyncContentJson("/UserModuleConfig/SaveConfigdetailList?moduleCode=EveryDaySerialNumber",u,function(n){n&&(n==1?layer.msg("\u4fdd\u5b58\u6210\u529f"):n==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):layer.msg("\u4fdd\u5b58\u5931\u8d25"))})}function n(n){return(n="#"+n,$(n).val()==""||$(n).val()==null)?!1:!0}$("#system-nav li").eq(5).find("a").addClass("active");def_system_storagealertis.then(function(n){var r=JSON.parse(n.sv_uc_serialnumberset),t,i;r.whether?$("#sv_uc_serialnumberset_switch").prop("checked",!0):$("#sv_uc_serialnumberset_switch").prop("checked",!1);$("#txtSysSetAutoNomber").val(r.nomber);t=JSON.parse(n.sv_uc_dixian);t.whether?$("#sv_uc_dixian_switch").prop("checked",!0):$("#sv_uc_dixian_switch").prop("checked",!1);$("#integral_input").val(t.auto);i=JSON.parse(n.sv_uc_saletozeroset);i.whether?$("#sv_uc_saletozeroset_switch").prop("checked",!0):$("#sv_uc_saletozeroset_switch").prop("checked",!1);$(".zero[data-id="+i.auto+"]").prop("checked",!0);n.sv_uc_isenablepwd&&$("#sv_uc_isenablepwd_switch").prop("checked",!0);n.sv_isopen_commission&&$("#sv_isopen_commission_switch").prop("checked",!0)});def_system_getsalesConfig.then(function(){t();i();r();o();u();s();h();c()});$("#sales_config .share_sales_switch").click(function(){var n=$(this).siblings(".share_sales_switch_input").prop("name");f(n)});$("#sales_config .share_sales_save_btn").click(function(){var n=$(this).data("name");f(n)})},printConfig:function(){function u(n,t){var u=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),r=n.substr(1).match(u),i="";return r!=null&&(i=r[2]),u=null,r=null,i==null||i==""||i=="undefined"?"":i}function r(n){var i,r,u,t;if(n==4)$.getJSON("/system/Getprint",function(n){var r=JSON.parse(n.cof.sv_pfconfig),e,u,f,o,s,i,t;if(r){for(e="",r&&r.h&&r.h.split(",")&&(e=r.h.split(",")),u="",u||typeof r=="undefined"||typeof r.b=="undefined"||(u=r.b.split(",")),f="",f||typeof r=="undefined"||typeof r.f=="undefined"||(f=r.f.split(",")),o=r.q,s=r.l,i=0;i<e.length;i++)t="#print_custorm_1",t=i>9?t+i:t+"0"+i,e[i]==1?$(t).prop("checked",!0):($(t).prop("checked",!1),$(t+"_html").css("display","none"));for(i=0;i<u.length;i++)t="#print_custorm_2",t=i>8?t+i:t+"0"+i,u[i]==1?($(t).data("statetype")=="integral"?($("."+$(t).data("statetype")).prop("checked",!0),$(".product").prop("checked",!1)):$(t).data("statetype")=="product"&&($("."+$(t).data("statetype")).prop("checked",!0),$(".integral").prop("checked",!1)),$(t).prop("checked",!0),$(t+"_html").css("display","table-cell")):($(t).prop("checked",!1),$(t+"_html").css("display","none"),$(t+"_value").css("display","none"));for(i=0;i<f.length;i++)t="#print_custorm_3",t=i>14?t+i:t+"0"+i,f[i]==1?($(t).prop("checked",!0),i==11?$(t+"_html_txt").html(n.user.address):i==12||i==9?$(t+"_html_txt").html((new Date).Format("yyyy.MM.dd hh:mm:ss")):i==10&&$(t+"_html_txt").html(n.user.sv_ul_mobile)):($(t).prop("checked",!1),$(t+"_html").css("display","none"));o?($("#print_custorm_401").prop("checked",!0),o.ImageString&&$("#print_custorm_401_html img").attr("src",o.ImageString)):($("#print_custorm_401").prop("checked",!1),$("#print_custorm_401_html").css("display","none"),$("#print_custorm_401_img").css("display","none"));s?($("#print_custorm_400").prop("checked",!0),$("#print_custorm_400_html img").attr("src",s.ImageString)):($("#print_custorm_400").prop("checked",!1),$("#print_custorm_400_html").css("display","none"))}});else if(n==6){try{if(i=Cef.GetLocalPrinters(),i!=null&&i!="")for(r=JSON.parse(i),u="",t=0;t<r.length;t++)u+=' <option value="'+r[t]+'">'+r[t]+"<\/option>";$("#PrintSet_network_device").html(u);$("#PrintSet_default_device").html(u)}catch(f){disableButtonById("btnTestPrintSet")}getPrintSetingInfo();is_open_print!=null&&is_open_print.split("@").length>=1&&($("#PrintReceipts").val(is_open_print.split("@")[0]),Boolean(parseInt(is_open_print.split("@")[1]))?$(".PrintReceipts").prop("checked",!0):$(".PrintReceipts").prop("checked",!1))}}function f(){var n=[],r=new RegExp("^[0-5]*$"),u=new RegExp("^[1-5]*$"),t=$("#PrintSet_network").val().trim(),i=$("#PrintSet_default").val().trim(),f=$("#PrintSet_default_device").val(),e=$("#PrintSet_network_device").val();if(!r.test(t)||t>5){layer.msg("\u8bf7\u8f93\u5165\u6570\u5b57\uff0c\u5e76\u4e14\u6700\u591a\u53ea\u80fd\u6253\u53705\u4efd");$("#PrintSet_network").focus();return}if(!u.test(i)||i>5){layer.msg("\u8bf7\u8f93\u5165\u6570\u5b57\uff0c\u524d\u53f0\u6253\u5370\u673a\u53ea\u80fd\u8f93\u51651\u52305\u4efd");$("#PrintSet_default").focus();return}$(".form-txtPrint").each(function(){var t={sv_user_configdetail_id:parseInt($(this).attr("data-id")),sv_detail_value:$(this).val(),sv_user_config_id:parseInt($(this).attr("data-configid")),sv_user_module_id:parseInt($(this).attr("data-moduleid")),sv_detail_is_enable:!0,sv_user_configdetail_name:$(this).attr("data-name"),sv_remark:"\u6253\u5370\u673a\u8bbe\u7f6e"};n.push(t)});n.length!=0&&$.postAsyncContentJson("/UserModuleConfig/SaveConfigdetailList?moduleCode=SetTardware",n,function(n){n&&(n==1?(layer.msg("\u4fdd\u5b58\u6210\u529f"),getPrintSetingInfo()):n==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):layer.msg("\u4fdd\u5b58\u5931\u8d25"))})}var i,n,t;$("#system-nav li").eq(6).find("a").addClass("active");def_system_printLoad.then(function(n){var t=JSON.parse(n.sv_uc_dayin);$("[data-name='"+t.xiaopiao+"']").prop("checked",!0);t.xianzhe&&$("#tan").prop("checked",!0);t.yl&&$("#xian").prop("checked",!0);$("#print-nav a").eq(t.mo-1).addClass("active").click()});$("#print_custorm_400").on("click",function(){var n="#"+$(this).attr("id");$(this).is(":checked")?($(n+"_img").css("display","block"),$("#print_custorm_400_html img").attr("src",$(".showlogoImg").attr("src"))):($(n+"_img").css("display","none"),$("#print_custorm_400_html img").removeAttr("src"))});PreferentialTopUpGivingConfigList("PrintSeting","PrintSet_ExtraInfo");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(i=Preferential_TopUpGiving_ConfigList[0].sv_detail_value,$("#cus_print_extra_info").val(i));$("#print-nav a").click(function(){var i=$(this).index();$(this).addClass("active").siblings("a").removeClass("active");$(".shareleftbox:eq("+i+")").show(0).siblings(".shareleftbox").hide(0);var n=$(this).data("id"),t=$(this).attr("data-modularName"),f=$(this).attr("data-actionName");t&&t.length>0&&$.get("/PermissionsVerify/CheckFreeUserPowerByPowercode",{modularName:t,actionName:f,gobackpage:"/system/Index_N3"}).then(function(n){if(n&&isNullOrWhiteSpace(n))if(u(n,"sv_freeversioncontroltype")==0)layerpage.Deke_layerpage.getpage2("1","\u5f53\u524d\u7248\u672c\u4e3a\u201c\u514d\u8d39\u7248\u201d","/html/PermissionsPrompt.html?v=15",["400px","190"],freeVersionShowMsg,"");else window.location.href=n}).fail(function(){console.log("\u7cfb\u7edf\u7ba1\u7406\u6a21\u5757\u884c\u4e1a\u7279\u6027\u6743\u9650\u51fa\u9519\uff01")});n==4?($("#printsetting").hide(),$("#printtemplate").show(),$("li.customize-template").show(),r(n)):n==6?($("#printtemplate").hide(),$("li.customize-template").hide(),$("#printsetting").show(),r(n)):($("#printsetting").hide(),$("li.customize-template").hide(),$("#printtemplate").show())});$("#customizetemplatechecked").on("click",".selectPaper",function(){var t=$(this).is(":checked"),n;this.id=="product"?t?($(".product").prop("checked",!0),$(".integral").prop("checked",!1)):$(".product").prop("checked",!1):this.id=="integral"?t?($(".integral").prop("checked",!0),$(".product").prop("checked",!1)):$(".integral").prop("checked",!1):(n="#"+$(this).attr("id"),t?$(n+"_html").css("display","block"):$(n+"_html").css("display","none"),n=="#print_custorm_401"&&(t?$(n+"_img").css("display","none"):$(n+"_img").css("display","block")),n=="#print_custorm_400"&&(t?($(n+"_img").css("display","block"),$("#print_custorm_400_html img").attr("src",$("#logoid").attr("src"))):($(n+"_img").css("display","none"),$("#print_custorm_400_html img").removeAttr("src"))))});$("#yinlan").click(function(){$.getJSON("/system/Getprint",function(n){var t=typeof Cef;t!=="undefined"&&Cef.openMyPc("{}",JSON.stringify(n),1,$("#print-nav a.active").data("id"),""+receptionPtNum+"",receptionPtName)})});$("#baochunmoban").click(function(){var n=!1,t=!1,i="";$("#xian").is(":checked")&&(n=!0);$("#tan").is(":checked")&&(t=!0);i=$("[data-name='58']").is(":checked")?58:$("[data-name='80']").is(":checked")?80:$("[data-name='210']").is(":checked")?210:58;$("#print-nav a.active").attr("data-id")==4?$.get("/PermissionsVerify/GetPermissionsVerify?modularName=SystemManage&actionName=CustomPrintVerify",function(r){var o,e,u,f;if(isNullOrWhiteSpace(r))window.location.href=r;else{for(o={h:"",b:"",t:"",f:"",l:null,q:{ImageString:"",Width:100,Height:100,Align:1},p:0,a:1},e="",u=0;u<8;u++)f="#print_custorm_1",f=u>9?f+u:f+"0"+u,e+=$(f).is(":checked")?"1,":"0,";for(o.h=e.substring(0,e.length-1),e="",u=0;u<9;u++)f="#print_custorm_2",f=u>9?f+u:f+"0"+u,e+=$(f).is(":checked")?"1,":"0,";for(o.b=e.substring(0,e.length-1),e="",u=0;u<13;u++)f="#print_custorm_3",f=u>9?f+u:f+"0"+u,e+=$(f).is(":checked")?"1,":"0,";o.f=e.substring(0,e.length-1);o.l=$("#print_custorm_400").is(":checked")&&$("#print_custorm_400_html img").attr("src")?{ImageString:$("#print_custorm_400_html img").attr("src").replace("data:image/png;base64,","").replace("data:image/jpg;base64,",""),Width:50,Height:50,Align:1}:null;o.q=$("#print_custorm_401").is(":checked")?{ImageString:"",Width:100,Height:100,Align:1}:null;$.post("/system/updatedayin2",{mo:$("#print-nav a.active").data("id"),yl:n,bili:$("#bili").val(),xianzhe:t,xiaopiao:i,config:JSON.stringify(o)},function(n){layer.closeAll();loggin.chklogn(n);n==!0?(layer.msg("\u6a21\u677f\u8bbe\u7f6e\u6210\u529f"),$("#cus_print_extra_info").val()&&$.post("/UserModuleConfig/ConfigdetailUpSetting",{user_config_code:"PrintSet_ExtraInfo",config_value:$("#cus_print_extra_info").val()},function(){PreferentialTopUpGivingConfigList("PrintSeting","PrintSet_ExtraInfo");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(Preferential_TopUpGiving_ConfigList[0].sv_detail_value=$("#cus_print_extra_info").val())})):n==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):layer.msg("\u6a21\u677f\u8bbe\u7f6e\u5931\u8d25")})}}):$.post("/system/updatedayin",{mo:$("#print-nav a.active").data("id"),yl:n,bili:$("#bili").val(),xianzhe:t,xiaopiao:i},function(n){loggin.chklogn(n);n==!0?layer.msg("\u6a21\u677f\u8bbe\u7f6e\u6210\u529f"):n==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):layer.msg("\u6a21\u677f\u8bbe\u7f6e\u5931\u8d25")})});$("#btnSavePrintSet").click(function(){$.get("/PermissionsVerify/GetPermissionsVerify?modularName=SystemManage&actionName=CustomPrintVerify",function(n){isNullOrWhiteSpace(n)?window.location.href=n:f()})});$("#btnTestPrintSet").click(function(){try{if($("#PrintSet_network_device").val()!=null&&$("#PrintSet_network_device").val()!=""){var n=typeof Cef;n!=="undefined"&&Cef.TestPrinter($("#PrintSet_network_device").val())}else layer.msg("\u8bf7\u9009\u62e9\u6253\u5370\u673a")}catch(t){layer.msg("\u6d4b\u8bd5\u6253\u5370\u5931\u8d25\uff0c\u8bf7\u4e0b\u8f7d\u6700\u65b0\u7248\u5ba2\u6237\u7aef\uff01")}});$("#PrintSet_network_device_font_islabel").click(function(){var n=$("#PrintSet_default_device").val(),i,t;n!=null&&n!=""&&n!=undefined?(i={sv_user_configdetail_id:parseInt($(this).attr("data-id")),sv_detail_value:n,sv_user_config_id:parseInt($(this).attr("data-configid")),sv_user_module_id:parseInt($(this).attr("data-moduleid")),sv_detail_is_enable:!$(this).is(":checked")==!0?!1:!0,sv_user_configdetail_name:$(this).attr("data-name"),sv_remark:"\u524d\u53f0\u6807\u7b7e\u6253\u5370\u673a\u8bbe\u7f6e"},t=[],t.push(i),saveBackSelectLabel(t)):layer.msg("\u8bf7\u9009\u62e9\u8bbe\u5907\u6253\u5370\u673a")});$("#PrintSet_network_device_back_islabel").click(function(){var n=$("#PrintSet_network_device").val(),i,t;n!=null&&n!=""&&n!=undefined?(i={sv_user_configdetail_id:parseInt($(this).attr("data-id")),sv_detail_value:n,sv_user_config_id:parseInt($(this).attr("data-configid")),sv_user_module_id:parseInt($(this).attr("data-moduleid")),sv_detail_is_enable:!$(this).is(":checked")==!0?!1:!0,sv_user_configdetail_name:$(this).attr("data-name"),sv_remark:"\u540e\u53f0\u6807\u7b7e\u6253\u5370\u673a\u8bbe\u7f6e"},t=[],t.push(i),saveBackSelectLabel(t)):layer.msg("\u8bf7\u9009\u62e9\u8bbe\u5907\u6253\u5370\u673a")});$(".PrintSet_network_enable").click(function(){$.get("/PermissionsVerify/GetPermissionsVerify?modularName=SystemManage&actionName=CustomPrintVerify",function(n){isNullOrWhiteSpace(n)?window.location.href=n:printSetEnable($("#PrintSet_network_enable").attr("data-moduleId"),$("#PrintSet_network_enable").attr("data-configId"),!$("#PrintSet_network_enable").is(":checked"),"network")})});$("#PrintReceipts_switch").click(function(){var n=$("#PrintReceipts_").is(":checked")==!0?!1:!0;$.post("/UserModuleConfig/ConfigdetailOperate",{id:$("#PrintReceipts").val(),valu:n},function(n){n.state?($("#PrintReceipts").val(n.id),layer.msg("\u4fdd\u5b58\u6210\u529f")):layer.msg("\u64cd\u4f5c\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01")})});n={ipOrName:"",port:"",count:"",labelPrinter:"",printerType:"",position:"front",whetherToEnablenable:""};t={ipOrName:"",port:"",count:"",labelPrinter:"",printerType:"",position:"backstage",whetherToEnablenable:""};setTimeout(function(){if(PreferentialTopUpGivingConfigList("AndroidPrinterConfig","AndroidPrinterConfig"),Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0){var n=$.parseJSON(Preferential_TopUpGiving_ConfigList[0].sv_detail_value);n&&(n[0].whetherToEnablenable&&$("#AndroidFront_switch[data-name='AndroidFront']").prop("checked",!0),n[1].whetherToEnablenable&&$("#AndroidBackstage_switch[data-name='AndroidBackstage']").prop("checked",!0),n[0].printerType=="usb"?($("#AndroidFrontUSB").prop("checked",!0),$("#AndroidFrontUSBName").html("<option>"+n[0].ipOrName+"<\/option>"),$("#AndroidFrontUSBCount").val(n[0].count),n[0].labelPrinter&&$("#AndroidFrontUSBLabel").prop("checked",!0)):($("#AndroidFrontNetwork").prop("checked",!0),$("#AndroidFrontNetworkName").val(n[0].ipOrName),$("#AndroidFrontNetworkPort").val(n[0].port),$("#AndroidFrontNetworkCount").val(n[0].count),n[0].labelPrinter&&$("#AndroidFrontNetworkLabel").prop("checked",!0)),n[1].printerType=="usb"?($("#AndroidBackstageUSB").prop("checked",!0),$("#AndroidBackstageUSBName").html("<option>"+n[1].ipOrName+"<\/option>"),$("#AndroidBackstageFrontCount").val(n[1].count),n[1].labelPrinter&&$("#AndroidBackstageUSBLabel").prop("checked",!0)):($("#AndroidBackstageNetwork").prop("checked",!0),$("#AndroidBackstageNetworkName").val(n[1].ipOrName),$("#AndroidBackstageNetworkPort").val(n[1].port),$("#AndroidBackstageNetworkCount").val(n[1].count),n[1].labelPrinter&&$("#AndroidBackstageNetworkLabel").prop("checked",!0)))}decerpbrowser&&decerpbrowser.versions&&decerpbrowser.versions.android&&cordova.plugins.barcodeScanner.usbchoose(function(t){var r=JSON.parse(t),u,f,i;if(r&&r.length>0){for(u="",f="",i=0;i<r.length;i++)u+=r[i]==n[0].ipOrName?"<option value="+r[i]+">"+r[i]+"<\/option>":"<option value="+r[i]+">"+r[i]+"<\/option>",f+=r[i]==n[1].ipOrName?"<option value="+r[i]+">"+r[i]+"<\/option>":"<option value="+r[i]+">"+r[i]+"<\/option>";for($("#AndroidFrontUSBName").html(u),$("#AndroidBackstageUSBName").html(f),i=0;i<r.length;i++)r[i]==n[0].ipOrName&&$("#AndroidFrontUSBName").val(r[i]),r[i]==n[1].ipOrName&&$("#AndroidBackstageUSBName").val(r[i])}},function(n){layer.msg("\u8bfb\u53d6\u6253\u5370\u673a\u5217\u8868\u5931\u8d25: "+n)},{myPrintData:""})},500);$("#SaveAndroidPrinterConfig").click(function(){var e,s,r,u,i,f,o;n.whetherToEnablenable=$("#AndroidFront_switch[data-name='AndroidFront']").is(":checked")?!0:!1;t.whetherToEnablenable=$("#AndroidBackstage_switch[data-name='AndroidBackstage']").is(":checked")?!0:!1;$("#AndroidFrontUSB").is(":checked")?(n.printerType="usb",n.ipOrName=$("#AndroidFrontUSBName").val(),n.port="",n.count=$("#AndroidFrontUSBCount").val(),n.labelPrinter=$("#AndroidFrontUSBLabel").is(":checked")):(n.printerType="network",n.ipOrName=$("#AndroidFrontNetworkName").val(),n.port=$("#AndroidFrontNetworkPort").val(),n.count=$("#AndroidFrontNetworkCount").val(),n.labelPrinter=$("#AndroidFrontNetworkLabel").is(":checked"));$("#AndroidBackstageUSB").is(":checked")?(t.printerType="usb",t.ipOrName=$("#AndroidBackstageUSBName").val(),t.port="",t.count=$("#AndroidBackstageFrontCount").val(),t.labelPrinter=$("#AndroidBackstageUSBLabel").is(":checked")):(t.printerType="network",t.ipOrName=$("#AndroidBackstageNetworkName").val(),t.port=$("#AndroidBackstageNetworkPort").val(),t.count=$("#AndroidBackstageNetworkCount").val(),t.labelPrinter=$("#AndroidBackstageNetworkLabel").is(":checked"));PreferentialTopUpGivingConfigList("AndroidPrinterConfig","AndroidPrinterConfig");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(s=Preferential_TopUpGiving_ConfigList[0].sv_detail_value,r=Preferential_TopUpGiving_ConfigList[0].sv_user_config_id,u=Preferential_TopUpGiving_ConfigList[0].sv_user_module_id,e=Preferential_TopUpGiving_ConfigList[0].sv_user_configdetail_id);sv_user_module_config!=null&&(r=sv_user_module_config.sv_user_config_id,u=sv_user_module_config.sv_user_module_id);i=[];i.push(n);i.push(t);f=[];o={sv_user_configdetail_id:e,sv_detail_value:JSON.stringify(i),sv_user_config_id:r,sv_user_module_id:u,sv_detail_is_enable:!0,sv_user_configdetail_name:"android\u6253\u5370\u673a\u914d\u7f6e",sv_remark:"android\u6253\u5370\u673a\u914d\u7f6e"};f.push(o);$.postAsyncContentJson("/UserModuleConfig/SaveConfigdetailList?moduleCode=AndroidPrinterConfig",f,function(n){n&&(n==1?layer.msg("\u4fdd\u5b58\u6210\u529f"):n==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):layer.msg("\u4fdd\u5b58\u5931\u8d25"))})});$("#TestAndroidPrinter").unbind("click").click(function(){var t,i,n;try{if(t={HeaderList:[{Content:"\u5c0f\u5e973",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:0},{Content:"\u5fae\u4fe1:123",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:0},{Content:"\u5355\u53f7\uff1a1505700137",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0},{Content:"\u6536\u94f6\u5458\uff1a\u7ba1\u7406\u5458",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0},{Content:"..........................................................",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0},{Content:"\u5546\u54c1        \u5355\u4ef7    \u6570\u91cf \u5c0f\u8ba1 ",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}],BodyList:[{Content:"\u5229\u4ec1LR-280A\u7535\u997c\u94db,179,1,179",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0},{Content:"\u54c7\u54c8\u54c8200ml,199,1,199",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0},{Content:"\u597d\u5403\u7684\u98df\u7269,150,1,150",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0}],TitleList:[{Content:"\u5546\u54c1",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:10},{Content:"\u5355\u4ef7",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:5},{Content:"\u6570\u91cf",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:4},{Content:"\u5c0f\u8ba1",Columns:1,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,Width:5}],FooterList:[{Content:"..........................................................",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0},{Content:"\u5546\u54c1\u603b\u6570\uff1a 3",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0},{Content:"\u91d1\u989d\u5408\u8ba1\uff1a \u00a5 528.00",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0},{Content:"\u652f\u4ed8\u65b9\u5f0f\uff1a\u73b0\u91d1 ",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0},{Content:"\u6536\u6b3e\uff1a\u00a5 528.00",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0},{Content:"\u7535\u8bdd\uff1a020-88888888",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0},{Content:"\u9500\u552e\u65f6\u95f4\uff1a2017/09/26 16:41:55",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0},{Content:"\u5e97\u94fa\u5730\u5740\uff1a\u5c0f\u5e973",Columns:1,RowNum:2,RowMaxLength:10,Align:0,TextFont:0,Width:0},{Content:"\u8c22\u8c22\u60e0\u987e\uff0c\u6b22\u8fce\u4e0b\u6b21\u5149\u4e34",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0},{Content:"\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014\u2014-",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,Width:0},{Content:"\u6e29\u99a8\u63d0\u793a\uff0c\u4ea7\u54c1\u6700\u4f73\u5c1d\u5473\u671f\u4e3a\uff12\u5c0f\u65f6\uff0c\u90e8\u5206\u4ea7\u54c1\u6709\u73cd\u73e0\u7b49\u9897\u7c92\u914d\u6599\uff0c\u8bf7\uff13\u5c81\u4ee5\u4e0b\u513f\u7528\u65f6\u9700\u8981\u6210\u4eba\u966a\u540c\u3002[WIFI\u540d\u5b57:GONGCHA WIFI\u5bc6\u7801:aigongcha\uff3d\u6211\u4eec\u4e13\u6ce8\u81ea\u5df1\u559c\u7684\u8336\u996e,\u6211\u4eec\u5e0c\u671b\u7528\u4e00\u676f\u597d\u8336,\u6fc0\u53d1\u4f60\u5bf9\u751f\u6d3b\u7684\u8ffd\u6c42.\u65e0\u8bba\u4f60\u662f\u4e00\u4e2a\u6562\u4e8e\u6d4b\u8bd5\u65b0\u9c9c\u4e8b\u7269\u7684\u4eba,\u8fd8\u662f\u4e00\u4e2a\u5bfb\u89c5\u5206\u6b67\u7684\u54c1\u8336\u4f53\u9a8c\u4eba,\u5728\u5fa1\u53ef\u8d21\u8336\u90fd\u80fd\u5bfb\u89c5\u5230\u9002\u5408\u4f60\u7684\u4e00\u6b3e\u8336!",Columns:1,RowNum:2,RowMaxLength:10,Align:0,TextFont:0,Width:0},{Content:"",Columns:1,RowNum:2,RowMaxLength:10,Align:0,TextFont:0,Width:0},{Content:"",Columns:1,RowNum:2,RowMaxLength:10,Align:0,TextFont:0,Width:0},{Content:"",Columns:1,RowNum:2,RowMaxLength:10,Align:0,TextFont:0,Width:0},{Content:"",Columns:1,RowNum:2,RowMaxLength:10,Align:0,TextFont:0,Width:0},{Content:"",Columns:1,RowNum:2,RowMaxLength:10,Align:0,TextFont:0,Width:0},{Content:"",Columns:1,RowNum:2,RowMaxLength:10,Align:0,TextFont:0,Width:0}],LogoData:null,QRCodeData:null,Action:1,PageType:0,PagePadding:0},i={FooterList:[{Content:"\u5355\u53f7:1505700138\u5e8f\u53f7:1/3",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,TextFontSize:8,Width:0},{Content:"\u54c7\u54c8\u54c8\u4e00\u7bb1",Columns:1,RowNum:3,RowMaxLength:10,Align:0,TextFont:0,TextFontSize:10,Width:0},{Content:"",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,TextFontSize:10,Width:0},{Content:"\uffe5500\u5143",Columns:2,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,TextFontSize:8,Width:0},{Content:"\u3010\u5c0f\u5e973\u3011",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,TextFontSize:7,Width:0},{Content:"\u7535\u8bdd:020-88888888\u8c22\u8c22\u60e0\u987e!",Columns:1,RowNum:1,RowMaxLength:10,Align:0,TextFont:0,TextFontSize:7,Width:0},{Content:"16:58",Columns:2,RowNum:1,RowMaxLength:10,Align:1,TextFont:0,TextFontSize:7,Width:0}],QRCodeData:null,Action:1,PageType:4,PagePadding:10},$("#AndroidFrontUSB").is(":checked"))n=null,$("#AndroidFrontUSBLabel").is(":checked")?(n=i,cordova.plugins.barcodeScanner.barcodexconnect(function(){},function(n){layer.msg("\u6807\u7b7eUSB\u6253\u5370\u5931\u8d25: "+n)},{myPrintData:JSON.stringify(n)})):(n=t,cordova.plugins.barcodeScanner.barcodexconnect(function(){},function(n){layer.msg("USB\u5c0f\u7968\u6253\u5370\u6253\u5370\u5931\u8d25: "+n)},{printConfig:JSON.stringify({type:"usb",name:$("#AndroidFrontUSBName").val(),copies:$("#AndroidFrontUSBCount").val(),isLabel:$("#AndroidFrontUSBLabel").is(":checked")}),myPrintData:JSON.stringify(t)}));else return;return}catch(r){}})},hardwareConfig:{Android:function(){function n(){$.getJSON("/UserModuleConfig/GetUserModuleConfigList?module_code=Set_Pos_T1_SecondScreen",function(n){var t,r,i,e,u,f;if(n!=null&&(t=n.childInfolist,t!=null&&t.length>0))for(r=0;r<t.length;r++)if(t[r].childDetailList&&t[r].childDetailList.length>0)if(i=t[r].childDetailList[0],i!=null)if(i.sv_detail_is_enable){if($("#"+t[r].sv_user_config_code).val(i.sv_detail_value).attr("data-id",i.sv_user_configdetail_id).attr("data-moduleid",n.sv_user_module_id).attr("data-configid",t[r].sv_user_config_id),$("#"+t[r].sv_user_config_code).attr("data-value",i.sv_detail_value),$("#Set_Pos_T1_SecondScreen_Enable").prop("checked",!0),$("#androiddisplay").show(0),t[r].sv_user_config_code=="Set_Pos_T1_SecondScreen_Size"&&(i.sv_detail_value=="true"?($("#Set_Pos_T1_SecondScreen_Size1").attr("checked",!0),$("#displayblockphoto li:eq(0)").children("img").attr("src","../../images/Size14.png")):($("#Set_Pos_T1_SecondScreen_Size0").attr("checked",!0),$("#displayblockphoto li.siez14").hide())),t[r].sv_user_config_code=="Set_Pos_T1_SecondScreen_Style"&&(i.sv_detail_value>=0&&$("#displayblockphoto li").eq(i.sv_detail_value).addClass("active"),i.sv_detail_value==2||i.sv_detail_value==3?($("#uploadfileboxvideo").hide(),$("#uploadfileboxsunmi").show()):i.sv_detail_value==4||i.sv_detail_value==5?($("#uploadfileboxsunmi").hide(),$("#uploadfileboxvideo").show()):($("#uploadfileboxsunmi").hide(),$("#uploadfileboxvideo").hide())),t[r].sv_user_config_code=="Set_Pos_T1_SecondScreen_Images"&&i.sv_detail_value){for(e=i.sv_detail_value.split(","),u="",$("#uploadfileboxsunmi .photoimagesbox").remove(),f=0;f<e.length;f++)u+='<li class="photoimagesbox filebox_img">',u+='<img src="'+e[f]+'"><button type="button" class="btn deletephoto deletethisimg">\u5220\u9664<\/button>',u+="<\/li>",console.log(e[f]);$("#uploadfileboxsunmi").prepend(u)}t[r].sv_user_config_code=="Set_Pos_T1_SecondScreen_Video"&&$("#Set_Pos_T1_SecondScreen_Video").val(i.sv_detail_value||"")}else $("#Set_Pos_T1_SecondScreen_Enable").prop("checked",!1),$("#androiddisplay").hide(0);else $("#"+t[r].sv_user_config_code).attr("data-id",0).attr("data-moduleid",n.sv_user_module_id).attr("data-configid",t[r].sv_user_config_id)})}function t(){var t=layer.load(1,{shade:[.1,"#000"]}),i=[],r,n;if($("#Set_Pos_T1_SecondScreen_Size").attr("data-value",$("#Set_Pos_T1_SecondScreen_Size1").is(":checked")),$("#Set_Pos_T1_SecondScreen_Style").attr("data-value",$("#displayblockphoto li.active").index()),r="",$("#uploadfileboxsunmi .photoimagesbox")&&$("#uploadfileboxsunmi .photoimagesbox").length>0)for(n=0;n<$("#uploadfileboxsunmi .photoimagesbox").length;n++)r+=n==$("#uploadfileboxsunmi .photoimagesbox").length-1?$("#uploadfileboxsunmi .photoimagesbox").eq(n).children("img").attr("src"):$("#uploadfileboxsunmi .photoimagesbox").eq(n).children("img").attr("src")+",";$("#Set_Pos_T1_SecondScreen_Images").attr("data-value",r);$("#Set_Pos_T1_SecondScreen_Video").attr("data-value",$("#Set_Pos_T1_SecondScreen_Video").val());$(".form-Set_Hardware_T1SecondScreen").each(function(){var n={sv_user_configdetail_id:parseInt($(this).attr("data-id")),sv_detail_value:$(this).attr("data-value"),sv_user_config_id:parseInt($(this).attr("data-configid")),sv_user_module_id:parseInt($(this).attr("data-moduleid")),sv_detail_is_enable:!0,sv_user_configdetail_name:$(this).attr("data-name"),sv_remark:"\u5b89\u5353\u5546\u7c73T1\u5206\u5c4f\u8bbe\u7f6e"};i.push(n)});i.length!=0&&$.postAsyncContentJson("/UserModuleConfig/SaveConfigdetailList?moduleCode=Set_Pos_T1_SecondScreen",i,function(n){n&&(n==1?(layer.close(t),layer.msg("\u4fdd\u5b58\u6210\u529f")):n==-2?(layer.close(t),layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01")):(layer.close(t),layer.msg("\u4fdd\u5b58\u5931\u8d25")))})}$("#system-nav li").eq(7).find("a").addClass("active");$("#btn_androidhardware_cashbox").click(function(){try{cordova.plugins.barcodeScanner.open(function(){},function(n){layer.msg("\u6253\u5370\u94b1\u7bb1\u5931\u8d25: "+n)},{})}catch(n){layer.msg("\u6253\u5370\u94b1\u7bb1\u5931\u8d25: "+n.message)}});$("#btn_androidhardware_testprint").click(function(){try{cordova.plugins.barcodeScanner.printtest(function(){},function(n){layer.msg(n.message)},{myPrintData:"\u6253\u5370\u6d4b\u8bd5"})}catch(n){layer.msg(n.message)}});n();$(document).on("click","#displayblockphoto>li",function(){var n=$(this).index();$(this).addClass("active").siblings("li").removeClass("active");n==2?($("#displayview").html('<span>\u4e0a\u4f20\u56fe\u7247<\/span><span>(\u5df2\u9009\u5e03\u5c403)<\/span><span><i type="button" class="tips tipss icon-question-sign" data-content="\u8bf4\u660e\uff1a\u5efa\u8bae\u7684\u56fe\u7247\u5927\u5c0f\u4e3a1024*600\uff0c\u4e0a\u4f20\u4e8c\u5f20\u6216\u4ee5\u4e0a\u4e3a\u5e7b\u706f\u7247\u56fe\u7247\u3002" data-original-title="" title=""><\/i><\/span>'),$("#uploadfileboxsunmi").show(),$("#uploadfileboxvideo").hide()):n==3?($("#uploadfileboxsunmi").show(),$("#uploadfileboxvideo").hide(),$("#displayview").html('<span>\u4e0a\u4f20\u56fe\u7247<\/span><span>(\u5df2\u9009\u5e03\u5c404)<\/span><span><i type="button" class="tips tipss icon-question-sign" data-content="\u8bf4\u660e\uff1a\u5efa\u8bae\u7684\u56fe\u7247\u5927\u5c0f\u4e3a1980*1080\uff0c\u4e0a\u4f20\u4e8c\u5f20\u6216\u4ee5\u4e0a\u4e3a\u5e7b\u706f\u7247\u56fe\u7247\u3002" data-original-title="" title=""><\/i><\/span>')):n==4?($(".displayview").html("<span>\u914d\u7f6e\u89c6\u9891\u8def\u5f84<\/span><span>(\u5df2\u9009\u5e03\u5c405)<\/span>"),$("#uploadfileboxsunmi").hide(),$("#uploadfileboxvideo").show()):n==5?($("#displayview").html("<span>\u914d\u7f6e\u89c6\u9891\u8def\u5f84<\/span><span>(\u5df2\u9009\u5e03\u5c406)<\/span>"),$("#uploadfileboxsunmi").hide(),$("#uploadfileboxvideo").show()):($("#displayview").html("<span>(\u5df2\u9009\u5e03\u5c40"+(n+1)+")<\/span>"),$("#uploadfileboxsunmi").hide(),$("#uploadfileboxvideo").hide())});$(document).on("click","#Set_Pos_T1_SecondScreen_Size0",function(){$(this).is(":checked")&&($("#displayblockphoto li").each(function(n){$("#displayblockphoto li:eq("+n+")").hasClass&&($("#displayblockphoto li:eq("+n+")").removeClass("active"),$("#displayblockphoto li:eq(0)").addClass("active"))}),$("#uploadfileboxsunmi").hide(),$("#displayblockphoto").children("li.siez14").hide(),$("#displayblockphoto li:eq(0)").children("img").attr("src","../../images/screenbg1.png"))});$(document).on("click","#Set_Pos_T1_SecondScreen_Size1",function(){$(this).is(":checked")&&($("#displayblockphoto li").each(function(n){$("#displayblockphoto li:eq("+n+")").hasClass&&($("#displayblockphoto li:eq("+n+")").removeClass("active"),$("#displayblockphoto li:eq(0)").addClass("active"))}),$("#displayblockphoto li:eq(0)").children("img").attr("src","../../images/Size14.png"),$("#displayblockphoto").children("li").show())});$("#btn_androidhardware_uploadimg").on("click",function(){function n(n){$.postJson("http://qode.decerp.cc/api/Images/SaveBase64Image",{UserId:user_id||0,Base64Img:n},function(n){if(n&&n.succeed){n&&n.values&&n.values.indexOf("http://")<0&&(n.values=_g_res_images_url+n.values.replace("\\","/"));var t='<li class="photoimagesbox filebox_img"><img src="'+n.values+'"><button type="button" class="btn deletephoto deletethisimg">\u5220\u9664<\/button><\/li>';$(t).insertBefore(".filebox_img")}})}function t(n){layer.msg("Failed because: "+n)}navigator.camera.getPicture(n,t,{quality:50,destinationType:Camera.DestinationType.DATA_URL,sourceType:Camera.PictureSourceType.SAVEDPHOTOALBUM,MediaType:Camera.MediaType.ALLMEDIA})});$(document).on("click",".deletethisimg",function(){$(this).parent(".displayimg").remove()});$("#btn_android_SaveSetHardware").on("click",function(){$.get("/PermissionsVerify/GetPermissionsVerify?modularName=SystemManage&actionName=CustomPrintVerify",function(n){isNullOrWhiteSpace(n)?window.location.href=n:t()})});$(document).unbind("click",".Set_Pos_T1_SecondScreen_Enable").on("click",".Set_Pos_T1_SecondScreen_Enable",function(){$.get("/PermissionsVerify/GetPermissionsVerify?modularName=SystemManage&actionName=CustomPrintVerify",function(t){if(isNullOrWhiteSpace(t))window.location.href=t;else{var i=!$("#Set_Pos_T1_SecondScreen_Enable").is(":checked")==!0?!1:!0;$.postAsyncJson("/UserModuleConfig/ConfigdetailSetHardwareOperates",{valu:i,muid:17},function(t){t==!0?(layer.msg("\u8bbe\u7f6e\u6210\u529f\uff01"),n()):layer.msg("\u8bbe\u7f6e\u5931\u8d25\uff01")})}})})},PC:function(){function r(n,t){for(var i=0;i<n.length;i++)if(n[i].sv_user_module_code==t)return n[i]}function u(){$.getJSON("/UserModuleConfig/GetUserModuleConfigList?module_code=SetTardware",function(n){var t,i,r;if(n!=null&&(console.log(n),t=n.childInfolist,t!=null&&t.length>0))for(i=0;i<t.length;i++)t[i].childDetailList&&t[i].childDetailList.length>0&&(r=t[i].childDetailList[0],r!=null?r.sv_detail_is_enable?($("#"+t[i].sv_user_config_code).val(r.sv_detail_value).attr("data-id",r.sv_user_configdetail_id).attr("data-moduleid",n.sv_user_module_id).attr("data-configid",t[i].sv_user_config_id),$("#setTardware_PC").prop("checked",!0),$("#show_setTardware,#show_setTardware_sava_box").css("display","block")):$("#show_setTardware,#show_setTardware_sava_box").css("display","none"):$("#"+t[i].sv_user_config_code).attr("data-id",0).attr("data-moduleid",n.sv_user_module_id).attr("data-configid",t[i].sv_user_config_id))})}function f(){if($("#SetTardware_type").val()=="2"){layer.msg("\u6682\u4e0d\u652f\u6301");return}var n=[];$(".form-setTardware").each(function(){var t={sv_user_configdetail_id:parseInt($(this).attr("data-id")),sv_detail_value:$(this).val(),sv_user_config_id:parseInt($(this).attr("data-configid")),sv_user_module_id:parseInt($(this).attr("data-moduleid")),sv_detail_is_enable:!0,sv_user_configdetail_name:$(this).attr("data-name"),sv_remark:"IC\u5361\u8bbe\u7f6e"};n.push(t)});n.length!=0&&$.postAsyncContentJson("/UserModuleConfig/SaveConfigdetailList?moduleCode=SetTardware",n,function(n){n&&(n==1?(layer.msg("\u4fdd\u5b58\u6210\u529f"),_g_is_ic_pwd=$("#SetTardware_pwd").val(),u()):n==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):layer.msg("\u4fdd\u5b58\u5931\u8d25"))})}function a(){$.getJSON("/UserModuleConfig/GetUserModuleConfigList?module_code=Set_Hardware_CusDisplay",function(n){var t,i,r;if(n!=null&&(t=n.childInfolist,t!=null&&t.length>0))for(i=0;i<t.length;i++)r=t[i].childDetailList[0],r!=null?r.sv_detail_is_enable?($("#"+t[i].sv_user_config_code).val(r.sv_detail_value).attr("data-id",r.sv_user_configdetail_id).attr("data-moduleid",n.sv_user_module_id).attr("data-configid",t[i].sv_user_config_id),$("#setHardwareCusDisplay").prop("checked",!0),$("#show_setHardwareCusDisplay").css("display","block")):$("#show_setHardwareCusDisplay").css("display","none"):$("#"+t[i].sv_user_config_code).attr("data-id",0).attr("data-moduleid",n.sv_user_module_id).attr("data-configid",t[i].sv_user_config_id)})}function e(){var n=[];$(".form-setHardwareCusDisplay").each(function(){var t={sv_user_configdetail_id:parseInt($(this).attr("data-id")),sv_detail_value:$(this).val(),sv_user_config_id:parseInt($(this).attr("data-configid")),sv_user_module_id:parseInt($(this).attr("data-moduleid")),sv_detail_is_enable:!0,sv_user_configdetail_name:$(this).attr("data-name"),sv_remark:"\u5ba2\u663e\u914d\u7f6e"};n.push(t)});n.length!=0&&$.postAsyncContentJson("/UserModuleConfig/SaveConfigdetailList?moduleCode=Set_Hardware_CusDisplay",n,function(n){n&&(n==1?(layer.msg("\u4fdd\u5b58\u6210\u529f"),u()):n==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):layer.msg("\u4fdd\u5b58\u5931\u8d25"))})}function o(){$.getJSON("/UserModuleConfig/GetUserModuleConfigList?module_code=Set_Hareware_Scale",function(n){var t,i,r;if(n!=null&&(t=n.childInfolist,t!=null&&t.length>0))for(i=0;i<t.length;i++)r=t[i].childDetailList[0],r!=null?r.sv_detail_is_enable?($("#"+t[i].sv_user_config_code).val(r.sv_detail_value).attr("data-id",r.sv_user_configdetail_id).attr("data-moduleid",n.sv_user_module_id).attr("data-configid",t[i].sv_user_config_id),$("#Set_Hareware_Scale").prop("checked",!0),$("#show_Set_Hareware_Scale").css("display","block")):$("#show_Set_Hareware_Scale").css("display","none"):$("#"+t[i].sv_user_config_code).attr("data-id",0).attr("data-moduleid",n.sv_user_module_id).attr("data-configid",t[i].sv_user_config_id)})}function s(){var n=[];$(".form-Set_Hareware_Scale").each(function(){var t={sv_user_configdetail_id:parseInt($(this).attr("data-id")),sv_detail_value:$(this).val(),sv_user_config_id:parseInt($(this).attr("data-configid")),sv_user_module_id:parseInt($(this).attr("data-moduleid")),sv_detail_is_enable:!0,sv_user_configdetail_name:$(this).attr("data-name"),sv_remark:"\u7535\u5b50\u79e4\u8bbe\u7f6e"};n.push(t)});n.length!=0&&$.postAsyncContentJson("/UserModuleConfig/SaveConfigdetailList?moduleCode=Set_Hareware_Scale",n,function(n){n&&(n==1?(layer.msg("\u4fdd\u5b58\u6210\u529f"),o()):n==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):layer.msg("\u4fdd\u5b58\u5931\u8d25"))})}function h(){WeighingStableAutomaticDetermine?$("#WeighingStableAutomaticDetermine").prop("checked",!0):$("#WeighingStableAutomaticDetermine").prop("checked",!1)}function c(){$.getJSON("/UserModuleConfig/GetUserModuleConfigList?module_code=Set_Hardware_SecondScreen",function(n){var t,i,r;if(n!=null&&(t=n.childInfolist,t!=null&&t.length>0))for(i=0;i<t.length;i++)r=t[i].childDetailList[0],r!=null?r.sv_detail_is_enable?($("#"+t[i].sv_user_config_code).val(r.sv_detail_value).attr("data-id",r.sv_user_configdetail_id).attr("data-moduleid",n.sv_user_module_id).attr("data-configid",t[i].sv_user_config_id),$("#"+t[i].sv_user_config_code).attr("src",_g_res_images_url+r.sv_detail_value),$("#Set_Hardware_SecondScreen").prop("checked",!0),$("#show_Set_Hardware_SecondScreen").css("display","block")):$("#show_Set_Hardware_SecondScreen").css("display","none"):$("#"+t[i].sv_user_config_code).attr("data-id",0).attr("data-moduleid",n.sv_user_module_id).attr("data-configid",t[i].sv_user_config_id)})}function l(){var n=[];$(".form-Set_Hardware_SecondScreen").each(function(){var t,i,r;$(this).attr("src")&&(t=$(this).attr("src"),t.indexOf("http://")>-1?(i=$(this).attr("src").indexOf("/UploadImg"),t=$(this).attr("src").substr(i)):t=$(this).attr("src"));r={sv_user_configdetail_id:parseInt($(this).attr("data-id")),sv_detail_value:t,sv_user_config_id:parseInt($(this).attr("data-configid")),sv_user_module_id:parseInt($(this).attr("data-moduleid")),sv_detail_is_enable:!0,sv_user_configdetail_name:$(this).attr("data-name"),sv_remark:"\u5206\u5c4f\u8bbe\u7f6e"};n.push(r)});n.length!=0&&$.postAsyncContentJson("/UserModuleConfig/SaveConfigdetailList?moduleCode=Set_Hardware_SecondScreen",n,function(n){n&&(n==1?(layer.msg("\u4fdd\u5b58\u6210\u529f"),c()):n==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):layer.msg("\u4fdd\u5b58\u5931\u8d25"))})}var i,n,t;$("#system-nav li").eq(7).find("a").addClass("active");def_system_getHardwareConfig.then(function(n){var f,t,i,u;if(n&&n.moduleConfigList&&typeof n.moduleConfigList!=undefined&&n.moduleConfigList.length>0&&(hardwareConfig=n.moduleConfigList,f=r(hardwareConfig,"SetTardware"),t=f.childInfolist,t!=null&&t.length>0))for(i=0;i<t.length;i++)t[i].childDetailList&&t[i].childDetailList.length>0&&(u=t[i].childDetailList[0],u!=null?u.sv_detail_is_enable?($("#"+t[i].sv_user_config_code).val(u.sv_detail_value).attr("data-id",u.sv_user_configdetail_id).attr("data-moduleid",f.sv_user_module_id).attr("data-configid",t[i].sv_user_config_id),$("#setTardware_PC").prop("checked",!0),$("#show_setTardware,#show_setTardware_sava_box").css("display","block")):$("#show_setTardware,#show_setTardware_sava_box").css("display","none"):$("#"+t[i].sv_user_config_code).attr("data-id",0).attr("data-moduleid",f.sv_user_module_id).attr("data-configid",t[i].sv_user_config_id))});$(document).unbind("click","#setTardware_PC_Switch").on("click","#setTardware_PC_Switch",function(){$.get("/PermissionsVerify/GetPermissionsVerify?modularName=SystemManage&actionName=CustomPrintVerify",function(n){if(isNullOrWhiteSpace(n))window.location.href=n;else{var t=!$("#setTardware_PC").is(":checked")==!0?!1:!0;$.postAsyncJson("/UserModuleConfig/ConfigdetailSetHardwareOperate",{valu:t},function(n){n==!0?t?(u(),$("#show_setTardware,#show_setTardware_sava_box").css("display","block"),$("#SetTardware_port").attr("data-id")=="0"&&f(),layer.msg("'\u8bbe\u7f6e\u6210\u529f,\u9000\u51fa\u91cd\u65b0\u767b\u5f55\u751f\u6548\uff01")):$("#show_setTardware,#show_setTardware_sava_box").css("display","none"):layer.msg("\u8bbe\u7f6e\u5931\u8d25\uff01")})}})});if($("#btnSaveSetHardware").click(function(){$.get("/PermissionsVerify/GetPermissionsVerify?modularName=SystemManage&actionName=CustomPrintVerify",function(n){isNullOrWhiteSpace(n)?window.location.href=n:f()})}),$("#btnInitialization").click(function(){$.get("/PermissionsVerify/GetPermissionsVerify?modularName=SystemManage&actionName=CustomPrintVerify",function(n){var n,i,u,f,r,t;if(isNullOrWhiteSpace(n))window.location.href=n;else try{if(_g_is_ic_type==1){if(n=Cef.ReadICCardNoWithPwd(_g_is_ic_pwd,!0),n.indexOf("\u8bbe\u5907")>=0)layer.msg("\u8bfb\u5361\u5931\u8d25\uff1a"+n);else if(i=JSON.parse(n),i)if(i.Success||i.Success=="true"||i.Success=="True"){for(u="",f=0;f<i.Message.length;f++)u+="f";if(r=Cef.WriteICCardNoWithPwd(u,"ffffff"),r&&(t=JSON.parse(r),t))return t.Success||t.Success=="true"||t.Success=="True"?(layer.msg("IC\u5361\u521d\u59cb\u5316\u6210\u529f\uff01"),!0):(layer.msg("IC\u5361\u521d\u59cb\u5316\u5931\u8d25\uff1a"+t.Message),!1)}else layer.msg("\u8bfb\u5361\u5931\u8d25\uff1a"+i.Message)}else if(_g_is_ic_type==0&&(r=Cef.URFResetICCard(_g_is_ic_pwd),r&&(t=JSON.parse(r),t)))return t.Success||t.Success=="true"||t.Success=="True"?(layer.msg("IC\u5361\u521d\u59cb\u5316\u6210\u529f\uff01"),!0):(layer.msg("IC\u5361\u521d\u59cb\u5316\u5931\u8d25\uff1a"+t.Message),!1)}catch(e){layer.msg("IC\u5361\u521d\u59cb\u5316\u5931\u8d25")}})}),$("#btnTestICCard").click(function(){var n,t;try{n={Success:!1};_g_is_ic_type==1?n=Cef.CheckICDevice():_g_is_ic_type==0&&(n=Cef.URFCheckICDevice());t=JSON.parse(n);t.Success||t.Success=="true"||t.Success=="True"?layer.msg("\u8bbe\u5907\u6d4b\u8bd5\u8fde\u63a5\u6210\u529f\uff01"):layer.msg("\u8bbe\u5907\u6d4b\u8bd5\u8fde\u63a5\u5931\u8d25\uff01")}catch(i){layer.msg("\u8bbe\u5907\u6d4b\u8bd5\u8fde\u63a5\u5931\u8d25\uff01")}}),def_system_getHardwareConfig.then(function(n){var f,t,i,u;if(n&&n.moduleConfigList&&typeof n.moduleConfigList!=undefined&&n.moduleConfigList.length>0&&(hardwareConfig=n.moduleConfigList,f=r(hardwareConfig,"Set_Hardware_CusDisplay"),t=f.childInfolist,t!=null&&t.length>0))for(i=0;i<t.length;i++)t[i].childDetailList&&t[i].childDetailList.length>0&&(u=t[i].childDetailList[0],u!=null?u.sv_detail_is_enable?($("#"+t[i].sv_user_config_code).val(u.sv_detail_value).attr("data-id",u.sv_user_configdetail_id).attr("data-moduleid",f.sv_user_module_id).attr("data-configid",t[i].sv_user_config_id),$("#setHardwareCusDisplay").prop("checked",!0),$("#show_setHardwareCusDisplay").css("display","block")):$("#show_setHardwareCusDisplay").css("display","none"):$("#"+t[i].sv_user_config_code).attr("data-id",0).attr("data-moduleid",f.sv_user_module_id).attr("data-configid",t[i].sv_user_config_id))}),typeof Cef!="undefined"&&(i=Cef.GetComList(),i&&($("#Set_Hardware_CusDisplay_Port").empty(),n=JSON.parse(i),n&&n.length>0)))for(t=0;t<n.length;t++)$("#Set_Hardware_CusDisplay_Port").append(' <option value="'+n[t]+'">'+n[t]+"<\/option>");$(document).unbind("click","#setHardwareCusDisplay_switch").on("click","#setHardwareCusDisplay_switch",function(){$.get("/PermissionsVerify/GetPermissionsVerify?modularName=SystemManage&actionName=CustomPrintVerify",function(n){if(isNullOrWhiteSpace(n))window.location.href=n;else{var t=!$("#setHardwareCusDisplay").is(":checked")==!0?!1:!0;$.postAsyncJson("/UserModuleConfig/ConfigdetailSetHardwareOperates",{valu:t,muid:7},function(n){n==!0?t?($("#show_setHardwareCusDisplay").css("display","block"),a(),$("#show_setHardwareCusDisplay_port").attr("data-id")=="0"&&e(),layer.msg("\u4fdd\u5b58\u6210\u529f\uff01")):($("#show_setHardwareCusDisplay").css("display","none"),layer.msg("\u4fdd\u5b58\u6210\u529f\uff01")):layer.msg("\u8bbe\u7f6e\u5931\u8d25\uff01")})}})});$("#btn_setHardwareCusDisplay_save").click(function(){$.get("/PermissionsVerify/GetPermissionsVerify?modularName=SystemManage&actionName=CustomPrintVerify",function(n){isNullOrWhiteSpace(n)?window.location.href=n:e()})});$("#show_setHardwareCusDisplay_demo_price").on("click",function(){typeof Cef!="undefined"&&$("#Set_Hardware_CusDisplay_Port").val()&&$("#Set_Hardware_CusDisplay_Baud").val()&&Cef.CustomerDisplay($("#Set_Hardware_CusDisplay_Port").val(),parseInt($("#Set_Hardware_CusDisplay_Baud").val()),"One",8,1,$("#show_setHardwareCusDisplay_demo_price_value").val())});$("#show_setHardwareCusDisplay_demo_total").on("click",function(){typeof Cef!="undefined"&&$("#Set_Hardware_CusDisplay_Port").val()&&$("#Set_Hardware_CusDisplay_Baud").val()&&Cef.CustomerDisplay($("#Set_Hardware_CusDisplay_Port").val(),parseInt($("#Set_Hardware_CusDisplay_Baud").val()),"One",8,2,$("#show_setHardwareCusDisplay_demo_total_value").val())});$("#show_setHardwareCusDisplay_demo_receive").on("click",function(){typeof Cef!="undefined"&&$("#Set_Hardware_CusDisplay_Port").val()&&$("#Set_Hardware_CusDisplay_Baud").val()&&Cef.CustomerDisplay($("#Set_Hardware_CusDisplay_Port").val(),parseInt($("#Set_Hardware_CusDisplay_Baud").val()),"One",8,3,$("#show_setHardwareCusDisplay_demo_receive_value").val())});$("#show_setHardwareCusDisplay_demo_change").on("click",function(){typeof Cef!="undefined"&&$("#Set_Hardware_CusDisplay_Port").val()&&$("#Set_Hardware_CusDisplay_Baud").val()&&Cef.CustomerDisplay($("#Set_Hardware_CusDisplay_Port").val(),parseInt($("#Set_Hardware_CusDisplay_Baud").val()),"One",8,4,$("#show_setHardwareCusDisplay_demo_change_value").val())});if(def_system_getHardwareConfig.then(function(n){var f,t,i,u;if(n&&n.moduleConfigList&&typeof n.moduleConfigList!=undefined&&n.moduleConfigList.length>0&&(hardwareConfig=n.moduleConfigList,f=r(hardwareConfig,"Set_Hareware_Scale"),t=f.childInfolist,t!=null&&t.length>0))for(i=0;i<t.length;i++)t[i].childDetailList&&t[i].childDetailList.length>0&&(u=t[i].childDetailList[0],u!=null?u.sv_detail_is_enable?($("#"+t[i].sv_user_config_code).val(u.sv_detail_value).attr("data-id",u.sv_user_configdetail_id).attr("data-moduleid",f.sv_user_module_id).attr("data-configid",t[i].sv_user_config_id),$("#Set_Hareware_Scale").prop("checked",!0),$("#show_Set_Hareware_Scale").css("display","block")):$("#show_Set_Hareware_Scale").css("display","none"):$("#"+t[i].sv_user_config_code).attr("data-id",0).attr("data-moduleid",f.sv_user_module_id).attr("data-configid",t[i].sv_user_config_id))}),typeof Cef!="undefined"&&(i=Cef.GetComList(),i&&($("#Set_Hareware_Scale_Port").empty(),n=JSON.parse(i),n&&n.length>0)))for(t=0;t<n.length;t++)$("#Set_Hareware_Scale_Port").append(' <option value="'+n[t]+'">'+n[t]+"<\/option>");$("#btn_setHardwareScale_save").click(function(){$.get("/PermissionsVerify/GetPermissionsVerify?modularName=SystemManage&actionName=CustomPrintVerify",function(n){isNullOrWhiteSpace(n)?window.location.href=n:s()})});def_system_getsalesConfig.then(function(){h()});$("#WeighingStableAutomaticDetermine_Switch").click(function(){var r,u,n,t,i,f;WeighingStableAutomaticDetermine=!WeighingStableAutomaticDetermine;PreferentialTopUpGivingConfigList("WeighingStableAutomaticDetermine","WeighingStableAutomaticDetermine");Preferential_TopUpGiving_ConfigList!=null&&Preferential_TopUpGiving_ConfigList.length>0&&(u=Preferential_TopUpGiving_ConfigList[0].sv_detail_value,n=Preferential_TopUpGiving_ConfigList[0].sv_user_config_id,t=Preferential_TopUpGiving_ConfigList[0].sv_user_module_id,r=Preferential_TopUpGiving_ConfigList[0].sv_user_configdetail_id);sv_user_module_config!=null&&(n=sv_user_module_config.sv_user_config_id,t=sv_user_module_config.sv_user_module_id);i=[];f={sv_user_configdetail_id:r,sv_detail_value:u,sv_user_config_id:n,sv_user_module_id:t,sv_detail_is_enable:WeighingStableAutomaticDetermine,sv_user_configdetail_name:"\u79f0\u91cd\u7a33\u5b9a\u540e\u662f\u5426\u81ea\u52a8\u786e\u5b9a",sv_remark:"\u79f0\u91cd\u7a33\u5b9a\u540e\u662f\u5426\u81ea\u52a8\u786e\u5b9a"};i.push(f);$.postAsyncContentJson("/UserModuleConfig/SaveConfigdetailList?moduleCode=succession",i,function(n){n&&(n==1?(layer.msg("\u4fdd\u5b58\u6210\u529f"),h()):n==-2?layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01"):layer.msg("\u4fdd\u5b58\u5931\u8d25"))})});$(document).unbind("click","#Set_Hareware_Scale_Switch").on("click","#Set_Hareware_Scale_Switch",function(){$.get("/PermissionsVerify/GetPermissionsVerify?modularName=SystemManage&actionName=CustomPrintVerify",function(n){if(isNullOrWhiteSpace(n))window.location.href=n;else{var t=!$("#Set_Hareware_Scale").is(":checked")==!0?!1:!0;$.postAsyncJson("/UserModuleConfig/ConfigdetailSetHardwareOperates",{valu:t,muid:9},function(n){n==!0?(t?($("#show_Set_Hareware_Scale").css("display","block"),o(),$("#show_Set_Hareware_Scale_port").attr("data-id")=="0"&&s()):$("#show_Set_Hareware_Scale").css("display","none"),layer.msg("\u8bbe\u7f6e\u6210\u529f\uff01")):layer.msg("\u8bbe\u7f6e\u5931\u8d25\uff01")})}})});$("#Set_Hareware_Scale_demo").on("click",function(){if($("#Set_Hareware_Scale_Port").val()&&$("#Set_Hareware_Scale_Baud").val()&&typeof Cef!="undefined")var n="",t=setInterval(function(){var r,u,f,i;try{if($("#Set_Hareware_Scale_Type").val()==1){if(n=Cef.DHGetWeight($("#Set_Hareware_Scale_Port").val(),parseInt($("#Set_Hareware_Scale_Baud").val())),n&&($("#Set_Hareware_Scale_demo_value")&&$("#Set_Hareware_Scale_demo_value").length!=0||clearInterval(t),i=n,i&&(i=i.trim(),r=i.split(" "),r&&r.length>0)))for(u=0;u<r.length;u++){f=parseInt(r[u])/1e3;f>0&&$("#Set_Hareware_Scale_demo_value").val(f);isRealNum(f)||layer.msg("\u5927\u534e\u7535\u5b50\u79e4\uff1aread="+n);break}}else n=Cef.GetWeight($("#Set_Hareware_Scale_Port").val(),parseInt($("#Set_Hareware_Scale_Baud").val())),n&&($("#Set_Hareware_Scale_demo_value")&&$("#Set_Hareware_Scale_demo_value").length!=0||clearInterval(t),i=JSON.parse(n),$("#Set_Hareware_Scale_demo_value").val(i.Weight),isRealNum(i.Weight)||layer.msg("\u9876\u5c16\u7535\u5b50\u79e4\uff1aread="+n))}catch(e){clearInterval(t);layer.msg(e.message+","+n)}},500)});def_system_getHardwareConfig.then(function(n){var f,t,i,u;if(n&&n.moduleConfigList&&typeof n.moduleConfigList!=undefined&&n.moduleConfigList.length>0&&(hardwareConfig=n.moduleConfigList,f=r(hardwareConfig,"Set_Hardware_SecondScreen"),t=f.childInfolist,t!=null&&t.length>0))for(i=0;i<t.length;i++)t[i].childDetailList&&t[i].childDetailList.length>0&&(u=t[i].childDetailList[0],t[i].childDetailList&&t[i].childDetailList.length>0&&(u!=null?u.sv_detail_is_enable?($("#"+t[i].sv_user_config_code).val(u.sv_detail_value).attr("data-id",u.sv_user_configdetail_id).attr("data-moduleid",f.sv_user_module_id).attr("data-configid",t[i].sv_user_config_id),$("#"+t[i].sv_user_config_code).attr("src",_g_res_images_url+u.sv_detail_value),$("#Set_Hardware_SecondScreen").prop("checked",!0),$("#show_Set_Hardware_SecondScreen").css("display","block")):$("#show_Set_Hardware_SecondScreen").css("display","none"):$("#"+t[i].sv_user_config_code).attr("data-id",0).attr("data-moduleid",f.sv_user_module_id).attr("data-configid",t[i].sv_user_config_id)))});$("#btn_Set_Hardware_SecondScreen_save").click(function(){$.get("/PermissionsVerify/GetPermissionsVerify?modularName=SystemManage&actionName=CustomPrintVerify",function(n){isNullOrWhiteSpace(n)?window.location.href=n:l()})});$("#btn_Set_Hardware_SecondScreen_upload").on("click",function(){$("#fileToUpload").trigger("click")});$(document).on("change","#fileToUpload",function(){$.commonUploadImg("fileToUpload","SecondScreen","false",function(n){n&&$("#Set_Hardware_SecondScreen_URL").attr("src",_g_res_images_url+n)})});$(document).unbind("click","#Set_Hardware_SecondScreen_Switch").on("click","#Set_Hardware_SecondScreen_Switch",function(){var n=commonOpenLoading();$.get("/PermissionsVerify/GetPermissionsVerify?modularName=SystemManage&actionName=CustomPrintVerify",function(t){if(isNullOrWhiteSpace(t))window.location.href=t;else{var i=$("#Set_Hardware_SecondScreen").is(":checked");$.postAsyncJson("/UserModuleConfig/ConfigdetailSetHardwareOperates",{valu:i,muid:8},function(t){t==!0?(i?($("#show_Set_Hardware_SecondScreen").css("display","block"),c(),$("#show_Set_Hardware_SecondScreen").attr("data-id")=="0"&&l()):$("#show_Set_Hardware_SecondScreen").css("display","none"),layer.msg("\u4fdd\u5b58\u6210\u529f\uff01")):layer.msg("\u8bbe\u7f6e\u5931\u8d25\uff01");commonCloseLoading(n)})}})})}},dataManagement:function(){function t(n,t){$.ajax({type:"POST",url:"http://api.decerp.cc/system/CheckoutCode?moble="+t+"&code="+n,dataType:"json",success:function(n){if(n.succeed!=!0)return layer.msg("\u9a8c\u8bc1\u7801\u4e0d\u6b63\u786e"),!1;i()}})}function i(){var n=$("#dataManagementUl input[name='dataManagement']:checked");layer.confirm("\u521d\u59cb\u5316\u5e97\u94fa\u6570\u636e\u5c06\u65e0\u6cd5\u6062\u590d\uff0c\u786e\u8ba4\u521d\u59cb\u5316\uff1f",{btn:["\u786e\u8ba4","\u53d6\u6d88"]},function(){var f="";if(n.each(function(){f+=$(this).data("id")+","}),layer.close(layer.index),f==""){layer.msg("\u8bf7\u9009\u62e9\u8981\u6e05\u9664\u7684\u5bf9\u8c61");return}var t=0,i=0,r=0,u=0,e=null,o=$.Deferred(),h=$.Deferred(),c=$.Deferred(),s=!1;$.get("/System/GetClearDataRowCount2",{seid:f},function(n){n&&n>0&&(t=n);c.resolve()});c.then(function(){if(!(t>0)){if(t==-2||t==-5){layer.close();layer.msg("\u4f60\u6ca1\u6709\u8be5\u64cd\u4f5c\u6743\u9650\uff01");return}if(t==0){layer.close();layer.msg("\u6ca1\u6709\u53ef\u6e05\u9664\u7684\u6570\u636e\uff01");return}layer.close();layer.msg("\u5220\u9664\u5931\u8d25");return}if(t>0)layer.close(),layer.closeAll(),$("#progress_clear_userdata_text_alert").html("\u6b63\u5728\u521d\u59cb\u5316\u6570\u636e"),$.post("/System/ClearAllDataBySize",{seid:f,pageSize:100},function(n,t){t=="success"?(e=n,o.resolve()):(e=n,o.reject())});else{layer.closeAll();layer.msg("\u6e05\u9664\u6570\u636e\u5df2\u6210\u529f\uff01\uff01");return}}).done(function(){var n;if(!(t<=0)){n=2e3;t>1e4&&(n=3e3);t>2e4&&(n=4e3);t>5e4&&(n=5e3);t>1e5&&(n=6e3);t>15e4&&(n=8e3);i<=0&&(u=u+1,$("#progress_clear_userdata").css("width",u+"%"),$("#progress_clear_userdata_text_alert").html("\u8bf7\u7a0d\u7b49\uff0c\u6b63\u5728\u6267\u884c\u6570\u636e\u521d\u59cb\u5316..."));var v=0,l=0,c=0,a=setInterval(function(){c=c+1;$("#progress_clear_userdata").css("width",u+"%");$.get("/System/GetClearDataRowCount2",{seid:f},function(n){n&&n>0?(i=n,i!=v?v=i:(l=l+1,l>=10&&h.resolve()),r<100&&(r=parseInt((t-i)/t*100),r==0&&(r=1),r>u&&(u=r),r<u&&(r=u),$("#progress_clear_userdata").css("width",r+"%"),$("#progress_clear_userdata_text_alert").html(c+"\u8bf7\u7a0d\u7b49\uff0c\u6b63\u5728\u6267\u884c\u6570\u636e\u521d\u59cb\u5316..."+(t-i)+"/"+t+"[\u8fdb\u5ea6:"+r+"%]"))):(i=0,setTimeout(function(){s==!1&&y()},3e3),clearInterval(a))});u=u+1},n),y=function(){setTimeout(function(){clearInterval(a);layer.msg("\u521d\u59cb\u5316\u6210\u529f\uff01");r=100;$("#progress_clear_userdata").css("width",r+"%");e!=null?$("#progress_clear_userdata_text_alert").html("\u521d\u59cb\u5316\u6210\u529f[\u8017\u65f6:"+c*n/1e3+"Sec]\uff1a"+(t-i)+"/"+t+e.msg):$("#progress_clear_userdata_text_alert").html("\u521d\u59cb\u5316\u6210\u529f![\u8017\u65f6:"+c*n/1e3+"Sec]"+(t-i)+"/"+t);$("#progress_clear_userdata").removeClass("active")},n+1e3)},p=function(){clearInterval(a);i>0?$("#progress_clear_userdata_text_alert").html("\u5b58\u5728\u5f02\u5e38[eprompt]\uff1a\u5df2\u6e05\u7406\uff1a"+ +(t-i)+"/"+t+"\u884c\u6570\u636e\uff0c\u4f46\u6e05\u7406\u8fc7\u7a0b\u4e2d\u51fa\u73b0\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u91cd\u65b0\u6267\u884c\u6e05\u7406\uff01"):$("#progress_clear_userdata_text_alert").html("\u521d\u59cb\u5316\u6210\u529f![eprompt]"+(t-i)+"/"+t)};$.when(o).done(function(){s==!1&&y();s=!0}).fail(function(){p()});$.when(h).done(function(){p()})}})})}$("#system-nav li").eq(8).find("a").addClass("active");$.get("/PermissionsVerify/GetPermissionsVerify?modularName=SystemManage&actionName=DataManage",function(n){isNullOrWhiteSpace(n)&&(window.location.href=n)});var n='<div class="row" style="padding:20px 20px 0 20px;margin: 0;line-height:30px;"><span>\u9a8c\u8bc1\u65b9\u5f0f : <\/span><span id="phonenumber"><\/span><\/div>';n+='<div class="row" style="padding:20px;margin: 0;"><div class="col-xs-8" style="padding: 0;"><input type="text" class="form-control" name="" id="numberVal" value="" placeholder="\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801"/><\/div><div class="col-xs-4" style="padding: 0 0 0 15px;"><button class="btn" style="background-color:#ff6666;color:#fff;width:96px;" id="determinesendnumber">\u53d1\u9001\u9a8c\u8bc1\u7801<\/button><\/div><\/div><footer class="determinebtn-closebtn" style="padding:15px 20px 0 20px;"><div class="btnbox fr"><button type="button" class="btn btn-success review-btn" id="initialization">\u786e\u5b9a<\/button><button type="button" class="btn btn-default" onclick="layer.closeAll()">\u53d6\u6d88<\/button><\/div><\/footer>';$("#determineDataManagementBtn").click(function(){var i=$("#dataManagementUl input[name='dataManagement']:checked");i.length>0?layer.confirm("\u521d\u59cb\u5316\u5e97\u94fa\u6570\u636e\u5c06\u65e0\u6cd5\u6062\u590d\uff0c\u786e\u8ba4\u521d\u59cb\u5316\uff1f",{btn:["\u786e\u8ba4","\u53d6\u6d88"]},function(){var r="";i.each(function(){r+=$(this).data("id")+","});$.getJSON("/system/Getprint",function(i){layer.open({type:1,title:"\u9a8c\u8bc1\u5bc6\u4fdd\u4fe1\u606f",area:["350px","230px"],content:n,success:function(){if(i.user.sv_ul_mobile){var n=i.user.sv_ul_mobile,r=n.substr(2,6);$("#phonenumber").text("\u5bc6\u4fdd\u624b\u673a"+n.replace(r,"******"))}$(document).unbind("click","#determinesendnumber").on("click","#determinesendnumber",function(){$.post("http://api.decerp.cc/system/ResendInitializationDataCode?moble="+i.user.sv_ul_mobile,function(n){if(n){disableButtonById("determinesendnumber");var t=60,i=setInterval(function(){t<=0?($("#determinesendnumber").text("\u53d1\u9001\u9a8c\u8bc1\u7801"),enabledButtonById("determinesendnumber"),clearInterval(i)):(t-=1,$("#determinesendnumber").text(t+"\u79d2"))},1e3)}})});$(document).unbind("click","#initialization").on("click","#initialization",function(){var n=$("#numberVal").val();n?t(n,i.user.sv_ul_mobile):layer.msg("\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801")})}})})}):layer.msg("\u8bf7\u9009\u62e9\u8981\u521d\u59cb\u5316\u7684\u6570\u636e\uff0c\u5728\u6267\u884c\u6b64\u64cd\u4f5c\uff01")})},payConfiguration:function(){function n(){$.getJson("/WeiXin/BindPayInfo/",null,function(n){if(n!=null&&n!="")for(var t in n)$("#"+t).val(n[t]),t=="mc_weixinisno"&&(n[t]||($(".certification[data-id='1']").prop("checked",!1),$(".certification[data-id='0']").prop("checked",!0))),t=="sv_wechat_verification_file"&&$("#sv_wechat_verification_file").text(n[t]||"")})}$("#system-nav li").eq(9).find("a").addClass("active");n();$(".selectpaystyle>a").click(function(){var n=$(this).index();$(this).addClass("active").siblings("a").removeClass("active");n==0?($(".wechatbox").show(),$(".alipaybox").hide()):($(".wechatbox").hide(),$(".alipaybox").show())});$("#btnWeChatPaySave").click(function(){var t={mc_appid:$("#mc_appid").val().trim(),mc_appsecret:$("#mc_appsecret").val().trim(),mc_encodingaeskey:$("#mc_encodingaeskey").val().trim(),mc_weixinkey:$("#mc_weixinkey").val().trim(),mc_weixinnober:$("#mc_weixinnober").val().trim(),mc_weixintype:$(".wechatSever[name='wechatSever']").data("id"),mc_weixinisno:$(".certification[name='service']:checked").data("id")==1?!0:!1,sv_wechat_verification_file:$("#sv_wechat_verification_file").text()||"",sv_wechat_msg_token:$("#sv_wechat_msg_token").val()};$.postAsyncJson("/WeiXin/Save",t,function(t){t==!0?(layer.msg("\u5fae\u4fe1\u652f\u4ed8\u4fe1\u606f\u7ed1\u5b9a\u6210\u529f\uff01"),n()):t==-1?layer.msg("\u8be5\u5fae\u4fe1\u53f7\u4e0d\u53ef\u7528\uff01"):t==!1&&layer.msg("\u5fae\u4fe1\u652f\u4ed8\u4fe1\u606f\u7ed1\u5b9a\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01")})});$("#uploadWechatFile").change(function(){var t=new FormData,n=$("#uploadWechatFile")[0].files[0];if(!n){layer.msg("\u8bf7\u9009\u62e9txt\u6587\u4ef6");return}if(n.size>2048){layer.msg("\u8bf7\u4e0a\u4f20\u5c0f\u4e8e2kb\u4ee5\u4e0b\u7684\u6587\u4ef6");return}if(n.type!="text/plain"){layer.msg("\u8bf7\u4e0a\u4f20txt\u6587\u4ef6\uff01");return}t.append("file",n);$.ajax({url:"http://shop.decerp.cc/Upload/UploadFile",type:"POST",data:t,processData:!1,contentType:!1,async:!1,cache:!1,success:function(t){t.bl?($("#sv_wechat_verification_file").text(n.name),layer.msg(t.msg)):layer.msg(t.msg)}})});var t='<div class="scrollstyle" style="height:600px;"><img src="../../images/viewviewview.png" style="width: 100%;><\/div>';$("#viewverification").click(function(){layer.open({title:null,type:1,shift:5,closeBtn:0,anim:2,area:["960px","600px"],shadeClose:!0,content:t})});$("#btnAliPaySave").click(function(){var t=$("#mc_alipaynomber").val().trim(),i=$("#mc_alipayencoding").val().trim(),r=$("#mc_alipayappid").val().trim(),u=$("#mc_merchant_private_key").val().trim();$.postAsyncJson("/pay/BindAliPay",{mc_alipaynomber:t,mc_alipayencoding:i,mc_alipayappid:r,mc_merchant_private_key:u},function(t){t==!0?(n(),layer.msg("\u652f\u4ed8\u5b9d\u652f\u4ed8\u4fe1\u606f\u7ed1\u5b9a\u6210\u529f\uff01")):t==-1?layer.msg("\u8be5\u652f\u4ed8\u5b9d\u8d26\u53f7\u4e0d\u53ef\u7528\uff01"):t==!1&&layer.msg("\u652f\u4ed8\u5b9d\u652f\u4ed8\u4fe1\u606f\u7ed1\u5b9a\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01")})})},paymentApplication:function(){$("#system-nav li").eq(9).find("a").addClass("active")},paySetting:function(){function n(n,t){$.postJson("/System/UpdateEnablePay/",{name:n,values:t},function(n){n==!0?layer.msg("\u4fdd\u5b58\u6210\u529f"):layer.msg("\u4fdd\u5b58\u5931\u8d25")})}$("#system-nav li").eq(9).find("a").addClass("active");def_system_paySetting.then(function(n){n.sv_enable_wechatpay&&($("#enable_wechatpay_false").prop("checked",!1),$("#enable_wechatpay_true").prop("checked",!0));n.sv_enable_alipay&&($("#enable_alipay_false").prop("checked",!1),$("#enable_alipay_true").prop("checked",!0))});$("#btnsv_enable_wechatpay").click(function(){var t=$(".wechatPaySetting[data-name='sv_enable_wechatpay']:checked").data("id");n("sv_enable_wechatpay",t)});$("#btnsv_enable_alipay").click(function(){var t=$(".aliPaySetting[data-name='sv_enable_alipay']:checked").data("id");n("sv_enable_alipay",t)})},takeawaySetting:function(){function n(){$("#text-content").text("\u5b9e\u73b0\u4e0e\u7f8e\u56e2\u3001\u997f\u4e86\u4e48\u3001\u767e\u5ea6\u5916\u5356\u5e73\u53f0\u65e0\u7f1d\u5bf9\u63a5\uff0c\u4e3a\u60a8\u63d0\u4f9b\u66f4\u4fbf\u6377\u3001\u66f4\u9ad8\u6548\u7684\u5916\u5356\u670d\u52a1\u3002").css("padding-top","35px");$("#codeimg").hide(0);$("#receiveshopbtn").text("\u7acb\u5373\u8d2d\u4e70");$(document).unbind("click","#receiveshopbtn").on("click","#receiveshopbtn",function(){location.href="/ValueAdded/ValueAdded_N3/ValueAddedServices_Recommend_TOFoodinOneSet"})}function t(){$("#text-content").text("\u5b9e\u73b0\u4e0e\u5404\u5927\u5916\u5356\u5e73\u53f0\u65e0\u7f1d\u5bf9\u63a5\uff0c\u4e3a\u60a8\u63d0\u4f9b\u66f4\u4fbf\u6377\u3001\u66f4\u9ad8\u6548\u7684\u5916\u5356\u670d\u52a1\u3002").css("padding-top","25px");$("#codeimg").hide(0);$("#receiveshopbtn").text("\u7acb\u5373\u8d2d\u4e70");$(document).unbind("click","#receiveshopbtn").on("click","#receiveshopbtn",function(){location.href="/ValueAdded/Index/ValueAddedServices_Recommend_TOFoodinOneSet"})}function i(n){var t="";$.get("/MeiTuan/GetQueryPoiInfo?ePoiIds="+n,function(n){var i=n.data,r;if(i&&i.length>0)for(r=0;r<i.length;r++)t+=' <tr><td styly="width:25%;">'+i[r].name+'<\/td><td styly="width:25%;">'+i[r].phone+'<\/td> <td styly="width:25%;">'+i[r].openTime+"<\/td>",t+="",t+='<td styly="width:25%;">',t+='<a href="javascript:void(0);" class="btnUnBindMeiTuanShop">\u89e3\u7ed1\u8d26\u53f7<\/a><\/td>';$("#meituanShopListHtml").html(t)})}function r(n){var t="";$.get("/EleMe/GetShop?shopId="+n,function(n){var i=n.result;i&&(t+=' <tr><td styly="width:25%;">'+i.name+'<\/td><td styly="width:25%;">'+i.id+'<\/td> <td styly="width:25%;">'+i.addressText+"<\/td>",t+="",t+='<td styly="width:25%;">',t+="<\/td>");$("#eleMeShopListHtml").html(t)})}function u(n){var t=$("#baiDuShopListHtml").html();n&&(t+=' <tr><td styly="width:25%;">'+n.sv_meituan_shop_name+'<\/td><td styly="width:25%;">'+n.eleme_shop_id+'<\/td> <td styly="width:25%;">'+n.sv_remark+"<\/td>",t+="",t+='<td styly="width:25%;">',t+='<a href="javascript:void(0);" data-content="https://wmcrm.baidu.com/crm?qt=apishopunbindpage" class="btnUnBindBaiDuShop btnDeleteUnBindBaiDuShop">\u89e3\u7ed1\u8d26\u53f7<\/a><\/td>',t+="<\/td>");$("#baiDuShopListHtml").html(t)}$("#system-nav li").eq(10).find("a").addClass("active");def_system_getsalesConfig.then(function(){if(verify_distributor_id==1)if(_g_ValueAddedServices_Recommend_TOFoodinOneSet){var i=Math.round((new Date).getTime()/1e3),r=Math.round(new Date(_g_ValueAddedServices_Recommend_TOFoodinOneSet_Date).getTime()/1e3);i>r&&layerpage.Deke_layerpage.getpage3("","/html/buyTipspage.html?v="+getTimeStamp+200,t,["380px","350px"])}else layerpage.Deke_layerpage.getpage3("","/html/buyTipspage.html?v="+getTimeStamp+200,n,["380px","250px"])});$(document).unbind("click","#btnMeiTuanBindShop").on("click","#btnMeiTuanBindShop",function(){$.post("/MeiTuan/BindMeiTuanShopConfigUrl",function(n){n&&layer.open({type:2,title:"\u7ed1\u5b9a\u7f8e\u56e2\u8d26\u53f7",shadeClose:!0,shade:!1,area:["893px","600px"],content:n})})});$(document).unbind("click",".btnUnBindMeiTuanShop").on("click",".btnUnBindMeiTuanShop",function(){$.post("/MeiTuan/UnBindMeiTuanShop",function(n){n&&layer.open({type:2,title:"\u89e3\u7ed1\u7f8e\u56e2\u8d26\u53f7",shadeClose:!0,shade:!1,area:["893px","600px"],content:n})})});$("#btnSaveEleMeConfigInfo").click(function(){$.post("/EleMe/GetEleMeAuthorizeUrl?eleme_shop_id="+txtEleMeShopId,function(n){n&&($("#txtEleMeShopId").val(""),layer.open({type:2,title:"\u7ed1\u5b9a\u997f\u4e86\u4e48\u8d26\u53f7",shadeClose:!0,shade:!1,area:["600px","600px"],content:n}))})});$(document).unbind("click",".addtakeawaybtn").on("click",".addtakeawaybtn",function(){var n=$(this).data("type");$(this).addClass("takeawayopen").parent(".managementnav").parent(".managementbox").siblings(".managementbox").find(".addtakeawaybtn").removeClass("takeawayopen");$(".selecttakeawaycontent:eq("+n+")").slideToggle(200).parent(".managementbox").siblings(".managementbox").find(".selecttakeawaycontent").hide(0)});$(function(){$.get("/MeiTuan/GetTakeOutFoodConfigList",function(n){if(n&&n.length>0)for(var t=0;t<n.length;t++)n[t].sv_config_data_type==0&&n[t].sv_config_appauth_token?($("#btnMeiTuanBindShop").hide(),i(n[t].sv_config_epoi_id)):n[t].sv_config_data_type==1&&n[t].sv_config_appauth_token&&n[t].eleme_shop_id?($("#btnSaveEleMeConfigInfo").hide(),r(n[t].eleme_shop_id)):n[t].sv_config_data_type==2?u(n[t]):n[t].sv_config_data_type==3})});$(document).unbind("click","#btnBaiDuBindShop").on("click","#btnBaiDuBindShop",function(){$.post("/MeiTuan/BindBaiDuShopConfigUrl",function(n){n&&layer.open({type:2,title:"\u7ed1\u5b9a\u767e\u5ea6\u5916\u5356\u8d26\u53f7",shadeClose:!0,shade:!1,area:["893px","600px"],content:n})})});$(document).unbind("click","#baiDuShopListHtml .btnDeleteUnBindBaiDuShop").on("click","#baiDuShopListHtml .btnDeleteUnBindBaiDuShop",function(){layer.open({type:2,title:"\u89e3\u9664\u767e\u5ea6\u5916\u5356\u8d26\u53f7",shadeClose:!0,shade:!1,area:["893px","600px"],content:$(this).data("content")})})}},function(n){typeof define=="function"&&define.amd?define(["jquery"],n):typeof exports=="object"?n(require("jquery")):n(jQuery)}(function(n,t){function o(){var f,r,n,u,i,o,t,e;if(r=(new Date).toString(),n=((i=r.split("(")[1])!=null?i.slice(0,-1):0)||r.split(" "),n instanceof Array){for(u=[],t=0,e=n.length;t<e;t++)o=n[t],((f=(i=o.match(/\b[A-Z]+\b/))!==null)?i[0]:0)&&u.push(f);n=u.pop()}return n}function u(){return new Date(Date.UTC.apply(Date,arguments))}var f,e,r,i;"indexOf"in Array.prototype||(Array.prototype.indexOf=function(n,i){i===t&&(i=0);i<0&&(i+=this.length);i<0&&(i=0);for(var r=this.length;i<r;i++)if(i in this&&this[i]===n)return i;return-1});f=function(u,f){var h=this,e,s;for(this.element=n(u),this.container=f.container||"body",this.language=f.language||this.element.data("date-language")||"en",this.language=(this.language in r)?this.language:this.language.split("-")[0],this.language=(this.language in r)?this.language:"en",this.isRTL=r[this.language].rtl||!1,this.formatType=f.formatType||this.element.data("format-type")||"standard",this.format=i.parseFormat(f.format||this.element.data("date-format")||r[this.language].format||i.getDefaultFormat(this.formatType,"input"),this.formatType),this.isInline=!1,this.isVisible=!1,this.isInput=this.element.is("input"),this.fontAwesome=f.fontAwesome||this.element.data("font-awesome")||!1,this.bootcssVer=f.bootcssVer||(this.isInput?this.element.is(".form-control")?3:2:this.bootcssVer=this.element.is(".input-group")?3:2),this.component=this.element.is(".date")?this.bootcssVer===3?this.element.find(".input-group-addon .glyphicon-th, .input-group-addon .glyphicon-time, .input-group-addon .glyphicon-remove, .input-group-addon .glyphicon-calendar, .input-group-addon .fa-calendar, .input-group-addon .fa-clock-o").parent():this.element.find(".add-on .icon-th, .add-on .icon-time, .add-on .icon-calendar, .add-on .fa-calendar, .add-on .fa-clock-o").parent():!1,this.componentReset=this.element.is(".date")?this.bootcssVer===3?this.element.find(".input-group-addon .glyphicon-remove, .input-group-addon .fa-times").parent():this.element.find(".add-on .icon-remove, .add-on .fa-times").parent():!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&this.component.length===0&&(this.component=!1),this.linkField=f.linkField||this.element.data("link-field")||!1,this.linkFormat=i.parseFormat(f.linkFormat||this.element.data("link-format")||i.getDefaultFormat(this.formatType,"link"),this.formatType),this.minuteStep=f.minuteStep||this.element.data("minute-step")||5,this.pickerPosition=f.pickerPosition||this.element.data("picker-position")||"bottom-right",this.showMeridian=f.showMeridian||this.element.data("show-meridian")||!1,this.initialDate=f.initialDate||new Date,this.zIndex=f.zIndex||this.element.data("z-index")||t,this.title=typeof f.title=="undefined"?!1:f.title,this.timezone=f.timezone||o(),this.icons={leftArrow:this.fontAwesome?"fa-arrow-left":this.bootcssVer===3?"glyphicon-arrow-left":"icon-arrow-left",rightArrow:this.fontAwesome?"fa-arrow-right":this.bootcssVer===3?"glyphicon-arrow-right":"icon-arrow-right"},this.icontype=this.fontAwesome?"fa":"glyphicon",this._attachEvents(),this.clickedOutside=function(t){n(t.target).closest(".datetimepicker").length===0&&h.hide()},this.formatViewType="datetime",("formatViewType"in f)?this.formatViewType=f.formatViewType:("formatViewType"in this.element.data())&&(this.formatViewType=this.element.data("formatViewType")),this.minView=0,("minView"in f)?this.minView=f.minView:("minView"in this.element.data())&&(this.minView=this.element.data("min-view")),this.minView=i.convertViewMode(this.minView),this.maxView=i.modes.length-1,("maxView"in f)?this.maxView=f.maxView:("maxView"in this.element.data())&&(this.maxView=this.element.data("max-view")),this.maxView=i.convertViewMode(this.maxView),this.wheelViewModeNavigation=!1,("wheelViewModeNavigation"in f)?this.wheelViewModeNavigation=f.wheelViewModeNavigation:("wheelViewModeNavigation"in this.element.data())&&(this.wheelViewModeNavigation=this.element.data("view-mode-wheel-navigation")),this.wheelViewModeNavigationInverseDirection=!1,("wheelViewModeNavigationInverseDirection"in f)?this.wheelViewModeNavigationInverseDirection=f.wheelViewModeNavigationInverseDirection:("wheelViewModeNavigationInverseDirection"in this.element.data())&&(this.wheelViewModeNavigationInverseDirection=this.element.data("view-mode-wheel-navigation-inverse-dir")),this.wheelViewModeNavigationDelay=100,("wheelViewModeNavigationDelay"in f)?this.wheelViewModeNavigationDelay=f.wheelViewModeNavigationDelay:("wheelViewModeNavigationDelay"in this.element.data())&&(this.wheelViewModeNavigationDelay=this.element.data("view-mode-wheel-navigation-delay")),this.startViewMode=2,("startView"in f)?this.startViewMode=f.startView:("startView"in this.element.data())&&(this.startViewMode=this.element.data("start-view")),this.startViewMode=i.convertViewMode(this.startViewMode),this.viewMode=this.startViewMode,this.viewSelect=this.minView,("viewSelect"in f)?this.viewSelect=f.viewSelect:("viewSelect"in this.element.data())&&(this.viewSelect=this.element.data("view-select")),this.viewSelect=i.convertViewMode(this.viewSelect),this.forceParse=!0,("forceParse"in f)?this.forceParse=f.forceParse:("dateForceParse"in this.element.data())&&(this.forceParse=this.element.data("date-force-parse")),e=this.bootcssVer===3?i.templateV3:i.template;e.indexOf("{iconType}")!==-1;)e=e.replace("{iconType}",this.icontype);while(e.indexOf("{leftArrow}")!==-1)e=e.replace("{leftArrow}",this.icons.leftArrow);while(e.indexOf("{rightArrow}")!==-1)e=e.replace("{rightArrow}",this.icons.rightArrow);if(this.picker=n(e).appendTo(this.isInline?this.element:this.container).on({click:n.proxy(this.click,this),mousedown:n.proxy(this.mousedown,this)}),this.wheelViewModeNavigation)if(n.fn.mousewheel)this.picker.on({mousewheel:n.proxy(this.mousewheel,this)});else console.log("Mouse Wheel event is not supported. Please include the jQuery Mouse Wheel plugin before enabling this option");this.isInline?this.picker.addClass("datetimepicker-inline"):this.picker.addClass("datetimepicker-dropdown-"+this.pickerPosition+" dropdown-menu");this.isRTL&&(this.picker.addClass("datetimepicker-rtl"),s=this.bootcssVer===3?".prev span, .next span":".prev i, .next i",this.picker.find(s).toggleClass(this.icons.leftArrow+" "+this.icons.rightArrow));n(document).on("mousedown touchend",this.clickedOutside);this.autoclose=!1;"autoclose"in f?this.autoclose=f.autoclose:"dateAutoclose"in this.element.data()&&(this.autoclose=this.element.data("date-autoclose"));this.keyboardNavigation=!0;"keyboardNavigation"in f?this.keyboardNavigation=f.keyboardNavigation:"dateKeyboardNavigation"in this.element.data()&&(this.keyboardNavigation=this.element.data("date-keyboard-navigation"));this.todayBtn=f.todayBtn||this.element.data("date-today-btn")||!1;this.clearBtn=f.clearBtn||this.element.data("date-clear-btn")||!1;this.todayHighlight=f.todayHighlight||this.element.data("date-today-highlight")||!1;this.weekStart=0;typeof f.weekStart!="undefined"?this.weekStart=f.weekStart:typeof this.element.data("date-weekstart")!="undefined"?this.weekStart=this.element.data("date-weekstart"):typeof r[this.language].weekStart!="undefined"&&(this.weekStart=r[this.language].weekStart);this.weekStart=this.weekStart%7;this.weekEnd=(this.weekStart+6)%7;this.onRenderDay=function(n){var t=(f.onRenderDay||function(){return[]})(n),i;return typeof t=="string"&&(t=[t]),i=["day"],i.concat(t?t:[])};this.onRenderHour=function(n){var t=(f.onRenderHour||function(){return[]})(n);return typeof t=="string"&&(t=[t]),["hour"].concat(t?t:[])};this.onRenderMinute=function(n){var t=(f.onRenderMinute||function(){return[]})(n),i=["minute"];return typeof t=="string"&&(t=[t]),n<this.startDate||n>this.endDate?i.push("disabled"):Math.floor(this.date.getUTCMinutes()/this.minuteStep)===Math.floor(n.getUTCMinutes()/this.minuteStep)&&i.push("active"),i.concat(t?t:[])};this.onRenderYear=function(n){var t=(f.onRenderYear||function(){return[]})(n),i=["year"],r,u;return typeof t=="string"&&(t=[t]),this.date.getUTCFullYear()===n.getUTCFullYear()&&i.push("active"),r=n.getUTCFullYear(),u=this.endDate.getUTCFullYear(),(n<this.startDate||r>u)&&i.push("disabled"),i.concat(t?t:[])};this.onRenderMonth=function(n){var t=(f.onRenderMonth||function(){return[]})(n);return typeof t=="string"&&(t=[t]),["month"].concat(t?t:[])};this.startDate=new Date(-8639968443048e3);this.endDate=new Date(8639968443048e3);this.datesDisabled=[];this.daysOfWeekDisabled=[];this.setStartDate(f.startDate||this.element.data("date-startdate"));this.setEndDate(f.endDate||this.element.data("date-enddate"));this.setDatesDisabled(f.datesDisabled||this.element.data("date-dates-disabled"));this.setDaysOfWeekDisabled(f.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled"));this.setMinutesDisabled(f.minutesDisabled||this.element.data("date-minute-disabled"));this.setHoursDisabled(f.hoursDisabled||this.element.data("date-hour-disabled"));this.fillDow();this.fillMonths();this.update();this.showMode();this.isInline&&this.show()};f.prototype={constructor:f,_events:[],_attachEvents:function(){this._detachEvents();this.isInput?this._events=[[this.element,{focus:n.proxy(this.show,this),keyup:n.proxy(this.update,this),keydown:n.proxy(this.keydown,this)}]]:this.component&&this.hasInput?(this._events=[[this.element.find("input"),{focus:n.proxy(this.show,this),keyup:n.proxy(this.update,this),keydown:n.proxy(this.keydown,this)}],[this.component,{click:n.proxy(this.show,this)}]],this.componentReset&&this._events.push([this.componentReset,{click:n.proxy(this.reset,this)}])):this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:n.proxy(this.show,this)}]];for(var t=0,i,r;t<this._events.length;t++){i=this._events[t][0];r=this._events[t][1];i.on(r)}},_detachEvents:function(){for(var n=0,t,i;n<this._events.length;n++)t=this._events[n][0],i=this._events[n][1],t.off(i);this._events=[]},show:function(t){this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();this.forceParse&&this.update();this.place();n(window).on("resize",n.proxy(this.place,this));t&&(t.stopPropagation(),t.preventDefault());this.isVisible=!0;this.element.trigger({type:"show",date:this.date})},hide:function(){this.isVisible&&(this.isInline||(this.picker.hide(),n(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||n(document).off("mousedown",this.hide),this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this.isVisible=!1,this.element.trigger({type:"hide",date:this.date})))},remove:function(){this._detachEvents();n(document).off("mousedown",this.clickedOutside);this.picker.remove();delete this.picker;delete this.element.data().datetimepicker},getDate:function(){var n=this.getUTCDate();return n===null?null:new Date(n.getTime()+n.getTimezoneOffset()*6e4)},getUTCDate:function(){return this.date},getInitialDate:function(){return this.initialDate},setInitialDate:function(n){this.initialDate=n},setDate:function(n){this.setUTCDate(new Date(n.getTime()-n.getTimezoneOffset()*6e4))},setUTCDate:function(n){n>=this.startDate&&n<=this.endDate?(this.date=n,this.setValue(),this.viewDate=this.date,this.fill()):this.element.trigger({type:"outOfRange",date:n,startDate:this.startDate,endDate:this.endDate})},setFormat:function(n){this.format=i.parseFormat(n,this.formatType);var t;this.isInput?t=this.element:this.component&&(t=this.element.find("input"));t&&t.val()&&this.setValue()},setValue:function(){var t=this.getFormattedDate();this.isInput?this.element.val(t):(this.component&&this.element.find("input").val(t),this.element.data("date",t));this.linkField&&n("#"+this.linkField).val(this.getFormattedDate(this.linkFormat))},getFormattedDate:function(n){return n=n||this.format,i.formatDate(this.date,n,this.language,this.formatType,this.timezone)},setStartDate:function(n){this.startDate=n||this.startDate;this.startDate.valueOf()!==8639968443048e3&&(this.startDate=i.parseDate(this.startDate,this.format,this.language,this.formatType,this.timezone));this.update();this.updateNavArrows()},setEndDate:function(n){this.endDate=n||this.endDate;this.endDate.valueOf()!==8639968443048e3&&(this.endDate=i.parseDate(this.endDate,this.format,this.language,this.formatType,this.timezone));this.update();this.updateNavArrows()},setDatesDisabled:function(t){this.datesDisabled=t||[];n.isArray(this.datesDisabled)||(this.datesDisabled=this.datesDisabled.split(/,\s*/));var r=this;this.datesDisabled=n.map(this.datesDisabled,function(n){return i.parseDate(n,r.format,r.language,r.formatType,r.timezone).toDateString()});this.update();this.updateNavArrows()},setTitle:function(n,t){return this.picker.find(n).find("th:eq(1)").text(this.title===!1?t:this.title)},setDaysOfWeekDisabled:function(t){this.daysOfWeekDisabled=t||[];n.isArray(this.daysOfWeekDisabled)||(this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/));this.daysOfWeekDisabled=n.map(this.daysOfWeekDisabled,function(n){return parseInt(n,10)});this.update();this.updateNavArrows()},setMinutesDisabled:function(t){this.minutesDisabled=t||[];n.isArray(this.minutesDisabled)||(this.minutesDisabled=this.minutesDisabled.split(/,\s*/));this.minutesDisabled=n.map(this.minutesDisabled,function(n){return parseInt(n,10)});this.update();this.updateNavArrows()},setHoursDisabled:function(t){this.hoursDisabled=t||[];n.isArray(this.hoursDisabled)||(this.hoursDisabled=this.hoursDisabled.split(/,\s*/));this.hoursDisabled=n.map(this.hoursDisabled,function(n){return parseInt(n,10)});this.update();this.updateNavArrows()},place:function(){var r,i,u,t,f,e;this.isInline||(this.zIndex||(r=0,n("div").each(function(){var t=parseInt(n(this).css("zIndex"),10);t>r&&(r=t)}),this.zIndex=r+10),f=this.container instanceof n?this.container.offset():n(this.container).offset(),this.component?(i=this.component.offset(),t=i.left,(this.pickerPosition==="bottom-left"||this.pickerPosition==="top-left")&&(t+=this.component.outerWidth()-this.picker.outerWidth())):(i=this.element.offset(),t=i.left,(this.pickerPosition==="bottom-left"||this.pickerPosition==="top-left")&&(t+=this.element.outerWidth()-this.picker.outerWidth())),e=document.body.clientWidth||window.innerWidth,t+220>e&&(t=e-220),u=this.pickerPosition==="top-left"||this.pickerPosition==="top-right"?i.top-this.picker.outerHeight():i.top+this.height,u=u-f.top,t=t-f.left,this.picker.css({top:u,left:t,zIndex:this.zIndex}))},hour_minute:"^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]",update:function(){var n,t=!1;arguments&&arguments.length&&(typeof arguments[0]=="string"||arguments[0]instanceof Date)?(n=arguments[0],t=!0):(n=(this.isInput?this.element.val():this.element.find("input").val())||this.element.data("date")||this.initialDate,typeof n=="string"&&(n=n.replace(/^\s+|\s+$/g,"")));n||(n=new Date,t=!1);typeof n=="string"&&(new RegExp(this.hour_minute).test(n)||new RegExp(this.hour_minute+":[0-5][0-9]").test(n))&&(n=this.getDate());this.date=i.parseDate(n,this.format,this.language,this.formatType,this.timezone);t&&this.setValue();this.viewDate=this.date<this.startDate?new Date(this.startDate):this.date>this.endDate?new Date(this.endDate):new Date(this.date);this.fill()},fillDow:function(){for(var t=this.weekStart,n="<tr>";t<this.weekStart+7;)n+='<th class="dow">'+r[this.language].daysMin[t++%7]+"<\/th>";n+="<\/tr>";this.picker.find(".datetimepicker-days thead").append(n)},fillMonths:function(){for(var u,t="",i=new Date(this.viewDate),n=0;n<12;n++)i.setUTCMonth(n),u=this.onRenderMonth(i),t+='<span class="'+u.join(" ")+'">'+r[this.language].monthsShort[n]+"<\/span>";this.picker.find(".datetimepicker-months td").html(t)},fill:function(){var g,f,nt,p,s,h,tt,ut,ft,b,et,t;if(this.date&&this.viewDate){var c=new Date(this.viewDate),o=c.getUTCFullYear(),v=c.getUTCMonth(),k=c.getUTCDate(),w=c.getUTCHours(),it=this.startDate.getUTCFullYear(),ot=this.startDate.getUTCMonth(),rt=this.endDate.getUTCFullYear(),st=this.endDate.getUTCMonth()+1,ht=new u(this.date.getUTCFullYear(),this.date.getUTCMonth(),this.date.getUTCDate()).valueOf(),d=new Date;for(this.setTitle(".datetimepicker-days",r[this.language].months[v]+" "+o),this.formatViewType==="time"?(g=this.getFormattedDate(),this.setTitle(".datetimepicker-hours",g),this.setTitle(".datetimepicker-minutes",g)):(this.setTitle(".datetimepicker-hours",k+" "+r[this.language].months[v]+" "+o),this.setTitle(".datetimepicker-minutes",k+" "+r[this.language].months[v]+" "+o)),this.picker.find("tfoot th.today").text(r[this.language].today||r.en.today).toggle(this.todayBtn!==!1),this.picker.find("tfoot th.clear").text(r[this.language].clear||r.en.clear).toggle(this.clearBtn!==!1),this.updateNavArrows(),this.fillMonths(),f=u(o,v-1,28,0,0,0,0),nt=i.getDaysInMonth(f.getUTCFullYear(),f.getUTCMonth()),f.setUTCDate(nt),f.setUTCDate(nt-(f.getUTCDay()-this.weekStart+7)%7),p=new Date(f),p.setUTCDate(p.getUTCDate()+42),p=p.valueOf(),s=[];f.valueOf()<p;)f.getUTCDay()===this.weekStart&&s.push("<tr>"),h=this.onRenderDay(f),f.getUTCFullYear()<o||f.getUTCFullYear()===o&&f.getUTCMonth()<v?h.push("old"):(f.getUTCFullYear()>o||f.getUTCFullYear()===o&&f.getUTCMonth()>v)&&h.push("new"),this.todayHighlight&&f.getUTCFullYear()===d.getFullYear()&&f.getUTCMonth()===d.getMonth()&&f.getUTCDate()===d.getDate()&&h.push("today"),f.valueOf()===ht&&h.push("active"),(f.valueOf()+864e5<=this.startDate||f.valueOf()>this.endDate||n.inArray(f.getUTCDay(),this.daysOfWeekDisabled)!==-1||n.inArray(f.toDateString(),this.datesDisabled)!==-1)&&h.push("disabled"),s.push('<td class="'+h.join(" ")+'">'+f.getUTCDate()+"<\/td>"),f.getUTCDay()===this.weekEnd&&s.push("<\/tr>"),f.setUTCDate(f.getUTCDate()+1);this.picker.find(".datetimepicker-days tbody").empty().append(s.join(""));s=[];var a="",l="",y="",ct=this.hoursDisabled||[];for(c=new Date(this.viewDate),t=0;t<24;t++)c.setUTCHours(t),h=this.onRenderHour(c),ct.indexOf(t)!==-1&&h.push("disabled"),tt=u(o,v,k,t),tt.valueOf()+36e5<=this.startDate||tt.valueOf()>this.endDate?h.push("disabled"):w===t&&h.push("active"),this.showMeridian&&r[this.language].meridiem.length===2?(l=t<12?r[this.language].meridiem[0]:r[this.language].meridiem[1],l!==y&&(y!==""&&s.push("<\/fieldset>"),s.push('<fieldset class="hour"><legend>'+l.toUpperCase()+"<\/legend>")),y=l,a=t%12?t%12:12,t<12?h.push("hour_am"):h.push("hour_pm"),s.push('<span class="'+h.join(" ")+'">'+a+"<\/span>"),t===23&&s.push("<\/fieldset>")):(a=t+":00",s.push('<span class="'+h.join(" ")+'">'+a+"<\/span>"));for(this.picker.find(".datetimepicker-hours td").html(s.join("")),s=[],a="",l="",y="",ut=this.minutesDisabled||[],c=new Date(this.viewDate),t=0;t<60;t+=this.minuteStep)ut.indexOf(t)===-1&&(c.setUTCMinutes(t),c.setUTCSeconds(0),h=this.onRenderMinute(c),this.showMeridian&&r[this.language].meridiem.length===2?(l=w<12?r[this.language].meridiem[0]:r[this.language].meridiem[1],l!==y&&(y!==""&&s.push("<\/fieldset>"),s.push('<fieldset class="minute"><legend>'+l.toUpperCase()+"<\/legend>")),y=l,a=w%12?w%12:12,s.push('<span class="'+h.join(" ")+'">'+a+":"+(t<10?"0"+t:t)+"<\/span>"),t===59&&s.push("<\/fieldset>")):(a=t+":00",s.push('<span class="'+h.join(" ")+'">'+w+":"+(t<10?"0"+t:t)+"<\/span>")));for(this.picker.find(".datetimepicker-minutes td").html(s.join("")),ft=this.date.getUTCFullYear(),b=this.setTitle(".datetimepicker-months",o).end().find(".month").removeClass("active"),ft===o&&b.eq(this.date.getUTCMonth()).addClass("active"),(o<it||o>rt)&&b.addClass("disabled"),o===it&&b.slice(0,ot).addClass("disabled"),o===rt&&b.slice(st).addClass("disabled"),s="",o=parseInt(o/10,10)*10,et=this.setTitle(".datetimepicker-years",o+"-"+(o+9)).end().find("td"),o-=1,c=new Date(this.viewDate),t=-1;t<11;t++)c.setUTCFullYear(o),h=this.onRenderYear(c),(t===-1||t===10)&&h.push(e),s+='<span class="'+h.join(" ")+'">'+o+"<\/span>",o+=1;et.html(s);this.place()}},updateNavArrows:function(){var i=new Date(this.viewDate),n=i.getUTCFullYear(),t=i.getUTCMonth(),r=i.getUTCDate(),u=i.getUTCHours();switch(this.viewMode){case 0:n<=this.startDate.getUTCFullYear()&&t<=this.startDate.getUTCMonth()&&r<=this.startDate.getUTCDate()&&u<=this.startDate.getUTCHours()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"});n>=this.endDate.getUTCFullYear()&&t>=this.endDate.getUTCMonth()&&r>=this.endDate.getUTCDate()&&u>=this.endDate.getUTCHours()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:n<=this.startDate.getUTCFullYear()&&t<=this.startDate.getUTCMonth()&&r<=this.startDate.getUTCDate()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"});n>=this.endDate.getUTCFullYear()&&t>=this.endDate.getUTCMonth()&&r>=this.endDate.getUTCDate()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 2:n<=this.startDate.getUTCFullYear()&&t<=this.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"});n>=this.endDate.getUTCFullYear()&&t>=this.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 3:case 4:n<=this.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"});n>=this.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},mousewheel:function(t){if(t.preventDefault(),t.stopPropagation(),!this.wheelPause){this.wheelPause=!0;var u=t.originalEvent,r=u.wheelDelta,i=r>0?1:r===0?0:-1;this.wheelViewModeNavigationInverseDirection&&(i=-i);this.showMode(i);setTimeout(n.proxy(function(){this.wheelPause=!1},this),this.wheelViewModeNavigationDelay)}},click:function(t){var r,l,e,v;if(t.stopPropagation(),t.preventDefault(),r=n(t.target).closest("span, td, th, legend"),r.is("."+this.icontype)&&(r=n(r).parent().closest("span, td, th, legend")),r.length===1){if(r.is(".disabled")){this.element.trigger({type:"outOfRange",date:this.viewDate,startDate:this.startDate,endDate:this.endDate});return}switch(r[0].nodeName.toLowerCase()){case"th":switch(r[0].className){case"switch":this.showMode(1);break;case"prev":case"next":l=i.modes[this.viewMode].navStep*(r[0].className==="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveHour(this.viewDate,l);break;case 1:this.viewDate=this.moveDate(this.viewDate,l);break;case 2:this.viewDate=this.moveMonth(this.viewDate,l);break;case 3:case 4:this.viewDate=this.moveYear(this.viewDate,l)}this.fill();this.element.trigger({type:r[0].className+":"+this.convertViewModeText(this.viewMode),date:this.viewDate,startDate:this.startDate,endDate:this.endDate});break;case"clear":this.reset();this.autoclose&&this.hide();break;case"today":e=new Date;e=u(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),0);e<this.startDate?e=this.startDate:e>this.endDate&&(e=this.endDate);this.viewMode=this.startViewMode;this.showMode(0);this._setDate(e);this.fill();this.autoclose&&this.hide()}break;case"span":if(!r.is(".disabled")){var s=this.viewDate.getUTCFullYear(),f=this.viewDate.getUTCMonth(),h=this.viewDate.getUTCDate(),o=this.viewDate.getUTCHours(),c=this.viewDate.getUTCMinutes(),a=this.viewDate.getUTCSeconds();r.is(".month")?(this.viewDate.setUTCDate(1),f=r.parent().find("span").index(r),h=this.viewDate.getUTCDate(),this.viewDate.setUTCMonth(f),this.element.trigger({type:"changeMonth",date:this.viewDate}),this.viewSelect>=3&&this._setDate(u(s,f,h,o,c,a,0))):r.is(".year")?(this.viewDate.setUTCDate(1),s=parseInt(r.text(),10)||0,this.viewDate.setUTCFullYear(s),this.element.trigger({type:"changeYear",date:this.viewDate}),this.viewSelect>=4&&this._setDate(u(s,f,h,o,c,a,0))):r.is(".hour")?(o=parseInt(r.text(),10)||0,(r.hasClass("hour_am")||r.hasClass("hour_pm"))&&(o===12&&r.hasClass("hour_am")?o=0:o!==12&&r.hasClass("hour_pm")&&(o+=12)),this.viewDate.setUTCHours(o),this.element.trigger({type:"changeHour",date:this.viewDate}),this.viewSelect>=1&&this._setDate(u(s,f,h,o,c,a,0))):r.is(".minute")&&(c=parseInt(r.text().substr(r.text().indexOf(":")+1),10)||0,this.viewDate.setUTCMinutes(c),this.element.trigger({type:"changeMinute",date:this.viewDate}),this.viewSelect>=0&&this._setDate(u(s,f,h,o,c,a,0)));this.viewMode!==0?(v=this.viewMode,this.showMode(-1),this.fill(),v===this.viewMode&&this.autoclose&&this.hide()):(this.fill(),this.autoclose&&this.hide())}break;case"td":if(r.is(".day")&&!r.is(".disabled")){var h=parseInt(r.text(),10)||1,s=this.viewDate.getUTCFullYear(),f=this.viewDate.getUTCMonth(),o=this.viewDate.getUTCHours(),c=this.viewDate.getUTCMinutes(),a=this.viewDate.getUTCSeconds();r.is(".old")?f===0?(f=11,s-=1):f-=1:r.is(".new")&&(f===11?(f=0,s+=1):f+=1);this.viewDate.setUTCFullYear(s);this.viewDate.setUTCMonth(f,h);this.element.trigger({type:"changeDay",date:this.viewDate});this.viewSelect>=2&&this._setDate(u(s,f,h,o,c,a,0))}v=this.viewMode;this.showMode(-1);this.fill();v===this.viewMode&&this.autoclose&&this.hide()}}},_setDate:function(n,t){t&&t!=="date"||(this.date=n);t&&t!=="view"||(this.viewDate=n);this.fill();this.setValue();var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input"));i&&i.change();this.element.trigger({type:"changeDate",date:this.getDate()});n===null&&(this.date=this.viewDate)},moveMinute:function(n,t){if(!t)return n;var i=new Date(n.valueOf());return i.setUTCMinutes(i.getUTCMinutes()+t*this.minuteStep),i},moveHour:function(n,t){if(!t)return n;var i=new Date(n.valueOf());return i.setUTCHours(i.getUTCHours()+t),i},moveDate:function(n,t){if(!t)return n;var i=new Date(n.valueOf());return i.setUTCDate(i.getUTCDate()+t),i},moveMonth:function(n,t){var f;if(!t)return n;var i=new Date(n.valueOf()),e=i.getUTCDate(),o=i.getUTCMonth(),s=Math.abs(t),r,u;if(t=t>0?1:-1,s===1)u=t===-1?function(){return i.getUTCMonth()===o}:function(){return i.getUTCMonth()!==r},r=o+t,i.setUTCMonth(r),(r<0||r>11)&&(r=(r+12)%12);else{for(f=0;f<s;f++)i=this.moveMonth(i,t);r=i.getUTCMonth();i.setUTCDate(e);u=function(){return r!==i.getUTCMonth()}}while(u())i.setUTCDate(--e),i.setUTCMonth(r);return i},moveYear:function(n,t){return this.moveMonth(n,t*12)},dateWithinRange:function(n){return n>=this.startDate&&n<=this.endDate},keydown:function(n){var f,t,r,u,i,o,e;if(this.picker.is(":not(:visible)")){n.keyCode===27&&this.show();return}f=!1;switch(n.keyCode){case 27:this.hide();n.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;t=n.keyCode===37?-1:1;i=this.viewMode;n.ctrlKey?i+=2:n.shiftKey&&(i+=1);i===4?(r=this.moveYear(this.date,t),u=this.moveYear(this.viewDate,t)):i===3?(r=this.moveMonth(this.date,t),u=this.moveMonth(this.viewDate,t)):i===2?(r=this.moveDate(this.date,t),u=this.moveDate(this.viewDate,t)):i===1?(r=this.moveHour(this.date,t),u=this.moveHour(this.viewDate,t)):i===0&&(r=this.moveMinute(this.date,t),u=this.moveMinute(this.viewDate,t));this.dateWithinRange(r)&&(this.date=r,this.viewDate=u,this.setValue(),this.update(),n.preventDefault(),f=!0);break;case 38:case 40:if(!this.keyboardNavigation)break;t=n.keyCode===38?-1:1;i=this.viewMode;n.ctrlKey?i+=2:n.shiftKey&&(i+=1);i===4?(r=this.moveYear(this.date,t),u=this.moveYear(this.viewDate,t)):i===3?(r=this.moveMonth(this.date,t),u=this.moveMonth(this.viewDate,t)):i===2?(r=this.moveDate(this.date,t*7),u=this.moveDate(this.viewDate,t*7)):i===1?this.showMeridian?(r=this.moveHour(this.date,t*6),u=this.moveHour(this.viewDate,t*6)):(r=this.moveHour(this.date,t*4),u=this.moveHour(this.viewDate,t*4)):i===0&&(r=this.moveMinute(this.date,t*4),u=this.moveMinute(this.viewDate,t*4));this.dateWithinRange(r)&&(this.date=r,this.viewDate=u,this.setValue(),this.update(),n.preventDefault(),f=!0);break;case 13:this.viewMode!==0?(o=this.viewMode,this.showMode(-1),this.fill(),o===this.viewMode&&this.autoclose&&this.hide()):(this.fill(),this.autoclose&&this.hide());n.preventDefault();break;case 9:this.hide()}f&&(this.isInput?e=this.element:this.component&&(e=this.element.find("input")),e&&e.change(),this.element.trigger({type:"changeDate",date:this.getDate()}))},showMode:function(n){if(n){var t=Math.max(0,Math.min(i.modes.length-1,this.viewMode+n));t>=this.minView&&t<=this.maxView&&(this.element.trigger({type:"changeMode",date:this.viewDate,oldViewMode:this.viewMode,newViewMode:t}),this.viewMode=t)}this.picker.find(">div").hide().filter(".datetimepicker-"+i.modes[this.viewMode].clsName).css("display","block");this.updateNavArrows()},reset:function(){this._setDate(null,"date")},convertViewModeText:function(n){switch(n){case 4:return"decade";case 3:return"year";case 2:return"month";case 1:return"day";case 0:return"hour"}}};e=n.fn.datetimepicker;n.fn.datetimepicker=function(i){var u=Array.apply(null,arguments),r;return u.shift(),this.each(function(){var o=n(this),e=o.data("datetimepicker"),s=typeof i=="object"&&i;return e||o.data("datetimepicker",e=new f(this,n.extend({},n.fn.datetimepicker.defaults,s))),typeof i=="string"&&typeof e[i]=="function"&&(r=e[i].apply(e,u),r!==t)?!1:void 0}),r!==t?r:this};n.fn.datetimepicker.defaults={};n.fn.datetimepicker.Constructor=f;r=n.fn.datetimepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridiem:["am","pm"],suffix:["st","nd","rd","th"],today:"Today",clear:"Clear"},zh:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u65e5"],months:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],monthsShort:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],meridiem:["am","pm"],suffix:["st","nd","rd","th"],today:"\u4eca\u65e5",clear:"\u53d6\u6d88"}};i={modes:[{clsName:"minutes",navFnc:"Hours",navStep:1},{clsName:"hours",navFnc:"Date",navStep:1},{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(n){return n%4==0&&n%100!=0||n%400==0},getDaysInMonth:function(n,t){return[31,i.isLeapYear(n)?29:28,31,30,31,30,31,31,30,31,30,31][t]},getDefaultFormat:function(n,t){if(n==="standard")return t==="input"?"yyyy-mm-dd hh:ii":"yyyy-mm-dd hh:ii:ss";if(n==="php")return t==="input"?"Y-m-d H:i":"Y-m-d H:i:s";throw new Error("Invalid format type.");},validParts:function(n){if(n==="standard")return/t|hh?|HH?|p|P|z|Z|ii?|ss?|dd?|DD?|mm?|MM?|yy(?:yy)?/g;if(n==="php")return/[dDjlNwzFmMnStyYaABgGhHis]/g;throw new Error("Invalid format type.");},nonpunctuation:/[^ -\/:-@\[-`{-~\t\n\rTZ]+/g,parseFormat:function(n,t){var i=n.replace(this.validParts(t),'\0').split('\0'),r=n.match(this.validParts(t));if(!i||!i.length||!r||r.length===0)throw new Error("Invalid date format.");return{separators:i,parts:r}},parseDate:function(t,i,e,o,s){var k,d,l,a,y,nt,h,p;if(t instanceof Date)return k=new Date(t.valueOf()-t.getTimezoneOffset()*6e4),k.setMilliseconds(0),k;if(/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(t)&&(i=this.parseFormat("yyyy-mm-dd",o)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}$/.test(t)&&(i=this.parseFormat("yyyy-mm-dd hh:ii",o)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}\:\d{1,2}[Z]{0,1}$/.test(t)&&(i=this.parseFormat("yyyy-mm-dd hh:ii:ss",o)),/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(t)){for(d=/([-+]\d+)([dmwy])/,l=t.match(/([-+]\d+)([dmwy])/g),t=new Date,h=0;h<l.length;h++){a=d.exec(l[h]);y=parseInt(a[1]);switch(a[2]){case"d":t.setUTCDate(t.getUTCDate()+y);break;case"m":t=f.prototype.moveMonth.call(f.prototype,t,y);break;case"w":t.setUTCDate(t.getUTCDate()+y*7);break;case"y":t=f.prototype.moveYear.call(f.prototype,t,y)}}return u(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),0)}var l=t&&t.toString().match(this.nonpunctuation)||[],t=new Date(0,0,0,0,0,0,0),w={},g=["hh","h","ii","i","ss","s","yyyy","yy","M","MM","m","mm","D","DD","d","dd","H","HH","p","P","z","Z"],c={hh:function(n,t){return n.setUTCHours(t)},h:function(n,t){return n.setUTCHours(t)},HH:function(n,t){return n.setUTCHours(t===12?0:t)},H:function(n,t){return n.setUTCHours(t===12?0:t)},ii:function(n,t){return n.setUTCMinutes(t)},i:function(n,t){return n.setUTCMinutes(t)},ss:function(n,t){return n.setUTCSeconds(t)},s:function(n,t){return n.setUTCSeconds(t)},yyyy:function(n,t){return n.setUTCFullYear(t)},yy:function(n,t){return n.setUTCFullYear(2e3+t)},m:function(n,t){for(t-=1;t<0;)t+=12;for(t%=12,n.setUTCMonth(t);n.getUTCMonth()!==t;){if(isNaN(n.getUTCMonth()))return n;n.setUTCDate(n.getUTCDate()-1)}return n},d:function(n,t){return n.setUTCDate(t)},p:function(n,t){return n.setUTCHours(t===1?n.getUTCHours()+12:n.getUTCHours())},z:function(){return s}},v,b,a;if(c.M=c.MM=c.mm=c.m,c.dd=c.d,c.P=c.p,c.Z=c.z,t=u(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()),l.length===i.parts.length){for(h=0,nt=i.parts.length;h<nt;h++){if(v=parseInt(l[h],10),a=i.parts[h],isNaN(v))switch(a){case"MM":b=n(r[e].months).filter(function(){var n=this.slice(0,l[h].length),t=l[h].slice(0,n.length);return n===t});v=n.inArray(b[0],r[e].months)+1;break;case"M":b=n(r[e].monthsShort).filter(function(){var n=this.slice(0,l[h].length),t=l[h].slice(0,n.length);return n.toLowerCase()===t.toLowerCase()});v=n.inArray(b[0],r[e].monthsShort)+1;break;case"p":case"P":v=n.inArray(l[h].toLowerCase(),r[e].meridiem);break;case"z":case"Z":s}w[a]=v}for(h=0;h<g.length;h++)p=g[h],p in w&&!isNaN(w[p])&&c[p](t,w[p])}return t},formatDate:function(t,u,f,e,o){var s,t,h,c,l;if(t===null)return"";if(e==="standard")s={t:t.getTime(),yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear(),m:t.getUTCMonth()+1,M:r[f].monthsShort[t.getUTCMonth()],MM:r[f].months[t.getUTCMonth()],d:t.getUTCDate(),D:r[f].daysShort[t.getUTCDay()],DD:r[f].days[t.getUTCDay()],p:r[f].meridiem.length===2?r[f].meridiem[t.getUTCHours()<12?0:1]:"",h:t.getUTCHours(),i:t.getUTCMinutes(),s:t.getUTCSeconds(),z:o},s.H=r[f].meridiem.length===2?s.h%12==0?12:s.h%12:s.h,s.HH=(s.H<10?"0":"")+s.H,s.P=s.p.toUpperCase(),s.Z=s.z,s.hh=(s.h<10?"0":"")+s.h,s.ii=(s.i<10?"0":"")+s.i,s.ss=(s.s<10?"0":"")+s.s,s.dd=(s.d<10?"0":"")+s.d,s.mm=(s.m<10?"0":"")+s.m;else if(e==="php")s={y:t.getUTCFullYear().toString().substring(2),Y:t.getUTCFullYear(),F:r[f].months[t.getUTCMonth()],M:r[f].monthsShort[t.getUTCMonth()],n:t.getUTCMonth()+1,t:i.getDaysInMonth(t.getUTCFullYear(),t.getUTCMonth()),j:t.getUTCDate(),l:r[f].days[t.getUTCDay()],D:r[f].daysShort[t.getUTCDay()],w:t.getUTCDay(),N:t.getUTCDay()===0?7:t.getUTCDay(),S:t.getUTCDate()%10<=r[f].suffix.length?r[f].suffix[t.getUTCDate()%10-1]:"",a:r[f].meridiem.length===2?r[f].meridiem[t.getUTCHours()<12?0:1]:"",g:t.getUTCHours()%12==0?12:t.getUTCHours()%12,G:t.getUTCHours(),i:t.getUTCMinutes(),s:t.getUTCSeconds()},s.m=(s.n<10?"0":"")+s.n,s.d=(s.j<10?"0":"")+s.j,s.A=s.a.toString().toUpperCase(),s.h=(s.g<10?"0":"")+s.g,s.H=(s.G<10?"0":"")+s.G,s.i=(s.i<10?"0":"")+s.i,s.s=(s.s<10?"0":"")+s.s;else throw new Error("Invalid format type.");for(t=[],h=n.extend([],u.separators),c=0,l=u.parts.length;c<l;c++)h.length&&t.push(h.shift()),t.push(s[u.parts[c]]);return h.length&&t.push(h.shift()),t.join("")},convertViewMode:function(n){switch(n){case 4:case"decade":n=4;break;case 3:case"year":n=3;break;case 2:case"month":n=2;break;case 1:case"day":n=1;break;case 0:case"hour":n=0}return n},headTemplate:'<thead><tr><th class="prev"><i class="{iconType} {leftArrow}"/><\/th><th colspan="5" class="switch"><\/th><th class="next"><i class="{iconType} {rightArrow}"/><\/th><\/tr><\/thead>',headTemplateV3:'<thead><tr><th class="prev"><span class="{iconType} {leftArrow}"><\/span> <\/th><th colspan="5" class="switch"><\/th><th class="next"><span class="{iconType} {rightArrow}"><\/span> <\/th><\/tr><\/thead>',contTemplate:'<tbody><tr><td colspan="7"><\/td><\/tr><\/tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"><\/th><\/tr><tr><th colspan="7" class="clear"><\/th><\/tr><\/tfoot>'};i.template='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+i.headTemplate+i.contTemplate+i.footTemplate+'<\/table><\/div><div class="datetimepicker-hours"><table class=" table-condensed">'+i.headTemplate+i.contTemplate+i.footTemplate+'<\/table><\/div><div class="datetimepicker-days"><table class=" table-condensed">'+i.headTemplate+"<tbody><\/tbody>"+i.footTemplate+'<\/table><\/div><div class="datetimepicker-months"><table class="table-condensed">'+i.headTemplate+i.contTemplate+i.footTemplate+'<\/table><\/div><div class="datetimepicker-years"><table class="table-condensed">'+i.headTemplate+i.contTemplate+i.footTemplate+"<\/table><\/div><\/div>";i.templateV3='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+i.headTemplateV3+i.contTemplate+i.footTemplate+'<\/table><\/div><div class="datetimepicker-hours"><table class=" table-condensed">'+i.headTemplateV3+i.contTemplate+i.footTemplate+'<\/table><\/div><div class="datetimepicker-days"><table class=" table-condensed">'+i.headTemplateV3+"<tbody><\/tbody>"+i.footTemplate+'<\/table><\/div><div class="datetimepicker-months"><table class="table-condensed">'+i.headTemplateV3+i.contTemplate+i.footTemplate+'<\/table><\/div><div class="datetimepicker-years"><table class="table-condensed">'+i.headTemplateV3+i.contTemplate+i.footTemplate+"<\/table><\/div><\/div>";n.fn.datetimepicker.DPGlobal=i;n.fn.datetimepicker.noConflict=function(){return n.fn.datetimepicker=e,this};n(document).on("focus.datetimepicker.data-api click.datetimepicker.data-api",'[data-provide="datetimepicker"]',function(t){var i=n(this);i.data("datetimepicker")||(t.preventDefault(),i.datetimepicker("show"))});n(function(){n('[data-provide="datetimepicker-inline"]').datetimepicker()})});